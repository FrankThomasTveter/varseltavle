{"ast":null,"code":"//console.log(\"Loading UtilsLib.js\");\nfunction Utils() {\n  this.version = \"1\";\n\n  this.invertArray = function (arr) {\n    var alen = arr.length;\n    var xlen = Math.floor(alen / 2);\n\n    for (var ii = 0; ii < xlen; ii++) {\n      var jj = alen - ii - 1;\n      var buff = arr[ii];\n      arr[ii] = arr[jj];\n      arr[jj] = buff;\n    }\n  };\n\n  this.invertedArray = function (arr) {\n    var ret = [];\n    var alen = arr.length;\n\n    for (var ii = alen - 1; ii >= 0; ii--) {\n      ret.push(arr[ii]);\n    }\n\n    return ret;\n  };\n\n  this.getMin = function (arr) {\n    var len = arr.length,\n        min = undefined;\n\n    while (len--) {\n      if (min === undefined || arr[len] < min) {\n        min = arr[len];\n      }\n    }\n\n    return min;\n  };\n\n  this.getMax = function (arr) {\n    var len = arr.length,\n        max = undefined;\n\n    while (len--) {\n      if (max === undefined || arr[len] > max) {\n        max = arr[len];\n      }\n    }\n\n    return max;\n  };\n\n  this.unique = function (arr) {\n    function onlyUnique(value, index, self) {\n      return self.indexOf(value) === index;\n    }\n\n    var unique = arr.filter(onlyUnique); // returns ['a', 1, 2, '1']\n\n    return unique;\n  };\n\n  this.init = function (par, setup) {\n    var url = this.getUrlVars();\n\n    if (par in url) {\n      //console.log(par,url);\n      var code = decodeURIComponent(url[par]); //console.log(\"Processing url:\",par,code);\n\n      try {\n        var newsetup = JSON.parse(code);\n\n        for (var ss in newsetup) {\n          if (newsetup[ss] !== undefined) {\n            setup[ss] = newsetup[ss];\n          }\n        }\n      } catch (e) {\n        setup[par] = url[par];\n      } //console.log(\"new setup:\",JSON.stringify(setup));\n\n    } else {//console.log(\"No '\"+par+\"' in URL.\",JSON.stringify(url));\n      }\n  };\n\n  this.clean = function (arr, max) {\n    if (max === undefined) {\n      max = 0;\n    }\n\n    ; //console.log(\"Arr:\",JSON.stringify(arr),max);\n\n    for (var ii = max; ii < arr.length; ii++) {\n      if (arr[ii] === null || arr[ii] === \"\") {\n        arr.splice(ii, 1);\n      }\n    }\n\n    return arr;\n  };\n\n  this.moveTo = function (arr, src, trg) {\n    var isrc = arr.indexOf(src);\n    var itrg = arr.indexOf(trg);\n\n    if (isrc !== -1 && itrg !== -1) {\n      var csrc = arr.splice(isrc, 1);\n      this.spliceArray(arr, itrg, 0, csrc);\n    }\n  };\n\n  this.cpArray = function (sarr, tarr) {\n    if (tarr !== undefined) {\n      var lent = tarr.length;\n\n      for (var ii = 0; ii < lent; ii++) {\n        var ind = sarr.indexOf(tarr[ii]);\n\n        if (ind === -1) {\n          sarr.push(tarr[ii]);\n        }\n      }\n    }\n\n    ;\n  };\n\n  this.ppArray = function (sarr, tarr) {\n    var lent = tarr.length;\n\n    for (var ii = lent - 1; ii >= 0; ii--) {\n      var ind = sarr.indexOf(tarr[ii]);\n\n      if (ind === -1) {\n        this.spliceArray(sarr, 0, 0, tarr[ii]); // first position (table)\n      }\n    }\n  };\n\n  this.apArray = function (tarr, sarr) {\n    this.ppArray(sarr, tarr);\n  };\n\n  this.addArray = function (sarr, tarr) {\n    this.cpArray(sarr, tarr);\n    tarr = [];\n  };\n\n  this.prepArray = function (sarr, tarr) {\n    this.ppArray(sarr, tarr);\n    tarr = [];\n  };\n\n  this.remArray = function (sarr, tarr) {\n    var lent = tarr.length;\n\n    for (var ii = 0; ii < lent; ii++) {\n      var ind = sarr.indexOf(tarr[ii]);\n\n      if (ind !== -1) {\n        sarr.splice(ind, 1);\n      }\n    }\n  };\n\n  this.moveToArray = function (sarr, tarr, key, tpos) {\n    var sid = sarr.indexOf(key);\n\n    if (sid !== -1) {\n      var src = sarr.splice(sid, 1); // remove from path\n\n      if (tpos === undefined || tpos < 0) {\n        this.spliceArray(tarr, tarr.length, 0, src);\n      } else {\n        this.spliceArray(tarr, tpos, 0, src);\n      }\n\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  this.keepHash = function (sarr, tarr) {\n    var ret = [];\n    var lent = tarr.length;\n    var keep = {};\n\n    for (var ii = 0; ii < lent; ii++) {\n      var hsh = tarr[ii];\n      var keys = Object.keys(hsh);\n      var lenk = keys.length;\n\n      for (var jj = 0; jj < lenk; jj++) {\n        var key = keys[jj];\n        keep[key] = true;\n      }\n    }\n\n    var lens = sarr.length;\n\n    for (var kk = 0; kk < lens; kk++) {\n      var arr = sarr[kk];\n\n      if (keep[arr] !== undefined && keep[arr]) {\n        ret.push(arr);\n      }\n\n      ;\n    }\n\n    return ret;\n  };\n\n  this.missing = function (arr, src) {\n    //console.log(\"Missing:\",src,JSON.stringify(arr));\n    if (arr === undefined) {\n      console.log(\"Invalid array specified in this.missing:\", JSON.stringify(src));\n      return false;\n    } else {\n      if (Array.isArray(src)) {\n        return arr.indexOf(src[0]) === -1;\n      } else {\n        return arr.indexOf(src) === -1;\n      }\n    }\n  };\n\n  this.restore = function (arr, obj) {\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        arr[key] = this.cp(obj[key]);\n      }\n    }\n\n    ;\n  };\n\n  this.cp = function (obj) {\n    if (obj === null || typeof obj !== 'object' || 'isActiveClone' in obj) return obj;\n    var temp;\n\n    if (obj instanceof Date) {\n      temp = new obj.constructor(); //or new Date(obj);\n    } else {\n      temp = obj.constructor();\n    }\n\n    ;\n\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        obj['isActiveClone'] = null;\n        temp[key] = this.cp(obj[key]);\n        delete obj['isActiveClone'];\n      }\n    }\n\n    return temp;\n  }.bind(this);\n\n  this.getStatusString = function (state) {\n    return this.numberWithCommas(state.Database.cnt) + \" in database, \" + this.numberWithCommas(state.Matrix.cnt) + \" in table\" + \" [\" + state.Database.loaded + \"]\";\n  };\n\n  this.getLoadString = function (state, loaded) {\n    return state.Utils.numberWithCommas(Math.round(loaded / 1000)) + \" Kb\" + \" [\" + state.Database.loaded + \"]\";\n  };\n\n  this.toString = function (setup) {\n    var s = \"->\";\n\n    for (var kk in setup) {\n      s = s + \"|\" + kk + \":\" + setup[kk];\n    }\n\n    ;\n    return s;\n  };\n\n  this.basename = function (path) {\n    var ic = path.indexOf(\":\");\n    var is = path.indexOf(\"/\");\n    var ii = Math.max(ic, is);\n    console.log(\"Basename:\", path, \"->\", path.substring(ii + 1));\n\n    if (ii >= 0) {\n      return path.substring(ii + 1);\n    } else {\n      return path;\n    }\n\n    ;\n  };\n\n  this.numberWithCommas = function (x) {\n    return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n  };\n\n  this.cntDocs = function (elements, key, val) {\n    var cnt = 0;\n    var elen = elements.length;\n\n    for (var ee = 0; ee < elen; ee++) {\n      // loop over elements\n      var el = elements[ee];\n      var docs = el.docs;\n      var dlen = docs.length;\n\n      if (val === \"\") {\n        cnt = cnt + dlen;\n      } else {\n        for (var jj = 0; jj < dlen; jj++) {\n          // loop over segments in each element\n          var d = docs[jj];\n          var thr = d._thr; //console.log(\"cntDocs:\",key,d[key],val,dlen);\n\n          if (d[key] === val) {\n            if (thr.val !== undefined) {\n              cnt = cnt + 1;\n            }\n\n            ;\n          }\n        }\n      }\n    } //console.log(\"cntDocs:\",JSON.stringify(elements),key,cnt,elen);\n\n\n    return cnt;\n  };\n\n  this.pushUrl = function (state) {\n    var path = window.location.pathname; //console.log(\"Path:\",path);\n\n    var page = path.split(\"/\").pop();\n    page.split('#').shift(); //console.log( page );\n\n    var url = page + \"?setup=\" + state.Default.setup + \"&\"; //console.log(\"Actual Keys:\",JSON.stringify(state.Path.keys));\n\n    var urlDatabase = undefined;\n\n    if (state.Default.hasChanged(state, [\"Database\", \"data\"]) && state.Database.data !== undefined) {\n      if (urlDatabase === undefined) {\n        urlDatabase = {};\n      }\n\n      urlDatabase.data = this.cp(state.Database.data);\n    }\n\n    ;\n    var urlColors = undefined;\n\n    if (state.Default.hasChanged(state, [\"Colors\", \"colors\"])) {\n      if (urlColors === undefined) {\n        urlColors = {};\n      }\n\n      urlColors.colors = this.cp(state.Colors.colors);\n    }\n\n    ;\n    var urlPath = undefined;\n\n    if (state.Default.hasChanged(state, [\"Path\", \"keys\"])) {\n      if (urlPath === undefined) {\n        urlPath = {};\n      }\n\n      urlPath.keys = this.cp(state.Path.keys);\n    }\n\n    ;\n\n    if (state.Default.hasChanged(state, [\"Path\", \"select\"])) {\n      if (urlPath === undefined) {\n        urlPath = {};\n      }\n\n      urlPath.select = this.cp(state.Path.select);\n    }\n\n    ;\n\n    if (state.Default.hasChanged(state, [\"Path\", \"tkeys\"])) {\n      if (urlPath === undefined) {\n        urlPath = {};\n      }\n\n      urlPath.tkeys = state.Path.tkeys;\n    }\n\n    ;\n\n    if (state.Default.hasChanged(state, [\"Path\", \"home\"])) {\n      if (urlPath === undefined) {\n        urlPath = {};\n      }\n\n      urlPath.home = this.cp(state.Path.home);\n    }\n\n    ;\n\n    if (state.Default.hasChanged(state, [\"Path\", \"tooltip\"])) {\n      if (urlPath === undefined) {\n        urlPath = {};\n      }\n\n      urlPath.tooltip = this.cp(state.Path.tooltip);\n    }\n\n    ;\n\n    if (state.Default.hasChanged(state, [\"Path\", \"list\"])) {\n      if (urlPath === undefined) {\n        urlPath = {};\n      }\n\n      urlPath.list = this.cp(state.Path.list);\n    }\n\n    ;\n\n    if (state.Default.hasChanged(state, [\"Path\", \"order\"])) {\n      if (urlPath === undefined) {\n        urlPath = {};\n      }\n\n      urlPath.order = this.cp(state.Path.order);\n    }\n\n    ;\n\n    if (state.Default.hasChanged(state, [\"Path\", \"film\"])) {\n      if (urlPath === undefined) {\n        urlPath = {};\n      }\n\n      urlPath.film = this.cp(state.Path.film); //console.log(\"Film:\",JSON.stringify(urlPath.film));\n    }\n\n    ; //console.log(\"URL Keys:\",JSON.stringify(urlPath.keys));\n\n    var urlLayout = undefined;\n\n    if (state.Default.hasChanged(state, [\"Layout\", \"priority\"])) {\n      if (urlLayout === undefined) {\n        urlLayout = {};\n      }\n\n      urlLayout.priority = state.Layout.getPriority(state);\n    }\n\n    ;\n\n    if (state.Default.hasChanged(state, [\"Layout\", \"state\"])) {\n      if (urlLayout === undefined) {\n        urlLayout = {};\n      }\n\n      urlLayout.state = this.cp(state.Layout.state);\n    }\n\n    ;\n    var urlSettings = undefined;\n\n    if (state.Default.hasChanged(state, [\"Settings\", \"visible\"])) {\n      if (urlSettings === undefined) {\n        urlSettings = {};\n      }\n\n      urlSettings.visible = this.cp(state.Settings.visible);\n    }\n\n    ;\n\n    if (urlDatabase !== undefined) {\n      url = url + \"Database=\" + encodeURI(JSON.stringify(urlDatabase) + \"&\");\n    }\n\n    ;\n\n    if (urlPath !== undefined) {\n      url = url + \"Path=\" + encodeURI(JSON.stringify(urlPath) + \"&\");\n    }\n\n    ;\n\n    if (urlColors !== undefined) {\n      url = url + \"Colors=\" + encodeURI(JSON.stringify(urlColors) + \"&\");\n    }\n\n    ;\n\n    if (urlLayout !== undefined) {\n      url = url + \"Layout=\" + encodeURI(JSON.stringify(urlLayout) + \"&\");\n    }\n\n    ;\n\n    if (urlSettings !== undefined) {\n      url = url + \"Settings=\" + encodeURI(JSON.stringify(urlSettings) + \"&\");\n    }\n\n    ; //console.log(\"Setting URL to (\",url.length,\"):\",url);\n\n    window.history.replaceState(\"\", \"js\", url);\n  }.bind(this);\n\n  this.getUrlVars = function (state) {\n    var vars = {};\n    window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (m, key, value) {\n      //console.log(\"URL item:\",key,\" \",value)\n      vars[key] = value;\n    });\n    return vars;\n  };\n\n  this.uniq = function (state, a) {\n    var seen = {};\n    return a.filter(function (item) {\n      return seen.hasOwnProperty(item) ? false : seen[item] = true;\n    });\n  };\n\n  this.pushKey = function (arr, key, pos) {\n    if (Array.isArray(key)) {\n      var len = key.length;\n\n      for (var ii = 0; ii < len; ii++) {\n        if (arr.indexOf(key[ii]) === -1) {\n          if (pos === undefined) {\n            arr.push(key[ii]);\n          } else {\n            arr.splice(pos, 0, key[ii]);\n          }\n\n          ;\n        }\n      }\n    } else {\n      if (arr.indexOf(key) === -1) {\n        if (pos === undefined) {\n          arr.push(key);\n        } else {\n          arr.splice(pos, 0, key);\n        }\n\n        ;\n      }\n    }\n\n    this.clean(arr);\n  };\n\n  this.spliceArray = function (arr, index, n, child) {\n    if (Array.isArray(child)) {\n      var len = child.length;\n\n      for (var ii = 0; ii < len; ii++) {\n        arr.splice(index, n, child[ii]);\n        n = 0;\n        index = index + 1;\n      }\n    } else {\n      arr.splice(index, n, child);\n    }\n  };\n\n  this.ascendingArr = function (a, b) {\n    if (a[0] === \"\") {\n      return 1;\n    } else if (b[0] === \"\") {\n      return -1;\n    } else if (a[0] < b[0]) {\n      return -1;\n    } else if (a[0] > b[0]) {\n      return 1;\n    } else {\n      return 0;\n    }\n  };\n\n  this.descendingArr = function (a, b) {\n    if (a[0] === \"\") {\n      return -1;\n    } else if (b[0] === \"\") {\n      return 1;\n    } else if (a[0] < b[0]) {\n      return 1;\n    } else if (a[0] > b[0]) {\n      return -1;\n    } else {\n      return 0;\n    }\n  };\n\n  this.ascending = function (a, b) {\n    if (a === \"\") {\n      return 1;\n    } else if (b === \"\") {\n      return -1;\n    } else if (a < b) {\n      return -1;\n    } else if (a > b) {\n      return 1;\n    } else {\n      return 0;\n    }\n  };\n\n  this.descending = function (a, b) {\n    if (a === \"\") {\n      return -1;\n    } else if (b === \"\") {\n      return 1;\n    } else if (a < b) {\n      return 1;\n    } else if (a > b) {\n      return -1;\n    } else {\n      return 0;\n    }\n  };\n\n  this.ascendingN = function (a, b) {\n    if (a === null) {\n      return 1;\n    } else if (b === null) {\n      return -1;\n    } else if (Number(a) < Number(b)) {\n      return -1;\n    } else if (Number(a) > Number(b)) {\n      return 1;\n    } else {\n      return 0;\n    }\n  };\n\n  this.descendingN = function (a, b) {\n    if (a === null) {\n      return -1;\n    } else if (b === null) {\n      return 1;\n    } else if (Number(a) < Number(b)) {\n      return 1;\n    } else if (Number(a) > Number(b)) {\n      return -1;\n    } else {\n      return 0;\n    }\n  };\n\n  this.getItem = function (state, s, src) {\n    var ss = src;\n    var ll = s.length;\n\n    for (var ii = 0; ii < ll; ii++) {\n      if (ss === undefined) {\n        return ss;\n      }\n\n      ;\n      ss = ss[s[ii]];\n    }\n\n    return ss;\n  };\n\n  this.setForce = function (state, t, trg, ss) {\n    var ll = t.length;\n\n    if (trg === undefined) {\n      return;\n    } else if (ll === 0) {\n      trg = ss;\n      return trg;\n    } else {\n      var tt = trg;\n\n      for (var ii = 0; ii < ll - 1; ii++) {\n        if (tt[t[ii]] === undefined) {\n          tt[t[ii]] = {};\n        }\n\n        ;\n        tt = tt[t[ii]];\n      }\n\n      tt[t[ll - 1]] = state.Utils.cp(ss); //console.log(\"Force copied:\",JSON.stringify(t),JSON.stringify(tt[t[ll-1]]));\n\n      return tt[t[ll - 1]];\n    }\n  };\n\n  this.setFill = function (state, t, trg, ss) {\n    var ll = t.length;\n\n    if (trg === undefined) {\n      return;\n    } else if (ll === 0) {\n      trg = ss;\n      return trg;\n    } else {\n      //console.log(\"Trg:\",JSON.stringify(t),\":\",JSON.stringify(trg),\":\",JSON.stringify(ss));\n      var tt = trg;\n\n      for (var ii = 0; ii < ll - 1; ii++) {\n        if (tt[t[ii]] === undefined) {\n          tt[t[ii]] = {};\n        }\n\n        ;\n        tt = tt[t[ii]];\n      }\n\n      if (this.isEmpty(state, tt[t[ll - 1]])) {\n        tt[t[ll - 1]] = state.Utils.cp(ss);\n      }\n\n      return tt[t[ll - 1]];\n    }\n  };\n\n  this.cpForce = function (state, t, s, trg, src) {\n    var ss = this.getItem(state, s, src);\n    this.setForce(state, t, trg, ss);\n  };\n\n  this.cpFill = function (state, t, s, trg, src) {\n    var ss = this.getItem(state, s, src); //console.log(\"Filling:\",s,'->',t,! this.isEmpty(state,ss),JSON.stringify());\n    //if (! this.isEmpty(state,ss) ) {\n\n    if (ss !== undefined) {\n      this.setFill(state, t, trg, ss);\n    }\n  }; // map src onto target always\n\n\n  this.copyForce = function (state, src, trg, map) {\n    if (src === undefined) {\n      console.log(\"ERROR: MapForce with no src.\");\n    } else if (trg === undefined) {\n      console.log(\"ERROR: MapForce with no trg.\");\n    } else if (map === undefined) {\n      console.log(\"ERROR: MapForce with no map.\");\n    } else {\n      var len = map.length;\n\n      for (var ii = 0; ii < len; ii++) {\n        var t = map[ii][0];\n        var s = map[ii][1];\n        this.cpForce(state, t, s, trg, src);\n      }\n    }\n  }; // map src onto target if target is empty and src is not\n\n\n  this.copyFill = function (state, src, trg, map) {\n    if (src === undefined) {\n      console.log(\"ERROR: MapFill with no src.\");\n    } else if (trg === undefined) {\n      console.log(\"ERROR: MapFill with no trg.\");\n    } else if (map === undefined) {\n      console.log(\"ERROR: MapFill with no map.\");\n    } else {\n      var len = map.length;\n\n      for (var ii = 0; ii < len; ii++) {\n        var t = map[ii][0];\n        var s = map[ii][1];\n        this.cpFill(state, t, s, trg, src);\n      }\n    }\n  };\n\n  this.invert = function (map) {\n    var ret = [];\n    var len = map.length;\n\n    for (var ii = 0; ii < len; ii++) {\n      var t = map[ii][0];\n      var s = map[ii][1];\n      ret.push([s, t]);\n    }\n\n    return ret;\n  };\n\n  this.isEmpty = function (state, obj) {\n    // check if obj has any string/number children\n    var ret = true;\n    var k;\n\n    if (obj === undefined) {\n      ret = true;\n    } else {\n      var typ = typeof obj;\n\n      if (typ === \"Array\") {\n        // check array children\n        for (k in obj) {\n          if (!state.Utils.isEmpty(state, obj[k])) {\n            ret = false; //console.log(\"    =\",typ,ret,k,JSON.stringify(obj[k]));\n\n            break;\n          }\n        }\n      } else if (typ === \"object\") {\n        // check hash children\n        for (k in obj) {\n          if (obj.hasOwnProperty(k)) {\n            if (!state.Utils.isEmpty(state, obj[k])) {\n              ret = false; //console.log(\"    =\",typ,ret,k,JSON.stringify(obj[k]));\n\n              break;\n            }\n          }\n        }\n      } else {\n        ret = false;\n      }\n    } //console.log(\"Type:\",ret,JSON.stringify(obj));\n\n\n    return ret;\n  };\n\n  this.prettyJson = function (obj) {\n    var f = function f(k, v) {\n      if (Array.isArray(v)) {\n        return JSON.stringify(v);\n      }\n\n      ;\n      return v;\n    };\n\n    var json = JSON.stringify(obj, f, \"  \");\n    json = json.replace(/\"\\[/g, '[');\n    json = json.replace(/\\]\"/g, ']');\n    json = json.replace(/\\\\\"/g, '\"'); //console.log(\"Replaced:\",json);\n\n    return json;\n  };\n\n  this.save = function (data, filename, type) {\n    console.log(\"Saving file:\", filename);\n    var file = new Blob([data], {\n      type: type\n    });\n    if (window.navigator.msSaveOrOpenBlob) // IE10+\n      window.navigator.msSaveOrOpenBlob(file, filename);else {\n      // Others\n      var a = document.createElement(\"a\"),\n          url = URL.createObjectURL(file);\n      a.href = url;\n      a.download = filename;\n      document.body.appendChild(a);\n      a.click();\n      setTimeout(function () {\n        document.body.removeChild(a);\n        window.URL.revokeObjectURL(url);\n      }, 0);\n    }\n    ;\n  };\n\n  this.size = function (state) {\n    var obj = state.React.matrix;\n    var size = 0,\n        key;\n\n    for (key in obj) {\n      if (obj.hasOwnProperty(key)) size++;\n    }\n\n    console.log(\"Matrix size:\", size);\n    return size;\n  };\n}\n\n;\nexport default Utils;","map":{"version":3,"sources":["/home/franktt/react/varseltavle_new/src/lib/UtilsLib.js"],"names":["Utils","version","invertArray","arr","alen","length","xlen","Math","floor","ii","jj","buff","invertedArray","ret","push","getMin","len","min","undefined","getMax","max","unique","onlyUnique","value","index","self","indexOf","filter","init","par","setup","url","getUrlVars","code","decodeURIComponent","newsetup","JSON","parse","ss","e","clean","splice","moveTo","src","trg","isrc","itrg","csrc","spliceArray","cpArray","sarr","tarr","lent","ind","ppArray","apArray","addArray","prepArray","remArray","moveToArray","key","tpos","sid","keepHash","keep","hsh","keys","Object","lenk","lens","kk","missing","console","log","stringify","Array","isArray","restore","obj","prototype","hasOwnProperty","call","cp","temp","Date","constructor","bind","getStatusString","state","numberWithCommas","Database","cnt","Matrix","loaded","getLoadString","round","toString","s","basename","path","ic","is","substring","x","replace","cntDocs","elements","val","elen","ee","el","docs","dlen","d","thr","_thr","pushUrl","window","location","pathname","page","split","pop","shift","Default","urlDatabase","hasChanged","data","urlColors","colors","Colors","urlPath","Path","select","tkeys","home","tooltip","list","order","film","urlLayout","priority","Layout","getPriority","urlSettings","visible","Settings","encodeURI","history","replaceState","vars","href","m","uniq","a","seen","item","pushKey","pos","n","child","ascendingArr","b","descendingArr","ascending","descending","ascendingN","Number","descendingN","getItem","ll","setForce","t","tt","setFill","isEmpty","cpForce","cpFill","copyForce","map","copyFill","invert","k","typ","prettyJson","f","v","json","save","filename","type","file","Blob","navigator","msSaveOrOpenBlob","document","createElement","URL","createObjectURL","download","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","size","React","matrix"],"mappings":"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","sourcesContent":["//console.log(\"Loading UtilsLib.js\");\n\t\t    \nfunction Utils() {\n    this.version=\"1\";\n    this.invertArray=function(arr) {\n\tvar alen=arr.length;\n\tvar xlen=Math.floor(alen/2);\n\tfor (var ii=0; ii<xlen;ii++) {\n\t    var jj=alen-ii-1\n\t    var buff=arr[ii];\n\t    arr[ii]=arr[jj];\n\t    arr[jj]=buff;\n\t}\n    };\n    this.invertedArray=function(arr) {\n\tvar ret=[];\n\tvar alen=arr.length;\n\tfor (var ii=alen-1; ii>=0;ii--) {\n\t    ret.push(arr[ii]);\n\t}\n\treturn ret;\n    };\n    this.getMin=function(arr) {\n\tvar len = arr.length, min = undefined;\n\twhile (len--) {\n\t    if (min === undefined || arr[len] < min) {\n\t\tmin = arr[len];\n\t    }\n\t}\n\treturn min;\n    };\n    this.getMax=function(arr) {\n\tvar len = arr.length, max = undefined;\n\twhile (len--) {\n\t    if (max === undefined || arr[len] > max) {\n\t\tmax = arr[len];\n\t    }\n\t}\n\treturn max;\n    };\n    this.unique=function(arr) {\n\tfunction onlyUnique(value, index, self) { \n\t    return self.indexOf(value) === index;\n\t}\n\tvar unique = arr.filter( onlyUnique ); // returns ['a', 1, 2, '1']\n\treturn unique;\n    };\n    this.init=function(par,setup){\n\tvar url=this.getUrlVars();\n\tif (par in url) {\n\t    //console.log(par,url);\n\t    var code=decodeURIComponent(url[par]);\n\t    //console.log(\"Processing url:\",par,code);\n\t    try {\n\t\tvar newsetup=JSON.parse(code);\n\t\tfor (var ss in newsetup) {\n\t\t    if (newsetup[ss] !== undefined) {\n\t\t\tsetup[ss]=newsetup[ss];\n\t\t    }\n\t\t}\n\t    } catch (e) {\n\t\tsetup[par]=url[par];\n\t    }\n\t    //console.log(\"new setup:\",JSON.stringify(setup));\n\t} else {\n\t    //console.log(\"No '\"+par+\"' in URL.\",JSON.stringify(url));\n\t}\n\n    };\n    this.clean=function(arr,max) {\n\tif (max === undefined) {max=0;};\n\t//console.log(\"Arr:\",JSON.stringify(arr),max);\n\tfor (var ii=max;ii<arr.length;ii++) {\n\t    if (arr[ii]===null || arr[ii]===\"\") {\n\t\tarr.splice(ii, 1);\n\t    }\n\t}\n\treturn arr;\n    }\n    this.moveTo=function(arr,src,trg) {\n\tvar isrc=arr.indexOf(src);\n\tvar itrg=arr.indexOf(trg);\n\tif (isrc !== -1 && itrg !== -1) {\n\t    var csrc=arr.splice(isrc, 1);\n\t    this.spliceArray(arr,itrg,0,csrc);\n\t}\n    };\n    this.cpArray=function(sarr,tarr) {\n\tif (tarr !== undefined) {\n\t    var lent=tarr.length;\n\t    for (var ii=0;ii<lent;ii++) {\n\t\tvar ind=sarr.indexOf(tarr[ii]);\n\t\tif (ind===-1) {\n\t\t    sarr.push(tarr[ii]);\n\t\t}\n\t    }\n\t};\n    };\n    this.ppArray=function(sarr,tarr) {\n\tvar lent=tarr.length;\n\tfor (var ii=lent-1;ii>=0;ii--) {\n\t    var ind=sarr.indexOf(tarr[ii]);\n\t    if (ind===-1) {\n\t\tthis.spliceArray(sarr,0,0,tarr[ii]); // first position (table)\n\t    }\n\t}\n    };\n    this.apArray=function(tarr,sarr) {\n\tthis.ppArray(sarr,tarr);\n    };\n    this.addArray=function(sarr,tarr) {\n\tthis.cpArray(sarr,tarr);\n\ttarr=[];\n    };\n    this.prepArray=function(sarr,tarr) {\n\tthis.ppArray(sarr,tarr);\n\ttarr=[];\n    };\n    this.remArray=function(sarr,tarr) {\n\tvar lent=tarr.length;\n\tfor (var ii=0;ii<lent;ii++) {\n\t    var ind=sarr.indexOf(tarr[ii]);\n\t    if (ind!==-1) {\n\t\tsarr.splice(ind,1);\n\t    }\n\t}\n    };\n    this.moveToArray=function(sarr,tarr,key,tpos) {\n\tvar sid=sarr.indexOf(key);\n\tif (sid !== -1) {\n\t    var src=sarr.splice(sid, 1);    // remove from path\n\t    if (tpos  === undefined || tpos  < 0) {\n\t\tthis.spliceArray(tarr,tarr.length, 0, src);\n\t    } else {\n\t\tthis.spliceArray(tarr,tpos, 0, src);\n\t    }\n\t    return true;\n\t}else {\n\t    return false;\n\t}\n    };\n    this.keepHash=function(sarr,tarr) {\n\tvar ret=[];\n\tvar lent=tarr.length;\n\tvar keep={};\n\tfor (var ii=0;ii<lent;ii++) {\n\t    var hsh=tarr[ii];\n\t    var keys=Object.keys(hsh);\n\t    var lenk=keys.length;\n\t    for (var jj=0;jj<lenk;jj++) {\n\t\tvar key=keys[jj];\n\t\tkeep[key]=true;\n\t    }\n\t}\n\tvar lens=sarr.length;\n\tfor (var kk=0;kk<lens;kk++) {\n\t    var arr=sarr[kk];\n\t    if (keep[arr] !== undefined && keep[arr]) {\n\t\tret.push(arr);\n\t    };\n\t}\n\treturn ret;\n    }\n    this.missing=function(arr,src){\n\t//console.log(\"Missing:\",src,JSON.stringify(arr));\n\tif (arr === undefined) {\n\t    console.log(\"Invalid array specified in this.missing:\",JSON.stringify(src));\n\t    return false;\n\t} else {\n\t    if (Array.isArray(src)) {\n\t\treturn (arr.indexOf(src[0])  === -1);\n\t    } else {\n\t\treturn (arr.indexOf(src)  === -1);\n\t    }\n\t}\n    };\n    this.restore=function(arr,obj) {\n\tfor (var key in obj) {\n            if (Object.prototype.hasOwnProperty.call(obj, key)) {\n\t\tarr[key]=this.cp(obj[key]);\n\t    }\n\t};\n    };\n    this.cp=function(obj) {\n\tif (obj === null || typeof (obj) !== 'object' || 'isActiveClone' in obj)\n            return obj;\n\tvar temp;\n\tif (obj instanceof Date) {\n\t    temp = new obj.constructor(); //or new Date(obj);\n\t} else {\n\t    temp = obj.constructor();\n\t};\n\tfor (var key in obj) {\n            if (Object.prototype.hasOwnProperty.call(obj, key)) {\n\t\tobj['isActiveClone'] = null;\n\t\ttemp[key] = this.cp(obj[key]);\n\t\tdelete obj['isActiveClone'];\n            }\n\t}\n\treturn temp;\n    }.bind(this);\n    this.getStatusString=function(state) {\n\treturn this.numberWithCommas(state.Database.cnt)+ \" in database, \"\n\t    + this.numberWithCommas(state.Matrix.cnt)+\" in table\"\n\t    + \" [\"+state.Database.loaded + \"]\";\n    };\n    this.getLoadString=function(state,loaded) {\n\treturn state.Utils.numberWithCommas(Math.round(loaded/1000))+\" Kb\"\n\t    + \" [\"+state.Database.loaded + \"]\";\n    };\n    this.toString=function(setup) {\n\tvar s=\"->\";\n\tfor (var kk in setup) {\n\t    s = s + \"|\"+ kk + \":\" + setup[kk];\n\t};\n\treturn s;\n    };\n    this.basename=function(path) {\n\tvar ic=path.indexOf(\":\");\n\tvar is=path.indexOf(\"/\");\n\tvar ii=Math.max(ic,is);\n\tconsole.log(\"Basename:\",path,\"->\",path.substring(ii+1));\n\tif (ii >= 0) {\n\t    return path.substring(ii+1);\n\t} else {\n\t    return path;\n\t};\n    };\n    this.numberWithCommas=function(x) {\n\treturn x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n    };\n    this.cntDocs=function(elements,key,val) {\n\tvar cnt=0;\n\tvar elen=elements.length;\n\tfor (var ee=0;ee<elen;ee++) {   // loop over elements\n\t    var el=elements[ee];\n\t    var docs=el.docs;\n\t    var dlen=docs.length;\n\t    if (val===\"\") {\n\t\tcnt=cnt+dlen;\n\t    } else {\n\t\tfor (var jj=0;jj<dlen;jj++) {   // loop over segments in each element\n\t\t    var d=docs[jj];\n\t\t    var thr=d._thr;\n\t\t    //console.log(\"cntDocs:\",key,d[key],val,dlen);\n\t\t    if (d[key]===val) {\n\t\t\tif (thr.val !== undefined) {\n\t\t\t    cnt=cnt+1;\n\t\t\t};\n\t\t    }\n\t\t}\n\t    }\n\t}\n\t//console.log(\"cntDocs:\",JSON.stringify(elements),key,cnt,elen);\n\treturn cnt;\n    };\n    this.pushUrl=function(state) {\n\tvar path = window.location.pathname;\n\t//console.log(\"Path:\",path);\n\tvar page = path.split(\"/\").pop();\n\tpage.split('#').shift();\n\t//console.log( page );\n\tvar url=page+\"?setup=\"+state.Default.setup+\"&\";\n\t//console.log(\"Actual Keys:\",JSON.stringify(state.Path.keys));\n\tvar urlDatabase=undefined;\n\tif (state.Default.hasChanged(state,[\"Database\",\"data\"]) && state.Database.data!==undefined) {\n\t    if (urlDatabase ===undefined) {urlDatabase={};}\n\t    urlDatabase.data=this.cp(state.Database.data);\n\t};\n\tvar urlColors=undefined;\n\tif (state.Default.hasChanged(state,[\"Colors\",\"colors\"])) {\n\t    if (urlColors ===undefined) {urlColors={};}\n\t    urlColors.colors=this.cp(state.Colors.colors);\n\t};\n\tvar urlPath=undefined;\n\tif (state.Default.hasChanged(state,[\"Path\",\"keys\"])) {\n\t    if (urlPath ===undefined) {urlPath={};}\n\t    urlPath.keys=this.cp(state.Path.keys);\n\t};\n\tif (state.Default.hasChanged(state,[\"Path\",\"select\"])) {\n\t    if (urlPath ===undefined) {urlPath={};}\n\t    urlPath.select=this.cp(state.Path.select);\n\t};\n\tif (state.Default.hasChanged(state,[\"Path\",\"tkeys\"])) {\n\t    if (urlPath ===undefined) {urlPath={};}\n\t    urlPath.tkeys=state.Path.tkeys;\n\t};\n\tif (state.Default.hasChanged(state,[\"Path\",\"home\"])) {\n\t    if (urlPath ===undefined) {urlPath={};}\n\t    urlPath.home=this.cp(state.Path.home);\n\t};\n\tif (state.Default.hasChanged(state,[\"Path\",\"tooltip\"])) {\n\t    if (urlPath ===undefined) {urlPath={};}\n\t    urlPath.tooltip=this.cp(state.Path.tooltip);\n\t};\n\tif (state.Default.hasChanged(state,[\"Path\",\"list\"])) {\n\t    if (urlPath ===undefined) {urlPath={};}\n\t    urlPath.list=this.cp(state.Path.list);\n\t};\n\tif (state.Default.hasChanged(state,[\"Path\",\"order\"])) {\n\t    if (urlPath ===undefined) {urlPath={};}\n\t    urlPath.order=this.cp(state.Path.order);\n\t};\n\tif (state.Default.hasChanged(state,[\"Path\",\"film\"])) {\n\t    if (urlPath ===undefined) {urlPath={};}\n\t    urlPath.film=this.cp(state.Path.film);\n\t    //console.log(\"Film:\",JSON.stringify(urlPath.film));\n\t};\n\t//console.log(\"URL Keys:\",JSON.stringify(urlPath.keys));\n\tvar urlLayout=undefined;\n\tif (state.Default.hasChanged(state,[\"Layout\",\"priority\"])) {\n\t    if (urlLayout ===undefined) {urlLayout={};}\n\t    urlLayout.priority=state.Layout.getPriority(state);\n\t};\n\tif (state.Default.hasChanged(state,[\"Layout\",\"state\"])) {\n\t    if (urlLayout ===undefined) {urlLayout={};}\n\t    urlLayout.state=this.cp(state.Layout.state);\n\t};\n\tvar urlSettings=undefined;\n\tif (state.Default.hasChanged(state,[\"Settings\",\"visible\"])) {\n\t    if (urlSettings ===undefined) {urlSettings={};}\n\t    urlSettings.visible=this.cp(state.Settings.visible);\n\t};\n\tif (urlDatabase !== undefined) {\n\t    url=url + \"Database=\" + encodeURI(JSON.stringify(urlDatabase)+\"&\");\n\t};\n\tif (urlPath !== undefined) {\n\t    url=url + \"Path=\" + encodeURI(JSON.stringify(urlPath)+\"&\");\n\t};\n\tif (urlColors !== undefined) {\n\t    url=url + \"Colors=\" + encodeURI(JSON.stringify(urlColors)+\"&\");\n\t};\n\tif (urlLayout !== undefined) {\n\t    url=url + \"Layout=\" + encodeURI(JSON.stringify(urlLayout)+\"&\");\n\t};\n\tif (urlSettings !== undefined) {\n\t    url=url + \"Settings=\" + encodeURI(JSON.stringify(urlSettings)+\"&\");\n\t};\n\t//console.log(\"Setting URL to (\",url.length,\"):\",url);\n\twindow.history.replaceState(\"\", \"js\", url);\n    }.bind(this);\n    this.getUrlVars=function(state) {\n\tvar vars = {};\n\twindow.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,    \n\t\t\t\t     function(m,key,value) {\n\t\t\t\t\t //console.log(\"URL item:\",key,\" \",value)\n\t\t\t\t\t vars[key] = value;\n\t\t\t\t     });\n\treturn vars;\n    };\n    this.uniq=function(state,a) {\n\tvar seen = {};\n\treturn a.filter(function(item) {\n\t    return seen.hasOwnProperty(item) ? false : (seen[item] = true);\n\t});\n    };\n    this.pushKey=function(arr,key,pos) {\n\tif (Array.isArray(key)) {\n\t    var len=key.length;\n\t    for (var ii=0; ii<len; ii++) {\n\t\tif (arr.indexOf(key[ii])===-1) {\n\t\t    if (pos === undefined) {\n\t\t\tarr.push(key[ii]);\n\t\t    } else {\n\t\t\tarr.splice(pos,0,key[ii])\n\t\t    };\n\t\t    \n\t\t}\n\t    }\n\t} else {\n\t    if (arr.indexOf(key)===-1) {\n\t\tif (pos === undefined) {\n\t\t    arr.push(key);\n\t\t} else {\n\t\t    arr.splice(pos,0,key)\n\t\t};\n\t    }\n\t}\n\tthis.clean(arr);\n    };\n    this.spliceArray=function(arr,index,n,child){\n\tif (Array.isArray(child)) {\n\t    var len=child.length;\n\t    for (var ii=0; ii<len; ii++) {\n\t\tarr.splice(index,n,child[ii])\n\t\tn=0\n\t\tindex=index+1\n\t    }\n\t} else {\n\t    arr.splice(index,n,child)\n\t}\n    }\n    this.ascendingArr=function(a,b) {\n\tif (a[0]  === \"\") { \n\t    return 1;\n\t} else if (b[0]  === \"\") {\n\t    return -1;\n\t} else if (a[0]<b[0]) { \n\t    return -1;\n\t} else if (a[0]>b[0]) {\n\t    return 1;\n\t} else {\n\t    return 0;\n\t}\n    };\n    this.descendingArr=function(a,b) {\n\tif (a[0]  === \"\") { \n\t    return -1;\n\t} else if (b[0]  === \"\") {\n\t    return 1;\n\t} else if (a[0]<b[0]) { \n\t    return 1;\n\t} else if (a[0]>b[0]) {\n\t    return -1;\n\t} else {\n\t    return 0;\n\t}\n    };\n    this.ascending=function(a,b) {\n\tif (a  === \"\") { \n\t    return 1;\n\t} else if (b  === \"\") {\n\t    return -1;\n\t} else if (a<b) { \n\t    return -1;\n\t} else if (a>b) {\n\t    return 1;\n\t} else {\n\t    return 0;\n\t}\n    };\n    this.descending=function(a,b) {\n\tif (a  === \"\") { \n\t    return -1;\n\t} else if (b  === \"\") {\n\t    return 1;\n\t} else if (a<b) { \n\t    return 1;\n\t} else if (a>b) {\n\t    return -1;\n\t} else {\n\t    return 0;\n\t}\n    };\n    this.ascendingN=function(a,b) {\n\tif (a  === null) { \n\t    return 1;\n\t} else if (b  === null) {\n\t    return -1;\n\t} else if (Number(a)<Number(b)) { \n\t    return -1;\n\t} else if (Number(a)>Number(b)) {\n\t    return 1;\n\t} else {\n\t    return 0;\n\t}\n    };\n    this.descendingN=function(a,b) {\n\tif (a  === null) { \n\t    return -1;\n\t} else if (b  === null) {\n\t    return 1;\n\t} else if (Number(a)<Number(b)) { \n\t    return 1;\n\t} else if (Number(a)>Number(b)) {\n\t    return -1;\n\t} else {\n\t    return 0;\n\t}\n    }\n    this.getItem=function(state,s,src) {\n\tvar ss=src;\n\tvar ll=s.length;\n\tfor (var ii=0;ii<ll;ii++) {\n\t    if (ss===undefined) { return ss};\n\t    ss=ss[s[ii]];\n\t}\n\treturn ss;\n    }\n    this.setForce=function(state,t,trg,ss) {\n\tvar ll=t.length;\n\tif (trg===undefined) { \n\t    return;\n\t} else if (ll===0) {\n\t    trg=ss;\n\t    return trg;\n\t} else {\n\t    var tt=trg;\n\t    for (var ii=0;ii<ll-1;ii++) {\n\t\tif (tt[t[ii]]===undefined) { tt[t[ii]]={} };\n\t\ttt=tt[t[ii]];\n\t    }\n\t    tt[t[ll-1]]=state.Utils.cp(ss)\n\t    //console.log(\"Force copied:\",JSON.stringify(t),JSON.stringify(tt[t[ll-1]]));\n\t    return tt[t[ll-1]];\n\t}\n    }\n    this.setFill=function(state,t,trg,ss) {\n\tvar ll=t.length;\n\tif (trg===undefined) { \n\t    return;\n\t} else if (ll===0) {\n\t    trg=ss;\n\t    return trg;\n\t} else {\n\t    //console.log(\"Trg:\",JSON.stringify(t),\":\",JSON.stringify(trg),\":\",JSON.stringify(ss));\n\t    var tt=trg;\n\t    for (var ii=0;ii<ll-1;ii++) {\n\t\tif (tt[t[ii]]===undefined) { tt[t[ii]]={} };\n\t\ttt=tt[t[ii]];\n\t    }\n\t    if (this.isEmpty(state,tt[t[ll-1]])) {\n\t\ttt[t[ll-1]]=state.Utils.cp(ss);\n\t    }\n\t    return tt[t[ll-1]];\n\t}\n    }\n    this.cpForce=function(state,t,s,trg,src) {\n\tvar ss=this.getItem(state,s,src);\n\tthis.setForce(state,t,trg,ss);\n    }\n    this.cpFill=function(state,t,s,trg,src) {\n\tvar ss=this.getItem(state,s,src);\n\t//console.log(\"Filling:\",s,'->',t,! this.isEmpty(state,ss),JSON.stringify());\n\t//if (! this.isEmpty(state,ss) ) {\n        if (ss !== undefined) {\n\t    this.setFill(state,t,trg,ss);\n\t}\n    };\n    // map src onto target always\n    this.copyForce=function(state,src,trg,map) {\n\tif (src===undefined) {\n\t    console.log(\"ERROR: MapForce with no src.\");\n\t} else if (trg===undefined) {\n\t    console.log(\"ERROR: MapForce with no trg.\");\n\t} else if (map===undefined) {\n\t    console.log(\"ERROR: MapForce with no map.\");\n\t} else {\n\t    var len=map.length\n\t    for (var ii=0;ii<len;ii++){\n\t\tvar t=map[ii][0];\n\t\tvar s=map[ii][1];\n\t\tthis.cpForce(state,t,s,trg,src)\n\t    }\n\t}\n    };\n    // map src onto target if target is empty and src is not\n    this.copyFill=function(state,src,trg,map) {\n\tif (src===undefined) {\n\t    console.log(\"ERROR: MapFill with no src.\");\n\t} else if (trg===undefined) {\n\t    console.log(\"ERROR: MapFill with no trg.\");\n\t} else if (map===undefined) {\n\t    console.log(\"ERROR: MapFill with no map.\");\n\t} else {\n\t    var len=map.length\n\t    for (var ii=0;ii<len;ii++){\n\t\tvar t=map[ii][0];\n\t\tvar s=map[ii][1];\n\t\tthis.cpFill(state,t,s,trg,src)\n\t    }\n\t}\n    };\n    this.invert=function(map) {\n\tvar ret=[];\n\tvar len=map.length;\n\tfor (var ii=0;ii<len;ii++){\n\t    var t=map[ii][0];\n\t    var s=map[ii][1];\n\t    ret.push([s,t]);\n\t}\n\treturn ret;\n    }\n    this.isEmpty=function(state,obj) { // check if obj has any string/number children\n\tvar ret=true;\n\tvar k;\n\tif (obj===undefined) {\n\t    ret=true;\n\t} else {\n\t    var typ=typeof obj;\n\t    if (typ === \"Array\") { // check array children\n\t\tfor (k in obj) {\n\t\t    if (! state.Utils.isEmpty(state,obj[k])) {\n\t\t\tret=false;\n\t\t\t//console.log(\"    =\",typ,ret,k,JSON.stringify(obj[k]));\n\t\t\tbreak;\n\t\t    }\n\t\t}\n\t    } else if (typ === \"object\") { // check hash children\n\t\tfor (k in obj) {\n\t\t    if (obj.hasOwnProperty(k)) {\n\t\t\tif (! state.Utils.isEmpty(state,obj[k])) { \n\t\t\t    ret=false;\n\t\t\t    //console.log(\"    =\",typ,ret,k,JSON.stringify(obj[k]));\n\t\t\t    break;\n\t\t\t}\n\t\t    }\n\t\t}\n\t    } else {\n\t\tret=false;\n\t    }\n\t}\n\t//console.log(\"Type:\",ret,JSON.stringify(obj));\n\treturn ret;\n    };\n    this.prettyJson=function(obj) {\n\tvar f=function(k,v){\n\t    if (Array.isArray(v)) {\n\t\treturn JSON.stringify(v);\n\t    };\n\t    return v;\n\t};\n\tvar json=JSON.stringify(obj,f,\"  \");\n\tjson=json.replace(/\"\\[/g,'[');\n\tjson=json.replace(/\\]\"/g,']');\n\tjson=json.replace(/\\\\\"/g,'\"');\n\t//console.log(\"Replaced:\",json);\n\treturn json;\n    };\n    this.save=function(data, filename, type) {\n\tconsole.log(\"Saving file:\",filename);\n\tvar file = new Blob([data], {type: type});\n\tif (window.navigator.msSaveOrOpenBlob) // IE10+\n            window.navigator.msSaveOrOpenBlob(file, filename);\n\telse { // Others\n            var a = document.createElement(\"a\"),\n                url = URL.createObjectURL(file);\n            a.href = url;\n            a.download = filename;\n            document.body.appendChild(a);\n            a.click();\n            setTimeout(function() {\n\t\tdocument.body.removeChild(a);\n\t\twindow.URL.revokeObjectURL(url);  \n            }, 0);\n\t};\n    };\n    this.size = function(state) {\n\tvar obj=state.React.matrix;\n\tvar size = 0, key;\n\tfor (key in obj) {\n            if (obj.hasOwnProperty(key)) size++;\n\t}\n\tconsole.log(\"Matrix size:\",size);\n\treturn size;\n    };\n};\nexport default Utils;\n    \n"]},"metadata":{},"sourceType":"module"}