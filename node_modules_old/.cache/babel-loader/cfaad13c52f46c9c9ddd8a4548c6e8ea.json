{"ast":null,"code":"import _classCallCheck from \"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _objectWithoutProperties from \"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"/home/franktt/react/varseltavle/src/react/TableComponent.js\";\nimport React, { Component } from \"react\";\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport { teal_palette } from '../mui/metMuiThemes';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport SummaryCell from './SummaryCell';\nimport SeriesCell from './SeriesCell';\nimport CanvasText from './CanvasTextComponent';\nimport Tooltip from './TooltipContainer';\nvar footheight = \"30px\";\nvar headerheight = \"70px\";\nvar footAndHeaderheight = \"100px\";\n\nvar styles = function styles(theme) {\n  return {\n    dataset: {},\n    content: {\n      border: '10px solid red',\n      ///\theight: '100%',\n      width: 'calc(98% - 5px)'\n    },\n    divHdrLeft: {\n      display: 'inline-block',\n      justifyContent: 'left',\n      cursor: \"pointer\"\n    },\n    divHdrRight: {\n      display: 'inline-block',\n      justifyContent: 'right',\n      cursor: \"pointer\"\n    },\n    paper: {\n      //\toverflow: 'hidden',\n      tableLayout: 'fixed',\n      padding: 0,\n      margin: 0\n    },\n    divEmpty: {\n      width: '100%',\n      height: '100%'\n    },\n    divTable: {\n      display: 'table',\n      width: '100%' //\tborder:  '1px solid red',\n\n    },\n    divTableRow: {\n      backgroundColor: teal_palette.main,\n      border: '0px solid #999999',\n      display: 'table-row',\n      padding: '0px'\n    },\n    divTableCell: {\n      border: '0px solid #999999',\n      display: 'table-cell',\n      padding: '0px'\n    },\n    divTableCellCursor: {\n      cursor: \"pointer\",\n      border: '0px solid #999999',\n      display: 'table-cell',\n      padding: '0px'\n    },\n    divTableHead: {\n      border: '0px',\n      display: 'table-cell',\n      padding: '0px'\n    },\n    divTableHeading: {\n      display: 'table-header-group'\n    },\n    divTableHeadingCenter: {\n      display: 'flex',\n      justifyContent: 'center'\n    },\n    divTableFoot: {\n      backgroundColor: '#DDD',\n      display: 'table-footer-group',\n      fontWeight: 'bold'\n    },\n    divTableBody: {\n      display: 'table-row-group'\n    },\n    paperImage: {\n      textAlign: 'center',\n      padding: theme.spacing(2)\n    }\n  };\n}; //const mui = createTheme({palette:teal_palette});\n// ---------------- DATA\n\n\nfunction FirstDataCell(props) {\n  var classes = props.classes,\n      state = props.state,\n      colkey = props.colkey,\n      rowkey = props.rowkey,\n      rowval = props.rowval,\n      onclick = props.onclick,\n      plan = props.plan,\n      rowindex = props.rowindex;\n  var cursor = classes.divTableCell;\n\n  if (onclick !== undefined) {\n    cursor = classes.divTableCellCursor;\n  } // width={plan.width} height={plan.height}\n\n\n  var data;\n\n  if (colkey === \"\" && rowkey === \"\") {\n    data = null;\n  } else {\n    data = JSON.stringify({\n      colkey: colkey,\n      rowkey: rowkey,\n      rowval: rowval\n    });\n  }\n\n  ;\n\n  if (rowindex % 2 === 1) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: cursor,\n      onClick: onclick,\n      style: {\n        backgroundColor: '#DDD'\n      },\n      \"data-for\": \"cell\",\n      \"data-tip\": data,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(CanvasText, {\n      state: state,\n      label: rowval,\n      plan: plan,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 6\n      }\n    }));\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: cursor,\n      onClick: onclick,\n      style: {\n        backgroundColor: '#EEE'\n      },\n      \"data-for\": \"cell\",\n      \"data-tip\": data,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(CanvasText, {\n      state: state,\n      label: rowval,\n      plan: plan,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 3\n      }\n    }));\n  }\n}\n\nfunction DataCell(props) {\n  var classes = props.classes,\n      state = props.state,\n      elements = props.elements,\n      mode = props.mode,\n      plan = props.plan,\n      rowindex = props.rowindex,\n      other = _objectWithoutProperties(props, [\"classes\", \"state\", \"elements\", \"mode\", \"plan\", \"rowindex\"]);\n\n  if (elements === undefined) {\n    if (rowindex % 2 === 1) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.divTableCell,\n        style: {\n          backgroundColor: '#EEE'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 13\n        }\n      });\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.divTableCell,\n        style: {\n          backgroundColor: '#FFF'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 13\n        }\n      });\n    }\n  } else if (mode === state.Layout.modes.cell.Sum) {\n    return /*#__PURE__*/React.createElement(SummaryCell, Object.assign({}, other, {\n      state: state,\n      elements: elements,\n      plan: plan,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }\n    })); //return null;\n  } else {\n    return /*#__PURE__*/React.createElement(SeriesCell, Object.assign({}, other, {\n      state: state,\n      elements: elements,\n      plan: plan,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }\n    })); //return null;\n  }\n} //{rowval}\n\n\nfunction renderDataCell(classes, state, colkey, colvalues, rowkey, rowval, rowindex, rowwhere, range, mode, plan, val, index) {\n  //console.log(\"Making data cell:\",rowval,val,index,plan,JSON.stringify(colvalues));\n  if (index % plan.step === 0) {\n    // get elements and range\n    //console.log(\"Processing:\",val,colvalues[index],plan.step);\n    var matrix = state.React.matrix; //console.log(\"Matrix:\",JSON.stringify(matrix));\n\n    var elements = state.Matrix.getMatrixElements(colvalues, rowval, matrix, index, plan.step); //console.log(\"Elements:\",JSON.stringify(colvalues),\":\",rowval,typeof(rowval),rowval==null,\":\",index,' =>',JSON.stringify(elements));\n    // get count and colwhere\n\n    var cnt = Math.min(colvalues.length, index + plan.step) - index;\n    var colwhere = state.Database.getColWhere(colkey, colvalues, index, plan.step); // make onclick\n\n    var onclick = function onclick() {\n      return state.Navigate.selectItem(state, colkey, rowkey, colvalues[index], rowval, colwhere, rowwhere, cnt, 1);\n    }; //var info=state.Matrix.getInfo(state,elements);\n    //var color=state.Colors.getLevelBgColor(info.maxlev);\n    //console.log(\"Rendering data cell ...\",info.maxlev,color);\n\n\n    return /*#__PURE__*/React.createElement(DataCell, {\n      classes: classes,\n      state: state,\n      key: \"col-\".concat(index),\n      rowindex: rowindex,\n      index: index,\n      onclick: onclick,\n      colkey: colkey,\n      rowkey: rowkey,\n      colvalues: colvalues,\n      rowval: rowval,\n      colwhere: colwhere,\n      rowwhere: rowwhere,\n      elements: elements,\n      mode: mode,\n      plan: plan,\n      range: range,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 10\n      }\n    });\n  } else {\n    return null;\n  }\n}\n\nfunction dataRow(classes, state, colkey, rowkey, colvalues, mode, plans, rowval, rowindex) {\n  var rowwhere = state.Database.getWhereValue(rowkey, rowval);\n\n  var onclick = function onclick() {\n    state.Navigate.selectKey(state, rowkey, rowval, rowwhere, 1);\n  };\n\n  var range = [undefined, undefined];\n\n  if (state.React.matrix !== undefined) {\n    range = state.Matrix.getRange(state, state.React.matrix, colvalues, [rowval]);\n  }\n\n  ; //console.log(\"Making data cols.\",rowval,colkey,JSON.stringify(colvalues));\n  //console.log(\"We have a matrix(\",rowval,\") with range:\",JSON.stringify(range));\n\n  var mapFunction = function mapFunction(val, index) {\n    return renderDataCell(classes, state, colkey, colvalues, rowkey, rowval, rowindex, rowwhere, range, mode, plans.cell, val, index);\n  }; //console.log(\"Colvalue:\",val,index);\n\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.divTableRow,\n    key: rowindex.toString(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FirstDataCell, {\n    classes: classes,\n    state: state,\n    key: '0',\n    colkey: colkey,\n    rowkey: rowkey,\n    rowval: rowval,\n    onclick: onclick,\n    plan: plans.row,\n    rowindex: rowindex,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 6\n    }\n  }), colvalues.map(mapFunction));\n}\n\n;\n\nfunction renderZeroRow(classes, state, colkey, colvalues, plans) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.divTableRow,\n    key: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.divTableCell,\n    width: plans.cell.width,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 9\n    }\n  }, \"No data available\"));\n}\n\n;\n\nfunction DataRows(props) {\n  var classes = props.classes,\n      state = props.state,\n      plans = props.plans,\n      colkey = props.colkey,\n      colvalues = props.colvalues,\n      rowkey = props.rowkey,\n      rowvalues = props.rowvalues,\n      mode = props.mode; //console.log(\"Making data cols.\",colkey,JSON.stringify(colvalues));\n\n  var mapFunction = function mapFunction(val, index) {\n    return dataRow(classes, state, colkey, rowkey, colvalues, mode, plans, val, index);\n  };\n\n  if (rowvalues.length === 0) {\n    return renderZeroRow(classes, state, colkey, colvalues, plans);\n  } else {\n    return rowvalues.map(mapFunction);\n  }\n} // ---------------- HDR\n\n\nfunction FirstHdrCell(props) {\n  var classes = props.classes,\n      state = props.state,\n      colkey = props.colkey,\n      rowkey = props.rowkey,\n      plans = props.plans; // plan\n  //var width=plans.hdr.width;\n  //var height=plans.hdr.height;\n  //teal_palette\n  //console.log(\"Making first header cell.\",colkey,rowkey,plan.width,plan.height);\n  //style={{backgroundColor:teal_palette.main}}\n\n  var onclickCol = function onclickCol() {\n    return state.Navigate.switchTableKey(state, colkey);\n  };\n\n  var onclickRow = function onclickRow() {\n    return state.Navigate.switchTableKey(state, rowkey);\n  };\n\n  var data;\n\n  if (colkey === \"\" && rowkey === \"\") {\n    data = null;\n  } else {\n    data = JSON.stringify({\n      colkey: colkey,\n      rowkey: rowkey\n    });\n  }\n\n  ;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: plans.hdr.width\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.divHdrRight,\n    width: plans.hd2.width,\n    onClick: onclickRow,\n    \"data-for\": \"cell\",\n    \"data-tip\": data,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CanvasText, {\n    state: state,\n    label: rowkey,\n    plan: plans.hd2,\n    color: 'white',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 12\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.divHdrLeft,\n    width: plans.hd1.width,\n    onClick: onclickCol,\n    \"data-for\": \"cell\",\n    \"data-tip\": data,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CanvasText, {\n    state: state,\n    label: colkey,\n    plan: plans.hd1,\n    color: 'white',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 12\n    }\n  })));\n} //\n\n\nfunction renderHdrCell(classes, state, colkey, colvalues, rowkey, plan, val, index) {\n  if (index % plan.step === 0) {\n    //console.log(\"HdrCell:\",index,plan.step);\n    var cnt = Math.min(colvalues.length, index + plan.step) - index;\n    var colwhere = state.Database.getColWhere(colkey, colvalues, index, plan.step);\n\n    var onclick = function onclick() {\n      return state.Navigate.selectKey(state, colkey, colvalues[index], colwhere, cnt);\n    };\n\n    var cursor = classes.divTableCell;\n\n    if (onclick !== undefined) {\n      cursor = classes.divTableCellCursor;\n    } //console.log(\"Plan:\",JSON.stringify(plan));\n\n\n    var data;\n\n    if (colkey === \"\" && rowkey === \"\") {\n      data = null;\n    } else {\n      data = JSON.stringify({\n        colkey: colkey,\n        rowkey: rowkey,\n        colvalues: colvalues,\n        index: index,\n        step: plan.step\n      });\n    }\n\n    ;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: cursor,\n      onClick: onclick,\n      style: {\n        backgroundColor: '#DDD'\n      },\n      key: \"col-\".concat(index),\n      \"data-for\": \"cell\",\n      \"data-tip\": data,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(CanvasText, {\n      state: state,\n      index: index,\n      plan: plan,\n      label: val,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 6\n      }\n    }));\n  } else {\n    return null;\n  }\n}\n\nfunction HdrRow(props) {\n  var classes = props.classes,\n      state = props.state,\n      plans = props.plans,\n      colkey = props.colkey,\n      colvalues = props.colvalues,\n      rowkey = props.rowkey; //, rowvalues\n  //console.log(\"Making header row.\",colkey,JSON.stringify(colvalues));\n\n  var mapFunction = function mapFunction(val, index) {\n    return renderHdrCell(classes, state, colkey, colvalues, rowkey, plans.col, val, index);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.divTableRow,\n    key: 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FirstHdrCell, {\n    classes: classes,\n    state: state,\n    colkey: colkey,\n    rowkey: rowkey,\n    plans: plans,\n    style: {\n      height: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 9\n    }\n  }), colvalues.map(mapFunction));\n} // ---------------- Details\n\n\nfunction Details(props) {\n  var classes = props.classes,\n      state = props.state; // classes, element\n\n  var colkey = state.Path.getColKey(state) || \"\";\n  var rowkey = state.Path.getRowKey(state) || \"\";\n  var colvalues = state.Path.filterKeys(state, state.Matrix.values[colkey] || [null]);\n  var rowvalues = state.Path.filterKeys(state, state.Matrix.values[rowkey] || [null]);\n  var cellMode = state.Layout.getCellMode(state); //var ncol=colvalues.length + 1;\n  //var nrow=rowvalues.length + 1;\n  //DOM.style.font\n\n  var border = 0;\n\n  if (cellMode === state.Layout.modes.cell.Sum) {\n    border = 1;\n  }\n\n  ;\n  var width = 0.89 * window.innerWidth;\n  var height = 0.93 * window.innerHeight - 100;\n  var plans = state.Layout.makePlans(colkey, rowkey, colvalues, rowvalues, width, height, border); //console.log(\"Table Plans:\",JSON.stringify(plans));\n  //console.log(\"Heights:\",window.innerHeight,height,plans.hdr.height,plans.cell.height);\n  //console.log(\"Details => Width/Height:\",window.innerWidth,window.innerHeight,plan.cell.width,plan.hdr.height)\n  //console.log(\"Colkey:\",colkey,\" colval:\",JSON.stringify(colvalues));\n  //console.log(\"Rowkey:\",rowkey,\" rowval:\",JSON.stringify(rowvalues));\n\n  if (state.React.matrix === undefined) {\n    var label = \"Processing...\";\n    var plan = state.Layout.makePlan(label, width, height);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.divEmpty,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(CanvasText, {\n      state: state,\n      label: label,\n      plan: plan,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 6\n      }\n    }));\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.divTable,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.divTableBody,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(HdrRow, {\n      classes: classes,\n      state: state,\n      plans: plans,\n      colkey: colkey,\n      colvalues: colvalues,\n      rowkey: rowkey,\n      rowvalues: rowvalues,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 12\n      }\n    }), /*#__PURE__*/React.createElement(DataRows, {\n      classes: classes,\n      state: state,\n      plans: plans,\n      colkey: colkey,\n      colvalues: colvalues,\n      rowkey: rowkey,\n      rowvalues: rowvalues,\n      mode: cellMode,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 12\n      }\n    })));\n  }\n}\n\nvar Table = /*#__PURE__*/function (_Component) {\n  _inherits(Table, _Component);\n\n  var _super = _createSuper(Table);\n\n  function Table(props) {\n    var _this;\n\n    _classCallCheck(this, Table);\n\n    _this = _super.call(this, props);\n\n    _this.updateWindowDimensions = function () {\n      _this.width = window.innerWidth;\n      _this.height = window.innerHeight;\n      _this.bbx = _this.el.getBoundingClientRect(); //console.log(\"Width/Height:\",this.width,this.height,this.bbx.width,this.bbx.height)\n    };\n\n    var state = props.state;\n    state.React.Table = _assertThisInitialized(_this);\n    _this._ismounted = false;\n    return _this;\n  }\n\n  _createClass(Table, [{\n    key: \"showTable\",\n    value: function showTable() {\n      //console.log(\"Rebuilding table.\",this._ismounted);\n      if (this._ismounted) {\n        this.forceUpdate();\n      }\n\n      ;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._ismounted = true;\n      window.addEventListener(\"resize\", this.updateWindowDimensions);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._ismounted = false;\n    }\n  }, {\n    key: \"element\",\n    value: function element(el) {\n      if (el !== undefined && el !== null) {\n        this.el = el;\n        this.bbx = this.el.getBoundingClientRect(); //console.log(\"BBX width/height:\",this.bbx.width,this.bbx.height);\n      }\n\n      ;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          state = _this$props.state; //console.log(\"##### Rendering Table.\");\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        ref: function ref(el) {\n          _this2.element(el);\n        },\n        className: classes.content,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 10\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        spacing: 10,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 6\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 12,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Paper, {\n        className: classes.paper,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 28\n        }\n      }, /*#__PURE__*/React.createElement(Details, {\n        state: state,\n        classes: classes,\n        element: this,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 17\n        }\n      })))), /*#__PURE__*/React.createElement(Tooltip, {\n        state: state,\n        classes: {\n          button: classes.button\n        },\n        element: this,\n        type: 'cell',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 6\n        }\n      }));\n    }\n  }]);\n\n  return Table;\n}(Component);\n\nTable.propTypes = {\n  classes: PropTypes.object.isRequired\n};\nexport default withStyles(styles)(Table);","map":{"version":3,"sources":["/home/franktt/react/varseltavle/src/react/TableComponent.js"],"names":["React","Component","PropTypes","withStyles","teal_palette","Paper","Grid","SummaryCell","SeriesCell","CanvasText","Tooltip","footheight","headerheight","footAndHeaderheight","styles","theme","dataset","content","border","width","divHdrLeft","display","justifyContent","cursor","divHdrRight","paper","tableLayout","padding","margin","divEmpty","height","divTable","divTableRow","backgroundColor","main","divTableCell","divTableCellCursor","divTableHead","divTableHeading","divTableHeadingCenter","divTableFoot","fontWeight","divTableBody","paperImage","textAlign","spacing","FirstDataCell","props","classes","state","colkey","rowkey","rowval","onclick","plan","rowindex","undefined","data","JSON","stringify","DataCell","elements","mode","other","Layout","modes","cell","Sum","renderDataCell","colvalues","rowwhere","range","val","index","step","matrix","Matrix","getMatrixElements","cnt","Math","min","length","colwhere","Database","getColWhere","Navigate","selectItem","dataRow","plans","getWhereValue","selectKey","getRange","mapFunction","toString","row","map","renderZeroRow","DataRows","rowvalues","FirstHdrCell","onclickCol","switchTableKey","onclickRow","hdr","hd2","hd1","renderHdrCell","HdrRow","col","Details","Path","getColKey","getRowKey","filterKeys","values","cellMode","getCellMode","window","innerWidth","innerHeight","makePlans","label","makePlan","Table","updateWindowDimensions","bbx","el","getBoundingClientRect","_ismounted","forceUpdate","addEventListener","element","button","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport {teal_palette} from '../mui/metMuiThemes';\n\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\n\nimport SummaryCell from './SummaryCell';\nimport SeriesCell  from './SeriesCell';\nimport CanvasText  from './CanvasTextComponent';\nimport Tooltip  from './TooltipContainer';\n\nconst footheight=\"30px\";\nconst headerheight=\"70px\";\nconst footAndHeaderheight = \"100px\";\n\nconst styles = theme => ({\n    dataset:{},\n    content: {\n\tborder:  '10px solid red',\n///\theight: '100%',\n\twidth: 'calc(98% - 5px)',\n    },\n    divHdrLeft : {\n\tdisplay: 'inline-block',\n\tjustifyContent: 'left',\n\tcursor: \"pointer\",\n    },\n    divHdrRight : {\n\tdisplay: 'inline-block',\n\tjustifyContent: 'right',\n\tcursor: \"pointer\",\n    },\n    paper: {\n//\toverflow: 'hidden',\n\ttableLayout: 'fixed',\n\tpadding:0,\n\tmargin:0,\n    },\n    divEmpty :{\n\twidth: '100%',\n\theight: '100%',\n    },\n    divTable :{\n\tdisplay: 'table',\n\twidth: '100%',\n//\tborder:  '1px solid red',\n    },\n    divTableRow:  {\n\tbackgroundColor:teal_palette.main,\n\tborder: '0px solid #999999',\n\tdisplay: 'table-row',\n\tpadding: '0px',\n    },\n    divTableCell:{\n\tborder: '0px solid #999999',\n\tdisplay: 'table-cell',\n\tpadding: '0px',\n    },\n    divTableCellCursor:{\n\tcursor: \"pointer\",\n\tborder: '0px solid #999999',\n\tdisplay: 'table-cell',\n\tpadding: '0px',\n    },\n    divTableHead : {\n\tborder: '0px',\n\tdisplay: 'table-cell',\n\tpadding: '0px',\n    },\n    divTableHeading : {\n\tdisplay: 'table-header-group',\n    },\n    divTableHeadingCenter : {\n\tdisplay: 'flex',\n\tjustifyContent: 'center',\n    },\n    divTableFoot : {\n\tbackgroundColor: '#DDD',\n\tdisplay: 'table-footer-group',\n\tfontWeight: 'bold',\n    },\n    divTableBody : {\n\tdisplay: 'table-row-group',\n    },\n    paperImage: {\n        textAlign: 'center',\n        padding: theme.spacing(2),\n    }\n});\n\n//const mui = createTheme({palette:teal_palette});\n\n// ---------------- DATA\nfunction FirstDataCell (props) {\n    const { classes, state, colkey, rowkey, rowval, onclick, plan, rowindex } = props;\n    var cursor=classes.divTableCell;\n    if (onclick !== undefined) {\n\tcursor=classes.divTableCellCursor;\n    }\n    // width={plan.width} height={plan.height}\n    var data;\n    if (colkey===\"\" && rowkey===\"\") {\n\tdata=null;\n    } else {\n\tdata=JSON.stringify({colkey:colkey,rowkey:rowkey,rowval:rowval}); \n    };\n    if (rowindex%2 === 1) {\n\treturn (<div className={cursor} onClick={onclick} style={{backgroundColor:'#DDD'}}\n\t\tdata-for='cell' data-tip={data}>\n\t\t   <CanvasText state={state} label={rowval} plan={plan}/>\n\t\t</div>);\n    } else {\n\treturn (<div className={cursor} onClick={onclick} style={{backgroundColor:'#EEE'}}\n\t\tdata-for='cell' data-tip={data}>\n\t\t<CanvasText state={state} label={rowval} plan={plan}/>\n\t\t</div>);\n    }\n}\nfunction DataCell(props) {\n    const {classes,state,elements,mode,plan,rowindex,...other}=props;\n    if (elements===undefined) {\n\tif (rowindex%2===1) {\n\t    return <div className={classes.divTableCell} style={{backgroundColor:'#EEE'}}/>\n\t} else {\n\t    return <div className={classes.divTableCell} style={{backgroundColor:'#FFF'}}/>\n\t}\n    } else if (mode===state.Layout.modes.cell.Sum) {\n\treturn <SummaryCell {...other} state={state} elements={elements} plan={plan}/>\n\t//return null;\n    } else {\n\treturn <SeriesCell {...other} state={state} elements={elements} plan={plan}/>\n\t//return null;\n    }\n}\n//{rowval}\nfunction renderDataCell(classes,state,colkey,colvalues,rowkey,rowval,rowindex,rowwhere,range,mode,plan,val,index) {\n    //console.log(\"Making data cell:\",rowval,val,index,plan,JSON.stringify(colvalues));\n    if (index%plan.step === 0) {\n\t// get elements and range\n\t//console.log(\"Processing:\",val,colvalues[index],plan.step);\n\tvar matrix=state.React.matrix;\n\t//console.log(\"Matrix:\",JSON.stringify(matrix));\n\tvar elements=state.Matrix.getMatrixElements(colvalues,rowval,matrix,index,plan.step);\n\t//console.log(\"Elements:\",JSON.stringify(colvalues),\":\",rowval,typeof(rowval),rowval==null,\":\",index,' =>',JSON.stringify(elements));\n\t// get count and colwhere\n        var cnt = Math.min(colvalues.length,index+plan.step)-index;\n        var colwhere = state.Database.getColWhere(colkey,colvalues,index,plan.step);\n\t// make onclick\n\tvar onclick=() => state.Navigate.selectItem(state,colkey,rowkey,colvalues[index],rowval,colwhere,rowwhere,cnt,1);\n\n\t//var info=state.Matrix.getInfo(state,elements);\n\t//var color=state.Colors.getLevelBgColor(info.maxlev);\n\t//console.log(\"Rendering data cell ...\",info.maxlev,color);\n\treturn (<DataCell classes={classes} state={state} key={`col-${index}`} rowindex={rowindex} index={index} onclick={onclick}\n\t\tcolkey={colkey} rowkey={rowkey} colvalues={colvalues} rowval={rowval} colwhere={colwhere} rowwhere={rowwhere} \n\t\telements={elements} mode={mode} plan={plan} range={range}\n\t    />);\n    } else {\n\treturn null;\n    }\n}\nfunction dataRow(classes,state,colkey,rowkey,colvalues,mode,plans,rowval,rowindex) {\n    var rowwhere=state.Database.getWhereValue(rowkey,rowval);\n    var onclick=() => {state.Navigate.selectKey(state,rowkey,rowval,rowwhere,1);}\n    var range=[undefined,undefined];\n    if (state.React.matrix!==undefined) {\n\trange=state.Matrix.getRange(state,state.React.matrix,colvalues,[rowval]);\n    };\n    //console.log(\"Making data cols.\",rowval,colkey,JSON.stringify(colvalues));\n    //console.log(\"We have a matrix(\",rowval,\") with range:\",JSON.stringify(range));\n    var mapFunction= (val,index)=>{return renderDataCell(classes,state,colkey,colvalues,rowkey,rowval,rowindex,rowwhere,range,mode,plans.cell,val,index);};\n    //console.log(\"Colvalue:\",val,index);\n    return (<div className={classes.divTableRow} key={rowindex.toString()}>\n\t    <FirstDataCell classes={classes} state={state} key={'0'} colkey={colkey} rowkey={rowkey} rowval={rowval} onclick={onclick} \n\t                   plan={plans.row} rowindex={rowindex}/>\n\t       {colvalues.map(mapFunction)}\n\t    </div>);\n};\nfunction renderZeroRow(classes,state,colkey,colvalues,plans) {\n    return (<div className={classes.divTableRow} key={1}>\n\t       <div className={classes.divTableCell} width={plans.cell.width}>No data available</div>\n\t    </div>);\n};\nfunction DataRows(props) {\n    const { classes, state, plans, colkey, colvalues, rowkey, rowvalues, mode } = props;\n    //console.log(\"Making data cols.\",colkey,JSON.stringify(colvalues));\n    var mapFunction= (val,index)=>{return dataRow(classes,state,colkey,rowkey,colvalues,mode,plans,val,index);};\n    if (rowvalues.length===0) {\n\treturn renderZeroRow(classes,state,colkey,colvalues,plans);\n    } else {\n\treturn (rowvalues.map(mapFunction));\n    }\n}\n// ---------------- HDR\nfunction FirstHdrCell (props) {\n    const { classes, state, colkey, rowkey, plans } = props; // plan\n    //var width=plans.hdr.width;\n    //var height=plans.hdr.height;\n    //teal_palette\n    //console.log(\"Making first header cell.\",colkey,rowkey,plan.width,plan.height);\n    //style={{backgroundColor:teal_palette.main}}\n    var onclickCol=() => state.Navigate.switchTableKey(state,colkey);\n    var onclickRow=() => state.Navigate.switchTableKey(state,rowkey);\n    var data;\n    if (colkey===\"\" && rowkey===\"\") {\n\tdata=null;\n    } else {\n\tdata=JSON.stringify({colkey:colkey,rowkey:rowkey}); \n    };\n    return (<div style={{width:plans.hdr.width}}>\n\t       <div className={classes.divHdrRight} width={plans.hd2.width} onClick={onclickRow} data-for='cell' data-tip={data}>\n\t          <CanvasText state={state} label={rowkey} plan={plans.hd2} color={'white'}/>\n\t       </div>\n\t       <div className={classes.divHdrLeft} width={plans.hd1.width} onClick={onclickCol} data-for='cell' data-tip={data}>\n\t          <CanvasText state={state} label={colkey} plan={plans.hd1} color={'white'}/>\n\t       </div>\n\t    </div>);\n}\n//\n\nfunction renderHdrCell(classes,state,colkey,colvalues,rowkey,plan,val,index) {\n    if (index%plan.step === 0) {\n\t//console.log(\"HdrCell:\",index,plan.step);\n        var cnt = Math.min(colvalues.length,index+plan.step)-index;\n        var colwhere = state.Database.getColWhere(colkey,colvalues,index,plan.step);\n\tvar onclick=() => state.Navigate.selectKey(state,colkey,colvalues[index],colwhere,cnt);\n\tvar cursor=classes.divTableCell;\n\tif (onclick !== undefined) {\n\t    cursor=classes.divTableCellCursor;\n\t}\n\t//console.log(\"Plan:\",JSON.stringify(plan));\n\tvar data;\n\tif (colkey===\"\" && rowkey===\"\") {\n\t    data=null;\n\t} else {\n\t    data=JSON.stringify({colkey:colkey,rowkey:rowkey,colvalues:colvalues,index:index,step:plan.step}); \n\t};\n\treturn (<div className={cursor} onClick={onclick} style={{backgroundColor:'#DDD'}} key={`col-${index}`}  data-for='cell' data-tip={data}>\n\t\t   <CanvasText state={state} index={index} plan={plan} label={val}/>\n \t        </div> );\n     } else {\n\treturn null;\n    }\n}\nfunction HdrRow(props) {\n    const { classes, state, plans, colkey, colvalues, rowkey } = props; //, rowvalues\n    //console.log(\"Making header row.\",colkey,JSON.stringify(colvalues));\n    var mapFunction= (val,index)=>{return renderHdrCell(classes,state,colkey,colvalues,rowkey,plans.col,val,index);};\n    return (<div className={classes.divTableRow} key={0}>\n\t       <FirstHdrCell classes={classes} state={state} colkey={colkey} rowkey={rowkey} plans={plans} style={{height:\"100%\"}}/>\n\t       {colvalues.map(mapFunction)}\n\t    </div>);\n}\n// ---------------- Details\nfunction Details(props) {\n    const { classes, state } = props; // classes, element\n    var colkey = state.Path.getColKey(state)||\"\";\n    var rowkey = state.Path.getRowKey(state)||\"\";\n    var colvalues = state.Path.filterKeys(state,state.Matrix.values[colkey]||[null]);\n    var rowvalues = state.Path.filterKeys(state,state.Matrix.values[rowkey]||[null]);\n    var cellMode  = state.Layout.getCellMode(state);\n    //var ncol=colvalues.length + 1;\n    //var nrow=rowvalues.length + 1;\n    //DOM.style.font\n    var border=0;\n    if (cellMode===state.Layout.modes.cell.Sum) {\n\tborder=1;\n    };\n    var width=0.89*window.innerWidth;\n    var height=0.93*window.innerHeight - 100;\n    var plans=state.Layout.makePlans(colkey,rowkey,colvalues,rowvalues,width,height,border);\n    //console.log(\"Table Plans:\",JSON.stringify(plans));\n    //console.log(\"Heights:\",window.innerHeight,height,plans.hdr.height,plans.cell.height);\n    //console.log(\"Details => Width/Height:\",window.innerWidth,window.innerHeight,plan.cell.width,plan.hdr.height)\n    //console.log(\"Colkey:\",colkey,\" colval:\",JSON.stringify(colvalues));\n    //console.log(\"Rowkey:\",rowkey,\" rowval:\",JSON.stringify(rowvalues));\n    if (state.React.matrix === undefined) {\n\tvar label=\"Processing...\"\n\tvar plan=state.Layout.makePlan(label,width,height);\n\treturn (<div className={classes.divEmpty}>\n\t\t   <CanvasText state={state} label={label} plan={plan}/>\n\t\t</div>);\n    } else {\n\treturn (<div className={classes.divTable}>\n\t\t <div className={classes.divTableBody}>\n\t          <HdrRow classes={classes} state={state} plans={plans} colkey={colkey} colvalues={colvalues} rowkey={rowkey} rowvalues={rowvalues}/>\n\t          <DataRows classes={classes} state={state} plans={plans} colkey={colkey} colvalues={colvalues} rowkey={rowkey} rowvalues={rowvalues} mode={cellMode}/>\n\t\t </div>\n\t\t</div>);\n    }\n}\nclass Table extends Component {\n    constructor(props) {\n\tsuper(props);\n\tconst {state} = props;\n\tstate.React.Table=this;\n\tthis._ismounted=false;\n    };\n    showTable() {\n\t//console.log(\"Rebuilding table.\",this._ismounted);\n\tif (this._ismounted) {\n\t    this.forceUpdate();\n\t};\n    };\n    componentDidMount() { \n\tthis._ismounted = true;\n        window.addEventListener(\"resize\", this.updateWindowDimensions);\n    }\n    componentWillUnmount() {\n\tthis._ismounted = false;\n    }\n    updateWindowDimensions = () => {\n        this.width= window.innerWidth;\n\tthis.height=window.innerHeight;\n\tthis.bbx=this.el.getBoundingClientRect();\n\t//console.log(\"Width/Height:\",this.width,this.height,this.bbx.width,this.bbx.height)\n    };\n    element(el) {\n\tif (el !== undefined && el !== null) {\n\t    this.el=el;\n\t    this.bbx=this.el.getBoundingClientRect();\n\t    //console.log(\"BBX width/height:\",this.bbx.width,this.bbx.height);\n\t};\n    };\n    render() {\n\tconst { classes, state } = this.props;\n\t//console.log(\"##### Rendering Table.\");\n\treturn (<div ref={el=>{this.element(el)}} className={classes.content}>\n\t\t   <Grid container spacing={10}>\n\t\t      <Grid item xs={12} > \n                         { <Paper className={classes.paper}>\n\t\t              <Details state={state} classes={classes} element={this}/>\n                           </Paper>}\n                      </Grid>\n                   </Grid>\n\t\t   <Tooltip state={state} classes={{button:classes.button}} element={this} type={'cell'}/>\n\t        </div>);\n    }\n}\n\nTable.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Table);\n"]},"metadata":{},"sourceType":"module"}