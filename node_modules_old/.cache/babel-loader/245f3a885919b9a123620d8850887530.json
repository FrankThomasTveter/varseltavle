{"ast":null,"code":"import _classCallCheck from \"/home/franktt/react/varseltavle_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/franktt/react/varseltavle_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/franktt/react/varseltavle_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/franktt/react/varseltavle_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/home/franktt/react/varseltavle_new/src/react/SelectValueMenuComponent.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Chip from '@material-ui/core/Chip';\nimport SelIcon from '@material-ui/icons/Done';\nimport NullIcon from '@material-ui/icons/Clear';\nimport SelectValue from './SelectValueComponent';\nimport Remove from './RemoveComponent';\nimport Reload from './ReloadComponent';\nimport Edit from './EditComponent';\n\nvar styles = function styles(theme) {\n  return {\n    settings: {},\n    button: {},\n    values: {\n      display: 'inline-block',\n      marginLeft: 'auto'\n    },\n    selectchip: {\n      margin: theme.spacing(1),\n      cursor: \"pointer\",\n      color: \"red\",\n      borderColor: \"blue\"\n    },\n    reload: {\n      display: 'inline-block',\n      marginRight: 'auto',\n      height: '100%'\n    },\n    edit: {\n      display: 'inline-block',\n      marginRight: 'auto',\n      height: '100%'\n    },\n    remove: {\n      display: 'inline-block',\n      marginRight: 'auto',\n      height: '100%'\n    }\n  };\n};\n\nfunction renderMenuItem(classes, state, keyitem, valueitem, valueindex) {\n  var vals = state.Path.select.val[keyitem]; //console.log(\"SelectValues:\",keyitem,valueitem,JSON.stringify(vals));\n\n  var tpos = -1;\n\n  if (vals !== undefined) {\n    tpos = vals.indexOf(valueitem);\n  }\n\n  ;\n\n  if (valueitem !== undefined) {\n    return /*#__PURE__*/React.createElement(MenuItem, {\n      value: valueitem,\n      key: valueitem,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(SelectValue, {\n      state: state,\n      keyitem: keyitem,\n      valueitem: valueitem,\n      tpos: tpos,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 3\n      }\n    }));\n  } else {\n    return null;\n  }\n\n  ;\n}\n\nfunction Items(props) {\n  //onclick,title, label, \n  var state = props.state,\n      classes = props.classes,\n      anchor = props.anchor,\n      onclose = props.onclose,\n      items = props.items,\n      keyitem = props.keyitem,\n      remove = props.remove;\n\n  var mapFunction = function mapFunction(item, index) {\n    return renderMenuItem(classes, state, keyitem, item, index);\n  }; //console.log(\"Values.rendering\",items.length,JSON.stringify(anchor),Boolean(anchor));\n\n\n  return /*#__PURE__*/React.createElement(Menu, {\n    id: \"values-menu\",\n    anchorEl: anchor,\n    open: Boolean(anchor),\n    onClose: onclose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    key: \"remove\",\n    onClose: onclose,\n    className: classes.remove,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Remove, {\n    state: state,\n    classes: {\n      button: classes.button\n    },\n    keyitem: keyitem,\n    onclick: remove,\n    onclose: onclose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 10\n    }\n  })), mapFunction(state.Database.makeKeytrg(state, keyitem, state.Database.keytrg.Min), -1), items.map(mapFunction), mapFunction(state.Database.makeKeytrg(state, keyitem, state.Database.keytrg.Max), -1), mapFunction(\"\", -1), /*#__PURE__*/React.createElement(MenuItem, {\n    key: \"reload\",\n    onClose: onclose,\n    className: classes.reload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Reload, {\n    state: state,\n    onclose: onclose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 10\n    }\n  })));\n}\n\nfunction Range(props) {\n  //onclick,title, label, \n  var state = props.state,\n      classes = props.classes,\n      anchor = props.anchor,\n      onclose = props.onclose,\n      keyitem = props.keyitem,\n      remove = props.remove;\n  var range = state.Path.getRange(state, keyitem); //console.log(\"Range:\",JSON.stringify(range));\n\n  var setValue = function setValue(range, index, value) {\n    state.Path.setRangeValue(state, range, index, value);\n  };\n\n  return /*#__PURE__*/React.createElement(Menu, {\n    id: \"values-menu\",\n    anchorEl: anchor,\n    open: Boolean(anchor),\n    onClose: onclose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    key: \"remove\",\n    onClose: onclose,\n    className: classes.remove,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Remove, {\n    state: state,\n    classes: {\n      button: classes.button\n    },\n    keyitem: keyitem,\n    onclick: remove,\n    onclose: onclose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 10\n    }\n  })), /*#__PURE__*/React.createElement(MenuItem, {\n    key: \"min\",\n    onClose: onclose,\n    className: classes.edit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Edit, {\n    state: state,\n    classes: {\n      input: classes.button\n    },\n    label: \"Min:\",\n    index: 0,\n    range: range,\n    setvalue: setValue,\n    onclose: onclose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 10\n    }\n  })), /*#__PURE__*/React.createElement(MenuItem, {\n    key: \"max\",\n    onClose: onclose,\n    className: classes.edit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Edit, {\n    state: state,\n    classes: {\n      input: classes.button\n    },\n    label: \"Max:\",\n    index: 1,\n    range: range,\n    setvalue: setValue,\n    onclose: onclose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 10\n    }\n  })), /*#__PURE__*/React.createElement(MenuItem, {\n    key: \"reload\",\n    onClose: onclose,\n    className: classes.reload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Reload, {\n    state: state,\n    onclose: onclose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 10\n    }\n  })));\n}\n\nvar SelectValueMenu = /*#__PURE__*/function (_Component) {\n  _inherits(SelectValueMenu, _Component);\n\n  var _super = _createSuper(SelectValueMenu);\n\n  function SelectValueMenu() {\n    var _this;\n\n    _classCallCheck(this, SelectValueMenu);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      anchor: null\n    };\n    return _this;\n  }\n\n  _createClass(SelectValueMenu, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          state = _this$props.state,\n          keyitem = _this$props.keyitem,\n          title = _this$props.title,\n          label = _this$props.label,\n          remove = _this$props.remove;\n\n      this.onClick = function (event) {\n        _this2.setState({\n          anchor: event.currentTarget\n        });\n      };\n\n      this.onClose = function () {\n        _this2.setState({\n          anchor: null\n        });\n      };\n\n      var items = state.Database.getKeyValues(state, keyitem);\n\n      if (remove !== undefined) {\n        this.remove = function () {\n          state.Navigate.onClickPath(state, remove, keyitem);\n\n          _this2.onClose();\n        };\n      } else {\n        this.remove = function () {\n          state.Navigate.onClickPath(state, 'path', keyitem);\n\n          _this2.onClose();\n        };\n      }\n\n      ;\n      var icon, lab;\n\n      if (label === \"\") {\n        icon = /*#__PURE__*/React.createElement(NullIcon, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 11\n          }\n        });\n        lab = keyitem;\n      } else {\n        icon = /*#__PURE__*/React.createElement(SelIcon, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 11\n          }\n        });\n        lab = label;\n      }\n\n      ;\n      items.sort(state.Utils.ascending);\n      var menu;\n\n      if (items.length > 0) {\n        menu = /*#__PURE__*/React.createElement(Items, {\n          anchor: this.state.anchor,\n          state: state,\n          classes: classes,\n          onclose: this.onClose,\n          onclick: this.onClick,\n          items: items,\n          keyitem: keyitem,\n          title: title,\n          label: label,\n          remove: this.remove,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 11\n          }\n        });\n      } else {\n        menu = /*#__PURE__*/React.createElement(Range, {\n          anchor: this.state.anchor,\n          state: state,\n          classes: classes,\n          onclose: this.onClose,\n          onclick: this.onClick,\n          items: items,\n          keyitem: keyitem,\n          title: title,\n          label: label,\n          remove: this.remove,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 11\n          }\n        });\n      }\n\n      ;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.values,\n        key: \"selectValue-\" + keyitem,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 8\n        }\n      }, /*#__PURE__*/React.createElement(Chip, {\n        icon: icon,\n        label: lab,\n        title: title,\n        className: classes.selectchip,\n        variant: \"outlined\",\n        \"aria-owns\": this.state.anchor ? 'values-menu' : undefined,\n        \"aria-haspopup\": \"true\",\n        onClick: this.onClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 9\n        }\n      }), menu);\n    }\n  }]);\n\n  return SelectValueMenu;\n}(Component);\n\nSelectValueMenu.propTypes = {\n  classes: PropTypes.object.isRequired\n};\nexport default withStyles(styles)(SelectValueMenu);","map":{"version":3,"sources":["/home/franktt/react/varseltavle_new/src/react/SelectValueMenuComponent.js"],"names":["React","Component","PropTypes","withStyles","Menu","MenuItem","Chip","SelIcon","NullIcon","SelectValue","Remove","Reload","Edit","styles","theme","settings","button","values","display","marginLeft","selectchip","margin","spacing","cursor","color","borderColor","reload","marginRight","height","edit","remove","renderMenuItem","classes","state","keyitem","valueitem","valueindex","vals","Path","select","val","tpos","undefined","indexOf","Items","props","anchor","onclose","items","mapFunction","item","index","Boolean","Database","makeKeytrg","keytrg","Min","map","Max","Range","range","getRange","setValue","value","setRangeValue","input","SelectValueMenu","title","label","onClick","event","setState","currentTarget","onClose","getKeyValues","Navigate","onClickPath","icon","lab","sort","Utils","ascending","menu","length","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Chip from '@material-ui/core/Chip';\nimport SelIcon from '@material-ui/icons/Done';\nimport NullIcon from '@material-ui/icons/Clear';\nimport SelectValue from './SelectValueComponent';\nimport Remove     from './RemoveComponent';\nimport Reload     from './ReloadComponent';\nimport Edit     from './EditComponent';\n\nconst styles = theme => ({\n    settings:{},\n    button:{},\n    values: {\n\tdisplay: 'inline-block',\n        marginLeft: 'auto',\n    },\n    selectchip: {\n        margin: theme.spacing(1),\n\tcursor: \"pointer\",\n        color:\"red\",\n        borderColor:\"blue\",\n    },\n    reload: {\n\tdisplay: 'inline-block',\n        marginRight: 'auto',\n\theight:'100%',\n    },\n    edit: {\n\tdisplay: 'inline-block',\n        marginRight: 'auto',\n\theight:'100%',\n    },\n    remove: {\n\tdisplay: 'inline-block',\n        marginRight: 'auto',\n\theight:'100%',\n    },\n});\nfunction renderMenuItem(classes,state,keyitem,valueitem,valueindex) {\n    var vals=state.Path.select.val[keyitem]\n    //console.log(\"SelectValues:\",keyitem,valueitem,JSON.stringify(vals));\n    var tpos=-1;\n    if (vals !== undefined) {\n\ttpos=vals.indexOf(valueitem);\n    };\n    if (valueitem !== undefined) {\n\treturn (<MenuItem value={valueitem} key={valueitem}>\n\t\t<SelectValue state={state} keyitem={keyitem} valueitem={valueitem} tpos={tpos}/> \n\t\t</MenuItem>);\n    } else {\n\treturn null;\n    };\n}\nfunction Items(props) {\n    //onclick,title, label, \n    const {state,classes,anchor,onclose,items,keyitem,remove}=props;\n    var mapFunction= (item,index)=>renderMenuItem(classes,state,keyitem,item,index);\n    //console.log(\"Values.rendering\",items.length,JSON.stringify(anchor),Boolean(anchor));\n    return (<Menu\n               id=\"values-menu\"\n\t       anchorEl={anchor}\n               open={Boolean(anchor)}\n               onClose={onclose}\n\t    >\n\t     <MenuItem key=\"remove\" onClose={onclose} className={classes.remove}>\n\t        <Remove state={state} classes={{button:classes.button}} keyitem={keyitem} onclick={remove} onclose={onclose}/>\n\t     </MenuItem>\n\t     {mapFunction(state.Database.makeKeytrg(state,keyitem,state.Database.keytrg.Min),-1)}\n\t     {items.map(mapFunction)}\n\t     {mapFunction(state.Database.makeKeytrg(state,keyitem,state.Database.keytrg.Max),-1)}\n\t     {mapFunction(\"\",-1)}\n\t     <MenuItem key=\"reload\" onClose={onclose} className={classes.reload}>\n\t        <Reload state={state} onclose={onclose}/>\n\t     </MenuItem>\n\t    </Menu>\n\t   );\n}\nfunction Range(props) {\n    //onclick,title, label, \n    const {state,classes,anchor,onclose,keyitem, remove}=props;\n    var range=state.Path.getRange(state,keyitem);\n    //console.log(\"Range:\",JSON.stringify(range));\n    var setValue=function(range,index,value) {\n\tstate.Path.setRangeValue(state,range,index,value);\n    };\n    return (<Menu\n               id=\"values-menu\"\n\t       anchorEl={anchor}\n               open={Boolean(anchor)}\n               onClose={onclose}\n\t    >\n\t     <MenuItem key=\"remove\" onClose={onclose} className={classes.remove}>\n\t        <Remove state={state} classes={{button:classes.button}} keyitem={keyitem} onclick={remove} onclose={onclose}/>\n\t     </MenuItem>\n\t     <MenuItem key=\"min\" onClose={onclose} className={classes.edit}>\n\t        <Edit state={state} classes={{input:classes.button}} label={\"Min:\"} index={0} range={range} setvalue={setValue} onclose={onclose}/>\n\t     </MenuItem>\n\t     <MenuItem key=\"max\" onClose={onclose} className={classes.edit}>\n\t        <Edit state={state} classes={{input:classes.button}} label={\"Max:\"} index={1} range={range} setvalue={setValue} onclose={onclose}/>\n\t     </MenuItem>\n\t     <MenuItem key=\"reload\" onClose={onclose} className={classes.reload}>\n\t        <Reload state={state} onclose={onclose}/>\n\t     </MenuItem>\n\t    </Menu>\n\t   );\n}\nclass SelectValueMenu extends Component {\n    state={anchor:null};\n    render() {\n        const { classes, state, keyitem, title, label, remove } = this.props;\n\tthis.onClick = event => {this.setState({ anchor: event.currentTarget });};\n\tthis.onClose = () => {this.setState({ anchor: null });};\n\tvar items=state.Database.getKeyValues(state,keyitem);\n\tif (remove !== undefined) {\n\t    this.remove = () => {state.Navigate.onClickPath(state,remove,keyitem);this.onClose();};\n\t} else {\n\t    this.remove = () => {state.Navigate.onClickPath(state,'path',keyitem);this.onClose();};\n\t};\n\tvar icon,lab;\n\tif (label===\"\") {\n\t    icon=<NullIcon/>;\n\t    lab=keyitem;\n\t} else {\n\t    icon=<SelIcon/>;\n\t    lab=label;\n\t};\n\titems.sort(state.Utils.ascending);\n\tlet menu;\n\tif (items.length > 0) {\n\t    menu=<Items anchor={this.state.anchor} \n\t\t          state={state}\n\t\t          classes={classes}\n\t\t          onclose={this.onClose}\n\t\t          onclick={this.onClick}\n\t\t          items={items}\n\t\t          keyitem={keyitem}\n\t\t          title={title}\n\t\t          label={label}\n\t\t          remove={this.remove}\n\t\t/>;\n\t} else {\n\t    menu=<Range anchor={this.state.anchor} \n\t\t          state={state}\n\t\t          classes={classes}\n\t\t          onclose={this.onClose}\n\t\t          onclick={this.onClick}\n\t\t          items={items}\n\t\t          keyitem={keyitem}\n\t\t          title={title}\n\t\t          label={label}\n\t\t          remove={this.remove}\n\t\t/>;\n\t};\n\treturn (\n \t     <div className={classes.values} key={\"selectValue-\"+keyitem}>\n\t       <Chip\n                  icon={icon}\n                  label={lab}\n                  title={title}\n                  className={classes.selectchip}\n                  variant=\"outlined\"\n                  aria-owns={this.state.anchor ? 'values-menu' : undefined}\n                  aria-haspopup=\"true\"\n                  onClick={this.onClick}\n\t\t/>\n\t        {menu}\n\t    </div>);\n    }\n}\n\nSelectValueMenu.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(SelectValueMenu);\n"]},"metadata":{},"sourceType":"module"}