{"ast":null,"code":"//console.log(\"Loading ShowLib.js\");\nfunction Show() {\n  this.code = {\n    mSum: 0,\n    // cell mode\n    mSeries: 1,\n    // cell mode\n    mItem: 2,\n    // cell mode\n    mTable: 0,\n    // layout mode\n    mMap: 1 // layout mode\n\n  };\n  this.state = {\n    qtrash: 0,\n    // should we show trash contents?\n    cellMode: 0,\n    // sum, series, item\n    layoutMode: 0 // table, map\n\n  };\n\n  this.init = function (state) {\n    var par = \"Show\" + state.Utils.version;\n    state.Utils.init(par, this);\n  };\n\n  this.getDim = function (state) {\n    var colkey = state.Path.getColKey(state) || \"\";\n    var rowkey = state.Path.getRowKey(state) || \"\";\n\n    if (colkey !== \"\" && rowkey !== \"\") {\n      return 2;\n    } else if (colkey !== \"\" || rowkey !== \"\") {\n      return 1;\n    } else {\n      return 0;\n    }\n  };\n\n  this.setLayoutMode = function (state, mode) {\n    var om = this.state.layoutMode;\n    var o = this.getLayoutMode(state);\n    this.state.layoutMode = mode;\n    var n = this.getLayoutMode(state); //console.log(\"Setting layout mode:\",mode,\":\",o,\"->\",n);\n\n    if (o !== n) {\n      this.showAll(state);\n    } else if (om !== mode) {\n      this.showMode(state);\n    }\n  };\n\n  this.setCellMode = function (state, mode) {\n    var om = this.state.cellMode;\n    var o = this.getCellMode(state);\n    this.state.cellMode = mode;\n    var n = this.getCellMode(state); //console.log(\"Setting cell mode:\",mode,\":\",o,\"->\",n);\n\n    if (o !== n) {\n      this.showAll(state);\n    } else if (om !== mode) {\n      this.showMode(state);\n    }\n  };\n\n  this.getLayoutMode = function (state) {\n    //console.log(\"Getmode init:\",this.state.layoutMode,state.Matrix.cnt);\n    var mode = this.state.layoutMode;\n\n    if (mode === this.code.mMap && state.Matrix.cnt > state.Matrix.popSeries) {\n      mode = this.code.mTable;\n    }\n\n    return mode;\n  };\n\n  this.getCellMode = function (state) {\n    var mode = this.state.cellMode;\n\n    if (mode === this.code.mSingle && state.Matrix.cnt > state.Matrix.popSingle) {\n      mode = this.code.mSeries;\n    }\n\n    if (mode === this.code.mSeries && state.Matrix.cnt > state.Matrix.popSeries) {\n      mode = this.code.mSum;\n    }\n\n    return mode;\n  };\n\n  this.showMode = function (state) {\n    // show data on screen\n    var mSum = document.getElementById(\"modeSum\");\n    var mSeries = document.getElementById(\"modeSeries\");\n    var mSingle = document.getElementById(\"modeSingle\");\n    var mTable = document.getElementById(\"modeTable\");\n    var mMap = document.getElementById(\"modeMap\");\n    var layoutMode = this.getLayoutMode(state);\n    var cellMode = this.getCellMode(state);\n    this.showButton(state, mSum, cellMode === this.code.mSum, this.state.cellMode === this.code.mSum);\n    this.showButton(state, mSeries, cellMode === this.code.mSeries, this.state.cellMode === this.code.mSeries);\n    this.showButton(state, mSingle, cellMode === this.code.mSingle, this.state.cellMode === this.code.mSingle);\n    this.showButton(state, mTable, layoutMode === this.code.mTable, this.state.layoutMode === this.code.mTable);\n    this.showButton(state, mMap, layoutMode === this.code.mMap, this.state.layoutMode === this.code.mMap);\n    var mTrash = document.getElementById(\"trash\");\n    var mFullscreen = document.getElementById(\"fullscreen\");\n    this.showButton(state, mTrash, true, false);\n    this.showButton(state, mFullscreen, true, false);\n  };\n\n  this.showButton = function (state, item, main, sel) {\n    if (main && sel) {\n      item.setAttribute(\"style\", state.Html.getButtonStyle(state.Colors.colors.table, state.Colors.colors.fg, true));\n    } else if (main && !sel) {\n      item.setAttribute(\"style\", state.Html.getButtonStyle(state.Colors.colors.table, state.Colors.colors.fg, false));\n    } else if (!main && sel) {\n      item.setAttribute(\"style\", state.Html.getButtonStyle(state.Colors.colors.rest, state.Colors.colors.fg, true));\n    } else if (!main && !sel) {\n      item.setAttribute(\"style\", state.Html.getButtonStyle(state.Colors.colors.rest, state.Colors.colors.fg, false));\n    }\n  };\n\n  this.showAll = function (state, reload) {\n    // show data on screen\n    //var documentLog = document.getElementById(\"log\");\n    state.Html.setLog(state, \"Processing\");\n    console.log(\"this.Showing data.\");\n\n    if (reload === undefined || reload) {\n      state.Database.dbextract(state, function (matrix) {\n        // callback\n        //console.log(\"Updating matrix.\");\n        console.log(\"Showing path\");\n        this.showPath(state);\n        console.log(\"Showing trash\");\n        this.showTrash(state);\n        console.log(\"Showing matrix\");\n        this.showMatrix(state, matrix);\n        console.log(\"Pushing URL\");\n        state.Utils.pushUrl(state);\n      });\n    } else {\n      console.log(\"Not updating matrix.\");\n      state.Path.exportAllKeys(state);\n      this.showPath(state);\n      this.showTrash(state);\n    }\n\n    this.showMode(state);\n    state.Html.setLog(state);\n  };\n\n  this.showPath = function (state) {\n    //console.log(\"Keys:\",JSON.stringify(setup));\n    var item = document.getElementById(\"path\");\n    state.Html.removeChildren(item); //var lab;\n    //var rel=\"\";\n    //var title=\"\";\n    //path\n\n    var plen = state.Path.keys.path.length;\n\n    for (var ii = 0; ii < plen; ii++) {\n      var key = state.Path.keys.path[ii];\n      var val = state.Path.select.val[key];\n      state.Html.addPathElement(state, item, \"path\", key, val, \"Navigate.onClickPath(state,'path','\" + ii + \"');\", \"'\" + state.Path.select.where[key] + \"'\");\n    } // add eye\n\n\n    state.Html.addPathElement(state, item, \"eye\", null, \"\", \"Table view point.\"); // add table row/col\n\n    var sub = [];\n    var tlen = state.Path.other.table.length;\n\n    for (var ii = 0; ii < tlen; ii++) {\n      var key = state.Path.other.table[ii];\n      var val = state.Path.select.val[key];\n      state.Html.addPathElement(state, item, \"table\", key, val, \"Navigate.onClickPath(state,'table','\" + ii + \"');\", \"'\" + state.Path.other.table[ii] + \"'\");\n    } // add rest\n\n\n    var rlen = state.Path.other.rest.length;\n\n    for (var ii = 0; ii < rlen; ii++) {\n      var key = state.Path.other.rest[ii];\n      var val = state.Path.select.val[key];\n      state.Html.addPathElement(state, item, \"rest\", key, val, \"Navigate.onClickPath(state,'rest','\" + ii + \"');\", \"'\" + state.Path.other.rest[ii] + \"'\");\n    }\n  };\n\n  this.showTrash = function (state) {\n    var item = document.getElementById(\"trashRest\");\n    state.Html.removeChildren(item);\n\n    if (this.state.qtrash === 1) {\n      var lab;\n      var rel = \"\";\n      var title = \"\"; // path\n\n      var rlen = state.Path.trash.rest.length;\n\n      for (var ii = 0; ii < rlen; ii++) {\n        var key = state.Path.trash.rest[ii];\n        var val = state.Path.select.val[key];\n\n        if (state.Path.keys.path.indexOf(key) !== -1) {\n          val = undefined;\n        }\n\n        ;\n        state.Html.addPathElement(state, item, \"trashRest\", key, val, \"Navigate.onClickPath(state,'trash','\" + ii + \"');\", \"Trashed '\" + state.Path.trash.rest[ii] + \"'\");\n      }\n    }\n  };\n\n  this.showMatrix = function (state, matrix) {\n    var colkey = state.Path.getColKey(state) || \"\";\n    var rowkey = state.Path.getRowKey(state) || \"\";\n    var colvalues = [\"\"];\n    var rowvalues = [\"\"];\n    var item = document.getElementById(\"matrix\");\n    var skeys = state.Matrix.sortedKeys(state, state.Matrix.keyCnt);\n    var layoutMode = this.getLayoutMode(state);\n    var cellMode = this.getCellMode(state);\n    var dim = this.getDim(state);\n    state.Html.removeChildren(item);\n\n    if (layoutMode === this.code.mMap) {\n      var colvalues = state.Path.filterKeys(state, state.Matrix.values[colkey] || [\"\"]);\n      var rowvalues = state.Path.filterKeys(state, state.Matrix.values[rowkey] || [\"\"]);\n      state.Map2D.Show(state, matrix, item, skeys, colkey, colvalues, rowkey, rowvalues, cellMode);\n    } else if (dim === 0) {\n      console.log(\"0D:\", layoutMode, cellMode, colkey, rowkey, this.code.mSum, this.code.mSeries);\n      state.Table0D.Show(state, matrix, item, skeys, colkey, colvalues, rowkey, rowvalues, cellMode);\n    } else if (dim === 1) {\n      var colvalues = state.Path.filterKeys(state, state.Matrix.values[colkey] || [\"\"]);\n      state.Table1D.Show(state, matrix, item, skeys, colkey, colvalues, cellMode);\n    } else if (dim === 2) {\n      var colvalues = state.Path.filterKeys(state, state.Matrix.values[colkey] || [\"\"]);\n      var rowvalues = state.Path.filterKeys(state, state.Matrix.values[rowkey] || [\"\"]);\n      state.Table2D.Show(state, matrix, item, skeys, colkey, colvalues, rowkey, rowvalues, cellMode);\n    }\n\n    state.Html.rotateHeight(state);\n  };\n\n  this.useCanvas = function (state, matrix) {\n    // check if matrix elements have max 1 data\n    // loop over matrix\n    for (var ii in matrix) {\n      for (var jj in matrix[ii]) {\n        if (matrix[ii][jj].cnt > 1) {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  };\n\n  this.scale = function (xval, xmin, xmax, ymin, ymax) {\n    if (ymin > ymax) {\n      return ymin + (xval - xmin) * (ymax - ymin) / (xmax - xmin);\n    } else {\n      return (xval - xmin) * (ymax - ymin) / (xmax - xmin);\n    }\n  };\n}\n\n;\nexport default Show;","map":{"version":3,"sources":["/home/franktt/react/varseltavle/src/system/ShowLib.js"],"names":["Show","code","mSum","mSeries","mItem","mTable","mMap","state","qtrash","cellMode","layoutMode","init","par","Utils","version","getDim","colkey","Path","getColKey","rowkey","getRowKey","setLayoutMode","mode","om","o","getLayoutMode","n","showAll","showMode","setCellMode","getCellMode","Matrix","cnt","popSeries","mSingle","popSingle","document","getElementById","showButton","mTrash","mFullscreen","item","main","sel","setAttribute","Html","getButtonStyle","Colors","colors","table","fg","rest","reload","setLog","console","log","undefined","Database","dbextract","matrix","showPath","showTrash","showMatrix","pushUrl","exportAllKeys","removeChildren","plen","keys","path","length","ii","key","val","select","addPathElement","where","sub","tlen","other","rlen","lab","rel","title","trash","indexOf","colvalues","rowvalues","skeys","sortedKeys","keyCnt","dim","filterKeys","values","Map2D","Table0D","Table1D","Table2D","rotateHeight","useCanvas","jj","scale","xval","xmin","xmax","ymin","ymax"],"mappings":"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","sourcesContent":["//console.log(\"Loading ShowLib.js\");\n\nfunction Show() {\n    this.code={mSum:0,     // cell mode\n\t       mSeries:1,  // cell mode\n\t       mItem:2,     // cell mode\n\t       mTable:0,   // layout mode\n\t       mMap:1      // layout mode\n\t      };\n    this.state={qtrash:0,       // should we show trash contents?\n\t\tcellMode:0,     // sum, series, item\n\t\tlayoutMode:0    // table, map\n\t       };\n    this.init=function(state){\n\tvar par=\"Show\"+state.Utils.version;\n\tstate.Utils.init(par,this);\n    };\n    this.getDim=function(state) {\n\tvar colkey=state.Path.getColKey(state)||\"\";\n\tvar rowkey=state.Path.getRowKey(state)||\"\";\n\tif (colkey !== \"\" && rowkey !== \"\") {\n\t    return 2;\n\t} else if (colkey !== \"\" || rowkey !== \"\") {\n\t    return 1;\n\t} else  {\n\t    return 0;\n\t}  \n    };\n    this.setLayoutMode=function(state,mode) {\n\tvar om=this.state.layoutMode;\n\tvar o=this.getLayoutMode(state);\n\tthis.state.layoutMode=mode;\n\tvar n=this.getLayoutMode(state);\n\t//console.log(\"Setting layout mode:\",mode,\":\",o,\"->\",n);\n\tif (o !== n) {\n\t    this.showAll(state);\n\t} else if (om !== mode) {\n\t    this.showMode(state);\n\t}\n    };\n    this.setCellMode=function(state,mode) {\n\tvar om=this.state.cellMode;\n\tvar o=this.getCellMode(state);\n\tthis.state.cellMode=mode;\n\tvar n=this.getCellMode(state);\n\t//console.log(\"Setting cell mode:\",mode,\":\",o,\"->\",n);\n\tif (o !== n) {\n\t    this.showAll(state);\n\t} else if (om !== mode) {\n\t    this.showMode(state);\n\t}\n    };\n    this.getLayoutMode=function(state) {\n\t//console.log(\"Getmode init:\",this.state.layoutMode,state.Matrix.cnt);\n\tvar mode=this.state.layoutMode;\n\tif (mode  === this.code.mMap && state.Matrix.cnt > state.Matrix.popSeries) {\n\t    mode=this.code.mTable;\n\t}\n\treturn mode;\n    };\n    this.getCellMode=function(state) {\n\tvar mode=this.state.cellMode;\n\tif (mode  === this.code.mSingle && state.Matrix.cnt > state.Matrix.popSingle) {\n\t    mode=this.code.mSeries;\n\t}\n\tif (mode  === this.code.mSeries && state.Matrix.cnt > state.Matrix.popSeries) {\n\t    mode=this.code.mSum;\n\t}\n\treturn mode;\n    };\n    this.showMode=function(state) { // show data on screen\n\tvar mSum   = document.getElementById(\"modeSum\");\n\tvar mSeries = document.getElementById(\"modeSeries\");\n\tvar mSingle = document.getElementById(\"modeSingle\");\n\tvar mTable = document.getElementById(\"modeTable\");\n\tvar mMap   = document.getElementById(\"modeMap\");\n\tvar layoutMode = this.getLayoutMode(state);\n\tvar cellMode  = this.getCellMode(state);\n\tthis.showButton(state,mSum,    cellMode === this.code.mSum,      this.state.cellMode === this.code.mSum);\n\tthis.showButton(state,mSeries, cellMode === this.code.mSeries,   this.state.cellMode === this.code.mSeries);\n\tthis.showButton(state,mSingle, cellMode === this.code.mSingle,   this.state.cellMode === this.code.mSingle);\n\tthis.showButton(state,mTable,  layoutMode  === this.code.mTable,this.state.layoutMode === this.code.mTable);\n\tthis.showButton(state,mMap,    layoutMode  === this.code.mMap,  this.state.layoutMode === this.code.mMap);\n\tvar mTrash     = document.getElementById(\"trash\");\n\tvar mFullscreen = document.getElementById(\"fullscreen\");\n\tthis.showButton(state,mTrash,true,false);\n\tthis.showButton(state,mFullscreen,true,false);\n    };\n    this.showButton=function(state,item,main,sel) {\n\tif (main && sel) {\n\t    item.setAttribute(\"style\", state.Html.getButtonStyle(state.Colors.colors.table,state.Colors.colors.fg,true)  );\n\t} else if (main && ! sel) {\n\t    item.setAttribute(\"style\", state.Html.getButtonStyle(state.Colors.colors.table,state.Colors.colors.fg,false)  );\n\t} else if (! main && sel) {\n\t    item.setAttribute(\"style\", state.Html.getButtonStyle(state.Colors.colors.rest,state.Colors.colors.fg,true)  );\n\t} else if (! main && ! sel) {\n\t    item.setAttribute(\"style\", state.Html.getButtonStyle(state.Colors.colors.rest,state.Colors.colors.fg,false)  );\n\t}\n    };\n    this.showAll=function(state,reload) { // show data on screen\n\t//var documentLog = document.getElementById(\"log\");\n\tstate.Html.setLog(state,\"Processing\");\n\tconsole.log(\"this.Showing data.\");\n\tif (reload  === undefined || reload) {\n\t    state.Database.dbextract(state,function (matrix){  // callback\n\t\t//console.log(\"Updating matrix.\");\n\t\tconsole.log(\"Showing path\");\n\t\tthis.showPath(state);\n\t\tconsole.log(\"Showing trash\");\n\t\tthis.showTrash(state);\n\t\tconsole.log(\"Showing matrix\");\n\t\tthis.showMatrix(state,matrix);\n\t\tconsole.log(\"Pushing URL\");\n\t\tstate.Utils.pushUrl(state);\n\t    });\n\t} else {\n\t    console.log(\"Not updating matrix.\");\n\t    state.Path.exportAllKeys(state);\n\t    this.showPath(state);\n\t    this.showTrash(state);\n\t}\n\tthis.showMode(state);\n\tstate.Html.setLog(state);\n    };\n    this.showPath=function(state) {\n\t//console.log(\"Keys:\",JSON.stringify(setup));\n\tvar item=document.getElementById(\"path\");\n\tstate.Html.removeChildren(item);\n\t//var lab;\n\t//var rel=\"\";\n\t//var title=\"\";\n\t//path\n\tvar plen = state.Path.keys.path.length;\n\tfor (var ii = 0; ii < plen; ii++) {\n\t    var key=state.Path.keys.path[ii];\n\t    var val=state.Path.select.val[key];\n\t    state.Html.addPathElement(state,item,\"path\",key,val,\n\t\t\t\t\"Navigate.onClickPath(state,'path','\"+ii+\"');\",\n\t\t\t\t\"'\"+state.Path.select.where[key]+\"'\");\n\t}\n\t// add eye\n\tstate.Html.addPathElement(state,item,\"eye\",null,\"\",\"Table view point.\");\n\t// add table row/col\n\tvar sub=[];\n\tvar tlen = state.Path.other.table.length;\n\tfor (var ii = 0; ii < tlen; ii++) {\n\t    var key=state.Path.other.table[ii];\n\t    var val=state.Path.select.val[key];\n\t    state.Html.addPathElement(state,item,\"table\",key,val,\n\t\t\t\t\"Navigate.onClickPath(state,'table','\"+ii+\"');\",\n\t\t\t\t\"'\"+state.Path.other.table[ii]+\"'\");\n\t}\n\t// add rest\n\tvar rlen = state.Path.other.rest.length;\n\tfor (var ii = 0; ii < rlen; ii++) {\n\t    var key=state.Path.other.rest[ii];\n\t    var val=state.Path.select.val[key];\n\t    state.Html.addPathElement(state,item,\"rest\",key,val,\n\t\t\t\t\"Navigate.onClickPath(state,'rest','\"+ii+\"');\",\n\t\t\t\t\"'\"+state.Path.other.rest[ii]+\"'\");\n\t}\n    };\n    this.showTrash=function(state) {\n\tvar item=document.getElementById(\"trashRest\");\n\tstate.Html.removeChildren(item);\n\tif (this.state.qtrash  === 1) {\n\t    var lab;\n\t    var rel=\"\";\n\t    var title=\"\";\n\t    // path\n\t    var rlen = state.Path.trash.rest.length;\n\t    for (var ii = 0; ii < rlen; ii++) {\n\t\tvar key=state.Path.trash.rest[ii];\n\t\tvar val=state.Path.select.val[key];\n\t\tif (state.Path.keys.path.indexOf(key) !== -1) { val=undefined;};\n\t\tstate.Html.addPathElement(state,item,\"trashRest\",key,val,\n\t\t\t\t    \"Navigate.onClickPath(state,'trash','\"+ii+\"');\",\n\t\t\t\t    \"Trashed '\"+state.Path.trash.rest[ii]+\"'\");\n\t    }\n\t}\n    };\n    this.showMatrix=function(state,matrix) {\n\tvar colkey=state.Path.getColKey(state)||\"\";\n\tvar rowkey=state.Path.getRowKey(state)||\"\";\n\tvar colvalues=[\"\"];\n\tvar rowvalues=[\"\"];\n\tvar item=document.getElementById(\"matrix\");\n\tvar skeys=state.Matrix.sortedKeys(state,state.Matrix.keyCnt);\n\tvar layoutMode = this.getLayoutMode(state);\n\tvar cellMode  = this.getCellMode(state);\n\tvar dim=this.getDim(state)\n\tstate.Html.removeChildren(item);\n\tif (layoutMode  === this.code.mMap) {\n\t    var colvalues=state.Path.filterKeys(state,state.Matrix.values[colkey]||[\"\"]);\n\t    var rowvalues=state.Path.filterKeys(state,state.Matrix.values[rowkey]||[\"\"]);\n\t    state.Map2D.Show(state,matrix,item,skeys,colkey,colvalues,rowkey,rowvalues,cellMode)\n\t} else if (dim  === 0) {\n\t    console.log(\"0D:\",layoutMode,cellMode,colkey,rowkey,this.code.mSum,this.code.mSeries);\n\t    state.Table0D.Show(state,matrix,item,skeys,colkey,colvalues,rowkey,rowvalues,cellMode)\n\t} else if (dim === 1) {\n\t    var colvalues=state.Path.filterKeys(state,state.Matrix.values[colkey]||[\"\"]);\n\t    state.Table1D.Show(state,matrix,item,skeys,colkey,colvalues,cellMode)\n\t} else if (dim === 2) {\n\t    var colvalues=state.Path.filterKeys(state,state.Matrix.values[colkey]||[\"\"]);\n\t    var rowvalues=state.Path.filterKeys(state,state.Matrix.values[rowkey]||[\"\"]);\n\t    state.Table2D.Show(state,matrix,item,skeys,colkey,colvalues,rowkey,rowvalues,cellMode)\n\t}\n\tstate.Html.rotateHeight(state);\n    };\n    this.useCanvas=function(state,matrix) {    // check if matrix elements have max 1 data\n\t// loop over matrix\n\tfor (var ii in matrix) {\n\t    for (var jj in matrix[ii]) {\n\t\tif (matrix[ii][jj].cnt > 1) {\n\t\t    return false;\n\t\t}\n\t    }\n\t}\n\treturn true;\n    };\n    this.scale=function(xval,xmin,xmax,ymin,ymax) {\n\tif (ymin>ymax) {\n\t    return ymin + (xval-xmin)*(ymax-ymin)/(xmax-xmin);\n\t} else {\n\t    return (xval-xmin)*(ymax-ymin)/(xmax-xmin);\n\t}\n    }\n};\nexport default Show;\n"]},"metadata":{},"sourceType":"module"}