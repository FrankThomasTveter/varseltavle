{"ast":null,"code":"import _classCallCheck from \"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _objectWithoutProperties from \"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"/home/franktt/react/varseltavle/src/react/Table2DComponent.js\";\nimport React, { Component } from \"react\";\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport { StickyTable, Row, Cell } from 'react-sticky-table';\nimport 'react-sticky-table/dist/react-sticky-table.css';\nimport SummaryCell from './SummaryCell';\nimport SeriesCell from './SeriesCell';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid'; //import TableCell from '@material-ui/core/TableCell';\n//import TableSortLabel from '@material-ui/core/TableSortLabel';\n\nconsole.log(\"Inside Table.\");\n\nvar styles = function styles(theme) {\n  return {\n    root: {\n      flexGrow: 1,\n      height: '100%',\n      width: '100%'\n    },\n    paper: {\n      padding: theme.spacing.unit * 2,\n      textAlign: 'left'\n    },\n    table: {\n      textAlign: 'left',\n      padding: theme.spacing.unit * 2,\n      cursor: \"pointer\",\n      height: '100%',\n      width: '100%'\n    },\n    cell: {\n      cursor: \"pointer\"\n    }\n  };\n}; //function onCellClick(event) {\n//    var rowid=event.target.getAttribute(\"rowid\");\n//    event.target.innerHTML = rowid;\n//}\n\n\nfunction getStep(state, colvalues, cellMode) {\n  var step = 1;\n\n  if (cellMode === state.Show.code.mSeries) {\n    step = Math.max(1, Math.ceil(colvalues.length / 20));\n  }\n\n  return step;\n}\n\nfunction FirstDataCell(props) {\n  var rowkey = props.rowkey,\n      onclick = props.onclick,\n      title = props.title;\n  console.log(\"Making first data cell.\");\n  return React.createElement(Cell, {\n    onClick: onclick,\n    title: title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, rowkey);\n}\n\nfunction FirstHdrCell(props) {\n  var colkey = props.colkey,\n      rowkey = props.rowkey;\n  var label = rowkey + \"\\\\\" + colkey;\n  console.log(\"Making first header cell.\", label);\n  return React.createElement(Cell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, label);\n} // ---------------- DATA\n\n\nfunction DataCell(props) {\n  var state = props.state,\n      mode = props.mode,\n      other = _objectWithoutProperties(props, [\"state\", \"mode\"]);\n\n  if (mode === state.Show.code.mSum) {\n    return React.createElement(SummaryCell, Object.assign({}, other, {\n      state: state,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }));\n  } else {\n    return React.createElement(SeriesCell, Object.assign({}, other, {\n      state: state,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }));\n  }\n}\n\nfunction renderDataCell(classes, state, colkey, colvalues, rowkey, rowval, rowindex, rowwhere, mode, step, val, index) {\n  console.log(\"Making data cell:\", rowval, val);\n  var title = state.Database.getWhereDetail(colkey, colvalues[index]);\n\n  if ((index - 1) % step === 0) {\n    var clen = colvalues.length; // get elements and range\n\n    var kk;\n    var elements = undefined;\n    var range = [undefined, undefined];\n\n    if (state.React.matrix !== undefined) {\n      range = state.Matrix.getRange(state.React.matrix, colvalues, [rowval]);\n\n      for (kk = index; kk < Math.min(clen, index + step); kk++) {\n        var element = state.Matrix.getMatrixElement(colvalues[kk], rowval, state.React.matrix);\n\n        if (element === undefined) {} else {\n          //console.log(\"Found:\",colvalues[kk],rowval);\n          if (elements === undefined) {\n            elements = [];\n          }\n\n          ;\n          elements.push(element);\n        }\n      }\n\n      ;\n    } // get count and colwhere\n\n\n    var cnt = 0;\n    var colwhere = \"\";\n\n    for (kk = index; kk < Math.min(clen, index + step); kk++) {\n      if (colwhere !== \"\") {\n        colwhere = colwhere + \" or \";\n      }\n\n      colwhere = colwhere + state.Database.getWhereDetail(colkey, colvalues[kk]);\n      cnt = cnt + 1;\n    }\n\n    ; // make onclick and title\n\n    var onclick = function onclick() {\n      return state.Layout.selectItem(colkey, rowkey, colvalues[index], rowval, colwhere, rowwhere, cnt, 1);\n    };\n\n    return React.createElement(DataCell, {\n      classes: classes,\n      state: state,\n      key: \"dat-\".concat(colkey, \"-\").concat(rowkey),\n      index: index,\n      onclick: onclick,\n      title: title,\n      colkey: colkey,\n      rowkey: rowkey,\n      colval: val,\n      rowval: rowval,\n      colwhere: colwhere,\n      rowwhere: rowwhere,\n      elements: elements,\n      mode: mode,\n      step: step,\n      range: range,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    });\n  } else {\n    return;\n  }\n}\n\nfunction dataRow(classes, state, colkey, rowkey, colvalues, mode, step, rowval, rowindex) {\n  var rowwhere = state.Database.getWhereDetail(rowkey, rowval);\n\n  var onclick = function onclick() {\n    return state.Layout.selectKey(rowkey, rowval, rowwhere, 1);\n  };\n\n  var mapFunction = function mapFunction(val, index) {\n    return renderDataCell(classes, state, colkey, rowkey, rowval, rowindex, rowwhere, mode, step, val, index);\n  };\n\n  return React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, React.createElement(FirstDataCell, {\n    rowkey: rowkey,\n    onclick: onclick,\n    title: rowwhere,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }), colvalues.map(mapFunction));\n}\n\n;\n\nfunction renderZeroRow(classes, state, colkey, colvalues, step) {\n  return React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, React.createElement(Cell, {\n    classes: classes,\n    state: state,\n    key: \"col\",\n    index: 0,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }));\n}\n\n;\n\nfunction DataRows(props) {\n  var classes = props.classes,\n      state = props.state,\n      step = props.step,\n      colkey = props.colkey,\n      colvalues = props.colvalues,\n      rowkey = props.rowkey,\n      rowvalues = props.rowvalues,\n      mode = props.mode;\n  console.log(\"Making data rows.\", rowkey, JSON.stringify(rowvalues));\n\n  var mapFunction = function mapFunction(val, index) {\n    return dataRow(classes, state, colkey, rowkey, colvalues, mode, step, val, index);\n  };\n\n  if (rowvalues.length === 0) {\n    return renderZeroRow(classes, state, colkey, colvalues, step);\n  } else {\n    return rowvalues.map(mapFunction);\n  }\n} // ---------------- HDR\n\n\nfunction renderHdrCell(classes, state, colkey, colvalues, rowkey, step, val, index) {\n  if ((index - 1) % step === 0) {\n    var colwhere = \"\";\n    var cnt = 0;\n    var clen = colvalues.length;\n\n    for (var kk = index; kk < Math.min(clen, index + step); kk++) {\n      if (colwhere !== \"\") {\n        colwhere = colwhere + \" or \";\n      }\n\n      colwhere = colwhere + state.Database.getWhereDetail(colkey, colvalues[kk]);\n      cnt = cnt + 1;\n    }\n\n    ;\n\n    var onclick = function onclick() {\n      return state.Layout.selectKey(colkey, colvalues[index], colwhere, cnt);\n    };\n\n    var title = colwhere;\n    return React.createElement(Cell, {\n      classes: classes,\n      state: state,\n      key: \"col-\".concat(colkey),\n      index: index,\n      onclick: onclick,\n      title: title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    });\n  } else {\n    return;\n  }\n}\n\nfunction HdrRow(props) {\n  var classes = props.classes,\n      state = props.state,\n      step = props.step,\n      colkey = props.colkey,\n      colvalues = props.colvalues,\n      rowkey = props.rowkey; //, rowvalues\n\n  console.log(\"Making header row.\", colkey, JSON.stringify(colvalues));\n\n  var mapFunction = function mapFunction(val, index) {\n    return renderHdrCell(classes, state, colkey, colvalues, rowkey, step, val, index);\n  };\n\n  return React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, React.createElement(FirstHdrCell, {\n    colkey: colkey,\n    rowkey: rowkey,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }), colvalues.map(mapFunction));\n} // ---------------- Details\n\n\nfunction Details(props) {\n  var state = props.state; // classes, \n\n  var colkey = state.Path.getColKey(state) || \"\";\n  var rowkey = state.Path.getRowKey(state) || \"\";\n  var colvalues = state.Path.filterKeys(state, state.Matrix.values[colkey] || [\"\"]);\n  var rowvalues = state.Path.filterKeys(state, state.Matrix.values[rowkey] || [\"\"]);\n  var cellMode = state.Show.getCellMode();\n  var step = getStep(state, colvalues, cellMode);\n  return React.createElement(\"div\", {\n    style: {\n      width: '100%',\n      height: '100%'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }, React.createElement(StickyTable, {\n    state: state,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }, React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, React.createElement(Cell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, \"1 - \"), React.createElement(Cell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, \"1 # \"), React.createElement(Cell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, \"1 * \"), React.createElement(Cell, {\n    rowid: 1,\n    onClick: onCellClick,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, \"Click Me!\")), React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, React.createElement(Cell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, \"2 - \"), React.createElement(Cell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, \"2 # \"), React.createElement(Cell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, \"2 * \"), React.createElement(Cell, {\n    rowid: 2,\n    onClick: onCellClick,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, \"Click Me!\")), React.createElement(HdrRow, {\n    state: state,\n    step: step,\n    colkey: colkey,\n    colvalues: colvalues,\n    rowkey: rowkey,\n    rowvalues: rowvalues,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  })));\n} //\t      <DataRows state={state} step={step} colkey={colkey} colvalues={colvalues} rowkey={rowkey} rowvalues={rowvalues} mode={cellMode}/>\n\n\nfunction onCellClick(event) {\n  var rowid = event.target.getAttribute(\"rowid\");\n  event.target.innerHTML = rowid;\n}\n\nvar Table =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Table, _Component);\n\n  function Table(props) {\n    var _this;\n\n    _classCallCheck(this, Table);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Table).call(this, props));\n    _this.state = props.state;\n    return _this;\n  }\n\n  _createClass(Table, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          state = _this$props.state;\n      console.log(\"##### Rendering Table2D.\");\n      return React.createElement(\"div\", {\n        className: classes.root,\n        style: {\n          width: '100%',\n          height: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        container: true,\n        spacing: 24,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(Paper, {\n        className: classes.table,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(Details, {\n        state: state,\n        classes: classes,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return Table;\n}(Component);\n\nTable.propTypes = {\n  classes: PropTypes.object.isRequired\n};\nexport default withStyles(styles)(Table);","map":{"version":3,"sources":["/home/franktt/react/varseltavle/src/react/Table2DComponent.js"],"names":["React","Component","PropTypes","withStyles","StickyTable","Row","Cell","SummaryCell","SeriesCell","Paper","Grid","console","log","styles","theme","root","flexGrow","height","width","paper","padding","spacing","unit","textAlign","table","cursor","cell","getStep","state","colvalues","cellMode","step","Show","code","mSeries","Math","max","ceil","length","FirstDataCell","props","rowkey","onclick","title","FirstHdrCell","colkey","label","DataCell","mode","other","mSum","renderDataCell","classes","rowval","rowindex","rowwhere","val","index","Database","getWhereDetail","clen","kk","elements","undefined","range","matrix","Matrix","getRange","min","element","getMatrixElement","push","cnt","colwhere","Layout","selectItem","dataRow","selectKey","mapFunction","map","renderZeroRow","DataRows","rowvalues","JSON","stringify","renderHdrCell","HdrRow","Details","Path","getColKey","getRowKey","filterKeys","values","getCellMode","onCellClick","event","rowid","target","getAttribute","innerHTML","Table","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport { StickyTable, Row, Cell } from 'react-sticky-table';\nimport 'react-sticky-table/dist/react-sticky-table.css';\nimport SummaryCell from './SummaryCell';\nimport SeriesCell from './SeriesCell';\n\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\n\n//import TableCell from '@material-ui/core/TableCell';\n//import TableSortLabel from '@material-ui/core/TableSortLabel';\n\nconsole.log(\"Inside Table.\")\n\nconst styles = theme => ({\n    root: {\n        flexGrow: 1,\n\theight: '100%',\n\twidth: '100%',\n    },\n    paper: {\n        padding: theme.spacing.unit * 2,\n        textAlign: 'left',\n    },\n    table: {\n        textAlign: 'left',\n        padding: theme.spacing.unit * 2,\n\tcursor: \"pointer\",\n\theight: '100%',\n\twidth: '100%',\n    },\n    cell : {cursor: \"pointer\",},\n});\n\n//function onCellClick(event) {\n//    var rowid=event.target.getAttribute(\"rowid\");\n//    event.target.innerHTML = rowid;\n//}\nfunction getStep(state,colvalues,cellMode) {\n    var step=1;\n    if (cellMode === state.Show.code.mSeries) {step=Math.max(1,Math.ceil(colvalues.length/20));}\n    return step;\n}\nfunction FirstDataCell (props) {\n    const { rowkey, onclick, title } = props;\n    console.log(\"Making first data cell.\");\n    return (<Cell onClick={onclick} title={title}>{rowkey}</Cell>);\n}\nfunction FirstHdrCell (props) {\n    const { colkey, rowkey } = props;\n    var label=rowkey + \"\\\\\" + colkey;\n    console.log(\"Making first header cell.\",label);\n    return (<Cell>{label}</Cell>);\n}\n// ---------------- DATA\nfunction DataCell(props) {\n    const {state,mode,...other}=props;\n    if (mode===state.Show.code.mSum) {\n\treturn <SummaryCell {...other} state={state}/>\n    } else {\n\treturn <SeriesCell {...other} state={state}/>\n    }\n}\nfunction renderDataCell(classes,state,colkey,colvalues,rowkey,rowval,rowindex,rowwhere,mode,step,val,index) {\n    console.log(\"Making data cell:\",rowval,val);\n    var title=state.Database.getWhereDetail(colkey,colvalues[index]);\n    if ((index-1)%step === 0) {\n\tvar clen=colvalues.length;\n\t// get elements and range\n\tvar kk;\n        var elements=undefined\n\tvar range=[undefined,undefined];\n\tif (state.React.matrix!==undefined) {\n\t    range=state.Matrix.getRange(state.React.matrix,colvalues,[rowval]);\n            for (kk=index;kk<Math.min(clen,index+step);kk++) {\n\t\tvar element=state.Matrix.getMatrixElement(colvalues[kk],rowval,state.React.matrix);\n\t\tif (element === undefined) {\n\t\t} else {\n                    //console.log(\"Found:\",colvalues[kk],rowval);\n                    if (elements===undefined) {elements=[];};\n                    elements.push(element);\n\t\t}\n            };               \n\t}\n\t// get count and colwhere\n        var cnt=0;\n        var colwhere = \"\";\n        for (kk=index;kk<Math.min(clen,index+step);kk++) {\n\t    if (colwhere !== \"\") {colwhere=colwhere + \" or \";}\n\t    colwhere=colwhere + state.Database.getWhereDetail(colkey,colvalues[kk]);\n\t    cnt=cnt+1;\n        };               \n\t// make onclick and title\n\tvar onclick=() => state.Layout.selectItem(colkey,rowkey,colvalues[index],rowval,colwhere,rowwhere,cnt,1);\n\treturn (<DataCell classes={classes} state={state} key={`dat-${colkey}-${rowkey}`} index={index} onclick={onclick} title={title} \n\t\tcolkey={colkey} rowkey={rowkey} colval={val} rowval={rowval} colwhere={colwhere} rowwhere={rowwhere} \n\t\telements={elements} mode={mode} step={step} range={range}/>);\n    } else {\n\treturn;\n    }\n}\nfunction dataRow(classes,state,colkey,rowkey,colvalues,mode,step,rowval,rowindex) {\n    var rowwhere=state.Database.getWhereDetail(rowkey,rowval);\n    var onclick=() => state.Layout.selectKey(rowkey,rowval,rowwhere,1);\n    var mapFunction= (val,index)=>renderDataCell(classes,state,colkey,rowkey,rowval,rowindex,rowwhere,mode,step,val,index);\n    return (<Row><FirstDataCell rowkey={rowkey} onclick={onclick} title={rowwhere}/>{colvalues.map(mapFunction)}</Row>);\n};\nfunction renderZeroRow(classes,state,colkey,colvalues,step) {\n    return <Row><Cell classes={classes} state={state} key={`col`} index={0}/></Row>;\n};\nfunction DataRows(props) {\n    const { classes, state, step, colkey,colvalues, rowkey, rowvalues, mode } = props;\n    console.log(\"Making data rows.\",rowkey,JSON.stringify(rowvalues));\n    var mapFunction= (val,index)=>dataRow(classes,state,colkey,rowkey,colvalues,mode,step,val,index);\n    if (rowvalues.length===0) {\n\treturn renderZeroRow(classes,state,colkey,colvalues,step);\n    } else {\n\treturn (rowvalues.map(mapFunction));\n    }\n}\n// ---------------- HDR\nfunction renderHdrCell(classes,state,colkey,colvalues,rowkey,step,val,index) {\n    if ((index-1)%step === 0) {\n        var colwhere = \"\";\n        var cnt=0\n\tvar clen=colvalues.length;\n        for (var kk=index;kk<Math.min(clen,index+step);kk++) {\n            if (colwhere !== \"\") {colwhere=colwhere + \" or \";}\n            colwhere=colwhere + state.Database.getWhereDetail(colkey,colvalues[kk]);\n            cnt=cnt+1;\n        };               \n\tvar onclick=() => state.Layout.selectKey(colkey,colvalues[index],colwhere,cnt);\n\tvar title=colwhere;\n\treturn (<Cell classes={classes} state={state} key={`col-${colkey}`} index={index} onclick={onclick} title={title}/>);\n    } else {\n\treturn;\n    }\n}\nfunction HdrRow(props) {\n    const { classes, state, step, colkey, colvalues, rowkey } = props; //, rowvalues\n    console.log(\"Making header row.\",colkey,JSON.stringify(colvalues));\n    var mapFunction= (val,index)=>renderHdrCell(classes,state,colkey,colvalues,rowkey,step,val,index);\n    return (<Row>\n\t    <FirstHdrCell colkey={colkey} rowkey={rowkey}/>\n\t    {colvalues.map(mapFunction)}\n\t    </Row>);\n}\n// ---------------- Details\nfunction Details(props) {\n    const { state } = props; // classes, \n    var colkey = state.Path.getColKey(state)||\"\";\n    var rowkey = state.Path.getRowKey(state)||\"\";\n    var colvalues = state.Path.filterKeys(state,state.Matrix.values[colkey]||[\"\"]);\n    var rowvalues = state.Path.filterKeys(state,state.Matrix.values[rowkey]||[\"\"]);\n    var cellMode  = state.Show.getCellMode();\n    var step=getStep(state,colvalues,cellMode);\n    return (<div  style={{width: '100%', height: '100%'}}>\n        <StickyTable state={state}>\n\t      <Row><Cell>1 - </Cell><Cell>1 # </Cell><Cell>1 * </Cell><Cell rowid={1} onClick={onCellClick}>Click Me!</Cell></Row>\n\t      <Row><Cell>2 - </Cell><Cell>2 # </Cell><Cell>2 * </Cell><Cell rowid={2} onClick={onCellClick}>Click Me!</Cell></Row>\n\t      <HdrRow   state={state} step={step} colkey={colkey} colvalues={colvalues} rowkey={rowkey} rowvalues={rowvalues}/>\n        </StickyTable>\n           </div>);\n }\n//\t      <DataRows state={state} step={step} colkey={colkey} colvalues={colvalues} rowkey={rowkey} rowvalues={rowvalues} mode={cellMode}/>\n\nfunction onCellClick(event) {\n    var rowid=event.target.getAttribute(\"rowid\");\n    event.target.innerHTML = rowid;\n}\nclass Table extends Component {\n    constructor(props) {\n\tsuper(props);\n\tthis.state=props.state;\n    }\n    componentDidMount() {} \n    render() {\n\tconst { classes, state } = this.props;\n\tconsole.log(\"##### Rendering Table2D.\");\n\treturn (<div className={classes.root}  style={{width: '100%', height: '100%'}}>\n\t\t   <Grid container spacing={24}>\n\t\t      <Grid item xs={12} > \n                         { <Paper className={classes.table}>\n\t\t              <Details state={state} classes={classes}/>\n                           </Paper>}\n                      </Grid>\n                   </Grid>\n\t        </div>);\n    }\n}\n\nTable.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Table);\n"]},"metadata":{},"sourceType":"module"}