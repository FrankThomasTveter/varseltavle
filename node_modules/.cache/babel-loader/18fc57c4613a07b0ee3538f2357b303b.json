{"ast":null,"code":"import _classCallCheck from\"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{withStyles}from'@material-ui/core/styles';import Menu from'@material-ui/core/Menu';import MenuItem from'@material-ui/core/MenuItem';import Chip from'@material-ui/core/Chip';import SelIcon from'@material-ui/icons/Done';import NullIcon from'@material-ui/icons/Clear';import SelectValue from'./SelectValueComponent';import Remove from'./RemoveComponent';import Reload from'./ReloadComponent';var styles=function styles(theme){return{settings:{},button:{},values:{display:'inline-block',marginLeft:'auto'},selectchip:{margin:theme.spacing.unit,cursor:\"pointer\",color:\"red\",borderColor:\"blue\"},reload:{display:'inline-block',marginRight:'auto',height:'100%'},remove:{display:'inline-block',marginRight:'auto',height:'100%'}};};function renderMenuItem(classes,state,keyitem,valueitem,valueindex){var vals=state.Path.select.val[keyitem];//console.log(\"SelectValues:\",keyitem,valueitem,JSON.stringify(vals));\nvar tpos=-1;if(vals!==undefined){tpos=vals.indexOf(valueitem);};if(valueitem!==undefined){return React.createElement(MenuItem,{value:valueitem,key:valueitem},React.createElement(SelectValue,{state:state,keyitem:keyitem,valueitem:valueitem,tpos:tpos}));}else{return null;};}var SelectValueMenu=/*#__PURE__*/function(_Component){_inherits(SelectValueMenu,_Component);function SelectValueMenu(){var _getPrototypeOf2;var _this;_classCallCheck(this,SelectValueMenu);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SelectValueMenu)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={anchor:null};return _this;}_createClass(SelectValueMenu,[{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,classes=_this$props.classes,state=_this$props.state,keyitem=_this$props.keyitem,title=_this$props.title,label=_this$props.label,remove=_this$props.remove;this.onClick=function(event){_this2.setState({anchor:event.currentTarget});};this.onClose=function(){_this2.setState({anchor:null});};var items=state.Database.getKeyValues(state,keyitem);if(remove!==undefined){this.remove=function(){state.Navigate.onClickPath(state,remove,keyitem);_this2.onClose();};}else{this.remove=function(){state.Navigate.onClickPath(state,'path',keyitem);_this2.onClose();};};items.sort(state.Utils.ascending);var mapFunction=function mapFunction(item,index){return renderMenuItem(classes,state,keyitem,item,index);};//console.log(\"Values.rendering\",items.length,JSON.stringify(anchor),Boolean(anchor));\nvar icon,lab;if(label===\"\"){icon=React.createElement(NullIcon,null);lab=keyitem;}else{icon=React.createElement(SelIcon,null);lab=label;};return React.createElement(\"div\",{className:classes.values,key:\"selectValue-\"+keyitem},React.createElement(Chip,{icon:icon,label:lab,title:title,className:classes.selectchip,variant:\"outlined\",\"aria-owns\":this.state.anchor?'values-menu':undefined,\"aria-haspopup\":\"true\",onClick:this.onClick}),React.createElement(Menu,{id:\"values-menu\",anchorEl:this.state.anchor,open:Boolean(this.state.anchor),onClose:this.onClose},React.createElement(MenuItem,{key:\"remove\",onClose:this.onClose,className:classes.remove},React.createElement(Remove,{state:state,classes:{button:classes.button},keyitem:keyitem,onclick:this.remove,onclose:this.onClose})),mapFunction(state.Database.makeKeytrg(state,keyitem,state.Database.keytrg.Min),-1),items.map(mapFunction),mapFunction(state.Database.makeKeytrg(state,keyitem,state.Database.keytrg.Max),-1),mapFunction(\"\",-1),React.createElement(MenuItem,{key:\"reload\",onClose:this.onClose,className:classes.reload},React.createElement(Reload,{state:state,onclose:this.onClose}))));}}]);return SelectValueMenu;}(Component);export default withStyles(styles)(SelectValueMenu);","map":{"version":3,"sources":["/home/franktt/react/varseltavle/src/react/SelectValueMenuComponent.js"],"names":["React","Component","withStyles","Menu","MenuItem","Chip","SelIcon","NullIcon","SelectValue","Remove","Reload","styles","theme","settings","button","values","display","marginLeft","selectchip","margin","spacing","unit","cursor","color","borderColor","reload","marginRight","height","remove","renderMenuItem","classes","state","keyitem","valueitem","valueindex","vals","Path","select","val","tpos","undefined","indexOf","SelectValueMenu","anchor","props","title","label","onClick","event","setState","currentTarget","onClose","items","Database","getKeyValues","Navigate","onClickPath","sort","Utils","ascending","mapFunction","item","index","icon","lab","Boolean","makeKeytrg","keytrg","Min","map","Max"],"mappings":"4vBAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CAEA,OAASC,UAAT,KAA2B,0BAA3B,CACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,CACA,MAAOC,CAAAA,QAAP,KAAqB,4BAArB,CACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,CACA,MAAOC,CAAAA,OAAP,KAAoB,yBAApB,CACA,MAAOC,CAAAA,QAAP,KAAqB,0BAArB,CACA,MAAOC,CAAAA,WAAP,KAAwB,wBAAxB,CACA,MAAOC,CAAAA,MAAP,KAAuB,mBAAvB,CACA,MAAOC,CAAAA,MAAP,KAAuB,mBAAvB,CAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAAAC,KAAK,QAAK,CACrBC,QAAQ,CAAC,EADY,CAErBC,MAAM,CAAC,EAFc,CAGrBC,MAAM,CAAE,CACXC,OAAO,CAAE,cADE,CAEJC,UAAU,CAAE,MAFR,CAHa,CAOrBC,UAAU,CAAE,CACRC,MAAM,CAAEP,KAAK,CAACQ,OAAN,CAAcC,IADd,CAEfC,MAAM,CAAE,SAFO,CAGRC,KAAK,CAAC,KAHE,CAIRC,WAAW,CAAC,MAJJ,CAPS,CAarBC,MAAM,CAAE,CACXT,OAAO,CAAE,cADE,CAEJU,WAAW,CAAE,MAFT,CAGXC,MAAM,CAAC,MAHI,CAba,CAkBrBC,MAAM,CAAE,CACXZ,OAAO,CAAE,cADE,CAEJU,WAAW,CAAE,MAFT,CAGXC,MAAM,CAAC,MAHI,CAlBa,CAAL,EAApB,CAwBA,QAASE,CAAAA,cAAT,CAAwBC,OAAxB,CAAgCC,KAAhC,CAAsCC,OAAtC,CAA8CC,SAA9C,CAAwDC,UAAxD,CAAoE,CAChE,GAAIC,CAAAA,IAAI,CAACJ,KAAK,CAACK,IAAN,CAAWC,MAAX,CAAkBC,GAAlB,CAAsBN,OAAtB,CAAT,CACA;AACA,GAAIO,CAAAA,IAAI,CAAC,CAAC,CAAV,CACA,GAAIJ,IAAI,GAAKK,SAAb,CAAwB,CAC3BD,IAAI,CAACJ,IAAI,CAACM,OAAL,CAAaR,SAAb,CAAL,CACI,EACD,GAAIA,SAAS,GAAKO,SAAlB,CAA6B,CAChC,MAAQ,qBAAC,QAAD,EAAU,KAAK,CAAEP,SAAjB,CAA4B,GAAG,CAAEA,SAAjC,EACP,oBAAC,WAAD,EAAa,KAAK,CAAEF,KAApB,CAA2B,OAAO,CAAEC,OAApC,CAA6C,SAAS,CAAEC,SAAxD,CAAmE,IAAI,CAAEM,IAAzE,EADO,CAAR,CAGI,CAJD,IAIO,CACV,MAAO,KAAP,CACI,EACJ,C,GACKG,CAAAA,e,maACFX,K,CAAM,CAACY,MAAM,CAAC,IAAR,C,kFACG,iCACqD,KAAKC,KAD1D,CACGd,OADH,aACGA,OADH,CACYC,KADZ,aACYA,KADZ,CACmBC,OADnB,aACmBA,OADnB,CAC4Ba,KAD5B,aAC4BA,KAD5B,CACmCC,KADnC,aACmCA,KADnC,CAC0ClB,MAD1C,aAC0CA,MAD1C,CAEZ,KAAKmB,OAAL,CAAe,SAAAC,KAAK,CAAI,CAAC,MAAI,CAACC,QAAL,CAAc,CAAEN,MAAM,CAAEK,KAAK,CAACE,aAAhB,CAAd,EAAgD,CAAzE,CACA,KAAKC,OAAL,CAAe,UAAM,CAAC,MAAI,CAACF,QAAL,CAAc,CAAEN,MAAM,CAAE,IAAV,CAAd,EAAiC,CAAvD,CACA,GAAIS,CAAAA,KAAK,CAACrB,KAAK,CAACsB,QAAN,CAAeC,YAAf,CAA4BvB,KAA5B,CAAkCC,OAAlC,CAAV,CACA,GAAIJ,MAAM,GAAKY,SAAf,CAA0B,CACtB,KAAKZ,MAAL,CAAc,UAAM,CAACG,KAAK,CAACwB,QAAN,CAAeC,WAAf,CAA2BzB,KAA3B,CAAiCH,MAAjC,CAAwCI,OAAxC,EAAiD,MAAI,CAACmB,OAAL,GAAgB,CAAtF,CACH,CAFD,IAEO,CACH,KAAKvB,MAAL,CAAc,UAAM,CAACG,KAAK,CAACwB,QAAN,CAAeC,WAAf,CAA2BzB,KAA3B,CAAiC,MAAjC,CAAwCC,OAAxC,EAAiD,MAAI,CAACmB,OAAL,GAAgB,CAAtF,CACH,EACDC,KAAK,CAACK,IAAN,CAAW1B,KAAK,CAAC2B,KAAN,CAAYC,SAAvB,EACA,GAAIC,CAAAA,WAAW,CAAE,QAAbA,CAAAA,WAAa,CAACC,IAAD,CAAMC,KAAN,QAAcjC,CAAAA,cAAc,CAACC,OAAD,CAASC,KAAT,CAAeC,OAAf,CAAuB6B,IAAvB,CAA4BC,KAA5B,CAA5B,EAAjB,CACA;AACA,GAAIC,CAAAA,IAAJ,CAASC,GAAT,CACA,GAAIlB,KAAK,GAAG,EAAZ,CAAgB,CACZiB,IAAI,CAAC,oBAAC,QAAD,MAAL,CACAC,GAAG,CAAChC,OAAJ,CACH,CAHD,IAGO,CACH+B,IAAI,CAAC,oBAAC,OAAD,MAAL,CACAC,GAAG,CAAClB,KAAJ,CACH,EACD,MACC,4BAAK,SAAS,CAAEhB,OAAO,CAACf,MAAxB,CAAgC,GAAG,CAAE,eAAeiB,OAApD,EACG,oBAAC,IAAD,EACgB,IAAI,CAAE+B,IADtB,CAEiB,KAAK,CAAEC,GAFxB,CAGiB,KAAK,CAAEnB,KAHxB,CAIiB,SAAS,CAAEf,OAAO,CAACZ,UAJpC,CAKiB,OAAO,CAAC,UALzB,CAMiB,YAAW,KAAKa,KAAL,CAAWY,MAAX,CAAoB,aAApB,CAAoCH,SANhE,CAOiB,gBAAc,MAP/B,CAQiB,OAAO,CAAE,KAAKO,OAR/B,EADH,CAWK,oBAAC,IAAD,EACiB,EAAE,CAAC,aADpB,CAEU,QAAQ,CAAE,KAAKhB,KAAL,CAAWY,MAF/B,CAGiB,IAAI,CAAEsB,OAAO,CAAC,KAAKlC,KAAL,CAAWY,MAAZ,CAH9B,CAIiB,OAAO,CAAE,KAAKQ,OAJ/B,EAME,oBAAC,QAAD,EAAU,GAAG,CAAC,QAAd,CAAuB,OAAO,CAAE,KAAKA,OAArC,CAA8C,SAAS,CAAErB,OAAO,CAACF,MAAjE,EACG,oBAAC,MAAD,EAAQ,KAAK,CAAEG,KAAf,CAAsB,OAAO,CAAE,CAACjB,MAAM,CAACgB,OAAO,CAAChB,MAAhB,CAA/B,CAAwD,OAAO,CAAEkB,OAAjE,CAA0E,OAAO,CAAE,KAAKJ,MAAxF,CAAgG,OAAO,CAAE,KAAKuB,OAA9G,EADH,CANF,CASIS,WAAW,CAAC7B,KAAK,CAACsB,QAAN,CAAea,UAAf,CAA0BnC,KAA1B,CAAgCC,OAAhC,CAAwCD,KAAK,CAACsB,QAAN,CAAec,MAAf,CAAsBC,GAA9D,CAAD,CAAoE,CAAC,CAArE,CATf,CAUIhB,KAAK,CAACiB,GAAN,CAAUT,WAAV,CAVJ,CAWIA,WAAW,CAAC7B,KAAK,CAACsB,QAAN,CAAea,UAAf,CAA0BnC,KAA1B,CAAgCC,OAAhC,CAAwCD,KAAK,CAACsB,QAAN,CAAec,MAAf,CAAsBG,GAA9D,CAAD,CAAoE,CAAC,CAArE,CAXf,CAYIV,WAAW,CAAC,EAAD,CAAI,CAAC,CAAL,CAZf,CAaE,oBAAC,QAAD,EAAU,GAAG,CAAC,QAAd,CAAuB,OAAO,CAAE,KAAKT,OAArC,CAA8C,SAAS,CAAErB,OAAO,CAACL,MAAjE,EACG,oBAAC,MAAD,EAAQ,KAAK,CAAEM,KAAf,CAAsB,OAAO,CAAE,KAAKoB,OAApC,EADH,CAbF,CAXL,CADD,CA+BI,C,6BAtDyBlD,S,EA6D9B,cAAeC,CAAAA,UAAU,CAACS,MAAD,CAAV,CAAmB+B,eAAnB,CAAf","sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Chip from '@material-ui/core/Chip';\nimport SelIcon from '@material-ui/icons/Done';\nimport NullIcon from '@material-ui/icons/Clear';\nimport SelectValue from './SelectValueComponent';\nimport Remove     from './RemoveComponent';\nimport Reload     from './ReloadComponent';\n\nconst styles = theme => ({\n    settings:{},\n    button:{},\n    values: {\n\tdisplay: 'inline-block',\n        marginLeft: 'auto',\n    },\n    selectchip: {\n        margin: theme.spacing.unit,\n\tcursor: \"pointer\",\n        color:\"red\",\n        borderColor:\"blue\",\n    },\n    reload: {\n\tdisplay: 'inline-block',\n        marginRight: 'auto',\n\theight:'100%',\n    },\n    remove: {\n\tdisplay: 'inline-block',\n        marginRight: 'auto',\n\theight:'100%',\n    },\n});\nfunction renderMenuItem(classes,state,keyitem,valueitem,valueindex) {\n    var vals=state.Path.select.val[keyitem]\n    //console.log(\"SelectValues:\",keyitem,valueitem,JSON.stringify(vals));\n    var tpos=-1;\n    if (vals !== undefined) {\n\ttpos=vals.indexOf(valueitem);\n    };\n    if (valueitem !== undefined) {\n\treturn (<MenuItem value={valueitem} key={valueitem}>\n\t\t<SelectValue state={state} keyitem={keyitem} valueitem={valueitem} tpos={tpos}/> \n\t\t</MenuItem>);\n    } else {\n\treturn null;\n    };\n}\nclass SelectValueMenu extends Component {\n    state={anchor:null};\n    render() {\n        const { classes, state, keyitem, title, label, remove } = this.props;\n\tthis.onClick = event => {this.setState({ anchor: event.currentTarget });};\n\tthis.onClose = () => {this.setState({ anchor: null });};\n\tvar items=state.Database.getKeyValues(state,keyitem);\n\tif (remove !== undefined) {\n\t    this.remove = () => {state.Navigate.onClickPath(state,remove,keyitem);this.onClose();};\n\t} else {\n\t    this.remove = () => {state.Navigate.onClickPath(state,'path',keyitem);this.onClose();};\n\t};\n\titems.sort(state.Utils.ascending);\n\tvar mapFunction= (item,index)=>renderMenuItem(classes,state,keyitem,item,index);\n\t//console.log(\"Values.rendering\",items.length,JSON.stringify(anchor),Boolean(anchor));\n\tvar icon,lab;\n\tif (label===\"\") {\n\t    icon=<NullIcon/>;\n\t    lab=keyitem;\n\t} else {\n\t    icon=<SelIcon/>;\n\t    lab=label;\n\t};\n\treturn (\n\t\t<div className={classes.values} key={\"selectValue-\"+keyitem}>\n\t\t   <Chip\n                     icon={icon}\n                      label={lab}\n                      title={title}\n                      className={classes.selectchip}\n                      variant=\"outlined\"\n                      aria-owns={this.state.anchor ? 'values-menu' : undefined}\n                      aria-haspopup=\"true\"\n                      onClick={this.onClick}\n\t           />\n\t\t     <Menu\n                        id=\"values-menu\"\n\t                anchorEl={this.state.anchor}\n                        open={Boolean(this.state.anchor)}\n                        onClose={this.onClose}\n\t\t     >\n\t\t       <MenuItem key=\"remove\" onClose={this.onClose} className={classes.remove}>\n\t\t          <Remove state={state} classes={{button:classes.button}} keyitem={keyitem} onclick={this.remove} onclose={this.onClose}/>\n\t\t       </MenuItem>\n\t\t        {mapFunction(state.Database.makeKeytrg(state,keyitem,state.Database.keytrg.Min),-1)}\n\t\t        {items.map(mapFunction)}\n\t\t        {mapFunction(state.Database.makeKeytrg(state,keyitem,state.Database.keytrg.Max),-1)}\n\t\t        {mapFunction(\"\",-1)}\n\t\t       <MenuItem key=\"reload\" onClose={this.onClose} className={classes.reload}>\n\t\t          <Reload state={state} onclose={this.onClose}/>\n\t\t       </MenuItem>\n\t             </Menu>\n\t\t</div>\n\t);\n    }\n}\n\nSelectValueMenu.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(SelectValueMenu);\n"]},"metadata":{},"sourceType":"module"}