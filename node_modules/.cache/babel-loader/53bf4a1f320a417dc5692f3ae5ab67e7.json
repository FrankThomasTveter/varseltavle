{"ast":null,"code":"import _classCallCheck from \"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/franktt/react/varseltavle/src/react/CellTooltip.js\";\nimport React, { Component } from \"react\";\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport { teal_palette } from '../mui/metMuiThemes';\nimport ReactTooltip from 'react-tooltip';\nimport Button from '@material-ui/core/Button';\nimport SubTable from './SubTableComponent';\nimport InfoIcon from '@material-ui/icons/Info'; //import CancelIcon from '@material-ui/icons/Cancel';\n\nvar styles = function styles(theme) {\n  return {\n    tooltip: {\n      border: '0px solid #999999',\n      backgroundColor: teal_palette.main\n    },\n    button: {\n      color: 'white',\n      \"&$buttonDisabled\": {\n        color: theme.palette.primary.main\n      }\n    },\n    buttonDisabled: {}\n  };\n};\n\nfunction FullDetails(props) {\n  var state = props.state,\n      data = props.data,\n      tooltip = props.tooltip; //state,classes,element\n\n  var keys = [];\n  state.Utils.cpArray(keys, state.Path.tooltip.keys);\n  state.Utils.remArray(keys, state.Path.keys.path); //state.Utils.remArray(keys,state.Path.other.table);\n\n  keys = state.Utils.keepHash(keys, tooltip); //console.log(\"Keys:\",JSON.stringify(keys),JSON.stringify(state.Path.keys.path));\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }, React.createElement(SubTable, {\n    state: state,\n    keys: keys,\n    subs: tooltip,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }));\n}\n\n;\n\nfunction GeneralDetails(props) {\n  var classes = props.classes,\n      data = props.data,\n      onclick = props.onclick; // state,element\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, React.createElement(Button, {\n    className: classes.button,\n    onClick: onclick,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, React.createElement(InfoIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  })));\n}\n\n; //\t    <h3>Rowkey: {data.rowkey} Colkey: {data.colkey}</h3>\n//\t    <p>Some details.</p>\n\nfunction Tooltip(props) {\n  var state = props.state,\n      classes = props.classes,\n      data = props.data,\n      element = props.element;\n  var tooltip = state.Matrix.getTooltip(state, data);\n  var available = state.Matrix.checkTooltip(state, data);\n\n  if (available) {\n    return React.createElement(FullDetails, {\n      state: state,\n      classes: classes,\n      data: data,\n      tooltip: tooltip,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    });\n  } else {\n    var onclick = function onclick() {\n      state.Matrix.addTooltip(state, data);\n      element.update();\n    };\n\n    return React.createElement(GeneralDetails, {\n      state: state,\n      classes: classes,\n      data: data,\n      onclick: onclick,\n      tooltip: tooltip,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    });\n  }\n}\n\n;\n\nvar CellTooltip =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CellTooltip, _Component);\n\n  function CellTooltip(props) {\n    var _this;\n\n    _classCallCheck(this, CellTooltip);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CellTooltip).call(this, props));\n    var state = props.state;\n    state.React.Tooltip = _assertThisInitialized(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(CellTooltip, [{\n    key: \"rebuild\",\n    value: function rebuild() {\n      console.log(\"Rebuilding tooltip.\");\n      ReactTooltip.rebuild();\n      ReactTooltip.rebuild();\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      console.log(\"Rebuilding tooltip.\");\n      this.forceUpdate();\n      ReactTooltip.rebuild();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          state = _this$props.state; //console.log(\"##### Rendering CellTooltip.\");\n\n      return React.createElement(ReactTooltip, {\n        id: \"cell\",\n        className: classes.tooltip,\n        getContent: function getContent(dataTip) {\n          if (dataTip == null) {\n            return null;\n          } else {\n            var data = JSON.parse(dataTip); //console.log(\"Tooltip:\",JSON.stringify(dataTip),JSON.stringify(data));\n\n            return React.createElement(Tooltip, {\n              state: state,\n              classes: classes,\n              data: data,\n              element: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 87\n              },\n              __self: this\n            });\n          }\n        },\n        effect: \"solid\",\n        delayHide: 500,\n        delayShow: 200,\n        delayUpdate: 500,\n        place: 'bottom',\n        border: true,\n        type: 'light',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }); // {console.log(\"Datatip:\",dataTip);\n      //\t\t\t\t  \n    }\n  }]);\n\n  return CellTooltip;\n}(Component);\n\n;\nCellTooltip.propTypes = {\n  classes: PropTypes.object.isRequired\n};\nexport default withStyles(styles)(CellTooltip);","map":{"version":3,"sources":["/home/franktt/react/varseltavle/src/react/CellTooltip.js"],"names":["React","Component","PropTypes","withStyles","teal_palette","ReactTooltip","Button","SubTable","InfoIcon","styles","theme","tooltip","border","backgroundColor","main","button","color","palette","primary","buttonDisabled","FullDetails","props","state","data","keys","Utils","cpArray","Path","remArray","path","keepHash","GeneralDetails","classes","onclick","Tooltip","element","Matrix","getTooltip","available","checkTooltip","addTooltip","update","CellTooltip","console","log","rebuild","forceUpdate","dataTip","JSON","parse","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport {teal_palette} from '../mui/metMuiThemes';\n\nimport ReactTooltip from 'react-tooltip'\nimport Button from '@material-ui/core/Button';\nimport SubTable  from './SubTableComponent';\n\nimport InfoIcon from '@material-ui/icons/Info';\n//import CancelIcon from '@material-ui/icons/Cancel';\n\n\nconst styles = theme => ({\n    tooltip:{\n\tborder: '0px solid #999999',\n\tbackgroundColor:teal_palette.main,\n    },\n    button: {\n\tcolor:'white',\n\t\"&$buttonDisabled\": {\n            color: theme.palette.primary.main,\n\t},\n    },\n    buttonDisabled: {},\n});\nfunction FullDetails(props){\n    const {state,data,tooltip}=props; //state,classes,element\n    var keys=[];\n    state.Utils.cpArray(keys,state.Path.tooltip.keys);\n    state.Utils.remArray(keys,state.Path.keys.path);\n    //state.Utils.remArray(keys,state.Path.other.table);\n    keys=state.Utils.keepHash(keys,tooltip);\n    //console.log(\"Keys:\",JSON.stringify(keys),JSON.stringify(state.Path.keys.path));\n    return (<div>\n\t       <SubTable state={state} keys={keys} subs={tooltip}/>\n\t    </div>\n\t   );\n};\nfunction GeneralDetails(props) {\n    const {classes,data,onclick}=props; // state,element\n    return (<div>\n\t    <Button className={classes.button} onClick={onclick}><InfoIcon/></Button>\n\t    </div>\n\t   );\n};\n//\t    <h3>Rowkey: {data.rowkey} Colkey: {data.colkey}</h3>\n//\t    <p>Some details.</p>\nfunction Tooltip(props) {\n    const {state,classes,data,element}=props;\n    var tooltip=state.Matrix.getTooltip(state,data);\n    var available=state.Matrix.checkTooltip(state,data);\n    if (available) {\n\treturn (<FullDetails state={state} classes={classes} data={data} tooltip={tooltip}/>);\n    } else {\n\tvar onclick=() => {state.Matrix.addTooltip(state,data);element.update();}\n\treturn (<GeneralDetails state={state} classes={classes} data={data} onclick={onclick} tooltip={tooltip}/>);\n    }\n};\nclass CellTooltip extends Component {\n    constructor(props) {\n\tsuper(props);\n\tconst {state} = props;\n\tstate.React.Tooltip=this;\n    };\n    rebuild() {\n\tconsole.log(\"Rebuilding tooltip.\");\n\tReactTooltip.rebuild();\n\tReactTooltip.rebuild();\n    };\n    update() {\n\tconsole.log(\"Rebuilding tooltip.\");\n\tthis.forceUpdate();\n\tReactTooltip.rebuild();\n    };\n    render() {\n\tconst { classes, state } = this.props;\n\t//console.log(\"##### Rendering CellTooltip.\");\n\treturn (<ReactTooltip id='cell'\n\t\tclassName={classes.tooltip}\n\t\tgetContent={(dataTip) =>{if (dataTip==null) {\n\t\t    return null;\n\t\t} else {\n\t\t    const data=JSON.parse(dataTip);\n\t\t    //console.log(\"Tooltip:\",JSON.stringify(dataTip),JSON.stringify(data));\n\t\t    return (<Tooltip state={state} classes={classes} data={data} element={this}/>);\n\t\t}}}\n\t\teffect='solid'\n\t\tdelayHide={500}\n\t\tdelayShow={200}\n\t\tdelayUpdate={500}\n\t\tplace={'bottom'}\n\t\tborder={true}\n\t\ttype={'light'}\n\t\t/>);\n\t// {console.log(\"Datatip:\",dataTip);\n\t//\t\t\t\t  \n    };\n};\nCellTooltip.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(CellTooltip);\n"]},"metadata":{},"sourceType":"module"}