{"ast":null,"code":"import _classCallCheck from\"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{withStyles}from'@material-ui/core/styles';import Paper from'@material-ui/core/Paper';import Grid from'@material-ui/core/Grid';//import SummaryCell from './SummaryCell';\n//import CanvasText  from './CanvasTextComponent';\n//import Text        from './TextComponent';\n//\toverflow: 'hidden',\nvar styles=function styles(theme){return{root:{height:'100%'},paper:{tableLayout:'fixed',padding:0,margin:0},divTable:{display:'table',width:'100%'},divTableRow:{display:'table-row'},divTableCell:{border:'0px solid #999999',display:'table-cell',padding:'3px 3px'},divTableCellCursor:{cursor:\"pointer\",border:'0px solid #999999',display:'table-cell',padding:'0px 0px'},divTableHead:{border:'0px solid #999999',display:'table-cell',padding:'0px 0px'},divTableHeading:{display:'table-header-group'},divTableHeadingCenter:{display:'flex',justifyContent:'center'},divTableFoot:{backgroundColor:'#DDD',display:'table-footer-group',fontWeight:'bold'},divTableBody:{display:'table-row-group'}};};// ---------------- DATA\nfunction renderDataList(classes,state,doc,plan,skey,fgcolor,bgcolor,index){if(doc===undefined){return React.createElement(\"div\",{className:classes.divTableCell,style:{backgroundColor:'#EEE'}});}else{var val=doc[skey];if(val===undefined){val=\"\";};//console.log(\"Key:\",skey,\" Val:\",JSON.stringify(val),JSON.stringify(doc[skey]));\nreturn React.createElement(\"div\",{className:classes.divTableCell,style:{color:fgcolor,backgroundColor:bgcolor},key:skey},val);}};function renderDoc(classes,state,skeys,plan,doc,lev,index){//console.log(\"We have a matrix(\",rowval,\") with range:\",JSON.stringify(range));\n//var lev=doc.level;\nvar bgcolor=state.Colors.getLevelBgColor(lev);var fgcolor=state.Colors.getLevelFgColor(lev);var mapFunction=function mapFunction(skey,index){return renderDataList(classes,state,doc,plan,skey,fgcolor,bgcolor,index);};return React.createElement(\"div\",{className:classes.divTableRow,key:index.toString()},skeys.map(mapFunction));};function getDataRowList(classes,state,skeys,plans){var items=[];var matrix=state.React.matrix;//var ret=null;\nif(matrix!==undefined){var colvalues=Object.keys(matrix);var clen=colvalues.length;for(var kk=0;kk<clen;kk++){var colval=colvalues[kk];var list=matrix[colval];if(list!==undefined){var rowvalues=Object.keys(list);var rlen=rowvalues.length;for(var ll=0;ll<rlen;ll++){var rowval=rowvalues[ll];var element=state.Matrix.getMatrixElement(colval,rowval,matrix);//console.log(\"We have a matrix with range:\",JSON.stringify(range));\nif(element!==undefined&&element.docs!==undefined){var lev=element.maxlev;var mapFunction=function mapFunction(doc,index){return renderDoc(classes,state,skeys,plans.cell,doc,lev,index);};items.push(element.docs.map(mapFunction));};};}}};return items;};// ---------------- HDR\nfunction renderHdrList(classes,state,plan,val,index){//console.log(\"HdrCell:\",val);\nvar cursor=classes.divTableCell;return React.createElement(\"div\",{className:cursor,style:{backgroundColor:'#DDD'},key:\"col-\".concat(index)},val);}function HdrRow(props){var classes=props.classes,state=props.state,plans=props.plans,skeys=props.skeys;//, rowvalues, label, cellMode\nvar mapFunction=function mapFunction(val,index){return renderHdrList(classes,state,plans.col,val,index);};//console.log(\"Making header List row.\",JSON.stringify(skeys));\nreturn React.createElement(\"div\",{className:classes.divTableRow,key:'hdr'},skeys.map(mapFunction));}// ---------------- Details\nfunction Details(props){var classes=props.classes,state=props.state;// classes, \nvar cellMode=state.Layout.getCellMode(state);if(state.React.matrix===undefined){return React.createElement(\"div\",{className:classes.divTable},React.createElement(\"div\",{className:classes.divTableBody},React.createElement(\"div\",{className:classes.devTableCell},\"No Matrix defined\")));}else{var skeys=state.Matrix.sortedKeys(state,state.Matrix.keyCnt);//DOM.style.font\nvar border=2;var label=\"\";var width=0.9*window.innerWidth;var height=0.94*window.innerHeight-180;//var height=0.8*(window.innerHeight-200);\nvar plans=state.Layout.makePlans(label,[\"\"],[\"\"],width,height,border,cellMode);var items=getDataRowList(classes,state,skeys,plans);//console.log(\"Details => Width/Height:\",window.innerWidth,window.innerHeight,plan.cell.width,plan.hdr.height)\nreturn React.createElement(\"div\",{className:classes.divTable},React.createElement(\"div\",{className:classes.divTableBody},React.createElement(HdrRow,{classes:classes,state:state,key:\"hdr\",plans:plans,label:label,cellMode:cellMode,skeys:skeys}),items));}};var List=/*#__PURE__*/function(_Component){_inherits(List,_Component);function List(){var _getPrototypeOf2;var _this;_classCallCheck(this,List);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(List)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.updateWindowDimensions=function(){_this.width=window.innerWidth;_this.height=window.innerHeight;_this.bbx=_this.el.getBoundingClientRect();//console.log(\"Width/Height:\",this.width,this.height,this.bbx.width,this.bbx.height)\n};return _this;}_createClass(List,[{key:\"componentDidMount\",value:function componentDidMount(){window.addEventListener(\"resize\",this.updateWindowDimensions);}},{key:\"element\",value:function element(el){if(el!==undefined&&el!==null){this.el=el;this.bbx=this.el.getBoundingClientRect();//console.log(\"BBX width/height:\",this.bbx.width,this.bbx.height);\n};}},{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,classes=_this$props.classes,state=_this$props.state;//console.log(\"##### Rendering List.\");\nreturn React.createElement(\"div\",{ref:function ref(el){_this2.element(el);},className:classes.root,style:{width:'100%',height:'100%'}},React.createElement(Grid,{container:true,spacing:24},React.createElement(Grid,{item:true,xs:12},React.createElement(Paper,{className:classes.paper},React.createElement(Details,{state:state,classes:classes,element:this})))));}}]);return List;}(Component);export default withStyles(styles)(List);","map":{"version":3,"sources":["/home/franktt/react/varseltavle/src/react/ListComponent.js"],"names":["React","Component","withStyles","Paper","Grid","styles","theme","root","height","paper","tableLayout","padding","margin","divTable","display","width","divTableRow","divTableCell","border","divTableCellCursor","cursor","divTableHead","divTableHeading","divTableHeadingCenter","justifyContent","divTableFoot","backgroundColor","fontWeight","divTableBody","renderDataList","classes","state","doc","plan","skey","fgcolor","bgcolor","index","undefined","val","color","renderDoc","skeys","lev","Colors","getLevelBgColor","getLevelFgColor","mapFunction","toString","map","getDataRowList","plans","items","matrix","colvalues","Object","keys","clen","length","kk","colval","list","rowvalues","rlen","ll","rowval","element","Matrix","getMatrixElement","docs","maxlev","cell","push","renderHdrList","HdrRow","props","col","Details","cellMode","Layout","getCellMode","devTableCell","sortedKeys","keyCnt","label","window","innerWidth","innerHeight","makePlans","List","updateWindowDimensions","bbx","el","getBoundingClientRect","addEventListener"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\n\n//import SummaryCell from './SummaryCell';\n//import CanvasText  from './CanvasTextComponent';\n//import Text        from './TextComponent';\n\n//\toverflow: 'hidden',\n\nconst styles = theme => ({\n    root: {\n\theight: '100%',\n    },\n    paper: {\n\ttableLayout: 'fixed',\n\tpadding:0,\n\tmargin:0,\n    },\n    divTable :{\n\tdisplay: 'table',\n\twidth: '100%',\n    },\n    divTableRow:  {\n\tdisplay: 'table-row',\n    },\n    divTableCell:{\n\tborder: '0px solid #999999',\n\tdisplay: 'table-cell',\n\tpadding: '3px 3px',\n    },\n    divTableCellCursor:{\n\tcursor: \"pointer\",\n\tborder: '0px solid #999999',\n\tdisplay: 'table-cell',\n\tpadding: '0px 0px',\n    },\n    divTableHead : {\n\tborder: '0px solid #999999',\n\tdisplay: 'table-cell',\n\tpadding: '0px 0px',\n    },\n    divTableHeading : {\n\tdisplay: 'table-header-group',\n    },\n    divTableHeadingCenter : {\n\tdisplay: 'flex',\n\tjustifyContent: 'center',\n    },\n    divTableFoot : {\n\tbackgroundColor: '#DDD',\n\tdisplay: 'table-footer-group',\n\tfontWeight: 'bold',\n    },\n    divTableBody : {\n\tdisplay: 'table-row-group',\n    }\n});\n// ---------------- DATA\nfunction renderDataList(classes,state,doc,plan,skey,fgcolor,bgcolor,index){\n    if (doc===undefined) {\n\treturn <div className={classes.divTableCell} style={{backgroundColor:'#EEE'}}/>\n    } else {    \n\tvar val=doc[skey];\n\tif (val === undefined) {val=\"\";};\n\t//console.log(\"Key:\",skey,\" Val:\",JSON.stringify(val),JSON.stringify(doc[skey]));\n\treturn (\n            <div className={classes.divTableCell} style={{color:fgcolor,backgroundColor:bgcolor}} key={skey}>\n\t\t{val}\n\t    </div>\n\t);\n    }\n};\nfunction renderDoc(classes,state,skeys,plan,doc,lev,index) {\n    //console.log(\"We have a matrix(\",rowval,\") with range:\",JSON.stringify(range));\n    //var lev=doc.level;\n    var bgcolor=state.Colors.getLevelBgColor(lev);\n    var fgcolor=state.Colors.getLevelFgColor(lev);\n    var mapFunction= (skey,index)=>renderDataList(classes,state,doc,plan,skey,fgcolor,bgcolor,index);\n    return (<div className={classes.divTableRow} key={index.toString()}>\n\t    {skeys.map(mapFunction)}\n\t    </div>);\n};\nfunction getDataRowList(classes,state,skeys,plans) {\n    const items=[];\n    var matrix=state.React.matrix;\n    //var ret=null;\n    if (matrix!==undefined) {\n\tvar colvalues=Object.keys(matrix);\n\tvar clen=colvalues.length;\n        for (var kk=0;kk<clen;kk++) {\n\t    var colval=colvalues[kk];\n\t    var list=matrix[colval];\n\t    if (list !== undefined) {\n\t\tvar rowvalues=Object.keys(list);\n\t\tvar rlen=rowvalues.length;\n\t\tfor (var ll=0;ll<rlen;ll++) {\n\t\t    var rowval=rowvalues[ll];\n\t\t    var element=state.Matrix.getMatrixElement(colval,rowval,matrix);\n\t\t    //console.log(\"We have a matrix with range:\",JSON.stringify(range));\n\t\t    if (element !== undefined && element.docs !== undefined) {\n\t\t\tvar lev=element.maxlev;\n\t\t\tvar mapFunction=(doc,index) =>renderDoc(classes,state,skeys,plans.cell,doc,lev,index);\n\t\t\titems.push(element.docs.map(mapFunction));\n\t\t    };\n\t\t};\n\t    }\n\t}\n    };\n    return items;\n};\n// ---------------- HDR\nfunction renderHdrList(classes,state,plan,val,index) {\n    //console.log(\"HdrCell:\",val);\n    var cursor=classes.divTableCell;\n    return (<div className={cursor} style={{backgroundColor:'#DDD'}} key={`col-${index}`} >\n\t    {val}\n \t    </div> );\n}\nfunction HdrRow(props) {\n    const { classes, state, plans, skeys } = props; //, rowvalues, label, cellMode\n    var mapFunction= (val,index)=>renderHdrList(classes,state,plans.col,val,index);\n    //console.log(\"Making header List row.\",JSON.stringify(skeys));\n    return (<div className={classes.divTableRow} key={'hdr'}>\n\t    {skeys.map(mapFunction)}\n\t    </div>);\n}\n// ---------------- Details\nfunction Details(props) {\n    const { classes, state } = props; // classes, \n    var cellMode  = state.Layout.getCellMode(state);\n    if (state.React.matrix === undefined) {\n\treturn (<div className={classes.divTable}>\n\t\t   <div className={classes.divTableBody}>\n\t\t      <div className={classes.devTableCell}>\n\t\t         {\"No Matrix defined\"}\n\t\t      </div>\n\t\t   </div>\n\t\t</div>\n\t       );\n    } else {\n        var skeys = state.Matrix.sortedKeys(state,state.Matrix.keyCnt);\n \t//DOM.style.font\n\tvar border=2;\n\tvar label=\"\";\n\tvar width=0.9*window.innerWidth;\n\tvar height=0.94*window.innerHeight - 180;\n\t//var height=0.8*(window.innerHeight-200);\n\tvar plans=state.Layout.makePlans(label,[\"\"],[\"\"],width,height,border,cellMode);\n\tvar items=getDataRowList(classes,state,skeys,plans);\n\t//console.log(\"Details => Width/Height:\",window.innerWidth,window.innerHeight,plan.cell.width,plan.hdr.height)\n\treturn (<div className={classes.divTable}>\n\t\t   <div className={classes.divTableBody}>\n\t\t      <HdrRow classes={classes} state={state} key={\"hdr\"} plans={plans} label={label} cellMode={cellMode} skeys={skeys}/>\n\t\t      {items}\n\t\t   </div>\n\t\t</div>\n\t       );\n    }\n};\n\nclass List extends Component {\n    componentDidMount() {\n        window.addEventListener(\"resize\", this.updateWindowDimensions);\n    } \n    updateWindowDimensions = () => {\n        this.width= window.innerWidth;\n\tthis.height=window.innerHeight;\n\tthis.bbx=this.el.getBoundingClientRect();\n\t//console.log(\"Width/Height:\",this.width,this.height,this.bbx.width,this.bbx.height)\n    };\n    element(el) {\n\tif (el !== undefined && el !== null) {\n\t    this.el=el;\n\t    this.bbx=this.el.getBoundingClientRect();\n\t    //console.log(\"BBX width/height:\",this.bbx.width,this.bbx.height);\n\t};\n    };\n    render() {\n\tconst { classes, state } = this.props;\n\t//console.log(\"##### Rendering List.\");\n\treturn (<div ref={el=>{this.element(el)}} className={classes.root}  style={{width: '100%', height: '100%'}}>\n\t\t <Grid container spacing={24}>\n\t\t  <Grid item xs={12} > \n                   { <Paper className={classes.paper}>\n\t\t       <Details state={state} classes={classes} element={this}/>\n                     </Paper>}\n                  </Grid>\n                 </Grid>\n\t        </div>);\n\t}\n}\n\nList.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(List);\n"]},"metadata":{},"sourceType":"module"}