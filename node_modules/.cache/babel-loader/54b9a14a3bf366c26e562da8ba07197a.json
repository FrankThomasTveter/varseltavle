{"ast":null,"code":"//console.log(\"Loading DatabaseLib.js\");\nvar alasql=window.alasql;function Database(){var ret;this.files=[\"1.json\"];// json data file\nthis.loaded=\"\";this.index=0;this.cnt=0;this.keyCnt={};this.values={};this.epoch0=0;this.data=\"data/\";this.regfile=\"register\";// register file (shows current datfile)\nthis.arrayConstructor=[].constructor;this.objectConstructor={}.constructor;this.casc=0;// key is sorted ascending\nthis.cdes=1;// key is sorted descending\nthis.nasc=2;// key is sorted ascending\nthis.ndes=3;// key is sorted descending\nthis.delay=600000;// server-polling period in ms\nthis.ready=true;// can we poll server or is another poll running\nthis.log=\"\";this.mod=\"\";this.keytrg={Missing:-1,Null:0,Value:1,Min:2,Max:3};this.init=function(state,response,callbacks){state.Colors.init(state);state.Path.init(state);state.Layout.init(state);state.Threshold.init(state);state.Utils.init(\"Database\",this);state.File.next(state,response,callbacks);}.bind(this);this.updateLoop=function(state){//console.log(\"Updating database...\");\nthis.setTime(state);this.load(state);setTimeout(function(){state.Database.updateLoop(state);},state.Database.delay);//state.Database.delay\n}.bind(this);this.load=function(state){console.log(\"Database load number:\",++this.cnt);if(state.Database.index===0){state.Database.loadRegister(state,\"\",[state.Database.processRegister,state.Database.loadData,state.Database.processData]);};};this.loadRegister=function(state,response,callbacks){var path=(state.Database.data||\"data/\")+state.Database.regfile;console.log(\"Database loadRegister:\",path);state.File.load(state,path,callbacks);};this.processRegister=function(state,response,callbacks){var files=response.split('\\n');var file=files[Math.min(files.length-1,state.Database.index)];// register-respo\nstate.Database.files=files;state.Database.index=Math.min(files.length-1,state.Database.index);state.File.next(state,file,callbacks);};this.loadData=function(state,file,callbacks){//console.log(\"Database loadData:\",JSON.stringify(file));\nif(file!==state.Database.loaded){// load new data\nstate.Database.loaded=file;// console.log(\"Files:\",JSON.stringify(state.Database.files));\nvar path=(state.Database.data||\"data/\")+file;//console.log(\"Database loadPath:\",JSON.stringify(path));\nstate.File.load(state,path,callbacks);}else{//console.log(\"Setting footer...\");\nstate.Html.setFootnote(state);}};this.processData=function(state,response,callbacks){//console.log(\"Database processData.\");\nsetTimeout(function(){try{state.Database.json=JSON.parse(response);}catch(e){alert(\"Data '\"+state.Database.files[state.Database.index]+\"' contains Invalid JSON:\"+e.name+\":\"+e.message);}if(state.Database.json!==undefined){state.Database.processJson(state,state.Database.json,callbacks);}},0.1);};this.processJson=function(state,json,callbacks){state.Database.dbInsert(state,json);state.Html.setFootnote(state,\"Extracting data.\");setTimeout(function(){state.Database.makeWhere(state);// update where-expressions...\nstate.Show.showAll(state);state.Html.setFootnote(state);state.File.next(state,\"\",callbacks);},0.1);};this.resetSetup=function(state){if(state.Database.json!==undefined){state.Database.processJson(state,state.Database.json);}};this.selectIndex=function(state,item,index){console.log(\"Setting file index:\",index,item);state.Database.index=Math.max(0,Math.min(index,state.Database.files.length-1));state.Database.loadData(state,item,[state.Database.processData]);};this.getTime=function(state,s){var nn=s.match(/\\d+/g).map(Number);var date0=new Date(Date.UTC(nn[0],nn[1]-1,nn[2],nn[3],nn[4],nn[5],((nn[6]||'')+'000').slice(0,3)));// modification time\n//console.log(\"Gettime:\",s,JSON.stringify(nn));\nreturn date0.getTime();};this.setTime=function(state){var d=new Date();var epoch=d.getTime();//console.log(\"Times:\",epoch,this.epoch0);\nif(this.epoch0!==undefined){var age=epoch-this.epoch0;this.mod=this.getTimeDiff(state,age);if(state.React!==undefined&&state.React.Status!==undefined){state.React.Status.setAge(state,this.mod);//console.log(\"Age:\",epoch,this.epoch0,age);\n}}};this.getKeyValues=function(state,key){//console.log(\"Database:\",JSON.stringify(state.Database.values));\nvar vals=state.Database.values[key];if(vals!==undefined){return vals;}else{return[];}};this.getKeytrg=function(state,key,val){if(Array.isArray(val)){//console.log(\">>>Is array:\",key,JSON.stringify(val));\nret=this.keytrg.Missing;var lenv=val.length;for(var ii=0;ii<lenv;ii++){ret=Math.max(ret,this.getKeytrg(state,key,val[ii]));}//console.log(\">>>return:\",key,ret);\n}else{if(val===\"null\"){ret=this.keytrg.Null;}else if(val===\"MIN(\"+key+\")\"){// this is a function\nret=this.keytrg.Min;}else if(val===\"MAX(\"+key+\")\"){// this is a function\nret=this.keytrg.Max;}else if(val===undefined){ret=this.keytrg.Missing;}else if(val===null){ret=this.keytrg.Null;}else{ret=this.keytrg.Value;};//console.log(\"---return:\",key,ret);\n};return ret;};this.makeKeytrg=function(state,key,keytrg,val){if(keytrg===this.keytrg.Missing){return\"missing\";}else if(keytrg===this.keytrg.Null){return\"null\";}else if(keytrg===this.keytrg.Min){return\"MIN(\"+key+\")\";}else if(keytrg===this.keytrg.Max){return\"MAX(\"+key+\")\";}else{return val;};};this.dbInsert=function(state,json){var ii,key;try{// set home\nvar len=json.data.length;for(ii=0;ii<len;ii++){json.data[ii][\"cnt\"]=ii;}// get modified date\n//console.log(\"Setting time.\");\nthis.epoch0=this.getTime(state,json.epoch);// data file time\nthis.setTime(state);// data file time\n// make database for raw data\nthis.makeTable(state);// reset key counts and range\nthis.cnt=0;this.keyCnt={};// reset key-count\n// put data into databse\n//console.log(\"inserting\");\nvar data=[];var home=state.Path.home.val;var hkeys=state.Path.home.path;//Object.keys(home);\nvar homeKeys=[];var delayKeys=[];var lenh=hkeys.length;for(ii=0;ii<lenh;ii++){key=hkeys[ii];var keytrg=this.getKeytrg(state,key,home[key]);//console.log(\"Keytrg:\",key,keytrg,JSON.stringify(home[key]));\nif(keytrg<=this.keytrg.Value){homeKeys.push(key);}else{delayKeys.push(key);}}//console.log(\"Home keys:\",JSON.stringify(homeKeys),\" delayed:\",JSON.stringify(delayKeys));\nvar rcnt=this.extractData(state,data,{},\"\",json.data,homeKeys,home);console.log(\"Count:\",rcnt);//console.log(\"Data:\",JSON.stringify(data));\nthis.dataToDb(state,data);//var nrec=this.sanityCheck(state)\t    // sanity check\n//console.log(\"Initially:\",data.length,\" Extracted:\",rcnt,' Database:',nrec);\nthis.postProcess(state);// update distinct Database.values[key]\nif(delayKeys.length>0){// delayed home selection (MAX() and MIN())\nthis.makeWhere(state,delayKeys,home);var where=this.getWhere(state,delayKeys,home);var docs=this.getDocs(state,where);this.dataToDb(state,docs);this.postProcess(state);// update distinct Database.values[key]\n};state.Path.makePath(state);// initialise path\n//console.log(\"Indexing and cleaning up.\");\nthis.dbindex(state,state.Path.other.table);// make indexes\nthis.dbindex(state,state.Path.other.rest);// make indexes\n//state.Path.checkTableKeys(state);\nstate.Html.broadcast(state,\"Database is ready.\");//console.log(\"Database is ready.\");\n}catch(e){alert(\"Db-insert error:\"+e);};};this.updateKeyCnt=function(state,key,val){if(this.keyCnt[key]===undefined){this.keyCnt[key]={cnt:0,type:\"num\",order:this.nasc};}this.keyCnt[key].cnt=this.keyCnt[key].cnt+1;if(this.keyCnt[key].type===\"num\"&&isNaN(val)){this.keyCnt[key].type=\"nan\";this.keyCnt[key].order=this.casc;}};this.postProcess=function(state){// update meta-data\nvar keys=Object.keys(state.Database.keyCnt);var lenk=keys.length;for(var ii=0;ii<lenk;ii++){var key=keys[ii];// make list of values in Database for each key\nstate.Database.values[key]=[];var sql=\"select DISTINCT \"+key+\" AS \"+key+\" FROM alarm\";var dd0=this.query(sql);var lend=dd0.length;for(var jj=0;jj<lend;jj++){var doc=dd0[jj];state.Database.values[key].push(doc[key]);};};};this.extractData=function(state,data,parent,key,raw,hkeys,home){// insert records into db (recursive)\nvar rcnt=0;var kk,ii,kii,child,dkey;//console.log(\"Processing {\",state.Utils.toString(parent),\"} '\",key,\"' (\",state.Utils.toString(raw),\")\");\nvar wii=this.whatIsIt(raw);if(wii===\"Object\"&&key===\"\"){//console.log(\"Found object (\",state.Utils.toString(parent),\")\");\nchild=state.Utils.cp(parent);// loop over plain values first\nfor(kk in raw){kii=this.whatIsIt(raw[kk]);if(kii===\"value\"){child[kk]=raw[kk];}}// loop over sub-objects\nvar nn=0;for(kk in raw){kii=this.whatIsIt(raw[kk]);if(kii!==\"value\"){nn=nn+1;rcnt=rcnt+this.extractData(state,data,child,kk,raw[kk],hkeys,home);}}if(nn===0){// insert \n//console.log(\"Object was empty.\");\nrcnt=rcnt+this.extractData(state,data,child,null,null,hkeys,home);}}else if(wii===\"Object\"&&key!==\"\"){//console.log(\"Found object key '\",key,\"' (\",state.Utils.toString(parent),\")\");\nchild=state.Utils.cp(parent);// loop over plain values first\nfor(kk in raw){child[key]=kk;rcnt=rcnt+this.extractData(state,data,child,\"\",raw[kk],hkeys,home);}}else if(wii===\"Array\"){//console.log(\"Found array key '\",key,\"' (\",state.Utils.toString(parent),\")\");\nvar dlen=raw.length;for(ii=0;ii<dlen;ii++){rcnt=rcnt+this.extractData(state,data,parent,key,raw[ii],hkeys,home);}}else{//console.log(\"Found key '\",key,\"' \",wii,\" (\",state.Utils.toString(parent),\")\");\nvar keep=true;var doc=state.Utils.cp(parent);if(raw!==null){if(key===\"\"){doc.value=raw;}else{doc[key]=raw;}}// check if home criteria is met\nvar lenh=hkeys.length;for(ii=0;ii<lenh;ii++){key=hkeys[ii];var vals=home[key];var lenv=vals.length;var found=false;for(var jj=0;jj<lenv;jj++){if(vals[jj]===doc[key]||vals[jj]===\"\"&&doc[key]===undefined){found=true;}}if(!found){keep=false;};}if(keep){//console.log(\"Updating internal raw structure\",JSON.stringify(setup));\nfor(dkey in doc){var val=doc[dkey];this.updateKeyCnt(state,dkey,val);//// this takes too much time...\n//if (this.values[dkey]  === undefined) {\n//\tthis.values[dkey]=[];\n//  };\n////console.log(\"Setup:\",JSON.stringify(setup));\n////console.log(\"Key:\",key,JSON.stringify(this.values));\n//if (this.values[dkey].indexOf(val)  === -1 ) { // value not in range\n//    this.values[dkey].push(val); // add value to range\n//};\n};//console.log(\">>> Inserting:\",state.Utils.toString(doc));\nrcnt=rcnt+1;this.cnt=this.cnt+1;state.Threshold.setThresholds(doc);doc._title=state.Layout.makeDocTitle(state,doc);//if (this.cnt < 10) { // debug purposes\n//for (key in keys) {\n//this.updateKeyCnt(state,key,doc[key]);\n//};\ndata.push(doc);//} else {\n//console.log(\"Ignoring:\",lenh,JSON.stringify(hkeys),JSON.stringify(home),JSON.stringify(doc));\n}}return rcnt;};this.dbextract=function(state,showFunc){// extract data from db and show\n// extract data from db and insert into data-array\n// var parent={};//{test:{$exists:false}};\nvar where=this.getWhere(state);var cntDocs0=this.getDocsCnt(state,where);var nrec=cntDocs0.length===0?0:cntDocs0[0].cnt;var m={};state.Matrix.cnt=nrec;if(nrec>state.Matrix.popSeries){// maintain keyCnt\nvar buff=[];state.Utils.cpArray(buff,state.Path.keys.path);state.Utils.cpArray(buff,state.Path.keys.other);state.Utils.cpArray(buff,state.Path.trash);state.Matrix.initKeyCnt(state);state.Matrix.makeKeyCnt(state,where,nrec,buff);//\nstate.Path.exportAllKeys(state);// can not export keys before we have a keyCnt\nstate.Matrix.sortMatrixValues(state);//console.log(\"Count:\",JSON.stringify(docs));\n// add \"undefined\" range of keys that are not present in every doc...\nvar cntDocs=state.Database.getDocsCnt(state,where,state.Path.other.table);state.Matrix.makeMatrixCntMap(state,cntDocs,m);state.Matrix.makeMapRange(state);}else{// maintain map data and keyCnt...\n//console.log(\"Database where:\",where);\nvar docs=this.getDocs(state,where);// get all docs\n//console.log(\">>>Extraction key (where='\",where,\"') Docs:\",docs.length);\nstate.Matrix.initKeyCnt(state);state.Matrix.makeKeyCntMap(state,docs);state.Matrix.makeMapRange(state);state.Matrix.addUndefinedKeyCnt(state,docs);// add \"undefined\"\nstate.Matrix.addUndefinedKeyCntValues(state);state.Matrix.addMapAreaKeys(state,docs);//\nstate.Path.exportAllKeys(state);// can not export keys before we have a keyCnt\nstate.Matrix.sortMatrixValues(state);state.Matrix.makeMatrix(state,docs,m);//console.log (\"Matrix:\",JSON.stringify(m));\n}showFunc(state,m);};this.dbindex=function(state,ks){// make indexes on all keys\nvar s=\"\";var klen=ks.length;for(var ii=0;ii<klen;ii++){//this.query(\"CREATE INDEX ? ON TABLE alarm.?\",ks[ii],ks[ii]);\ns=s+\" \"+ks[ii];};//console.log(\"Indexes:\",s);\n};this.getTitleDynamic=function(state,key,val){var ret,parse;if(state.Database.values[key]===undefined){ret=val;}else{var keytrg=this.getKeytrg(state,key,val);if(val===\"null\"){ret=key+\" is NULL\";}else if(keytrg===this.keytrg.Max){// this is a function\nparse=state.Utils.getMax(state.Database.values[key]);if(parse===undefined){ret=key+\" is NULL\";}else{ret=parse;};}else if(keytrg===this.keytrg.Min){// this is a function\nparse=state.Utils.getMin(state.Database.values[key]);if(parse===undefined){ret=key+\" is NULL\";}else{ret=parse;};}else{ret=val;};};return ret;};this.getWhereDynamic=function(state,key,val){var ret,parse;if(state.Database.values[key]===undefined){ret=state.Database.getWhereDetail(key,val);}else{var keytrg=this.getKeytrg(state,key,val);//console.log(\"parseWhere:\",key,JSON.stringify(val),keytrg);\nif(keytrg===this.keytrg.Max){// this is a function\nparse=state.Utils.getMax(state.Database.values[key]);//console.log(\"parseWhere:\",key,parse,JSON.stringify(state.Database.values[key]));\nif(parse===undefined){ret=key+\" is NULL\";}else{ret=key+\"='\"+parse+\"'\";};}else if(keytrg===this.keytrg.Min){// this is a function\nparse=state.Utils.getMin(state.Database.values[key]);if(parse===undefined){ret=key+\" is NULL\";}else{ret=key+\"='\"+parse+\"'\";};}else{ret=state.Database.getWhereDetail(key,val);};};//console.log(\"GetWhere:\",key,val,ret);\nreturn ret;};this.getWhereDetail=function(key,val){if(val===undefined||val===null||val===\"\"){return key+' is NULL';}else{return key+'=\"'+val+'\"';};};this.getWhere=function(state,keys,vals){var where=\"\";//console.log(\"Path:\",JSON.stringify(state.Path.keys));\nif(keys===undefined){keys=state.Path.keys.path;vals=state.Path.select.val;};if(vals===undefined){vals=[];};if(keys!==undefined){var plen=keys.length;for(var ii=0;ii<plen;ii++){var key=keys[ii];var whereKey=state.Database.parseWhere(state,key,vals[key]);//console.log(\"Wherekey:\",ii,key,JSON.stringify(vals),\n//\t    JSON.stringify(vals[key]),\"'\"+whereKey+\"'\");\nif(whereKey===undefined||whereKey===null||whereKey===\"\"){if(where!==\"\"){where=where+' AND ';};where=where+key+' is NULL';}else{if(where!==\"\"){where=where+' AND ';};where=where+\"(\"+whereKey+\")\";}};if(where!==\"\"){where=\" WHERE \"+where;}//console.log(\"Where=|\"+where+\"|\")\n};return where;};this.addWhere=function(iwhere,whereKey){var where=iwhere;if(whereKey!==undefined&&whereKey!==null&&whereKey!==\"\"){if(where!==\"\"){where=where+\" AND (\"+whereKey+\")\";}else{where=\" WHERE (\"+whereKey+\")\";}}return where;};this.getColWhere=function(key,values,index,step){var clen=values.length;var where=\"\";for(var kk=index;kk<Math.min(clen,index+step);kk++){if(where!==\"\"){where=where+\" or \";}where=where+this.getWhereDetail(key,values[kk]);};return where;};this.makeWhere=function(state,keys,vals){//console.log(\"Make where:\",JSON.stringify(keys),JSON.stringify(vals));\nif(keys===undefined){state.Path.keys.path.forEach(function(item,index){this.setWhere(state,item,state.Path.select.val[item]);}.bind(this));}else{keys.forEach(function(item,index){this.setWhere(state,item,vals[item]);}.bind(this));}};this.setWhere=function(state,key,vals){//console.log(\"Setting where:\",key,JSON.stringify(vals));\nvar where=this.parseWhere(state,key,vals);//console.log(\"Setting where:\",key,JSON.stringify(vals),\"'\"+where+\"'\");\nstate.Path.where[key]=where;};this.parseWhere=function(state,key,vals){var where=\"\";if(vals===undefined){vals=[];};var lenv=vals.length;for(var ii=0;ii<lenv;ii++){var val=vals[ii];if(where!==\"\"){where=where+\" OR \";};where=where+state.Database.getWhereDynamic(state,key,val);//console.log(\"From getWhereDynamic:\",key,\":\",val,\":\",where);\n};return where;};this.getGroup=function(keys){var group=\"\";var plen=keys.length;for(var ii=0;ii<plen;ii++){var key=keys[ii];if(group!==\"\"){group=group+',';};group=group+key;};if(group!==\"\"){group=\" GROUP BY \"+group;}return group;};this.getCols=function(keys){var cols=\"\";var plen=keys.length;for(var ii=0;ii<plen;ii++){var key=keys[ii];cols=cols+key;if(cols!==\"\"){cols=cols+',';};};return cols;};this.getAll=function(state){var cols=\"\";var plen=state.Path.keys.other.length;for(var ii=0;ii<plen;ii++){var key=state.Path.keys.other[ii];cols=cols+key;if(cols!==\"\"){cols=cols+',';};};return cols;};this.getDocsRank=function(state,where,keys,maxrank){var dd;dd=this.query(\"select * FROM alarm\"+where);return dd===undefined?[]:dd;};this.getRankCnt=function(state,where,keys,maxrank){where=this.addWhere(where,\"rank='\"+maxrank.toString()+\"'\");var sql,dd;var body=\"* FROM alarm\";if(keys===undefined){sql=\"select \"+body+where;//console.log(\"SQL:\",sql,\":\",body,\":\",where);\ndd=this.query(sql);//console.log(\"initial count:\",dd[0].cnt,JSON.stringify(dd0));\n//console.log(\"Cnt:\",JSON.stringify(dd));\n}else{var cols=this.getCols(keys);var group=this.getGroup(keys);sql=\"select \"+cols+body+where+group;//console.log(\"SQL:\",sql,\":\",body,\":\",where);\ndd=this.query(sql);//console.log(\"Cnt:\",JSON.stringify(dd),JSON.stringify(keys));\n}return dd===undefined?[]:dd;};this.getDocsCnt=function(state,where,keys){var sql,dd;var body=\"count(*) AS cnt, max(level) AS maxlev, max(rank) AS maxrank, min(level) AS minlev, max(lat) AS maxlat, min(lat) AS minlat, max(lon) AS maxlon, min(lon) AS minlon FROM alarm\";if(keys===undefined){sql=\"select \"+body+where;//console.log(\"SQL:\",sql,\":\",body,\":\",where);\ndd=this.query(sql);//console.log(\"initial count:\",dd[0].cnt,JSON.stringify(dd0));\n//console.log(\"Cnt:\",JSON.stringify(dd));\n}else{var cols=this.getCols(keys);var group=this.getGroup(keys);sql=\"select \"+cols+body+where+group;//console.log(\"SQL:\",sql,\":\",body,\":\",where);\ndd=this.query(sql);//console.log(\"Cnt:\",JSON.stringify(dd),JSON.stringify(keys));\n}return dd===undefined?[]:dd;};this.getDocs=function(state,where){var dd=this.query(\"select * FROM alarm\"+where);return dd===undefined?[]:dd;};this.makeTable=function(state){this.query('DROP TABLE IF EXISTS alarm; CREATE TABLE alarm;');};this.dataToDb=function(state,data){alasql.tables.alarm.data=data;};this.getKeyCnt=function(state,key,where){var sql=\"select \"+key+\",count(*) AS cnt FROM alarm\"+where+\" GROUP BY \"+key;return this.query(sql);};this.whatIsIt=function(object){// determine object type\nif(object===null){return\"null\";}else if(object.constructor===this.arrayConstructor){return\"Array\";}else if(object.constructor===this.objectConstructor){return\"Object\";}else{return\"value\";}};this.getTimeDiff=function(state,dt){var s=\"\";if(dt===undefined||isNaN(state,dt)){return s;};var msec=Math.abs(state,dt);var dd=Math.floor(state,(state,msec/1000/60)/60/24);msec-=dd*1000*60*60*24;var hh=Math.floor(state,(state,msec/1000)/60/60);msec-=hh*1000*60*60;var mm=Math.floor(state,msec/1000/60);msec-=mm*1000*60;var ss=Math.floor(state,msec/1000);msec-=ss*1000;if(dt<0){s=\"-\";}else if(dt>0){s=\"+\";}else{s=\"0\";}if(dd!==0)s=s+\" \"+state.Utils.numberWithCommas(dd)+\"d\";if(hh!==0)s=s+\" \"+hh+\"h\";if(mm!==0)s=s+\" \"+mm+\"m\";//if (ss !== 0) s=s+\" \"+ss+\"s\";\nreturn s;};this.sanityCheck=function(state){var sql=\"select count(*) AS cnt, max(level) AS lev FROM alarm\";var dd0=this.query(sql);var nrec=dd0[0].cnt;return nrec;};this.query=function(sql){try{return alasql(sql);}catch(e){alert(sql+\":\"+e);};};};export default Database;","map":{"version":3,"sources":["/home/franktt/react/varseltavle/src/lib/DatabaseLib.js"],"names":["alasql","window","Database","ret","files","loaded","index","cnt","keyCnt","values","epoch0","data","regfile","arrayConstructor","constructor","objectConstructor","casc","cdes","nasc","ndes","delay","ready","log","mod","keytrg","Missing","Null","Value","Min","Max","init","state","response","callbacks","Colors","Path","Layout","Threshold","Utils","File","next","bind","updateLoop","setTime","load","setTimeout","console","loadRegister","processRegister","loadData","processData","path","split","file","Math","min","length","Html","setFootnote","json","JSON","parse","e","alert","name","message","undefined","processJson","dbInsert","makeWhere","Show","showAll","resetSetup","selectIndex","item","max","getTime","s","nn","match","map","Number","date0","Date","UTC","slice","d","epoch","age","getTimeDiff","React","Status","setAge","getKeyValues","key","vals","getKeytrg","val","Array","isArray","lenv","ii","makeKeytrg","len","makeTable","home","hkeys","homeKeys","delayKeys","lenh","push","rcnt","extractData","dataToDb","postProcess","where","getWhere","docs","getDocs","makePath","dbindex","other","table","rest","broadcast","updateKeyCnt","type","order","isNaN","keys","Object","lenk","sql","dd0","query","lend","jj","doc","parent","raw","kk","kii","child","dkey","wii","whatIsIt","cp","dlen","keep","value","found","setThresholds","_title","makeDocTitle","dbextract","showFunc","cntDocs0","getDocsCnt","nrec","m","Matrix","popSeries","buff","cpArray","trash","initKeyCnt","makeKeyCnt","exportAllKeys","sortMatrixValues","cntDocs","makeMatrixCntMap","makeMapRange","makeKeyCntMap","addUndefinedKeyCnt","addUndefinedKeyCntValues","addMapAreaKeys","makeMatrix","ks","klen","getTitleDynamic","getMax","getMin","getWhereDynamic","getWhereDetail","select","plen","whereKey","parseWhere","addWhere","iwhere","getColWhere","step","clen","forEach","setWhere","getGroup","group","getCols","cols","getAll","getDocsRank","maxrank","dd","getRankCnt","toString","body","tables","alarm","getKeyCnt","object","dt","msec","abs","floor","hh","mm","ss","numberWithCommas","sanityCheck"],"mappings":"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","sourcesContent":["//console.log(\"Loading DatabaseLib.js\");\n\nconst alasql = window.alasql;\n\nfunction Database() {\n    var ret;\n    this.files=[\"1.json\"];                  // json data file\n    this.loaded=\"\";\n    this.index=0;\n    this.cnt=0;\n    this.keyCnt={};\n    this.values= {};\n    this.epoch0=0;\n    this.data=\"data/\";\n    this.regfile=\"register\";      // register file (shows current datfile)\n    this.arrayConstructor=[].constructor;\n    this.objectConstructor={}.constructor;\n    this.casc=0; // key is sorted ascending\n    this.cdes=1; // key is sorted descending\n    this.nasc=2; // key is sorted ascending\n    this.ndes=3; // key is sorted descending\n    this.delay=600000;  // server-polling period in ms\n    this.ready=true;     // can we poll server or is another poll running\n    this.log=\"\";\n    this.mod=\"\";\n    this.keytrg={Missing:-1,\n\t\t Null:0,\n\t\t Value:1,\n\t\t Min:2,\n\t\t Max:3\n\t\t};\n    this.init=function(state,response,callbacks){\n        state.Colors.init(state);\n        state.Path.init(state);\n        state.Layout.init(state);\n        state.Threshold.init(state);\n\tstate.Utils.init(\"Database\",this);\n\tstate.File.next(state,response,callbacks);\n    }.bind(this);\n    this.updateLoop=function(state) {\n\t//console.log(\"Updating database...\");\n\tthis.setTime(state);\n\tthis.load(state);\n\tsetTimeout(function() {\n\t    state.Database.updateLoop(state)\n\t},state.Database.delay); //state.Database.delay\n    }.bind(this);\n    this.load=function(state) {\n\tconsole.log(\"Database load number:\",++this.cnt);\n\tif (state.Database.index === 0) {\n\t    state.Database.loadRegister(state,\"\",\n\t\t\t\t\t[state.Database.processRegister,\n\t\t\t\t\t state.Database.loadData,\n\t\t\t\t\t state.Database.processData\n\t\t\t\t\t]);\n\t};\n    };\n    this.loadRegister=function(state, response, callbacks ) {\n\tvar path=(state.Database.data||\"data/\") + state.Database.regfile;\n\tconsole.log(\"Database loadRegister:\",path);\n\tstate.File.load(state,path,callbacks);\n    };\n\n    this.processRegister=function(state,response,callbacks) {\n\tvar files=response.split('\\n');\n\tvar file=files[Math.min(files.length-1,state.Database.index)]; // register-respo\n\tstate.Database.files=files;\n\tstate.Database.index=Math.min(files.length-1,state.Database.index)\n\tstate.File.next(state,file,callbacks);\n    };\t\n    this.loadData=function(state, file, callbacks ) {\n\t//console.log(\"Database loadData:\",JSON.stringify(file));\n\tif (file !== state.Database.loaded) { // load new data\n\t    state.Database.loaded=file;\n\t    // console.log(\"Files:\",JSON.stringify(state.Database.files));\n\t    var path=(state.Database.data||\"data/\") + file;\n\t    //console.log(\"Database loadPath:\",JSON.stringify(path));\n\t    state.File.load(state,path,callbacks);\n\t} else {\n\t    //console.log(\"Setting footer...\");\n\t    state.Html.setFootnote(state);\n\t}\n    };\n    this.processData=function(state,response,callbacks) {\n\t//console.log(\"Database processData.\");\n\tsetTimeout(function() {\n\t    try {\n\t\tstate.Database.json=JSON.parse(response);\n\t    } catch (e) {\n\t\talert(\"Data '\"+state.Database.files[state.Database.index]+\"' contains Invalid JSON:\"+e.name+\":\"+e.message);\n\t    }\n\t    if (state.Database.json !== undefined) {\n\t\tstate.Database.processJson(state,state.Database.json,callbacks);\n\t    }\n\t},0.1);\n    };\n    this.processJson=function(state,json,callbacks) {\n\tstate.Database.dbInsert(state,json);\n\tstate.Html.setFootnote(state,\"Extracting data.\");\n\tsetTimeout(function() {\n\t    state.Database.makeWhere(state); // update where-expressions...\n\t    state.Show.showAll(state);\n\t    state.Html.setFootnote(state);\n\t    state.File.next(state,\"\",callbacks);\n\t},0.1);\n    };\n    this.resetSetup=function(state) {\n\tif (state.Database.json !== undefined) {\n\t    state.Database.processJson(state,state.Database.json);\n\t}\n    };\n    this.selectIndex=function(state,item,index) {\n\tconsole.log(\"Setting file index:\",index,item);\n\tstate.Database.index=Math.max(0,Math.min(index,state.Database.files.length-1));\n\tstate.Database.loadData(state,item,[state.Database.processData]);\n    };\n    this.getTime=function(state,s) {\n\tvar nn = s.match(/\\d+/g).map(Number);\n\tvar date0 = new Date(Date.UTC(nn[0],nn[1]-1,nn[2],nn[3],nn[4],nn[5],\n\t\t\t\t      ((nn[6]||'')+'000').slice(0,3))); // modification time\n\t//console.log(\"Gettime:\",s,JSON.stringify(nn));\n\treturn date0.getTime();\n    };\n    this.setTime=function(state) {\n\tvar d = new Date();\n\tvar epoch=d.getTime();\n\t//console.log(\"Times:\",epoch,this.epoch0);\n\tif (this.epoch0 !== undefined) {\n\t    var age = epoch - this.epoch0;\n\t    this.mod=this.getTimeDiff(state,age);\n\t    if (state.React !== undefined && state.React.Status !== undefined) {\n\t\tstate.React.Status.setAge(state,this.mod);\n\t\t//console.log(\"Age:\",epoch,this.epoch0,age);\n\t    }\n\t}\n    };\n    this.getKeyValues=function(state, key) {\n\t//console.log(\"Database:\",JSON.stringify(state.Database.values));\n\tvar vals=state.Database.values[key];\n\tif (vals !== undefined) {\n\t    return vals;\n\t} else {\n\t    return [];\n\t}\n    };\n    this.getKeytrg=function(state,key,val) {\n\tif (Array.isArray(val)) {\n\t    //console.log(\">>>Is array:\",key,JSON.stringify(val));\n\t    ret=this.keytrg.Missing;\n\t    var lenv=val.length;\n            for (var ii=0;ii<lenv;ii++) {\n\t\tret=Math.max(ret,this.getKeytrg(state,key,val[ii]));\n            }\n\t    //console.log(\">>>return:\",key,ret);\n\t} else { \n\t    if (val === \"null\") {\n\t\tret=this.keytrg.Null;\n\t    } else if (val===\"MIN(\"+key+\")\") { // this is a function\n\t\tret=this.keytrg.Min;\n\t    } else if (val===\"MAX(\"+key+\")\") { // this is a function\n\t\tret=this.keytrg.Max;\n\t    } else if (val === undefined) {\n\t\tret=this.keytrg.Missing;\n\t    } else if (val === null) {\n\t\tret=this.keytrg.Null;\n\t    } else {\n\t\tret=this.keytrg.Value;\n\t    };\n\t    //console.log(\"---return:\",key,ret);\n\t};\n\treturn ret;\n    };\n    this.makeKeytrg=function(state,key,keytrg,val) {\n\tif (keytrg === this.keytrg.Missing) {\n\t    return \"missing\";\n\t} else if (keytrg === this.keytrg.Null) {\n\t    return \"null\";\n\t} else if (keytrg === this.keytrg.Min) {\n\t    return \"MIN(\"+key+\")\"\n\t} else if (keytrg === this.keytrg.Max) {\n\t    return \"MAX(\"+key+\")\"\n\t} else {\n\t    return val;\n\t};\n    };\n    this.dbInsert=function(state,json) {\n\tvar ii,key;\n\ttry {\n\t    // set home\n\t    var len=json.data.length\n\t    for (ii=0;ii<len;ii++) {\n\t\tjson.data[ii][\"cnt\"]=ii\n\t    }\n\t    // get modified date\n\t    //console.log(\"Setting time.\");\n\t    this.epoch0=this.getTime(state,json.epoch);     // data file time\n\t    this.setTime(state);     // data file time\n\t    // make database for raw data\n\t    this.makeTable(state);\n\t    // reset key counts and range\n\t    this.cnt=0;\n\t    this.keyCnt={}; // reset key-count\n\t    // put data into databse\n\t    //console.log(\"inserting\");\n\t    var data=[];\n\t    var home=state.Path.home.val;\n\t    var hkeys=state.Path.home.path;//Object.keys(home);\n\t    var homeKeys=[];\n\t    var delayKeys=[];\n\t    var lenh=hkeys.length;\n            for (ii=0;ii<lenh;ii++) {\n\t\tkey=hkeys[ii];\n\t\tvar keytrg=this.getKeytrg(state,key,home[key]);\n\t\t//console.log(\"Keytrg:\",key,keytrg,JSON.stringify(home[key]));\n\t\tif (keytrg <= this.keytrg.Value) {\n\t\t    homeKeys.push(key);\n\t\t} else {\n\t\t    delayKeys.push(key);\n\t\t}\n            }\n\t    //console.log(\"Home keys:\",JSON.stringify(homeKeys),\" delayed:\",JSON.stringify(delayKeys));\n\t    var rcnt=this.extractData(state,data,{},\"\",json.data,homeKeys,home);\n\t    console.log(\"Count:\",rcnt);\n\t    //console.log(\"Data:\",JSON.stringify(data));\n\t    this.dataToDb(state,data);\n\t    //var nrec=this.sanityCheck(state)\t    // sanity check\n\t    //console.log(\"Initially:\",data.length,\" Extracted:\",rcnt,' Database:',nrec);\n\t    this.postProcess(state); // update distinct Database.values[key]\n\t    if (delayKeys.length > 0) {// delayed home selection (MAX() and MIN())\n\t\tthis.makeWhere(state,delayKeys,home);\n\t\tvar where=this.getWhere(state,delayKeys,home);\n\t\tvar docs=this.getDocs(state,where);\n\t\tthis.dataToDb(state,docs)\n\t\tthis.postProcess(state); // update distinct Database.values[key]\n\t    };\n\t    state.Path.makePath(state); // initialise path\n\t    //console.log(\"Indexing and cleaning up.\");\n\t    this.dbindex(state,state.Path.other.table); // make indexes\n\t    this.dbindex(state,state.Path.other.rest); // make indexes\n\t    //state.Path.checkTableKeys(state);\n\t    state.Html.broadcast(state,\"Database is ready.\");\n\t    //console.log(\"Database is ready.\");\n\t} catch (e) {\n\t    alert(\"Db-insert error:\"+e);\n\t};\n    };\n    this.updateKeyCnt=function(state,key,val) {\n\tif (this.keyCnt[key] === undefined) {\n\t    this.keyCnt[key]={cnt:0,type:\"num\",order:this.nasc};\n\t}\n\tthis.keyCnt[key].cnt=(this.keyCnt[key].cnt)+1;\n\tif (this.keyCnt[key].type  === \"num\" && isNaN(val)) {\n\t    this.keyCnt[key].type=\"nan\";\n\t    this.keyCnt[key].order=this.casc;\n\t}\n    };\n    this.postProcess=function(state) { // update meta-data\n\tvar keys=Object.keys(state.Database.keyCnt);\n\tvar lenk=keys.length;\n\tfor (var ii=0;ii<lenk;ii++) {\n\t    var key=keys[ii];\n\t    // make list of values in Database for each key\n\t    state.Database.values[key]=[];\n\t    var sql=\"select DISTINCT \"+key+\" AS \"+key+\" FROM alarm\";\n\t    var dd0=this.query(sql);\n\t    var lend=dd0.length;\n\t    for (var jj=0;jj<lend;jj++) {\n\t\tvar doc=dd0[jj];\n\t\tstate.Database.values[key].push(doc[key]);\n\t    };\n\t};\n    };\n    this.extractData=function(state,data,parent,key,raw,hkeys,home) { // insert records into db (recursive)\n\tvar rcnt=0;\n\tvar kk,ii,kii,child,dkey;\n\t//console.log(\"Processing {\",state.Utils.toString(parent),\"} '\",key,\"' (\",state.Utils.toString(raw),\")\");\n\tvar wii=this.whatIsIt(raw);\n\tif (wii  === \"Object\" && key  === \"\") {\n\t    //console.log(\"Found object (\",state.Utils.toString(parent),\")\");\n\t    child=state.Utils.cp(parent);\n\t    // loop over plain values first\n\t    for (kk in raw) {\n\t\tkii=this.whatIsIt(raw[kk]);\n\t\tif (kii  === \"value\") {\n\t\t    child[kk]=raw[kk];\n\t\t}\n\t    }\n\t    // loop over sub-objects\n\t    var nn=0;\n\t    for (kk in raw) {\n\t\tkii=this.whatIsIt(raw[kk]);\n\t\tif (kii !== \"value\") {\n\t\t    nn=nn+1;\n\t\t    rcnt=rcnt+this.extractData(state,data,child,kk,raw[kk],hkeys,home);\n\t\t}\n\t    }\n\t    if (nn  === 0) { // insert \n\t\t//console.log(\"Object was empty.\");\n\t\trcnt=rcnt+this.extractData(state,data,child,null,null,hkeys,home);\n\t    }\n\t} else if (wii  === \"Object\" && key !== \"\") {\n\t    //console.log(\"Found object key '\",key,\"' (\",state.Utils.toString(parent),\")\");\n\t    child=state.Utils.cp(parent);\n\t    // loop over plain values first\n\t    for (kk in raw) {\n\t\tchild[key]=kk;\n\t\trcnt=rcnt+this.extractData(state,data,child,\"\",raw[kk],hkeys,home);\n\t    }\n\t} else if (wii  === \"Array\") {\n\t    //console.log(\"Found array key '\",key,\"' (\",state.Utils.toString(parent),\")\");\n\t    var dlen = raw.length;\n\t    for (ii = 0; ii < dlen; ii++) {\n\t\trcnt=rcnt+this.extractData(state,data,parent,key,raw[ii],hkeys,home);\n\t    }\n\t} else {\n\t    //console.log(\"Found key '\",key,\"' \",wii,\" (\",state.Utils.toString(parent),\")\");\n\t    var keep=true;\n\t    var doc=state.Utils.cp(parent);\n\t    if (raw !== null) {\n\t\tif (key  === \"\") {\n\t\t    doc.value=raw;\n\t\t} else {\n\t\t    doc[key]=raw;\n\t\t}\n\t    }\n\t    // check if home criteria is met\n\t    var lenh=hkeys.length;\n\t    for (ii=0;ii<lenh;ii++) {\n\t\tkey=hkeys[ii];\n\t\tvar vals=home[key];\n\t\tvar lenv=vals.length;\n\t\tvar found=false;\n\t\tfor (var jj=0;jj<lenv;jj++){\n\t\t    if (vals[jj]===doc[key] || (vals[jj]===\"\" && doc[key]===undefined)) {\n\t\t\tfound=true;\n\t\t    }\n\t\t}\n\t\tif (!found) {\n\t\t    keep=false;\n\t\t};\n\t    }\n\t    if (keep) {\n\t\t//console.log(\"Updating internal raw structure\",JSON.stringify(setup));\n\t\tfor (dkey in doc) {\n\t\t    var val=doc[dkey];\n\t\t    this.updateKeyCnt(state,dkey,val);\n\t\t    //// this takes too much time...\n\t\t    //if (this.values[dkey]  === undefined) {\n\t\t    //\tthis.values[dkey]=[];\n\t\t    //  };\n\t\t    ////console.log(\"Setup:\",JSON.stringify(setup));\n\t\t    ////console.log(\"Key:\",key,JSON.stringify(this.values));\n    \t\t    //if (this.values[dkey].indexOf(val)  === -1 ) { // value not in range\n\t\t    //    this.values[dkey].push(val); // add value to range\n\t\t    //};\n\t\t};\n\t\t//console.log(\">>> Inserting:\",state.Utils.toString(doc));\n\t\trcnt=rcnt+1;\n\t\tthis.cnt=this.cnt+1;\n\t\tstate.Threshold.setThresholds(doc);\n\t\tdoc._title=state.Layout.makeDocTitle(state,doc);\n\t\t//if (this.cnt < 10) { // debug purposes\n\t\t//for (key in keys) {\n\t\t//this.updateKeyCnt(state,key,doc[key]);\n\t\t//};\n\t\tdata.push(doc);\n\t    //} else {\n\t\t//console.log(\"Ignoring:\",lenh,JSON.stringify(hkeys),JSON.stringify(home),JSON.stringify(doc));\n\t    }\n\t}\n\treturn rcnt;\n    };\n    this.dbextract=function(state,showFunc) { // extract data from db and show\n\t// extract data from db and insert into data-array\n\t// var parent={};//{test:{$exists:false}};\n\tvar where = this.getWhere(state);\n\tvar cntDocs0=this.getDocsCnt(state,where);\n\tvar nrec= (cntDocs0.length===0?0:cntDocs0[0].cnt);\n\tvar m={};\n\tstate.Matrix.cnt=nrec;\n\tif (nrec > state.Matrix.popSeries) { // maintain keyCnt\n\t    var buff=[];\n\t    state.Utils.cpArray(buff,state.Path.keys.path);\n\t    state.Utils.cpArray(buff,state.Path.keys.other);\n\t    state.Utils.cpArray(buff,state.Path.trash);\n\t    state.Matrix.initKeyCnt(state);\n\t    state.Matrix.makeKeyCnt(state,where,nrec,buff);\n\t    //\n\t    state.Path.exportAllKeys(state); // can not export keys before we have a keyCnt\n\t    state.Matrix.sortMatrixValues(state);\n\t    //console.log(\"Count:\",JSON.stringify(docs));\n\t    // add \"undefined\" range of keys that are not present in every doc...\n\t    var cntDocs=state.Database.getDocsCnt(state,where,state.Path.other.table);\n\t    state.Matrix.makeMatrixCntMap(state,cntDocs,m);\n\t    state.Matrix.makeMapRange(state);\n\t} else {                              // maintain map data and keyCnt...\n\t    //console.log(\"Database where:\",where);\n\t    var docs=this.getDocs(state,where); // get all docs\n\t    //console.log(\">>>Extraction key (where='\",where,\"') Docs:\",docs.length);\n\t    state.Matrix.initKeyCnt(state);\n\t    state.Matrix.makeKeyCntMap(state,docs);\n\t    state.Matrix.makeMapRange(state);\n\t    state.Matrix.addUndefinedKeyCnt(state,docs); // add \"undefined\"\n\t    state.Matrix.addUndefinedKeyCntValues(state);\n\t    state.Matrix.addMapAreaKeys(state,docs);\n\t    //\n\t    state.Path.exportAllKeys(state); // can not export keys before we have a keyCnt\n\t    state.Matrix.sortMatrixValues(state);\n\t    state.Matrix.makeMatrix(state,docs,m);\n\t    //console.log (\"Matrix:\",JSON.stringify(m));\n\t}\n\tshowFunc(state,m);\n    };\n    this.dbindex=function(state,ks) { // make indexes on all keys\n\tvar s=\"\";\n\tvar klen = ks.length;\n\tfor (var ii = 0; ii < klen; ii++) {\n\t    //this.query(\"CREATE INDEX ? ON TABLE alarm.?\",ks[ii],ks[ii]);\n\t    s=s+\" \"+ks[ii];\n\t};\n\t//console.log(\"Indexes:\",s);\n    };\n    this.getTitleDynamic=function(state,key,val) {\n\tvar ret,parse;\n\tif (state.Database.values[key] === undefined) {\n\t    ret=val;\n\t} else {\n\t    var keytrg=this.getKeytrg(state,key,val);\n\t    if (val === \"null\") {\n\t\tret=key + \" is NULL\";\n\t    } else if (keytrg === this.keytrg.Max) { // this is a function\n\t\tparse=state.Utils.getMax(state.Database.values[key]);\n\t\tif (parse === undefined) {\n\t\t    ret=key + \" is NULL\";\n\t\t} else {\n\t\t    ret=parse;\n\t\t};\n\t    } else if (keytrg === this.keytrg.Min) { // this is a function\n\t\tparse=state.Utils.getMin(state.Database.values[key]);\n\t\tif (parse === undefined) {\n\t\t    ret=key + \" is NULL\";\n\t\t} else {\n\t\t    ret=parse;\n\t\t};\n\t    } else {\n\t\tret=val;\n\t    };\n\t};\n\treturn ret;\n    };\n    this.getWhereDynamic=function(state,key,val) {\n\tvar ret,parse;\n\tif (state.Database.values[key] === undefined) {\n\t    ret=state.Database.getWhereDetail(key,val);\n\t} else {\n\t    var keytrg=this.getKeytrg(state,key,val);\n\t    //console.log(\"parseWhere:\",key,JSON.stringify(val),keytrg);\n\t    if (keytrg === this.keytrg.Max) { // this is a function\n\t\tparse=state.Utils.getMax(state.Database.values[key]);\n\t\t//console.log(\"parseWhere:\",key,parse,JSON.stringify(state.Database.values[key]));\n\t\tif (parse === undefined) {\n\t\t    ret=key + \" is NULL\";\n\t\t} else {\n\t\t    ret=key + \"='\"+parse+\"'\";\n\t\t};\n\t    } else if (keytrg === this.keytrg.Min) { // this is a function\n\t\tparse=state.Utils.getMin(state.Database.values[key]);\n\t\tif (parse === undefined) {\n\t\t    ret=key + \" is NULL\";\n\t\t} else {\n\t\t    ret=key + \"='\"+parse+\"'\";\n\t\t};\n\t    } else{\n\t\tret=state.Database.getWhereDetail(key,val);\n\t    };\n\t};\n\t//console.log(\"GetWhere:\",key,val,ret);\n\treturn ret;\n    };\n    this.getWhereDetail=function(key,val) {\n\tif (val  === undefined ||\n\t    val  === null ||\n\t    val  === \"\") {\n\t    return key +' is NULL';\n\t} else {\n\t    return key + '=\"'+val+'\"'\n\t};\n    };\n    this.getWhere=function(state,keys,vals) {\n\tvar where=\"\";\n\t//console.log(\"Path:\",JSON.stringify(state.Path.keys));\n\tif (keys === undefined) {\n\t    keys=state.Path.keys.path;\n\t    vals=state.Path.select.val;\n\t};\n\tif (vals === undefined) {vals=[];};\n\tif (keys !== undefined) {\n\t    var plen = keys.length;\n\t    for (var ii = 0; ii < plen; ii++) {\n\t\tvar key=keys[ii];\n\t\tvar whereKey=state.Database.parseWhere(state,key,vals[key])\n\t\t//console.log(\"Wherekey:\",ii,key,JSON.stringify(vals),\n\t\t//\t    JSON.stringify(vals[key]),\"'\"+whereKey+\"'\");\n\t\tif (whereKey  === undefined ||\n\t\t    whereKey  === null ||\n\t\t    whereKey  === \"\" ) {\n\t\t    if (where !== \"\") { where = where +  ' AND ';};\n\t\t    where= where + key +' is NULL';\n\t\t} else {\n\t\t    if (where !== \"\") { where = where +  ' AND ';};\n\t\t    where=where + \"(\"+ whereKey+\")\";\n\t\t}\n\t    };\n\t    if (where !== \"\") {where=\" WHERE \"+where;}\n\t    //console.log(\"Where=|\"+where+\"|\")\n\t};\n\treturn where;\n    };\n    this.addWhere=function(iwhere,whereKey) {\n\tvar where=iwhere;\n\tif (whereKey  !== undefined &&\n\t    whereKey  !== null &&\n\t    whereKey  !== \"\" ) {\n\t    if (where !== \"\") {\n\t\twhere = where +  \" AND (\"+ whereKey+\")\";\n\t    } else {\n\t\twhere = \" WHERE (\"+ whereKey+\")\";\n\t    }\n\t}\n\treturn where;\n    };\n    this.getColWhere=function(key,values,index,step) {\n\tvar clen=values.length;\n\tvar where=\"\";\n        for (var kk=index;kk<Math.min(clen,index+step);kk++) {\n\t    if (where !== \"\") {where=where + \" or \";}\n\t    where=where + this.getWhereDetail(key,values[kk]);\n        };               \n\treturn where;\n    };\n    this.makeWhere=function(state,keys,vals) {\n\t//console.log(\"Make where:\",JSON.stringify(keys),JSON.stringify(vals));\n\tif (keys === undefined) {\n\t    state.Path.keys.path.forEach(function(item,index) {this.setWhere(state,item,state.Path.select.val[item]);}.bind(this));\n\t} else {\n\t    keys.forEach(function(item,index) {this.setWhere(state,item,vals[item]);}.bind(this));\n\t}\n    };\n    this.setWhere=function(state,key,vals) {\n\t//console.log(\"Setting where:\",key,JSON.stringify(vals));\n\tvar where=this.parseWhere(state,key,vals);\n\t//console.log(\"Setting where:\",key,JSON.stringify(vals),\"'\"+where+\"'\");\n\tstate.Path.where[key]=where;\n    };\n    this.parseWhere=function(state,key,vals) {\n\tvar where=\"\";\n\tif (vals === undefined) {vals=[];};\n\tvar lenv=vals.length\n\tfor (var ii=0;ii<lenv;ii++) {\n\t    var val=vals[ii]\n\t    if (where !== \"\") { where=where + \" OR \";};\n\t    where = where + state.Database.getWhereDynamic(state,key,val);\n\t    //console.log(\"From getWhereDynamic:\",key,\":\",val,\":\",where);\n\t};\n\treturn where;\n    };\n    this.getGroup=function(keys) {\n\tvar group=\"\";\n\tvar plen = keys.length;\n\tfor (var ii = 0; ii < plen; ii++) {\n\t    var key=keys[ii];\n\t    if (group !== \"\") { group = group +  ',';};\n\t    group= group + key;\n\t};\n\tif (group !== \"\") {group=\" GROUP BY \"+group;}\n\treturn group;\n    };\n    this.getCols=function(keys) {\n\tvar cols=\"\";\n\tvar plen = keys.length;\n\tfor (var ii = 0; ii < plen; ii++) {\n\t    var key=keys[ii];\n\t    cols= cols + key;\n\t    if (cols !== \"\") { cols = cols +  ',';};\n\t};\n\treturn cols;\n    };\n    this.getAll=function(state) {\n\tvar cols=\"\";\n\tvar plen = state.Path.keys.other.length;\n\tfor (var ii = 0; ii < plen; ii++) {\n\t    var key=state.Path.keys.other[ii];\n\t    cols= cols + key;\n\t    if (cols !== \"\") { cols = cols +  ',';};\n\t};\n\treturn cols;\n    };\n    this.getDocsRank=function(state,where,keys,maxrank) {\n\tvar dd;\n\tdd=this.query(\"select * FROM alarm\"+where);\n\treturn (dd===undefined?[]:dd);\n    };\n\n    this.getRankCnt=function(state,where,keys,maxrank) {\n\twhere=this.addWhere(where,\"rank='\" + maxrank.toString()+\"'\");\n\tvar sql,dd;\n\tvar body=\"* FROM alarm\";\n\tif (keys  === undefined) {\n\t    sql=\"select \"+body+where;\n\t    //console.log(\"SQL:\",sql,\":\",body,\":\",where);\n\t    dd=this.query(sql);\n\t    //console.log(\"initial count:\",dd[0].cnt,JSON.stringify(dd0));\n\t    //console.log(\"Cnt:\",JSON.stringify(dd));\n\t} else {\n\t    var cols = this.getCols(keys);\n\t    var group = this.getGroup(keys);\n\t    sql=\"select \"+cols+body+\n    \t\twhere+group;\n\t    //console.log(\"SQL:\",sql,\":\",body,\":\",where);\n\t    dd=this.query(sql);\n\t    //console.log(\"Cnt:\",JSON.stringify(dd),JSON.stringify(keys));\n\t}\n\treturn (dd===undefined?[]:dd);\n    };\n    this.getDocsCnt=function(state,where,keys) {\n\tvar sql,dd;\n\tvar body=\"count(*) AS cnt, max(level) AS maxlev, max(rank) AS maxrank, min(level) AS minlev, max(lat) AS maxlat, min(lat) AS minlat, max(lon) AS maxlon, min(lon) AS minlon FROM alarm\";\n\tif (keys  === undefined) {\n\t    sql=\"select \"+body+where;\n\t    //console.log(\"SQL:\",sql,\":\",body,\":\",where);\n\t    dd=this.query(sql);\n\t    //console.log(\"initial count:\",dd[0].cnt,JSON.stringify(dd0));\n\t    //console.log(\"Cnt:\",JSON.stringify(dd));\n\t} else {\n\t    var cols = this.getCols(keys);\n\t    var group = this.getGroup(keys);\n\t    sql=\"select \"+cols+body+\n    \t\twhere+group;\n\t    //console.log(\"SQL:\",sql,\":\",body,\":\",where);\n\t    dd=this.query(sql);\n\t    //console.log(\"Cnt:\",JSON.stringify(dd),JSON.stringify(keys));\n\t}\n\treturn (dd===undefined?[]:dd);\n    };\n    this.getDocs=function(state,where) {\n\tvar dd=this.query(\"select * FROM alarm\"+where);\n\treturn (dd===undefined?[]:dd);\n    };\n    this.makeTable=function(state) {\n\tthis.query('DROP TABLE IF EXISTS alarm; CREATE TABLE alarm;');\n    };\n    this.dataToDb=function(state,data) {\n\talasql.tables.alarm.data = data;\n    };\n    this.getKeyCnt=function(state,key,where){\n\tvar sql=\"select \"+key+\",count(*) AS cnt FROM alarm\"+\n\t    where+\" GROUP BY \"+key;\n\treturn this.query(sql);\n    };\n    this.whatIsIt=function(object) { // determine object type\n\tif (object  === null) {\n\t    return \"null\";\n\t} else if (object.constructor  === this.arrayConstructor) {\n\t    return \"Array\";\n\t}\n\telse if (object.constructor  === this.objectConstructor) {\n\t    return \"Object\";\n\t}\n\telse {\n\t    return \"value\";\n\t}\n    };\n    this.getTimeDiff=function(state,dt) {\n\tvar s=\"\";\n\tif (dt  === undefined || isNaN(state,dt)) {return s;};\n\tvar msec=Math.abs(state,dt);\n\tvar dd = Math.floor(state,((state,(msec / 1000) / 60) / 60) / 24);\n\tmsec -= dd * 1000 * 60 * 60 * 24;\n\tvar hh = Math.floor(state,((state,msec / 1000) / 60) / 60);\n\tmsec -= hh * 1000 * 60 * 60;\n\tvar mm = Math.floor(state,(msec / 1000) / 60);\n\tmsec -= mm * 1000 * 60;\n\tvar ss = Math.floor(state,msec / 1000);\n\tmsec -= ss * 1000;\n\tif (dt<0) {\n\t    s=\"-\";\n\t} else if (dt > 0) {\n\t    s=\"+\";\n\t} else {\n\t    s=\"0\";\n\t}\n\tif (dd !== 0) s=s+\" \"+state.Utils.numberWithCommas(dd)+\"d\";\n\tif (hh !== 0) s=s+\" \"+hh+\"h\";\n\tif (mm !== 0) s=s+\" \"+mm+\"m\";\n\t//if (ss !== 0) s=s+\" \"+ss+\"s\";\n\treturn s;\n    }\n    this.sanityCheck=function(state) {\n\tvar sql=\"select count(*) AS cnt, max(level) AS lev FROM alarm\";\n\tvar dd0=this.query(sql);\n\tvar nrec= dd0[0].cnt;\n\treturn nrec;\n    }\n    this.query=function(sql) {\n\ttry {\n\t    return alasql(sql);\n\t} catch (e) {\n\t    alert(sql + \":\" + e);\n\t};\n    }\n\n};\n\nexport default Database;\n"]},"metadata":{},"sourceType":"module"}