{"ast":null,"code":"//console.log(\"Loading PathLib.js\");\nfunction Path(){this.keys={path:[],// selected keys\nother:[]// keys available for selection\n};this.other={table:[],// table keys\nrest:[]// keys available for table\n};this.trash=[];// remaining valid keys\nthis.valid=[];// list of valid keys\nthis.ignore=[\"max\",\"min\",\"minlat\",\"minlon\",\"maxlat\",\"maxlon\",\"cnt\",\"level\"];// only visible in 1D and 0D tables\nthis.select={val:{}};// current selection criteria\nthis.where={};// current cache for where expressions\nthis.home={path:[],val:{}};// initial home for data...\nthis.tooltip={keys:[],// keys that will be displayed (in addition to row/col-keys)\nselect:[],// extra level of keys to distinguish reports\nsort:[],// which keys should be sorted?\nclick:[]};// which keys should be clickable...\nthis.type={path:{ityp:-1,ptyp:\"path\"},eye:{ityp:0,ptyp:\"eye\"},table:{ityp:1,ptyp:\"table\"},rest:{ityp:2,ptyp:\"rest\"},trash:{ityp:3,ptyp:\"trash\"},trashRest:{ityp:4,ptyp:\"trashRest\"},row:{ityp:5,ptyp:\"row\"},col:{ityp:6,ptyp:\"col\"},item:{ityp:7,ptyp:\"item\"}};this.order={};// how to order data\t    \nthis.init=function(state){state.Utils.init(\"Path\",this);};this.cleanSelect=function(state){var pkeys=state.Path.keys.path;var keys=Object.keys(state.Path.select.val);var lenk=keys.length;for(var ii=0;ii<lenk;ii++){var key=keys[ii];if(pkeys.indexOf(key)===-1){state.Path.select.val[key]=undefined;}}};this.goHome=function(state){var buff=state.Utils.cp(state.Path.keys.path);state.Utils.remArray(buff,state.Path.home.path);state.Utils.remArray(state.Path.keys.other,buff);state.Utils.remArray(state.Path.keys.other,state.Path.home.path);state.Utils.prepArray(state.Path.keys.other,buff);state.Path.select.val=state.Utils.cp(state.Path.home.val);state.Path.keys.path=state.Utils.cp(state.Path.home.path);//console.log(\">>>>>> Path.goHome: \",JSON.stringify(state.Path.home),JSON.stringify(state.Path.keys.path));\nstate.Utils.pushUrl(state);state.Navigate.store(state);state.Navigate.refreshHistory(state);state.Show.show(state);};this.setHome=function(state){state.Path.cleanSelect(state);this.home.path=state.Utils.cp(state.Path.keys.path);this.home.val=state.Utils.cp(state.Path.select.val);state.Utils.pushUrl(state);console.log(\"Setting home.\");};this.getSnapshot=function(state){// store state\nreturn{keys:state.Utils.cp(state.Path.keys),other:state.Utils.cp(state.Path.other),select:state.Utils.cp(state.Path.select),order:state.Utils.cp(state.Path.order)};};this.setSnapshot=function(state,snapshot){// store state\nstate.Utils.restore(state.Path,snapshot);};this.toggleSelect=function(state,key,val){var vals=state.Path.select.val[key];//console.log(\"toggleSelect:\",key,JSON.stringify(vals),\"'\"+val+\"'\");\nif(vals!==undefined){var vid=vals.indexOf(val);if(vid!==-1){// remove item\nvals.splice(vid,1);if(vals.length===0){// can never be totally empty...\nvals.push(state.Database.makeKeytrg(state,key,state.Database.keytrg.Max));}state.Path.select.val[key]=vals;}else{state.Path.select.val[key].push(val);// add item\n}state.Database.setWhere(state,key,state.Path.select.val[key]);state.Show.showPath(state);//console.log(\"Finally Vals:\",key,JSON.stringify(state.Path.select.val[key]));\n}};this.getTitle=function(state){var title=\"\";var keys=state.Path.keys.path;keys.forEach(function(key,index){var vals=state.Path.select.val[key];//console.log(\"   select:\",key,JSON.stringify(vals));\nif(vals===undefined){vals=[];};var lenv=vals.length;for(var ii=0;ii<lenv;ii++){var val=vals[ii];if(title!==\"\"){title=title+\" | \";};title=title+state.Database.getTitleDynamic(state,key,val);}});//console.log(\"Pathlib getTitle keys:\",JSON.stringify(keys),title);\nreturn title;};this.makeCnt=function(state,key){return state.Path.select.val[key].length;};this.getOrderValues=function(state,skey){if(state.Path.order[skey]===undefined){//console.log(\"Copying:\",JSON.stringify(Matrix.values[skey]));\nreturn state.Matrix.values[skey];}else{var vals=state.Matrix.values[skey];var plen=vals;for(var ii=0;ii<plen;ii++){var val=vals[ii];if(state.Path.order[skey].indexOf(val)===-1){state.Path.order[skey].push(val);}};return state.Path.order[skey];};};this.makeOrderValues=function(state,skey){if(state.Path.order===undefined){state.Path.order={};};if(state.Path.order[skey]===undefined){//console.log(\"Copying:\",JSON.stringify(Matrix.values[skey]));\nstate.Path.order[skey]=state.Utils.cp(state.Matrix.values[skey]);}else{var vals=state.Matrix.values[skey];var plen=vals;for(var ii=0;ii<plen;ii++){var val=vals[ii];if(state.Path.order[skey].indexOf(val)===-1){state.Path.order[skey].push(val);}};};return state.Path.order[skey];};this.bumpOrder=function(state,skey,value){//console.log(\"Bump order:\",skey,value,JSON.stringify(state.Path.order));\nif(value===\"\"){state.Path.order[skey]=undefined;}else{this.makeOrderValues(state,skey);var vid=state.Path.order[skey].indexOf(value);if(vid!==-1&&vid>0){var src=state.Path.order[skey].splice(vid,1);// remove from array   \nstate.Utils.spliceArray(state.Path.order[skey],vid-1,0,src);};}state.Show.showConfig(state);};this.setWhere=function(state){state.Path.keys.path.forEach(function(item,index){state.Database.setWhere(state,item,state.Path.select.val[item]);});};this.makePath=function(state){// note that not all keys are present in the data!\n//console.log(\"Entering makepath.\",JSON.stringify(this.keys));\nvar ii,key;var pathSet=[];if(this.keys.path===undefined){this.keys.path=[];};if(this.keys.other===undefined){this.keys.other=[];};if(this.trash===undefined){this.trash=[];};if(this.keys.path.length>0||this.keys.other.length>0||this.trash.length>0){// remove duplicates\n//console.log(\"Filtering.\");\nvar olen;this.keys.path=this.keys.path.filter(this.Unique);this.keys.other=this.keys.other.filter(this.Unique);this.trash=this.trash.filter(this.Unique);//console.log(\"setup:\",JSON.stringify(setup));\n//console.log(\"Remove invalid keys from path.\");\n// remove invalid keys from path\nvar plen=this.keys.path.length;for(ii=0;ii<plen;ii++){key=this.keys.path[ii];if(state.Database.keyCnt[key]===undefined){this.keys.path.splice(ii,1);ii=ii-1;plen=plen-1;}}//console.log(\"Remove invalid keys from other.\");\n// remove invalid keys from other\nolen=this.keys.other.length;for(ii=0;ii<olen;ii++){key=this.keys.other[ii];if(state.Database.keyCnt[key]===undefined){this.other.rest.splice(ii,1);ii=ii-1;olen=olen-1;}}//console.log(\"Remove invalid keys from trash.\");\n// remove invalid keys from trash\nolen=this.trash.length;for(ii=0;ii<olen;ii++){key=this.trash[ii];if(state.Database.keyCnt[key]===undefined){this.trash.splice(ii,1);ii=ii-1;olen=olen-1;}}//console.log(\"Update trash with keys.\");\n// we already have a path, update trash with new keys\nfor(key in state.Database.keyCnt){if(this.keys.path.indexOf(key)===-1&&this.keys.other.indexOf(key)===-1&&this.trash.indexOf(key)===-1&&state.Utils.missing(this.ignore,key)){pathSet[key]=\"trash\";this.select.val[key]=undefined;this.where[key]=\"\";this.trash.push(key);}}}else{// new path...\n//console.log(\"New path\");\n// ...define this.select.val for all keys in input data\nfor(key in state.Database.keyCnt){pathSet[key]=\"data\";};this.keys.path=[];this.other.table=[];this.other.rest=[];this.select.val={};// no values are set so far\nthis.where={};//console.log(\"Copy default trash keys.\",JSON.stringify(state.Default.current.trash));\n// copy default trash keys (that are used) to trash...\nif(state.Default.current.trash!==undefined){var tlen=state.Default.current.trash.length;for(ii=0;ii<tlen;ii++){key=state.Default.current.trash[ii];if(pathSet[key]!==undefined){//\t\t\tif (state.Utils.missing(this.trash,key)) { \n//\t\t\t    this.trash.push(key);\n//\t\t\t};\npathSet[key]=undefined;// ignore key from now on...\n}}//console.log(\"Pathset:\",JSON.stringify(pathSet),JSON.stringify(state.Default.current.trash));\n};//console.log(\"Copy default other keys.\");\n//console.log(\"makePath A:\",JSON.stringify(state.Path.keys),JSON.stringify(state.Path.other),JSON.stringify(state.Path.trash));\n// console.log(\"Added trash:\",JSON.stringify(state.Path.keys),JSON.stringify(state.Path.other),JSON.stringify(state.Path.trash));\n// copy default other keys (that are used) to other...\nif(state.Default.current.other!==undefined){var klen=state.Default.current.other.length;for(ii=0;ii<klen;ii++){key=state.Default.current.other[ii];if(pathSet[key]!==undefined){// key not present in input data\nif(state.Utils.missing(this.keys.other,key)){this.keys.other.push(key);};pathSet[key]=\"found\";}}}//console.log(\"makePath B:\",JSON.stringify(state.Path.keys),JSON.stringify(state.Path.other),JSON.stringify(state.Path.trash));\n//console.log(\"Add missing keys.\");\n// add missing keys to path\nfor(key in state.Database.keyCnt){if(state.Utils.missing(this.ignore,key)){if(pathSet[key]===\"data\"){if(state.Utils.missing(this.keys.other,key)){this.keys.other.push(key);};//console.log(\"Added key:\",key);\npathSet[key]=\"added\";}};};// add undefined values in values\n// for (key in state.Database.keyCnt) {\n//     if (state.Database.keyCnt[key].cnt<state.Database.cnt) {\n// \tstate.Database.values[key].push(undefined);\n//     }\n// }\n// // sort sub-path according to count...\n// this.keys.other=this.keys.other.sort(function(state,a, b) {\n//     if (state.Database.values[a]  === undefined) {\n// \treturn -1;\n//     } else if (state.Database.values[b]  === undefined) {\n// \treturn 1;\n//     } else {\n// \treturn state.Database.values[a].length - state.Database.values[b].length\n//     }\n// });\n//console.log(\"makePath C:\",JSON.stringify(state.Path.keys),JSON.stringify(state.Path.other),JSON.stringify(state.Path.trash));\n//console.log(\"Push other keys to table and rest.\");\nvar glen=this.keys.other.length;for(ii=0;ii<glen;ii++){key=this.keys.other[ii];if(ii<2){this.other.table.push(key);}else{this.other.rest.push(key);}}}//state.Path.setWhere(state);\n//console.log(\"makePath D:\",JSON.stringify(state.Path.keys),JSON.stringify(state.Path.other),JSON.stringify(state.Path.trash));\n//console.log(\"makePath Where:\",JSON.stringify(state.Path.where));\n//console.log(\"makePath Select:\",JSON.stringify(state.Path.keys.path),JSON.stringify(state.Path.select.val));\nstate.Navigate.reset(state);//console.log(\"keys:\",JSON.stringify(state.Database.values));\n//console.log(\"Before Valid:\",JSON.stringify(state.Path.valid),JSON.stringify(state.Path.keys));\nstate.Utils.cpArray(state.Path.valid,state.Path.keys.path);state.Utils.cpArray(state.Path.valid,state.Path.keys.other);state.Utils.cpArray(state.Path.valid,state.Path.trash);//console.log(\"After Valid:\",JSON.stringify(state.Path.valid),JSON.stringify(state.Path.keys));\n//console.log(\"Completed makepath.\");\n};this.getIndex=function(state,trg){return this.keys.path.indexOf(trg);};this.exportAllKeys=function(state){// export keys from \"all\" to \"rest\"\nthis.other.table=[];this.other.rest=[];var jj=0;var key,ii;var delay=false;if(this.keys.other!==undefined){var olen=this.keys.other.length;for(ii=0;ii<olen;ii++){key=this.keys.other[ii];if(key===\"\"){if(jj===0){delay=true;}else if(jj<2){jj=jj+1;}}else if(state.Matrix.keyCnt[key]===undefined||state.Matrix.keyCnt[key]===0){// do nothing\n//console.log(\"Ignoring key:\",key,JSON.stringify(state.Matrix.keyCnt[key]));\n}else{//console.log(\"Adding key:\",key,JSON.stringify(state.Matrix.keyCnt[key]));\nif(jj<2){this.other.table.push(key);jj=jj+1;if(delay&&jj<2){jj=jj+1;};}else if(key!==\"\"){this.other.rest.push(key);}}};}// sanity check...\nvar vlen=this.valid.length;for(ii=0;ii<vlen;ii++){key=this.valid[ii];if(this.keys.path.indexOf(key)===-1&&this.keys.other.indexOf(key)===-1&&this.trash.indexOf(key)===-1){//console.log(\"**** Path failed sanity check:\",\n//JSON.stringify(this.keys),JSON.stringify(this.trash),key);\nthis.trash.push(key);}}//this.sortTableKeys(state);\n//console.log(\"Exported:\",JSON.stringify(this.keys),JSON.stringify(this.other),JSON.stringify(this.trash));\n};// move key from table to path\nthis.tableKeyToPath=function(state,key,val,where,cnt){// keep abscissa\n//console.log(\"this.Selecting:\",key,\"=\",val,\", where=\",where);\nvar sid=state.Path.keys.other.indexOf(key);if(sid!==-1){// key is a table-key...\nstate.Path.select.val[key]=[val];state.Path.where[key]=where;var src=state.Path.keys.other.splice(sid,1);// remove from path\nif(state.Utils.missing(state.Path.keys.path,src)){//console.log(\"Adding to path:\",JSON.stringify(src));\nstate.Utils.pushKey(state.Path.keys.path,src);//state.Path.keys.path=state.Path.keys.path.concat(src); // last path position\n};if(cnt>1&&state.Utils.missing(state.Path.trash,src)){//console.log(\"Adding \",JSON.stringify(src),\" to trash.\");\nstate.Utils.pushKey(state.Path.trash,src);//state.Path.trash=state.Path.trash.concat(src)\n};//console.log(\"Selectkey:\",JSON.stringify(setup),JSON.stringify(src));\nreturn true;}else{console.log(\"Missing '\",key,\"' in path:\",JSON.stringify(state.Path.keys));return false;}};// get X-priority, {colx,coly1,coly2...)\nthis.sortTableKeys=function(state){// make priority index\nvar arr=state.Utils.cp(this.other.table);var pri=state.Layout.getPriorityIndex(state,arr);// sort the array according to priority\nthis.other.table=arr.sort(function(a,b){if(a===\"\"){return 1;}else if(b===\"\"){return-1;}else if(pri[a]<pri[b]){return 1;}else if(pri[a]>pri[b]){return-1;}else{return 0;}});//console.log(\"TableKeys:\",JSON.stringify(this.other.table),\n//\t\" Pri:\",JSON.stringify(state.Layout.priority),\n//\t\" P:\",JSON.stringify(pri));\nreturn;};this.keyVal=function(state,key){if(this.select.val[key]!==undefined&&this.select.val[key]!==null&&this.select.val[key]!==\"\"){return this.select.val[key];}else{return;}};this.keyValOk=function(state,val){var ok=true;return ok;};this.moveKey=function(state,styp,skey,ttyp,tid){var sid=this.keys[styp].indexOf(skey);if(sid!==-1){var src=this.keys[styp].splice(sid,1);// remove from path\nif(tid===undefined||tid===-1){this.keys[ttyp]=this.keys[ttyp].concat(src);// last position\n}else{state.Utils.spliceArray(this.keys[ttyp],tid,0,src);}return true;}else{return false;}};this.moveKeys=function(state,styp,skeys,ttyp,tid){var len=skeys.length;for(var ss=0;ss<len;ss++){var skey=skeys[ss];var sid=this.keys[styp].indexOf(skey);if(sid!==-1){var src=this.keys[styp].splice(sid,1);// remove from path\nif(tid===undefined||tid===-1){this.keys[ttyp]=this.keys[ttyp].concat(src);// last position\n}else{state.Utils.spliceArray(this.keys[ttyp],tid,0,src);}}}};this.swapTableKey=function(state,skey,tkey){var sid=this.other.table.indexOf(skey);var tid=this.other.table.indexOf(tkey);if(tid!==sid&&this.other.table.length>1){var tin2=this.keys.other.indexOf(this.other.table[1]);var tkey2=this.keys.other.splice(tin2,1);// remove from array\nstate.Utils.spliceArray(this.keys.other,0,0,tkey2);//console.log(\"Swapped:\",tkey2,tkey,JSON.stringify(this.keys.other));\nreturn true;}else{return false;}};this.delTableKey=function(state,key){var secondkey;var secondind;var sid=this.keys.other.indexOf(key);if(sid!==-1){var sin=this.other.table.indexOf(key);var save=sin===0;if(save){secondkey=this.other.table[1];secondind=this.pullKey(state,\"other\",secondkey);}this.pullKey(state,\"other\",key);if(save&&secondind!==undefined&&secondind!==-1){this.pushKey(state,\"other\",secondkey,secondind);}return sin;}};this.duplicateTableKey=function(state,key){//console.log(\"MoveKey2Table:\",JSON.stringify(this.keys));\nvar sid=this.keys.other.indexOf(key);if(sid!==-1){// exists\nstate.Utils.spliceArray(this.keys.other,sid,0,key);//console.log(\"Duplicated key:\",key,JSON.stringify(this.keys.other));\nreturn true;}else{return false;}};this.moveTableKey=function(state,skey,ttyp,tid){var sid=this.keys.other.indexOf(skey);if(sid!==-1){//var sin=\nthis.delTableKey(state,skey);if(tid===undefined||tid===-1){this.keys[ttyp]=this.keys[ttyp].concat(skey);// last position\n}else{state.Utils.spliceArray(this.keys[ttyp],tid,0,skey);}return true;}else{return false;}};this.moveKey2Table=function(state,styp,skey,tkey){//console.log(\"MoveKey2Table:\",JSON.stringify(this.keys));\nvar tid=this.keys.other.indexOf(tkey);var sid=this.keys[styp].indexOf(skey);if(tid!==-1&&sid!==-1&&skey!==tkey){// exists and is not the same\nthis.keys[styp][sid]=tkey;this.keys.other[tid]=skey;return true;}else{return false;}};this.moveOther2Table=function(state,key){//console.log(\"MoveKey2Table:\",JSON.stringify(this.keys));\nvar sid=this.keys.other.indexOf(key);if(sid!==-1){// exists\nvar src=this.keys.other.splice(sid,1);// remove from array\nstate.Utils.spliceArray(this.keys.other,0,0,src);//console.log(\"Moved key:\",key,JSON.stringify(this.keys.other));\nreturn true;}else{return false;}};this.moveTrash2Table=function(state,tkey){var secondkey;var secondind;var tid=this.other.table.indexOf(tkey);if(tid!==-1){var save=tid===0;if(save){secondkey=this.other.table[1];secondind=this.pullKey(state,\"other\",secondkey);};var tin=this.keys.other.indexOf(tkey);this.moveTrash(state,\"other\",tin+1);if(save&&secondind!==undefined&&secondind!==-1){this.pushKey(state,\"other\",secondkey,secondind);}return true;}else{return false;}};this.moveTrash=function(state,ttyp,tin){state.Utils.spliceArray(this.keys[ttyp],tin,0,this.trash);this.trash=[];};this.moveAllKey=function(state,styp,skey,ttyp,tid){var lenp=this.keys[styp].length;var sid=this.keys[styp].indexOf(skey);if(sid!==-1){var src=this.keys[styp].splice(sid,lenp-sid);state.Utils.spliceArray(this.keys[ttyp],tid,0,src);return true;}else{return false;}};this.moveAllFirst=function(state,ttyp,tin){var tlen=this.keys[ttyp].length;var src=this.keys[ttyp].splice(tin,tlen-tin);state.Utils.spliceArray(this.keys[ttyp],0,0,src);};this.filterKeys=function(state,arr){var out=[];var alen=arr.length;for(var ii=0;ii<alen;ii++){var val=arr[ii];if(this.keyValOk(state,val)){out.push(val);}}//console.log(\"CheckOk \",JSON.stringify(arr),\"->\",JSON.stringify(out));\nreturn out;};this.pullArrayKey=function(state,array,key){var sin=array.indexOf(key);if(sin!==-1){//var src=\narray.splice(sin,1);// remove from path\n};return sin;};//////////////////////////////// COL/ROW FUNCTIONS ///////////////////////\nthis.getColKey=function(state){var arr=state.Utils.cp(this.other.table);var pri=state.Layout.getPriorityIndex(state,arr);if(state.Layout.getLayoutMode(state)===state.Layout.modes.layout.Map){return\"_lon\";}else if(pri[this.other.table[0]]<pri[this.other.table[1]]){return this.other.table[1];}else{return this.other.table[0];}};this.getRowKey=function(state){var arr=state.Utils.cp(this.other.table);var pri=state.Layout.getPriorityIndex(state,arr);if(state.Layout.getLayoutMode(state)===state.Layout.modes.layout.Map){return\"_lat\";}else if(pri[this.other.table[0]]<pri[this.other.table[1]]){return this.other.table[0];}else{return this.other.table[1];}};this.pushKey=function(state,typ,key,ind){if(key!==undefined&&key!==\"\"){state.Utils.spliceArray(this.keys[typ],ind,0,key);}state.Utils.clean(this.keys[typ]);};this.pullKey=function(state,typ,key){var sin=this.keys[typ].indexOf(key);if(sin!==-1){var src=this.keys[typ].splice(sin,1);// remove from path\nif(src!==key){console.log(\"System error:\",src,key);}return sin;};};this.pushColKey=function(state,key){if(key!==undefined&&key!==\"\"){state.Utils.spliceArray(this.keys.other,0,0,key);}};this.pushRowKey=function(state,key){if(key!==undefined&&key!==\"\"){state.Utils.spliceArray(this.keys.other,1,0,key);}};this.checkNewPath=function(state,styp,skey){// check if values are defined for path\nvar ok,ii;var sid=this.keys.path.indexOf(skey);if(styp===this.type.table.ptyp){ok=true;var lent=this.other.table.length-1;if(sid!==undefined){lent=sid+1;};for(ii=0;ii<=lent;ii++){var key=this.other.table[ii];if(this.keyVal(state,key)===undefined){ok=false;}}}else if(styp===this.type.rest.ptyp){ok=this.checkNewPath(state,this.type.table.ptyp);if(ok){var lenr=this.other.rest.length-1;if(sid!==undefined){lenr=sid+1;};for(ii=0;ii<=lenr;ii++){key=this.other.rest[ii];if(this.keyVal(state,key)===undefined){ok=false;}}}}return ok;};//values[key]=values[key].filter(this.Unique);\nthis.Unique=function(value,index,self){return self.indexOf(value)===index;};};export default Path;","map":{"version":3,"sources":["/home/franktt/react/varseltavle/src/lib/PathLib.js"],"names":["Path","keys","path","other","table","rest","trash","valid","ignore","select","val","where","home","tooltip","sort","click","type","ityp","ptyp","eye","trashRest","row","col","item","order","init","state","Utils","cleanSelect","pkeys","Object","lenk","length","ii","key","indexOf","undefined","goHome","buff","cp","remArray","prepArray","pushUrl","Navigate","store","refreshHistory","Show","show","setHome","console","log","getSnapshot","setSnapshot","snapshot","restore","toggleSelect","vals","vid","splice","push","Database","makeKeytrg","keytrg","Max","setWhere","showPath","getTitle","title","forEach","index","lenv","getTitleDynamic","makeCnt","getOrderValues","skey","Matrix","values","plen","makeOrderValues","bumpOrder","value","src","spliceArray","showConfig","makePath","pathSet","olen","filter","Unique","keyCnt","missing","Default","current","tlen","klen","glen","reset","cpArray","getIndex","trg","exportAllKeys","jj","delay","vlen","tableKeyToPath","cnt","sid","pushKey","JSON","stringify","sortTableKeys","arr","pri","Layout","getPriorityIndex","a","b","keyVal","keyValOk","ok","moveKey","styp","ttyp","tid","concat","moveKeys","skeys","len","ss","swapTableKey","tkey","tin2","tkey2","delTableKey","secondkey","secondind","sin","save","pullKey","duplicateTableKey","moveTableKey","moveKey2Table","moveOther2Table","moveTrash2Table","tin","moveTrash","moveAllKey","lenp","moveAllFirst","filterKeys","out","alen","pullArrayKey","array","getColKey","getLayoutMode","modes","layout","Map","getRowKey","typ","ind","clean","pushColKey","pushRowKey","checkNewPath","lent","lenr","self"],"mappings":"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","sourcesContent":["//console.log(\"Loading PathLib.js\");\n\nfunction Path() {\n    this.keys={path:[], // selected keys\n\t       other:[] // keys available for selection\n\t      };\n    this.other={table:[], // table keys\n\t\trest:[]   // keys available for table\n\t       };\n    this.trash=[];         // remaining valid keys\n    this.valid=[];         // list of valid keys\n    this.ignore=[\"max\",\"min\",\"minlat\",\"minlon\",\"maxlat\",\"maxlon\",\"cnt\",\"level\"]; // only visible in 1D and 0D tables\n    this.select={val:{}};  // current selection criteria\n    this.where={};         // current cache for where expressions\n    this.home={path:[],val:{}};  // initial home for data...\n    this.tooltip={keys:[],   // keys that will be displayed (in addition to row/col-keys)\n\t\t  select:[], // extra level of keys to distinguish reports\n\t\t  sort:[],   // which keys should be sorted?\n\t\t  click:[]}; // which keys should be clickable...\n    this.type = {\n\tpath :      {ityp:-1,ptyp:\"path\"},\n\teye :       {ityp:0, ptyp:\"eye\"},\n\ttable :     {ityp:1, ptyp:\"table\"},\n\trest :      {ityp:2, ptyp:\"rest\"},\n\ttrash :     {ityp:3, ptyp:\"trash\"},\n\ttrashRest : {ityp:4, ptyp:\"trashRest\"},\n\trow :       {ityp:5, ptyp:\"row\"},\n\tcol :       {ityp:6, ptyp:\"col\"},\n\titem :      {ityp:7, ptyp:\"item\"}\n    };\n    this.order={}; // how to order data\t    \n    this.init=function(state){\n\tstate.Utils.init(\"Path\",this);\n    };\n    this.cleanSelect=function(state) {\n\tvar pkeys=state.Path.keys.path;\n\tvar keys=Object.keys(state.Path.select.val);\n\tvar lenk=keys.length;\n\tfor (var ii=0;ii<lenk;ii++) {\n\t    var key=keys[ii];\n\t    if (pkeys.indexOf(key) === -1) {\n\t\tstate.Path.select.val[key]=undefined;\n\t    }\n\t}\n    };\n    this.goHome=function(state) {\n\tvar buff=state.Utils.cp(state.Path.keys.path);\n\tstate.Utils.remArray(buff,state.Path.home.path);\n\tstate.Utils.remArray(state.Path.keys.other,buff);\n\tstate.Utils.remArray(state.Path.keys.other,state.Path.home.path);\n\tstate.Utils.prepArray(state.Path.keys.other,buff);\n\tstate.Path.select.val=state.Utils.cp(state.Path.home.val);\n\tstate.Path.keys.path=state.Utils.cp(state.Path.home.path);\n\t//console.log(\">>>>>> Path.goHome: \",JSON.stringify(state.Path.home),JSON.stringify(state.Path.keys.path));\n\tstate.Utils.pushUrl(state);\n\tstate.Navigate.store(state);\n\tstate.Navigate.refreshHistory(state);\n\tstate.Show.show(state);\n    };\n    this.setHome=function(state) {\n\tstate.Path.cleanSelect(state);\n\tthis.home.path=state.Utils.cp(state.Path.keys.path);\n\tthis.home.val=state.Utils.cp(state.Path.select.val);\n\tstate.Utils.pushUrl(state);\n\tconsole.log(\"Setting home.\");\n    };\n    this.getSnapshot=function(state) { // store state\n\treturn {keys:state.Utils.cp(state.Path.keys),\n\t\tother:state.Utils.cp(state.Path.other),\n\t\tselect:state.Utils.cp(state.Path.select),\n\t\torder:state.Utils.cp(state.Path.order)};\n    };\n    this.setSnapshot=function(state,snapshot) { // store state\n\tstate.Utils.restore(state.Path,snapshot);\n    };\n    this.toggleSelect=function(state,key,val) {\n\tvar vals=state.Path.select.val[key];\n\t//console.log(\"toggleSelect:\",key,JSON.stringify(vals),\"'\"+val+\"'\");\n\tif (vals !== undefined) {\n\t    var vid=vals.indexOf(val)\n\t    if (vid !== -1) {  // remove item\n\t\tvals.splice(vid,1);\n\t\tif (vals.length===0) { // can never be totally empty...\n\t\t    vals.push(state.Database.makeKeytrg(state,key,state.Database.keytrg.Max));\n\t\t}\n\t\tstate.Path.select.val[key]=vals;\n\t    } else {\n\t\tstate.Path.select.val[key].push(val); // add item\n\t    }\n\t    state.Database.setWhere(state,key,state.Path.select.val[key]);\n\t    state.Show.showPath(state);\n\t    //console.log(\"Finally Vals:\",key,JSON.stringify(state.Path.select.val[key]));\n\t}\n    };\n    this.getTitle=function(state) {\n\tvar title=\"\";\n\tvar keys=state.Path.keys.path;\n\tkeys.forEach(\n\t    function(key,index) {\n\t\tvar vals=state.Path.select.val[key];\n\t\t//console.log(\"   select:\",key,JSON.stringify(vals));\n\t\tif (vals === undefined) {vals=[];};\n\t\tvar lenv=vals.length\n\t\tfor (var ii=0;ii<lenv;ii++) {\n\t\t    var val=vals[ii]\n\t\t    if (title !== \"\") { title=title + \" | \";};\n\t\t    title=title+state.Database.getTitleDynamic(state,key,val);\n\t\t}\n\t    }\n\t);\n\t//console.log(\"Pathlib getTitle keys:\",JSON.stringify(keys),title);\n\treturn title;\n    };\n    this.makeCnt=function(state,key) {\n\treturn state.Path.select.val[key].length;\n    };\n    this.getOrderValues=function(state,skey){\n        if (state.Path.order[skey] === undefined) {\n            //console.log(\"Copying:\",JSON.stringify(Matrix.values[skey]));\n            return state.Matrix.values[skey];\n        } else {\n\t    var vals = state.Matrix.values[skey];\n\t    var plen = vals;\n\t    for (var ii = 0; ii < plen; ii++) {\n\t\tvar val=vals[ii];\n\t\tif (state.Path.order[skey].indexOf(val)===-1) {\n\t\t    state.Path.order[skey].push(val);\n\t\t}\n\t    };\n\t    return state.Path.order[skey];\n\t};\n    };\n    this.makeOrderValues=function(state,skey){\n        if (state.Path.order === undefined) {state.Path.order={};};\n        if (state.Path.order[skey] === undefined) {\n            //console.log(\"Copying:\",JSON.stringify(Matrix.values[skey]));\n            state.Path.order[skey]=state.Utils.cp(state.Matrix.values[skey]);\n        } else {\n\t    var vals = state.Matrix.values[skey];\n\t    var plen = vals;\n\t    for (var ii = 0; ii < plen; ii++) {\n\t\tvar val=vals[ii];\n\t\tif (state.Path.order[skey].indexOf(val)===-1) {\n\t\t    state.Path.order[skey].push(val);\n\t\t}\n\t    };\n\t};\n\treturn state.Path.order[skey];\n    };\n    this.bumpOrder=function(state,skey,value) {\n\t//console.log(\"Bump order:\",skey,value,JSON.stringify(state.Path.order));\n\tif (value===\"\") {\n\t    state.Path.order[skey]=undefined;\n\t} else {\n\t    this.makeOrderValues(state,skey);\n\t    var vid=state.Path.order[skey].indexOf(value);\n\t    if (vid !== -1 && vid > 0) {\n\t\tvar src=state.Path.order[skey].splice(vid, 1); // remove from array   \n\t\tstate.Utils.spliceArray(state.Path.order[skey],vid-1,0,src);\n\t    };\n\t}\n\tstate.Show.showConfig(state);\n    };\n    this.setWhere=function(state) {\n\tstate.Path.keys.path.forEach(\n\t    function(item,index) {\n\t\tstate.Database.setWhere(state,item,state.Path.select.val[item]);\n\t    });\n    };\n    this.makePath=function(state) { // note that not all keys are present in the data!\n\t//console.log(\"Entering makepath.\",JSON.stringify(this.keys));\n\tvar ii,key;\n\tvar pathSet=[];\n\tif (this.keys.path === undefined) {this.keys.path=[];};\n\tif (this.keys.other === undefined) {this.keys.other=[];};\n\tif (this.trash === undefined) {this.trash=[];};\n\tif (this.keys.path.length > 0 ||\n\t    this.keys.other.length > 0 ||\n\t    this.trash.length > 0) {\n\t    // remove duplicates\n\t    //console.log(\"Filtering.\");\n\t    var olen;\n\t    this.keys.path=this.keys.path.filter(this.Unique);\n\t    this.keys.other=this.keys.other.filter(this.Unique);\n\t    this.trash=this.trash.filter(this.Unique);\n\t    //console.log(\"setup:\",JSON.stringify(setup));\n\t    //console.log(\"Remove invalid keys from path.\");\n\t    // remove invalid keys from path\n\t    var plen = this.keys.path.length;\n\t    for (ii = 0; ii < plen; ii++) {\n\t\tkey=this.keys.path[ii];\n\t\tif (state.Database.keyCnt[key]  === undefined) {\n\t\t    this.keys.path.splice(ii, 1);\n\t\t    ii=ii-1;\n\t\t    plen=plen-1;\n\t\t}\n\t    }\n\t    //console.log(\"Remove invalid keys from other.\");\n\t    // remove invalid keys from other\n\t    olen = this.keys.other.length;\n\t    for (ii = 0; ii < olen; ii++) {\n\t\tkey=this.keys.other[ii];\n\t\tif (state.Database.keyCnt[key]  === undefined) {\n\t\t    this.other.rest.splice(ii, 1);\n\t\t    ii=ii-1;\n\t\t    olen=olen-1;\n\t\t}\n\t    }\n\t    //console.log(\"Remove invalid keys from trash.\");\n\t    // remove invalid keys from trash\n\t    olen = this.trash.length;\n\t    for (ii = 0; ii < olen; ii++) {\n\t\tkey=this.trash[ii];\n\t\tif (state.Database.keyCnt[key]  === undefined) {\n\t\t    this.trash.splice(ii, 1);\n\t\t    ii=ii-1;\n\t\t    olen=olen-1;\n\t\t}\n\t    }\n\t    //console.log(\"Update trash with keys.\");\n\t    // we already have a path, update trash with new keys\n\t    for (key in state.Database.keyCnt) {\n\t\tif (this.keys.path.indexOf(key)  === -1 && \n\t\t    this.keys.other.indexOf(key)  === -1 && \n\t\t    this.trash.indexOf(key)  === -1 &&\n\t\t    state.Utils.missing(this.ignore,key)) {\n\t\t    pathSet[key]=\"trash\";\n\t\t    this.select.val[key]=undefined;\n\t\t    this.where[key]=\"\";\n\t\t    this.trash.push(key);\n\t\t}\n\t    }\n\t} else {\n\t    // new path...\n\t    //console.log(\"New path\");\n\t    // ...define this.select.val for all keys in input data\n\t    for (key in state.Database.keyCnt) {\n\t\tpathSet[key]=\"data\";\n\t    };\n\t    this.keys.path=[];\n\t    this.other.table=[]\n\t    this.other.rest=[]\n\t    this.select.val={}; // no values are set so far\n\t    this.where={}\n\t    //console.log(\"Copy default trash keys.\",JSON.stringify(state.Default.current.trash));\n\t    // copy default trash keys (that are used) to trash...\n\t    if (state.Default.current.trash !== undefined) {\n\t\tvar tlen = state.Default.current.trash.length;\n\t\tfor (ii = 0; ii < tlen; ii++) {\n\t\t    key=state.Default.current.trash[ii];\n\t\t    if (pathSet[key] !== undefined) {\n//\t\t\tif (state.Utils.missing(this.trash,key)) { \n//\t\t\t    this.trash.push(key);\n//\t\t\t};\n\t\t\tpathSet[key]=undefined; // ignore key from now on...\n\t\t    }\n\t\t}\n\t\t//console.log(\"Pathset:\",JSON.stringify(pathSet),JSON.stringify(state.Default.current.trash));\n\t    };\n\t    //console.log(\"Copy default other keys.\");\n\t    //console.log(\"makePath A:\",JSON.stringify(state.Path.keys),JSON.stringify(state.Path.other),JSON.stringify(state.Path.trash));\n\t    // console.log(\"Added trash:\",JSON.stringify(state.Path.keys),JSON.stringify(state.Path.other),JSON.stringify(state.Path.trash));\n\t    // copy default other keys (that are used) to other...\n\t    if (state.Default.current.other !== undefined) {\n\t\tvar klen = state.Default.current.other.length;\n\t\tfor (ii = 0; ii < klen; ii++) {\n\t\t    key=state.Default.current.other[ii];\n\t\t    if (pathSet[key] !== undefined) { // key not present in input data\n\t\t\tif (state.Utils.missing(this.keys.other,key)) {\n\t\t\t    this.keys.other.push(key);\n\t\t\t};\n\t\t\tpathSet[key]=\"found\";\n\t\t    }\n\t\t}\n\t    }\n\t    //console.log(\"makePath B:\",JSON.stringify(state.Path.keys),JSON.stringify(state.Path.other),JSON.stringify(state.Path.trash));\n\t    //console.log(\"Add missing keys.\");\n\t    // add missing keys to path\n\t    for (key in state.Database.keyCnt) {\n\t\tif (state.Utils.missing(this.ignore,key)) {\n\t\t    if (pathSet[key] === \"data\") {\n\t\t\tif (state.Utils.missing(this.keys.other,key)) {\n\t\t\t    this.keys.other.push(key);\n\t\t\t};\n\t\t\t//console.log(\"Added key:\",key);\n\t\t\tpathSet[key] = \"added\";\n\t\t    }\n\t\t};\n\t    };\n\t    // add undefined values in values\n\t    // for (key in state.Database.keyCnt) {\n\t    //     if (state.Database.keyCnt[key].cnt<state.Database.cnt) {\n\t    // \tstate.Database.values[key].push(undefined);\n\t    //     }\n\t    // }\n\t    // // sort sub-path according to count...\n\t    // this.keys.other=this.keys.other.sort(function(state,a, b) {\n\t    //     if (state.Database.values[a]  === undefined) {\n\t    // \treturn -1;\n\t    //     } else if (state.Database.values[b]  === undefined) {\n\t    // \treturn 1;\n\t    //     } else {\n\t    // \treturn state.Database.values[a].length - state.Database.values[b].length\n\t    //     }\n\t    // });\n\t    //console.log(\"makePath C:\",JSON.stringify(state.Path.keys),JSON.stringify(state.Path.other),JSON.stringify(state.Path.trash));\n\t    //console.log(\"Push other keys to table and rest.\");\n\t    var glen = this.keys.other.length;\n\t    for (ii = 0; ii < glen; ii++) {\n\t\tkey=this.keys.other[ii];\n\t\tif (ii<2) {\n\t\t    this.other.table.push(key);\n\t\t} else {\n\t\t    this.other.rest.push(key);\n\t\t}\n\t    }\n\t}\n\t//state.Path.setWhere(state);\n\t//console.log(\"makePath D:\",JSON.stringify(state.Path.keys),JSON.stringify(state.Path.other),JSON.stringify(state.Path.trash));\n\t//console.log(\"makePath Where:\",JSON.stringify(state.Path.where));\n\t//console.log(\"makePath Select:\",JSON.stringify(state.Path.keys.path),JSON.stringify(state.Path.select.val));\n\tstate.Navigate.reset(state);\n\t//console.log(\"keys:\",JSON.stringify(state.Database.values));\n\t//console.log(\"Before Valid:\",JSON.stringify(state.Path.valid),JSON.stringify(state.Path.keys));\n\tstate.Utils.cpArray(state.Path.valid,state.Path.keys.path);\n\tstate.Utils.cpArray(state.Path.valid,state.Path.keys.other);\n\tstate.Utils.cpArray(state.Path.valid,state.Path.trash);\n\t//console.log(\"After Valid:\",JSON.stringify(state.Path.valid),JSON.stringify(state.Path.keys));\n\t//console.log(\"Completed makepath.\");\n    };\n    this.getIndex=function(state,trg) {\n\treturn this.keys.path.indexOf(trg);\n    };\n    this.exportAllKeys=function(state) { // export keys from \"all\" to \"rest\"\n\tthis.other.table=[];\n\tthis.other.rest=[];\n\tvar jj=0;\n\tvar key,ii;\n\tvar delay=false;\n\tif (this.keys.other !== undefined) {\n\t    var olen=this.keys.other.length;\n\t    for (ii=0;ii<olen;ii++) {\n\t\tkey=this.keys.other[ii];\n\t\tif (key === \"\") {\n\t\t    if (jj === 0) {\n\t\t\tdelay=true;\n\t\t    } else if (jj < 2) {\n\t\t\tjj=jj+1\n\t\t    }\n\t\t} else if (state.Matrix.keyCnt[key] === undefined || state.Matrix.keyCnt[key] === 0) { // do nothing\n\t\t    //console.log(\"Ignoring key:\",key,JSON.stringify(state.Matrix.keyCnt[key]));\n\t\t} else {\n\t\t    //console.log(\"Adding key:\",key,JSON.stringify(state.Matrix.keyCnt[key]));\n\t\t    if (jj < 2) {\n\t\t\tthis.other.table.push(key);\n\t\t\tjj=jj+1;\n\t\t\tif (delay && jj<2) {jj=jj+1;};\n\t\t    } else if (key !== \"\") {\n\t\t\tthis.other.rest.push(key);\n\t\t    }\n\t\t}\n\t    };\n\t}\n\t// sanity check...\n\tvar vlen=this.valid.length;\n\tfor (ii=0;ii<vlen;ii++) {\n\t    key=this.valid[ii];\n\t    if (this.keys.path.indexOf(key)===-1 &&\n\t\tthis.keys.other.indexOf(key)===-1 &&\n\t\tthis.trash.indexOf(key)===-1) {\n\t\t//console.log(\"**** Path failed sanity check:\",\n\t\t//JSON.stringify(this.keys),JSON.stringify(this.trash),key);\n\t\tthis.trash.push(key);\n\t    }\n\t}\n\t//this.sortTableKeys(state);\n\t//console.log(\"Exported:\",JSON.stringify(this.keys),JSON.stringify(this.other),JSON.stringify(this.trash));\n    };\n    // move key from table to path\n    this.tableKeyToPath=function(state,key,val,where,cnt) { // keep abscissa\n\t//console.log(\"this.Selecting:\",key,\"=\",val,\", where=\",where);\n\tvar sid = state.Path.keys.other.indexOf(key);\n\tif (sid !== -1) { // key is a table-key...\n\t    state.Path.select.val[key]=[val];\n\t    state.Path.where[key]=where;\n\t    var src=state.Path.keys.other.splice(sid, 1); // remove from path\n\t    if ( state.Utils.missing(state.Path.keys.path,src)) {\n\t\t//console.log(\"Adding to path:\",JSON.stringify(src));\n\t\tstate.Utils.pushKey(state.Path.keys.path,src);\n\t\t//state.Path.keys.path=state.Path.keys.path.concat(src); // last path position\n\t    };\n\t    if (cnt>1 && state.Utils.missing(state.Path.trash,src)) {\n\t\t//console.log(\"Adding \",JSON.stringify(src),\" to trash.\");\n\t\tstate.Utils.pushKey(state.Path.trash,src);\n\t\t//state.Path.trash=state.Path.trash.concat(src)\n\t    };\n\t    //console.log(\"Selectkey:\",JSON.stringify(setup),JSON.stringify(src));\n\t    return true;\n\t} else {\n\t    console.log(\"Missing '\",key,\"' in path:\",JSON.stringify(state.Path.keys));\n\t    return false;\n\t}\n    };\n    // get X-priority, {colx,coly1,coly2...)\n    this.sortTableKeys=function(state){\n\t// make priority index\n\tvar arr=state.Utils.cp(this.other.table);\n\tvar pri=state.Layout.getPriorityIndex(state,arr);\n\t// sort the array according to priority\n\tthis.other.table=arr.sort(function(a,b){\n\t    if (a  === \"\") { \n\t\treturn 1;\n\t    } else if (b  === \"\") {\n\t\treturn -1;\n\t    } else if (pri[a]<pri[b]) { \n\t\treturn 1;\n\t    } else if (pri[a]>pri[b]) {\n\t\treturn -1;\n\t    } else {\n\t\treturn 0;\n\t    }\n\t});\n\t//console.log(\"TableKeys:\",JSON.stringify(this.other.table),\n\t//\t\" Pri:\",JSON.stringify(state.Layout.priority),\n\t//\t\" P:\",JSON.stringify(pri));\n\treturn\n    };\n    this.keyVal=function(state,key) {\n\tif (this.select.val[key] !== undefined &&\n\t    this.select.val[key] !== null &&\n\t    this.select.val[key] !== \"\") {\n\t    return this.select.val[key];\n\t} else {\n\t    return;\n\t}\n    };\n    this.keyValOk=function(state,val) {\n\tvar ok=true;\n\treturn ok;\n    };\n    this.moveKey=function(state,styp,skey,ttyp,tid) {\n\tvar sid=this.keys[styp].indexOf(skey);\n\tif (sid !== -1) {\n\t    var src=this.keys[styp].splice(sid, 1);    // remove from path\n\t    if (tid  === undefined || tid  === -1) {\n\t\tthis.keys[ttyp]=this.keys[ttyp].concat(src);         // last position\n\t    } else {\n\t\tstate.Utils.spliceArray(this.keys[ttyp],tid, 0, src);\n\t    }\n\t    return true;\n\t}else {\n\t    return false;\n\t}\n    };\n    this.moveKeys=function(state,styp,skeys,ttyp,tid) {\n\tvar len=skeys.length\n\tfor (var ss=0;ss<len;ss++) {\n\t    var skey=skeys[ss];\n\t    var sid=this.keys[styp].indexOf(skey);\n\t    if (sid !== -1) {\n\t\tvar src=this.keys[styp].splice(sid, 1);    // remove from path\n\t\tif (tid  === undefined || tid  === -1) {\n\t\t    this.keys[ttyp]=this.keys[ttyp].concat(src);         // last position\n\t\t} else {\n\t\t    state.Utils.spliceArray(this.keys[ttyp],tid, 0, src);\n\t\t}\n\t    }\n\t}\n    };\n    this.swapTableKey=function(state,skey,tkey) {\n\tvar sid=this.other.table.indexOf(skey);\n\tvar tid=this.other.table.indexOf(tkey);\n\tif (tid !== sid && this.other.table.length > 1) {\n\t    var tin2=this.keys.other.indexOf(this.other.table[1]);\n\t    var tkey2=this.keys.other.splice(tin2, 1);    // remove from array\n\t    state.Utils.spliceArray(this.keys.other,0, 0, tkey2);\n\t    //console.log(\"Swapped:\",tkey2,tkey,JSON.stringify(this.keys.other));\n\t    return true;\n\t} else {\n\t    return false;\n\t}\n    };\n    this.delTableKey=function(state,key) {\n\tvar secondkey;\n\tvar secondind;\n\tvar sid=this.keys.other.indexOf(key);\n\tif (sid !== -1) {\n\t    var sin=this.other.table.indexOf(key);\n\t    var save=(sin  === 0);\n\t    if (save) {\n\t\tsecondkey=this.other.table[1];\n\t\tsecondind=this.pullKey(state,\"other\",secondkey);\n\t    }\n\t    this.pullKey(state,\"other\",key);\n\t    if (save && secondind !== undefined && secondind !== -1) {\n\t\tthis.pushKey(state,\"other\",secondkey,secondind);\n\t    }\n\t    return sin;\n\t}\n    };\n    this.duplicateTableKey=function(state,key) {\n\t//console.log(\"MoveKey2Table:\",JSON.stringify(this.keys));\n\tvar sid=this.keys.other.indexOf(key)\n\tif (sid !== -1) { // exists\n\t    state.Utils.spliceArray(this.keys.other,sid, 0, key);\n\t    //console.log(\"Duplicated key:\",key,JSON.stringify(this.keys.other));\n\t    return true;\n\t} else {\n\t    return false;\n\t}\n    };\n    this.moveTableKey=function(state,skey,ttyp,tid) {\n\tvar sid=this.keys.other.indexOf(skey);\n\tif (sid !== -1) {\n\t    //var sin=\n\t    this.delTableKey(state,skey);\n\t    if (tid  === undefined || tid  === -1) {\n\t\tthis.keys[ttyp]=this.keys[ttyp].concat(skey);         // last position\n\t    } else {\n\t\tstate.Utils.spliceArray(this.keys[ttyp],tid, 0, skey);\n\t    }\n\t    return true;\n\t}else {\n\t    return false;\n\t}\n    };\n    this.moveKey2Table=function(state,styp,skey,tkey) {\n\t//console.log(\"MoveKey2Table:\",JSON.stringify(this.keys));\n\tvar tid=this.keys.other.indexOf(tkey);\n\tvar sid=this.keys[styp].indexOf(skey)\n\tif (tid !== -1 && sid !== -1 && skey !== tkey) { // exists and is not the same\n\t    this.keys[styp][sid]=tkey\n\t    this.keys.other[tid]=skey\n\t    return true;\n\t} else {\n\t    return false;\n\t}\n    };\n    this.moveOther2Table=function(state,key) {\n\t//console.log(\"MoveKey2Table:\",JSON.stringify(this.keys));\n\tvar sid=this.keys.other.indexOf(key)\n\tif (sid !== -1) { // exists\n\t    var src=this.keys.other.splice(sid, 1);    // remove from array\n\t    state.Utils.spliceArray(this.keys.other,0, 0, src);\n\t    //console.log(\"Moved key:\",key,JSON.stringify(this.keys.other));\n\t    return true;\n\t} else {\n\t    return false;\n\t}\n    };\n    this.moveTrash2Table=function(state,tkey) {\n\tvar secondkey;\n\tvar secondind;\n\tvar tid=this.other.table.indexOf(tkey);\n\tif (tid !== -1) {\n\t    var save=(tid  === 0);\n\t    if (save) {\n\t\tsecondkey=this.other.table[1];\n\t\tsecondind=this.pullKey(state,\"other\",secondkey);\n\t    };\n\t    var tin=this.keys.other.indexOf(tkey);\n\t    this.moveTrash(state,\"other\",tin+1);\n\t    if (save && secondind !== undefined && secondind !== -1) {\n\t\tthis.pushKey(state,\"other\",secondkey,secondind);\n\t    }\n\t    return true;\n\t} else {\n\t    return false;\n\t}\n    };\n    this.moveTrash=function(state,ttyp,tin) {\n\tstate.Utils.spliceArray(this.keys[ttyp],tin, 0, this.trash);\n\tthis.trash=[];\n    };\n    this.moveAllKey=function(state,styp,skey,ttyp,tid) {\n\tvar lenp=this.keys[styp].length;\n\tvar sid=this.keys[styp].indexOf(skey);\n\tif (sid !== -1) {\n\t    var src=this.keys[styp].splice(sid,lenp-sid);\n\t    state.Utils.spliceArray(this.keys[ttyp],tid,0,src);\n\t    return true;\n\t} else {\n\t    return false;\n\t}\n    };\n    this.moveAllFirst=function(state,ttyp,tin) {\n\tvar tlen=this.keys[ttyp].length;\n\tvar src=this.keys[ttyp].splice(tin,tlen-tin);\n\tstate.Utils.spliceArray(this.keys[ttyp],0, 0,src);\n    };\n    this.filterKeys=function(state,arr) {\n\tvar out=[];\n\tvar alen=arr.length;\n\tfor(var ii=0; ii<alen; ii++) {\n\t    var val=arr[ii];\n\t    if (this.keyValOk(state,val)) {\n\t\tout.push(val);\n\t    }\n\t}\n\t//console.log(\"CheckOk \",JSON.stringify(arr),\"->\",JSON.stringify(out));\n\treturn out;\n    };\n    this.pullArrayKey=function(state,array,key) {\n\tvar sin=array.indexOf(key);\n\tif (sin !== -1) {\n\t    //var src=\n\t    array.splice(sin, 1);    // remove from path\n\t};\n\treturn sin;\n    };\n    //////////////////////////////// COL/ROW FUNCTIONS ///////////////////////\n    this.getColKey=function(state) {\n\tvar arr=state.Utils.cp(this.other.table);\n\tvar pri=state.Layout.getPriorityIndex(state,arr);\n\tif (state.Layout.getLayoutMode(state) === state.Layout.modes.layout.Map) {\n\t    return \"_lon\";\n\t} else if (pri[this.other.table[0]] < pri[this.other.table[1]]) {\n\t    return this.other.table[1];\n\t} else {\n\t    return this.other.table[0];\n\t}\n    };\n    this.getRowKey=function(state) {\n\tvar arr=state.Utils.cp(this.other.table);\n\tvar pri=state.Layout.getPriorityIndex(state,arr);\n\tif (state.Layout.getLayoutMode(state) === state.Layout.modes.layout.Map) {\n\t    return \"_lat\";\n\t} else if (pri[this.other.table[0]] < pri[this.other.table[1]]) {\n\t    return this.other.table[0];\n\t} else {\n\t    return this.other.table[1];\n\t}\n    };\n    this.pushKey=function(state,typ,key,ind) {\n\tif (key !== undefined && key !== \"\") {\n\t    state.Utils.spliceArray(this.keys[typ], ind, 0, key);\n\t}\n\tstate.Utils.clean(this.keys[typ]);\n    };\n    this.pullKey=function(state,typ,key) {\n\tvar sin=this.keys[typ].indexOf(key);\n\tif (sin !== -1) {\n\t    var src=this.keys[typ].splice(sin, 1);    // remove from path\n\t    if (src !== key) {console.log(\"System error:\",src,key);}\n\t    return sin;\n\t};\n    };\n    this.pushColKey=function(state,key) {\n\tif (key !== undefined && key !== \"\") {\n\t    state.Utils.spliceArray(this.keys.other,0, 0, key);\n\t}\n    };\n    this.pushRowKey=function(state,key) {\n\tif (key !== undefined && key !== \"\") {\n\t    state.Utils.spliceArray(this.keys.other,1, 0, key);\n\t}\n    };\n    this.checkNewPath=function(state,styp,skey) { // check if values are defined for path\n\tvar ok,ii;\n\tvar sid=this.keys.path.indexOf(skey);\n\tif (styp  === this.type.table.ptyp) {\n\t    ok=true;\n\t    var lent=this.other.table.length-1;\n\t    if (sid !== undefined) {lent=sid+1;};\n\t    for (ii = 0; ii <= lent; ii++) {\n\t\tvar key=this.other.table[ii];\n\t\tif (this.keyVal(state,key)  === undefined) {\n\t\t    ok=false;\n\t\t}\n\t    }\n\t} else if (styp  === this.type.rest.ptyp) {\n\t    ok=this.checkNewPath(state,this.type.table.ptyp);\n\t    if (ok) {\n\t\tvar lenr=this.other.rest.length-1;\n\t\tif (sid !== undefined) {lenr=sid+1;};\n\t\tfor (ii = 0; ii <= lenr; ii++) {\n\t\t    key=this.other.rest[ii];\n\t\t    if (this.keyVal(state,key)  === undefined) {\n\t\t\tok=false;\n\t\t    }\n\t\t}\n\t    }\n\t}\n\treturn ok;\n    };\n    //values[key]=values[key].filter(this.Unique);\n    this.Unique=function(value, index, self) { \n\treturn self.indexOf(value)  === index;\n    }\n};\nexport default Path;\n"]},"metadata":{},"sourceType":"module"}