{"ast":null,"code":"//console.log(\"Loading UtilsLib.js\");\nfunction Utils(){this.version=\"1\";this.invertArray=function(arr){var alen=arr.length;var xlen=Math.floor(alen/2);for(var ii=0;ii<xlen;ii++){var jj=alen-ii-1;var buff=arr[ii];arr[ii]=arr[jj];arr[jj]=buff;}};this.invertedArray=function(arr){var ret=[];var alen=arr.length;for(var ii=alen-1;ii>=0;ii--){ret.push(arr[ii]);}return ret;};this.getMin=function(arr){var len=arr.length,min=undefined;while(len--){if(min===undefined||arr[len]<min){min=arr[len];}}return min;};this.getMax=function(arr){var len=arr.length,max=undefined;while(len--){if(max===undefined||arr[len]>max){max=arr[len];}}return max;};this.init=function(par,setup){var url=this.getUrlVars();if(par in url){//console.log(par,url);\nvar code=decodeURIComponent(url[par]);//console.log(\"Processing url:\",code);\ntry{var newsetup=JSON.parse(code);for(var ss in newsetup){if(newsetup[ss]!==undefined){setup[ss]=newsetup[ss];}}}catch(e){setup[par]=url[par];}//console.log(\"new setup:\",JSON.stringify(setup));\n}else{//console.log(\"No '\"+par+\"' in URL.\");\n}};this.clean=function(arr){for(var ii=0;ii<arr.length;ii++){if(arr[ii]===null||arr[ii]===\"\"){arr.splice(ii,1);}}return arr;};this.moveTo=function(arr,src,trg){var isrc=arr.indexOf(src);var itrg=arr.indexOf(trg);if(isrc!==-1&&itrg!==-1){var csrc=arr.splice(isrc,1);this.spliceArray(arr,itrg,0,csrc);}};this.cpArray=function(sarr,tarr){if(tarr!==undefined){var lent=tarr.length;for(var ii=0;ii<lent;ii++){var ind=sarr.indexOf(tarr[ii]);if(ind===-1){sarr.push(tarr[ii]);}}};};this.ppArray=function(sarr,tarr){var lent=tarr.length;for(var ii=lent-1;ii>=0;ii--){var ind=sarr.indexOf(tarr[ii]);if(ind===-1){this.spliceArray(sarr,0,0,tarr[ii]);// first position (table)\n}}};this.addArray=function(sarr,tarr){this.cpArray(sarr,tarr);tarr=[];};this.prepArray=function(sarr,tarr){this.ppArray(sarr,tarr);tarr=[];};this.remArray=function(sarr,tarr){var lent=tarr.length;for(var ii=0;ii<lent;ii++){var ind=sarr.indexOf(tarr[ii]);if(ind!==-1){sarr.splice(ind,1);}}};this.moveToArray=function(sarr,tarr,key,tpos){var sid=sarr.indexOf(key);if(sid!==-1){var src=sarr.splice(sid,1);// remove from path\nif(tpos===undefined||tpos<0){this.spliceArray(tarr,tarr.length,0,src);}else{this.spliceArray(tarr,tpos,0,src);}return true;}else{return false;}};this.keepHash=function(sarr,tarr){var ret=[];var lent=tarr.length;var keep={};for(var ii=0;ii<lent;ii++){var hsh=tarr[ii];var keys=Object.keys(hsh);var lenk=keys.length;for(var jj=0;jj<lenk;jj++){var key=keys[jj];keep[key]=true;}}var lens=sarr.length;for(var kk=0;kk<lens;kk++){var arr=sarr[kk];if(keep[arr]!==undefined&&keep[arr]){ret.push(arr);};}return ret;};this.missing=function(arr,src){//console.log(\"Missing:\",src,JSON.stringify(arr));\nif(arr===undefined){console.log(\"Invalid array specified in this.missing:\",JSON.stringify(src));return false;}else{if(Array.isArray(src)){return arr.indexOf(src[0])===-1;}else{return arr.indexOf(src)===-1;}}};this.restore=function(arr,obj){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){arr[key]=this.cp(obj[key]);}};};this.cp=function(obj){if(obj===null||typeof obj!=='object'||'isActiveClone'in obj)return obj;var temp;if(obj instanceof Date){temp=new obj.constructor();//or new Date(obj);\n}else{temp=obj.constructor();};for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){obj['isActiveClone']=null;temp[key]=this.cp(obj[key]);delete obj['isActiveClone'];}}return temp;}.bind(this);this.getStatusString=function(state){return this.numberWithCommas(state.Database.cnt)+\" in database, \"+this.numberWithCommas(state.Matrix.cnt)+\" in table.\";};this.toString=function(setup){var s=\"->\";for(var kk in setup){s=s+\"|\"+kk+\":\"+setup[kk];};return s;};this.numberWithCommas=function(x){return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\");};this.cntDocs=function(elements,key,val){var cnt=0;var elen=elements.length;for(var ee=0;ee<elen;ee++){// loop over elements\nvar el=elements[ee];var docs=el.docs;var dlen=docs.length;if(val===\"\"){cnt=cnt+dlen;}else{for(var jj=0;jj<dlen;jj++){// loop over segments in each element\nvar d=docs[jj];var thr=d._thr;//console.log(\"cntDocs:\",key,d[key],val,dlen);\nif(d[key]===val){if(thr.val!==undefined){cnt=cnt+1;};}}}}//console.log(\"cntDocs:\",JSON.stringify(elements),key,cnt,elen);\nreturn cnt;};this.pushUrl=function(state){var path=window.location.pathname;//console.log(\"Path:\",path);\nvar page=path.split(\"/\").pop();page.split('#').shift();//console.log( page );\nvar url=page+\"?setup=\"+state.Default.setup+\"&\";//console.log(\"Actual Keys:\",JSON.stringify(state.Path.keys));\nvar urlDatabase=undefined;if(state.Default.hasChanged(state,[\"Database\",\"data\"])&&state.Database.data!==undefined){if(urlDatabase===undefined){urlDatabase={};}urlDatabase.data=this.cp(state.Database.data);};var urlPath=undefined;if(state.Default.hasChanged(state,[\"Path\",\"keys\"])){if(urlPath===undefined){urlPath={};}urlPath.keys=this.cp(state.Path.keys);};if(state.Default.hasChanged(state,[\"Path\",\"select\"])){if(urlPath===undefined){urlPath={};}urlPath.select=this.cp(state.Path.select);};if(state.Default.hasChanged(state,[\"Path\",\"home\"])){if(urlPath===undefined){urlPath={};}urlPath.home=this.cp(state.Path.home);};if(state.Default.hasChanged(state,[\"Path\",\"tooltip\"])){if(urlPath===undefined){urlPath={};}urlPath.tooltip=this.cp(state.Path.tooltip);};if(state.Default.hasChanged(state,[\"Path\",\"order\"])){if(urlPath===undefined){urlPath={};}urlPath.order=this.cp(state.Path.order);};//console.log(\"URL Keys:\",JSON.stringify(urlPath.keys));\nvar urlLayout=undefined;if(state.Default.hasChanged(state,[\"Layout\",\"priority\"])){if(urlLayout===undefined){urlLayout={};}urlLayout.priority=state.Layout.getPriority(state);};if(state.Default.hasChanged(state,[\"Layout\",\"state\"])){if(urlLayout===undefined){urlLayout={};}urlLayout.state=this.cp(state.Layout.state);};if(urlDatabase!==undefined){url=url+\"Database=\"+encodeURI(JSON.stringify(urlDatabase)+\"&\");};if(urlPath!==undefined){url=url+\"Path=\"+encodeURI(JSON.stringify(urlPath)+\"&\");};if(urlLayout!==undefined){url=url+\"Layout=\"+encodeURI(JSON.stringify(urlLayout)+\"&\");};//console.log(\"Setting URL to (\",url.length,\"):\",url);\nwindow.history.replaceState(\"\",\"js\",url);}.bind(this);this.getUrlVars=function(state){var vars={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(m,key,value){//console.log(\"URL item:\",key,\" \",value)\nvars[key]=value;});return vars;};this.uniq=function(state,a){var seen={};return a.filter(function(item){return seen.hasOwnProperty(item)?false:seen[item]=true;});};this.pushKey=function(arr,key,pos){if(Array.isArray(key)){var len=key.length;for(var ii=0;ii<len;ii++){if(arr.indexOf(key[ii])===-1){if(pos===undefined){arr.push(key[ii]);}else{arr.splice(pos,0,key[ii]);};}}}else{if(arr.indexOf(key)===-1){if(pos===undefined){arr.push(key);}else{arr.splice(pos,0,key);};}}this.clean(arr);};this.spliceArray=function(arr,index,n,child){if(Array.isArray(child)){var len=child.length;for(var ii=0;ii<len;ii++){arr.splice(index,n,child[ii]);n=0;index=index+1;}}else{arr.splice(index,n,child);}};this.ascendingArr=function(a,b){if(a[0]===\"\"){return 1;}else if(b[0]===\"\"){return-1;}else if(a[0]<b[0]){return-1;}else if(a[0]>b[0]){return 1;}else{return 0;}};this.descendingArr=function(a,b){if(a[0]===\"\"){return-1;}else if(b[0]===\"\"){return 1;}else if(a[0]<b[0]){return 1;}else if(a[0]>b[0]){return-1;}else{return 0;}};this.ascending=function(a,b){if(a===\"\"){return 1;}else if(b===\"\"){return-1;}else if(a<b){return-1;}else if(a>b){return 1;}else{return 0;}};this.descending=function(a,b){if(a===\"\"){return-1;}else if(b===\"\"){return 1;}else if(a<b){return 1;}else if(a>b){return-1;}else{return 0;}};this.ascendingN=function(a,b){if(a===null){return 1;}else if(b===null){return-1;}else if(Number(a)<Number(b)){return-1;}else if(Number(a)>Number(b)){return 1;}else{return 0;}};this.descendingN=function(a,b){if(a===null){return-1;}else if(b===null){return 1;}else if(Number(a)<Number(b)){return 1;}else if(Number(a)>Number(b)){return-1;}else{return 0;}};this.getItem=function(state,s,src){var ss=src;var ll=s.length;for(var ii=0;ii<ll;ii++){if(ss===undefined){return ss;};ss=ss[s[ii]];}return ss;};this.setForce=function(state,t,trg,ss){var ll=t.length;if(trg===undefined){return;}else if(ll===0){trg=ss;return trg;}else{var tt=trg;for(var ii=0;ii<ll-1;ii++){if(tt[t[ii]]===undefined){tt[t[ii]]={};};tt=tt[t[ii]];}tt[t[ll-1]]=state.Utils.cp(ss);return tt[t[ll-1]];}};this.setFill=function(state,t,trg,ss){var ll=t.length;if(trg===undefined){return;}else if(ll===0){trg=ss;return trg;}else{//console.log(\"Trg:\",JSON.stringify(t),\":\",JSON.stringify(trg),\":\",JSON.stringify(ss));\nvar tt=trg;for(var ii=0;ii<ll-1;ii++){if(tt[t[ii]]===undefined){tt[t[ii]]={};};tt=tt[t[ii]];}if(this.isEmpty(state,tt[t[ll-1]])){tt[t[ll-1]]=state.Utils.cp(ss);}return tt[t[ll-1]];}};this.cpForce=function(state,t,s,trg,src){var ss=this.getItem(state,s,src);this.setForce(state,t,trg,ss);};this.cpFill=function(state,t,s,trg,src){var ss=this.getItem(state,s,src);//console.log(\"Filling:\",s,'->',t,! this.isEmpty(state,ss),JSON.stringify());\n//if (! this.isEmpty(state,ss) ) {\nif(ss!==undefined){this.setFill(state,t,trg,ss);}};// map src onto target always\nthis.copyForce=function(state,src,trg,map){if(src===undefined){console.log(\"ERROR: MapForce with no src.\");}else if(trg===undefined){console.log(\"ERROR: MapForce with no trg.\");}else if(map===undefined){console.log(\"ERROR: MapForce with no map.\");}else{var len=map.length;for(var ii=0;ii<len;ii++){var t=map[ii][0];var s=map[ii][1];this.cpForce(state,t,s,trg,src);}}};// map src onto target if target is empty and src is not\nthis.copyFill=function(state,src,trg,map){if(src===undefined){console.log(\"ERROR: MapFill with no src.\");}else if(trg===undefined){console.log(\"ERROR: MapFill with no trg.\");}else if(map===undefined){console.log(\"ERROR: MapFill with no map.\");}else{var len=map.length;for(var ii=0;ii<len;ii++){var t=map[ii][0];var s=map[ii][1];this.cpFill(state,t,s,trg,src);}}};this.invert=function(map){var ret=[];var len=map.length;for(var ii=0;ii<len;ii++){var t=map[ii][0];var s=map[ii][1];ret.push([s,t]);}return ret;};this.isEmpty=function(state,obj){// check if obj has any string/number children\nvar ret=true;var k;if(obj===undefined){ret=true;}else{var typ=typeof obj;if(typ===\"Array\"){// check array children\nfor(k in obj){if(!state.Utils.isEmpty(state,obj[k])){ret=false;//console.log(\"    =\",typ,ret,k,JSON.stringify(obj[k]));\nbreak;}}}else if(typ===\"object\"){// check hash children\nfor(k in obj){if(obj.hasOwnProperty(k)){if(!state.Utils.isEmpty(state,obj[k])){ret=false;//console.log(\"    =\",typ,ret,k,JSON.stringify(obj[k]));\nbreak;}}}}else{ret=false;}}//console.log(\"Type:\",ret,JSON.stringify(obj));\nreturn ret;};this.prettyJson=function(obj){var f=function f(k,v){if(Array.isArray(v)){return JSON.stringify(v);};return v;};var json=JSON.stringify(obj,f,\"  \");json=json.replace(/\"\\[/g,'[');json=json.replace(/\\]\"/g,']');json=json.replace(/\\\\\"/g,'\"');//console.log(\"Replaced:\",json);\nreturn json;};this.save=function(data,filename,type){console.log(\"Saving file:\",filename);var file=new Blob([data],{type:type});if(window.navigator.msSaveOrOpenBlob)// IE10+\nwindow.navigator.msSaveOrOpenBlob(file,filename);else{// Others\nvar a=document.createElement(\"a\"),url=URL.createObjectURL(file);a.href=url;a.download=filename;document.body.appendChild(a);a.click();setTimeout(function(){document.body.removeChild(a);window.URL.revokeObjectURL(url);},0);};};};export default Utils;","map":{"version":3,"sources":["/home/franktt/react/varseltavle/src/lib/UtilsLib.js"],"names":["Utils","version","invertArray","arr","alen","length","xlen","Math","floor","ii","jj","buff","invertedArray","ret","push","getMin","len","min","undefined","getMax","max","init","par","setup","url","getUrlVars","code","decodeURIComponent","newsetup","JSON","parse","ss","e","clean","splice","moveTo","src","trg","isrc","indexOf","itrg","csrc","spliceArray","cpArray","sarr","tarr","lent","ind","ppArray","addArray","prepArray","remArray","moveToArray","key","tpos","sid","keepHash","keep","hsh","keys","Object","lenk","lens","kk","missing","console","log","stringify","Array","isArray","restore","obj","prototype","hasOwnProperty","call","cp","temp","Date","constructor","bind","getStatusString","state","numberWithCommas","Database","cnt","Matrix","toString","s","x","replace","cntDocs","elements","val","elen","ee","el","docs","dlen","d","thr","_thr","pushUrl","path","window","location","pathname","page","split","pop","shift","Default","urlDatabase","hasChanged","data","urlPath","Path","select","home","tooltip","order","urlLayout","priority","Layout","getPriority","encodeURI","history","replaceState","vars","href","m","value","uniq","a","seen","filter","item","pushKey","pos","index","n","child","ascendingArr","b","descendingArr","ascending","descending","ascendingN","Number","descendingN","getItem","ll","setForce","t","tt","setFill","isEmpty","cpForce","cpFill","copyForce","map","copyFill","invert","k","typ","prettyJson","f","v","json","save","filename","type","file","Blob","navigator","msSaveOrOpenBlob","document","createElement","URL","createObjectURL","download","body","appendChild","click","setTimeout","removeChild","revokeObjectURL"],"mappings":"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","sourcesContent":["//console.log(\"Loading UtilsLib.js\");\n\t\t    \nfunction Utils() {\n    this.version=\"1\";\n    this.invertArray=function(arr) {\n\tvar alen=arr.length;\n\tvar xlen=Math.floor(alen/2);\n\tfor (var ii=0; ii<xlen;ii++) {\n\t    var jj=alen-ii-1\n\t    var buff=arr[ii];\n\t    arr[ii]=arr[jj];\n\t    arr[jj]=buff;\n\t}\n    };\n    this.invertedArray=function(arr) {\n\tvar ret=[];\n\tvar alen=arr.length;\n\tfor (var ii=alen-1; ii>=0;ii--) {\n\t    ret.push(arr[ii]);\n\t}\n\treturn ret;\n    };\n    this.getMin=function(arr) {\n\tvar len = arr.length, min = undefined;\n\twhile (len--) {\n\t    if (min === undefined || arr[len] < min) {\n\t\tmin = arr[len];\n\t    }\n\t}\n\treturn min;\n    };\n    this.getMax=function(arr) {\n\tvar len = arr.length, max = undefined;\n\twhile (len--) {\n\t    if (max === undefined || arr[len] > max) {\n\t\tmax = arr[len];\n\t    }\n\t}\n\treturn max;\n    };\n    this.init=function(par,setup){\n\tvar url=this.getUrlVars();\n\tif (par in url) {\n\t    //console.log(par,url);\n\t    var code=decodeURIComponent(url[par]);\n\t    //console.log(\"Processing url:\",code);\n\t    try {\n\t\tvar newsetup=JSON.parse(code);\n\t\tfor (var ss in newsetup) {\n\t\t    if (newsetup[ss] !== undefined) {\n\t\t\tsetup[ss]=newsetup[ss];\n\t\t    }\n\t\t}\n\t    } catch (e) {\n\t\tsetup[par]=url[par];\n\t    }\n\t    //console.log(\"new setup:\",JSON.stringify(setup));\n\t} else {\n\t    //console.log(\"No '\"+par+\"' in URL.\");\n\t}\n\n    };\n    this.clean=function(arr) {\n\tfor (var ii=0;ii<arr.length;ii++) {\n\t    if (arr[ii]===null || arr[ii]===\"\") {\n\t\tarr.splice(ii, 1);\n\t    }\n\t}\n\treturn arr;\n    }\n    this.moveTo=function(arr,src,trg) {\n\tvar isrc=arr.indexOf(src);\n\tvar itrg=arr.indexOf(trg);\n\tif (isrc !== -1 && itrg !== -1) {\n\t    var csrc=arr.splice(isrc, 1);\n\t    this.spliceArray(arr,itrg,0,csrc);\n\t}\n    };\n    this.cpArray=function(sarr,tarr) {\n\tif (tarr !== undefined) {\n\t    var lent=tarr.length;\n\t    for (var ii=0;ii<lent;ii++) {\n\t\tvar ind=sarr.indexOf(tarr[ii]);\n\t\tif (ind===-1) {\n\t\t    sarr.push(tarr[ii]);\n\t\t}\n\t    }\n\t};\n    };\n    this.ppArray=function(sarr,tarr) {\n\tvar lent=tarr.length;\n\tfor (var ii=lent-1;ii>=0;ii--) {\n\t    var ind=sarr.indexOf(tarr[ii]);\n\t    if (ind===-1) {\n\t\tthis.spliceArray(sarr,0,0,tarr[ii]); // first position (table)\n\t    }\n\t}\n    };\n    this.addArray=function(sarr,tarr) {\n\tthis.cpArray(sarr,tarr);\n\ttarr=[];\n    };\n    this.prepArray=function(sarr,tarr) {\n\tthis.ppArray(sarr,tarr);\n\ttarr=[];\n    };\n    this.remArray=function(sarr,tarr) {\n\tvar lent=tarr.length;\n\tfor (var ii=0;ii<lent;ii++) {\n\t    var ind=sarr.indexOf(tarr[ii]);\n\t    if (ind!==-1) {\n\t\tsarr.splice(ind,1);\n\t    }\n\t}\n    };\n    this.moveToArray=function(sarr,tarr,key,tpos) {\n\tvar sid=sarr.indexOf(key);\n\tif (sid !== -1) {\n\t    var src=sarr.splice(sid, 1);    // remove from path\n\t    if (tpos  === undefined || tpos  < 0) {\n\t\tthis.spliceArray(tarr,tarr.length, 0, src);\n\t    } else {\n\t\tthis.spliceArray(tarr,tpos, 0, src);\n\t    }\n\t    return true;\n\t}else {\n\t    return false;\n\t}\n    };\n    this.keepHash=function(sarr,tarr) {\n\tvar ret=[];\n\tvar lent=tarr.length;\n\tvar keep={};\n\tfor (var ii=0;ii<lent;ii++) {\n\t    var hsh=tarr[ii];\n\t    var keys=Object.keys(hsh);\n\t    var lenk=keys.length;\n\t    for (var jj=0;jj<lenk;jj++) {\n\t\tvar key=keys[jj];\n\t\tkeep[key]=true;\n\t    }\n\t}\n\tvar lens=sarr.length;\n\tfor (var kk=0;kk<lens;kk++) {\n\t    var arr=sarr[kk];\n\t    if (keep[arr] !== undefined && keep[arr]) {\n\t\tret.push(arr);\n\t    };\n\t}\n\treturn ret;\n    }\n    this.missing=function(arr,src){\n\t//console.log(\"Missing:\",src,JSON.stringify(arr));\n\tif (arr === undefined) {\n\t    console.log(\"Invalid array specified in this.missing:\",JSON.stringify(src));\n\t    return false;\n\t} else {\n\t    if (Array.isArray(src)) {\n\t\treturn (arr.indexOf(src[0])  === -1);\n\t    } else {\n\t\treturn (arr.indexOf(src)  === -1);\n\t    }\n\t}\n    };\n    this.restore=function(arr,obj) {\n\tfor (var key in obj) {\n            if (Object.prototype.hasOwnProperty.call(obj, key)) {\n\t\tarr[key]=this.cp(obj[key]);\n\t    }\n\t};\n    };\n    this.cp=function(obj) {\n\tif (obj === null || typeof (obj) !== 'object' || 'isActiveClone' in obj)\n            return obj;\n\tvar temp;\n\tif (obj instanceof Date) {\n\t    temp = new obj.constructor(); //or new Date(obj);\n\t} else {\n\t    temp = obj.constructor();\n\t};\n\tfor (var key in obj) {\n            if (Object.prototype.hasOwnProperty.call(obj, key)) {\n\t\tobj['isActiveClone'] = null;\n\t\ttemp[key] = this.cp(obj[key]);\n\t\tdelete obj['isActiveClone'];\n            }\n\t}\n\treturn temp;\n    }.bind(this);\n    this.getStatusString=function(state) {\n\treturn this.numberWithCommas(state.Database.cnt)+ \" in database, \"+\n\t    this.numberWithCommas(state.Matrix.cnt)+\" in table.\";\n    };\n    this.toString=function(setup) {\n\tvar s=\"->\";\n\tfor (var kk in setup) {\n\t    s = s + \"|\"+ kk + \":\" + setup[kk];\n\t};\n\treturn s;\n    };\n    this.numberWithCommas=function(x) {\n\treturn x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n    };\n    this.cntDocs=function(elements,key,val) {\n\tvar cnt=0;\n\tvar elen=elements.length;\n\tfor (var ee=0;ee<elen;ee++) {   // loop over elements\n\t    var el=elements[ee];\n\t    var docs=el.docs;\n\t    var dlen=docs.length;\n\t    if (val===\"\") {\n\t\tcnt=cnt+dlen;\n\t    } else {\n\t\tfor (var jj=0;jj<dlen;jj++) {   // loop over segments in each element\n\t\t    var d=docs[jj];\n\t\t    var thr=d._thr;\n\t\t    //console.log(\"cntDocs:\",key,d[key],val,dlen);\n\t\t    if (d[key]===val) {\n\t\t\tif (thr.val !== undefined) {\n\t\t\t    cnt=cnt+1;\n\t\t\t};\n\t\t    }\n\t\t}\n\t    }\n\t}\n\t//console.log(\"cntDocs:\",JSON.stringify(elements),key,cnt,elen);\n\treturn cnt;\n    };\n    this.pushUrl=function(state) {\n\tvar path = window.location.pathname;\n\t//console.log(\"Path:\",path);\n\tvar page = path.split(\"/\").pop();\n\tpage.split('#').shift();\n\t//console.log( page );\n\tvar url=page+\"?setup=\"+state.Default.setup+\"&\";\n\t//console.log(\"Actual Keys:\",JSON.stringify(state.Path.keys));\n\tvar urlDatabase=undefined;\n\tif (state.Default.hasChanged(state,[\"Database\",\"data\"]) && state.Database.data!==undefined) {\n\t    if (urlDatabase ===undefined) {urlDatabase={};}\n\t    urlDatabase.data=this.cp(state.Database.data);\n\t};\n\tvar urlPath=undefined;\n\tif (state.Default.hasChanged(state,[\"Path\",\"keys\"])) {\n\t    if (urlPath ===undefined) {urlPath={};}\n\t    urlPath.keys=this.cp(state.Path.keys);\n\t};\n\tif (state.Default.hasChanged(state,[\"Path\",\"select\"])) {\n\t    if (urlPath ===undefined) {urlPath={};}\n\t    urlPath.select=this.cp(state.Path.select);\n\t};\n\tif (state.Default.hasChanged(state,[\"Path\",\"home\"])) {\n\t    if (urlPath ===undefined) {urlPath={};}\n\t    urlPath.home=this.cp(state.Path.home);\n\t};\n\tif (state.Default.hasChanged(state,[\"Path\",\"tooltip\"])) {\n\t    if (urlPath ===undefined) {urlPath={};}\n\t    urlPath.tooltip=this.cp(state.Path.tooltip);\n\t};\n\tif (state.Default.hasChanged(state,[\"Path\",\"order\"])) {\n\t    if (urlPath ===undefined) {urlPath={};}\n\t    urlPath.order=this.cp(state.Path.order);\n\t};\n\t//console.log(\"URL Keys:\",JSON.stringify(urlPath.keys));\n\tvar urlLayout=undefined;\n\tif (state.Default.hasChanged(state,[\"Layout\",\"priority\"])) {\n\t    if (urlLayout ===undefined) {urlLayout={};}\n\t    urlLayout.priority=state.Layout.getPriority(state);\n\t};\n\tif (state.Default.hasChanged(state,[\"Layout\",\"state\"])) {\n\t    if (urlLayout ===undefined) {urlLayout={};}\n\t    urlLayout.state=this.cp(state.Layout.state);\n\t};\n\tif (urlDatabase !== undefined) {\n\t    url=url + \"Database=\" + encodeURI(JSON.stringify(urlDatabase)+\"&\");\n\t};\n\tif (urlPath !== undefined) {\n\t    url=url + \"Path=\" + encodeURI(JSON.stringify(urlPath)+\"&\");\n\t};\n\tif (urlLayout !== undefined) {\n\t    url=url + \"Layout=\" + encodeURI(JSON.stringify(urlLayout)+\"&\");\n\t};\n\t//console.log(\"Setting URL to (\",url.length,\"):\",url);\n\twindow.history.replaceState(\"\", \"js\", url);\n    }.bind(this);\n    this.getUrlVars=function(state) {\n\tvar vars = {};\n\twindow.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,    \n\t\t\t\t     function(m,key,value) {\n\t\t\t\t\t //console.log(\"URL item:\",key,\" \",value)\n\t\t\t\t\t vars[key] = value;\n\t\t\t\t     });\n\treturn vars;\n    };\n    this.uniq=function(state,a) {\n\tvar seen = {};\n\treturn a.filter(function(item) {\n\t    return seen.hasOwnProperty(item) ? false : (seen[item] = true);\n\t});\n    };\n    this.pushKey=function(arr,key,pos) {\n\tif (Array.isArray(key)) {\n\t    var len=key.length;\n\t    for (var ii=0; ii<len; ii++) {\n\t\tif (arr.indexOf(key[ii])===-1) {\n\t\t    if (pos === undefined) {\n\t\t\tarr.push(key[ii]);\n\t\t    } else {\n\t\t\tarr.splice(pos,0,key[ii])\n\t\t    };\n\t\t    \n\t\t}\n\t    }\n\t} else {\n\t    if (arr.indexOf(key)===-1) {\n\t\tif (pos === undefined) {\n\t\t    arr.push(key);\n\t\t} else {\n\t\t    arr.splice(pos,0,key)\n\t\t};\n\t    }\n\t}\n\tthis.clean(arr);\n    };\n    this.spliceArray=function(arr,index,n,child){\n\tif (Array.isArray(child)) {\n\t    var len=child.length;\n\t    for (var ii=0; ii<len; ii++) {\n\t\tarr.splice(index,n,child[ii])\n\t\tn=0\n\t\tindex=index+1\n\t    }\n\t} else {\n\t    arr.splice(index,n,child)\n\t}\n    }\n    this.ascendingArr=function(a,b) {\n\tif (a[0]  === \"\") { \n\t    return 1;\n\t} else if (b[0]  === \"\") {\n\t    return -1;\n\t} else if (a[0]<b[0]) { \n\t    return -1;\n\t} else if (a[0]>b[0]) {\n\t    return 1;\n\t} else {\n\t    return 0;\n\t}\n    };\n    this.descendingArr=function(a,b) {\n\tif (a[0]  === \"\") { \n\t    return -1;\n\t} else if (b[0]  === \"\") {\n\t    return 1;\n\t} else if (a[0]<b[0]) { \n\t    return 1;\n\t} else if (a[0]>b[0]) {\n\t    return -1;\n\t} else {\n\t    return 0;\n\t}\n    };\n    this.ascending=function(a,b) {\n\tif (a  === \"\") { \n\t    return 1;\n\t} else if (b  === \"\") {\n\t    return -1;\n\t} else if (a<b) { \n\t    return -1;\n\t} else if (a>b) {\n\t    return 1;\n\t} else {\n\t    return 0;\n\t}\n    };\n    this.descending=function(a,b) {\n\tif (a  === \"\") { \n\t    return -1;\n\t} else if (b  === \"\") {\n\t    return 1;\n\t} else if (a<b) { \n\t    return 1;\n\t} else if (a>b) {\n\t    return -1;\n\t} else {\n\t    return 0;\n\t}\n    };\n    this.ascendingN=function(a,b) {\n\tif (a  === null) { \n\t    return 1;\n\t} else if (b  === null) {\n\t    return -1;\n\t} else if (Number(a)<Number(b)) { \n\t    return -1;\n\t} else if (Number(a)>Number(b)) {\n\t    return 1;\n\t} else {\n\t    return 0;\n\t}\n    };\n    this.descendingN=function(a,b) {\n\tif (a  === null) { \n\t    return -1;\n\t} else if (b  === null) {\n\t    return 1;\n\t} else if (Number(a)<Number(b)) { \n\t    return 1;\n\t} else if (Number(a)>Number(b)) {\n\t    return -1;\n\t} else {\n\t    return 0;\n\t}\n    }\n    this.getItem=function(state,s,src) {\n\tvar ss=src;\n\tvar ll=s.length;\n\tfor (var ii=0;ii<ll;ii++) {\n\t    if (ss===undefined) { return ss};\n\t    ss=ss[s[ii]];\n\t}\n\treturn ss;\n    }\n    this.setForce=function(state,t,trg,ss) {\n\tvar ll=t.length;\n\tif (trg===undefined) { \n\t    return;\n\t} else if (ll===0) {\n\t    trg=ss;\n\t    return trg;\n\t} else {\n\t    var tt=trg;\n\t    for (var ii=0;ii<ll-1;ii++) {\n\t\tif (tt[t[ii]]===undefined) { tt[t[ii]]={} };\n\t\ttt=tt[t[ii]];\n\t    }\n\t    tt[t[ll-1]]=state.Utils.cp(ss)\n\t    return tt[t[ll-1]];\n\t}\n    }\n    this.setFill=function(state,t,trg,ss) {\n\tvar ll=t.length;\n\tif (trg===undefined) { \n\t    return;\n\t} else if (ll===0) {\n\t    trg=ss;\n\t    return trg;\n\t} else {\n\t    //console.log(\"Trg:\",JSON.stringify(t),\":\",JSON.stringify(trg),\":\",JSON.stringify(ss));\n\t    var tt=trg;\n\t    for (var ii=0;ii<ll-1;ii++) {\n\t\tif (tt[t[ii]]===undefined) { tt[t[ii]]={} };\n\t\ttt=tt[t[ii]];\n\t    }\n\t    if (this.isEmpty(state,tt[t[ll-1]])) {\n\t\ttt[t[ll-1]]=state.Utils.cp(ss);\n\t    }\n\t    return tt[t[ll-1]];\n\t}\n    }\n    this.cpForce=function(state,t,s,trg,src) {\n\tvar ss=this.getItem(state,s,src);\n\tthis.setForce(state,t,trg,ss);\n    }\n    this.cpFill=function(state,t,s,trg,src) {\n\tvar ss=this.getItem(state,s,src);\n\t//console.log(\"Filling:\",s,'->',t,! this.isEmpty(state,ss),JSON.stringify());\n\t//if (! this.isEmpty(state,ss) ) {\n        if (ss !== undefined) {\n\t    this.setFill(state,t,trg,ss);\n\t}\n    };\n    // map src onto target always\n    this.copyForce=function(state,src,trg,map) {\n\tif (src===undefined) {\n\t    console.log(\"ERROR: MapForce with no src.\");\n\t} else if (trg===undefined) {\n\t    console.log(\"ERROR: MapForce with no trg.\");\n\t} else if (map===undefined) {\n\t    console.log(\"ERROR: MapForce with no map.\");\n\t} else {\n\t    var len=map.length\n\t    for (var ii=0;ii<len;ii++){\n\t\tvar t=map[ii][0];\n\t\tvar s=map[ii][1];\n\t\tthis.cpForce(state,t,s,trg,src)\n\t    }\n\t}\n    };\n    // map src onto target if target is empty and src is not\n    this.copyFill=function(state,src,trg,map) {\n\tif (src===undefined) {\n\t    console.log(\"ERROR: MapFill with no src.\");\n\t} else if (trg===undefined) {\n\t    console.log(\"ERROR: MapFill with no trg.\");\n\t} else if (map===undefined) {\n\t    console.log(\"ERROR: MapFill with no map.\");\n\t} else {\n\t    var len=map.length\n\t    for (var ii=0;ii<len;ii++){\n\t\tvar t=map[ii][0];\n\t\tvar s=map[ii][1];\n\t\tthis.cpFill(state,t,s,trg,src)\n\t    }\n\t}\n    };\n    this.invert=function(map) {\n\tvar ret=[];\n\tvar len=map.length;\n\tfor (var ii=0;ii<len;ii++){\n\t    var t=map[ii][0];\n\t    var s=map[ii][1];\n\t    ret.push([s,t]);\n\t}\n\treturn ret;\n    }\n    this.isEmpty=function(state,obj) { // check if obj has any string/number children\n\tvar ret=true;\n\tvar k;\n\tif (obj===undefined) {\n\t    ret=true;\n\t} else {\n\t    var typ=typeof obj;\n\t    if (typ === \"Array\") { // check array children\n\t\tfor (k in obj) {\n\t\t    if (! state.Utils.isEmpty(state,obj[k])) {\n\t\t\tret=false;\n\t\t\t//console.log(\"    =\",typ,ret,k,JSON.stringify(obj[k]));\n\t\t\tbreak;\n\t\t    }\n\t\t}\n\t    } else if (typ === \"object\") { // check hash children\n\t\tfor (k in obj) {\n\t\t    if (obj.hasOwnProperty(k)) {\n\t\t\tif (! state.Utils.isEmpty(state,obj[k])) { \n\t\t\t    ret=false;\n\t\t\t    //console.log(\"    =\",typ,ret,k,JSON.stringify(obj[k]));\n\t\t\t    break;\n\t\t\t}\n\t\t    }\n\t\t}\n\t    } else {\n\t\tret=false;\n\t    }\n\t}\n\t//console.log(\"Type:\",ret,JSON.stringify(obj));\n\treturn ret;\n    };\n    this.prettyJson=function(obj) {\n\tvar f=function(k,v){\n\t    if (Array.isArray(v)) {\n\t\treturn JSON.stringify(v);\n\t    };\n\t    return v;\n\t};\n\tvar json=JSON.stringify(obj,f,\"  \");\n\tjson=json.replace(/\"\\[/g,'[');\n\tjson=json.replace(/\\]\"/g,']');\n\tjson=json.replace(/\\\\\"/g,'\"');\n\t//console.log(\"Replaced:\",json);\n\treturn json;\n    };\n    this.save=function(data, filename, type) {\n\tconsole.log(\"Saving file:\",filename);\n\tvar file = new Blob([data], {type: type});\n\tif (window.navigator.msSaveOrOpenBlob) // IE10+\n            window.navigator.msSaveOrOpenBlob(file, filename);\n\telse { // Others\n            var a = document.createElement(\"a\"),\n                url = URL.createObjectURL(file);\n            a.href = url;\n            a.download = filename;\n            document.body.appendChild(a);\n            a.click();\n            setTimeout(function() {\n\t\tdocument.body.removeChild(a);\n\t\twindow.URL.revokeObjectURL(url);  \n            }, 0);\n\t};\n    };\n};\nexport default Utils;\n    \n"]},"metadata":{},"sourceType":"module"}