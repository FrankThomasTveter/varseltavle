{"ast":null,"code":"import _classCallCheck from \"/home/franktt/react/varseltavle/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/franktt/react/varseltavle/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/franktt/react/varseltavle/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/franktt/react/varseltavle/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/franktt/react/varseltavle/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/franktt/react/varseltavle/src/react/ListComponent.js\";\nimport React, { Component } from \"react\";\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid'; //import SummaryCell from './SummaryCell';\n//import CanvasText  from './CanvasTextComponent';\n//import Text        from './TextComponent';\n//\toverflow: 'hidden',\n\nvar styles = function styles(theme) {\n  return {\n    root: {\n      height: '100%'\n    },\n    paper: {\n      tableLayout: 'fixed',\n      padding: 0,\n      margin: 0\n    },\n    divTable: {\n      display: 'table',\n      width: '100%'\n    },\n    divTableRow: {\n      display: 'table-row'\n    },\n    divTableCell: {\n      border: '0px solid #999999',\n      display: 'table-cell',\n      padding: '3px 3px'\n    },\n    divTableCellCursor: {\n      cursor: \"pointer\",\n      border: '0px solid #999999',\n      display: 'table-cell',\n      padding: '0px 0px'\n    },\n    divTableHead: {\n      border: '0px solid #999999',\n      display: 'table-cell',\n      padding: '0px 0px'\n    },\n    divTableHeading: {\n      display: 'table-header-group'\n    },\n    divTableHeadingCenter: {\n      display: 'flex',\n      justifyContent: 'center'\n    },\n    divTableFoot: {\n      backgroundColor: '#DDD',\n      display: 'table-footer-group',\n      fontWeight: 'bold'\n    },\n    divTableBody: {\n      display: 'table-row-group'\n    }\n  };\n}; // ---------------- DATA\n\n\nfunction renderDataList(classes, state, doc, plan, skey, fgcolor, bgcolor, index) {\n  if (doc === undefined) {\n    return React.createElement(\"div\", {\n      className: classes.divTableCell,\n      style: {\n        backgroundColor: '#EEE'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    });\n  } else {\n    var val = doc[skey];\n\n    if (val === undefined) {\n      val = \"\";\n    }\n\n    ; //console.log(\"Key:\",skey,\" Val:\",JSON.stringify(val),JSON.stringify(doc[skey]));\n\n    return React.createElement(\"div\", {\n      className: classes.divTableCell,\n      style: {\n        color: fgcolor,\n        backgroundColor: bgcolor\n      },\n      key: skey,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, val);\n  }\n}\n\n;\n\nfunction renderDoc(classes, state, skeys, plan, doc, lev, index) {\n  //console.log(\"We have a matrix(\",rowval,\") with range:\",JSON.stringify(range));\n  //var lev=doc.level;\n  var bgcolor = state.Colors.getLevelBgColor(lev);\n  var fgcolor = state.Colors.getLevelFgColor(lev);\n\n  var mapFunction = function mapFunction(skey, index) {\n    return renderDataList(classes, state, doc, plan, skey, fgcolor, bgcolor, index);\n  };\n\n  return React.createElement(\"div\", {\n    className: classes.divTableRow,\n    key: index.toString(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, skeys.map(mapFunction));\n}\n\n;\n\nfunction getDataRowList(classes, state, skeys, plans) {\n  var items = [];\n  var matrix = state.React.matrix; //var ret=null;\n\n  if (matrix !== undefined) {\n    var colvalues = Object.keys(matrix);\n    var clen = colvalues.length;\n\n    for (var kk = 0; kk < clen; kk++) {\n      var colval = colvalues[kk];\n      var list = matrix[colval];\n\n      if (list !== undefined) {\n        var rowvalues = Object.keys(list);\n        var rlen = rowvalues.length;\n\n        for (var ll = 0; ll < rlen; ll++) {\n          var rowval = rowvalues[ll];\n          var element = state.Matrix.getMatrixElement(colval, rowval, matrix); //console.log(\"We have a matrix with range:\",JSON.stringify(range));\n\n          if (element !== undefined && element.docs !== undefined) {\n            //var lev=element.maxlev;\n            var mapFunction = function mapFunction(doc, index) {\n              return renderDoc(classes, state, skeys, plans.cell, doc, element.maxlev, index);\n            };\n\n            items.push(element.docs.map(mapFunction));\n          }\n\n          ;\n        }\n\n        ;\n      }\n    }\n  }\n\n  ;\n  return items;\n}\n\n; // ---------------- HDR\n\nfunction renderHdrList(classes, state, plan, val, index) {\n  //console.log(\"HdrCell:\",val);\n  var cursor = classes.divTableCell;\n  return React.createElement(\"div\", {\n    className: cursor,\n    style: {\n      backgroundColor: '#DDD'\n    },\n    key: \"col-\".concat(index),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, val);\n}\n\nfunction HdrRow(props) {\n  var classes = props.classes,\n      state = props.state,\n      plans = props.plans,\n      skeys = props.skeys; //, rowvalues, label, cellMode\n\n  var mapFunction = function mapFunction(val, index) {\n    return renderHdrList(classes, state, plans.col, val, index);\n  }; //console.log(\"Making header List row.\",JSON.stringify(skeys));\n\n\n  return React.createElement(\"div\", {\n    className: classes.divTableRow,\n    key: 'hdr',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, skeys.map(mapFunction));\n} // ---------------- Details\n\n\nfunction Details(props) {\n  var classes = props.classes,\n      state = props.state; // classes, \n\n  var cellMode = state.Layout.getCellMode(state);\n\n  if (state.React.matrix === undefined) {\n    return React.createElement(\"div\", {\n      className: classes.divTable,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: classes.divTableBody,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: classes.devTableCell,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, \"No Matrix defined\")));\n  } else {\n    var skeys = state.Matrix.sortedKeys(state, state.Matrix.keyCnt); //DOM.style.font\n\n    var border = 2;\n    var label = \"\";\n    var width = 0.9 * window.innerWidth;\n    var height = 0.94 * window.innerHeight - 180; //var height=0.8*(window.innerHeight-200);\n\n    var plans = state.Layout.makePlans(label, [\"\"], [\"\"], width, height, border, cellMode);\n    var items = getDataRowList(classes, state, skeys, plans); //console.log(\"Details => Width/Height:\",window.innerWidth,window.innerHeight,plan.cell.width,plan.hdr.height)\n\n    return React.createElement(\"div\", {\n      className: classes.divTable,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: classes.divTableBody,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(HdrRow, {\n      classes: classes,\n      state: state,\n      key: \"hdr\",\n      plans: plans,\n      label: label,\n      cellMode: cellMode,\n      skeys: skeys,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }), items));\n  }\n}\n\n;\n\nvar List =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(List, _Component);\n\n  function List() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, List);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(List)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.updateWindowDimensions = function () {\n      _this.width = window.innerWidth;\n      _this.height = window.innerHeight;\n      _this.bbx = _this.el.getBoundingClientRect(); //console.log(\"Width/Height:\",this.width,this.height,this.bbx.width,this.bbx.height)\n    };\n\n    return _this;\n  }\n\n  _createClass(List, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      window.addEventListener(\"resize\", this.updateWindowDimensions);\n    }\n  }, {\n    key: \"element\",\n    value: function element(el) {\n      if (el !== undefined && el !== null) {\n        this.el = el;\n        this.bbx = this.el.getBoundingClientRect(); //console.log(\"BBX width/height:\",this.bbx.width,this.bbx.height);\n      }\n\n      ;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          state = _this$props.state; //console.log(\"##### Rendering List.\");\n\n      return React.createElement(\"div\", {\n        ref: function ref(el) {\n          _this2.element(el);\n        },\n        className: classes.root,\n        style: {\n          width: '100%',\n          height: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        container: true,\n        spacing: 24,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(Paper, {\n        className: classes.paper,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(Details, {\n        state: state,\n        classes: classes,\n        element: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return List;\n}(Component);\n\nList.propTypes = {\n  classes: PropTypes.object.isRequired\n};\nexport default withStyles(styles)(List);","map":{"version":3,"sources":["/home/franktt/react/varseltavle/src/react/ListComponent.js"],"names":["React","Component","PropTypes","withStyles","Paper","Grid","styles","theme","root","height","paper","tableLayout","padding","margin","divTable","display","width","divTableRow","divTableCell","border","divTableCellCursor","cursor","divTableHead","divTableHeading","divTableHeadingCenter","justifyContent","divTableFoot","backgroundColor","fontWeight","divTableBody","renderDataList","classes","state","doc","plan","skey","fgcolor","bgcolor","index","undefined","val","color","renderDoc","skeys","lev","Colors","getLevelBgColor","getLevelFgColor","mapFunction","toString","map","getDataRowList","plans","items","matrix","colvalues","Object","keys","clen","length","kk","colval","list","rowvalues","rlen","ll","rowval","element","Matrix","getMatrixElement","docs","cell","maxlev","push","renderHdrList","HdrRow","props","col","Details","cellMode","Layout","getCellMode","devTableCell","sortedKeys","keyCnt","label","window","innerWidth","innerHeight","makePlans","List","updateWindowDimensions","bbx","el","getBoundingClientRect","addEventListener","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\n\n//import SummaryCell from './SummaryCell';\n//import CanvasText  from './CanvasTextComponent';\n//import Text        from './TextComponent';\n\n//\toverflow: 'hidden',\n\nconst styles = theme => ({\n    root: {\n\theight: '100%',\n    },\n    paper: {\n\ttableLayout: 'fixed',\n\tpadding:0,\n\tmargin:0,\n    },\n    divTable :{\n\tdisplay: 'table',\n\twidth: '100%',\n    },\n    divTableRow:  {\n\tdisplay: 'table-row',\n    },\n    divTableCell:{\n\tborder: '0px solid #999999',\n\tdisplay: 'table-cell',\n\tpadding: '3px 3px',\n    },\n    divTableCellCursor:{\n\tcursor: \"pointer\",\n\tborder: '0px solid #999999',\n\tdisplay: 'table-cell',\n\tpadding: '0px 0px',\n    },\n    divTableHead : {\n\tborder: '0px solid #999999',\n\tdisplay: 'table-cell',\n\tpadding: '0px 0px',\n    },\n    divTableHeading : {\n\tdisplay: 'table-header-group',\n    },\n    divTableHeadingCenter : {\n\tdisplay: 'flex',\n\tjustifyContent: 'center',\n    },\n    divTableFoot : {\n\tbackgroundColor: '#DDD',\n\tdisplay: 'table-footer-group',\n\tfontWeight: 'bold',\n    },\n    divTableBody : {\n\tdisplay: 'table-row-group',\n    }\n});\n// ---------------- DATA\nfunction renderDataList(classes,state,doc,plan,skey,fgcolor,bgcolor,index){\n    if (doc===undefined) {\n\treturn <div className={classes.divTableCell} style={{backgroundColor:'#EEE'}}/>\n    } else {    \n\tvar val=doc[skey];\n\tif (val === undefined) {val=\"\";};\n\t//console.log(\"Key:\",skey,\" Val:\",JSON.stringify(val),JSON.stringify(doc[skey]));\n\treturn (\n            <div className={classes.divTableCell} style={{color:fgcolor,backgroundColor:bgcolor}} key={skey}>\n\t\t{val}\n\t    </div>\n\t);\n    }\n};\nfunction renderDoc(classes,state,skeys,plan,doc,lev,index) {\n    //console.log(\"We have a matrix(\",rowval,\") with range:\",JSON.stringify(range));\n    //var lev=doc.level;\n    var bgcolor=state.Colors.getLevelBgColor(lev);\n    var fgcolor=state.Colors.getLevelFgColor(lev);\n    var mapFunction= (skey,index)=>renderDataList(classes,state,doc,plan,skey,fgcolor,bgcolor,index);\n    return (<div className={classes.divTableRow} key={index.toString()}>\n\t    {skeys.map(mapFunction)}\n\t    </div>);\n};\nfunction getDataRowList(classes,state,skeys,plans) {\n    const items=[];\n    var matrix=state.React.matrix;\n    //var ret=null;\n    if (matrix!==undefined) {\n\tvar colvalues=Object.keys(matrix);\n\tvar clen=colvalues.length;\n        for (var kk=0;kk<clen;kk++) {\n\t    var colval=colvalues[kk];\n\t    var list=matrix[colval];\n\t    if (list !== undefined) {\n\t\tvar rowvalues=Object.keys(list);\n\t\tvar rlen=rowvalues.length;\n\t\tfor (var ll=0;ll<rlen;ll++) {\n\t\t    var rowval=rowvalues[ll];\n\t\t    var element=state.Matrix.getMatrixElement(colval,rowval,matrix);\n\t\t    //console.log(\"We have a matrix with range:\",JSON.stringify(range));\n\t\t    if (element !== undefined && element.docs !== undefined) {\n\t\t\t//var lev=element.maxlev;\n\t\t\tvar mapFunction=(doc,index) =>renderDoc(classes,state,skeys,plans.cell,doc,element.maxlev,index);\n\t\t\titems.push(element.docs.map(mapFunction));\n\t\t    };\n\t\t};\n\t    }\n\t}\n    };\n    return items;\n};\n// ---------------- HDR\nfunction renderHdrList(classes,state,plan,val,index) {\n    //console.log(\"HdrCell:\",val);\n    var cursor=classes.divTableCell;\n    return (<div className={cursor} style={{backgroundColor:'#DDD'}} key={`col-${index}`} >\n\t    {val}\n \t    </div> );\n}\nfunction HdrRow(props) {\n    const { classes, state, plans, skeys } = props; //, rowvalues, label, cellMode\n    var mapFunction= (val,index)=>renderHdrList(classes,state,plans.col,val,index);\n    //console.log(\"Making header List row.\",JSON.stringify(skeys));\n    return (<div className={classes.divTableRow} key={'hdr'}>\n\t    {skeys.map(mapFunction)}\n\t    </div>);\n}\n// ---------------- Details\nfunction Details(props) {\n    const { classes, state } = props; // classes, \n    var cellMode  = state.Layout.getCellMode(state);\n    if (state.React.matrix === undefined) {\n\treturn (<div className={classes.divTable}>\n\t\t   <div className={classes.divTableBody}>\n\t\t      <div className={classes.devTableCell}>\n\t\t         {\"No Matrix defined\"}\n\t\t      </div>\n\t\t   </div>\n\t\t</div>\n\t       );\n    } else {\n        var skeys = state.Matrix.sortedKeys(state,state.Matrix.keyCnt);\n \t//DOM.style.font\n\tvar border=2;\n\tvar label=\"\";\n\tvar width=0.9*window.innerWidth;\n\tvar height=0.94*window.innerHeight - 180;\n\t//var height=0.8*(window.innerHeight-200);\n\tvar plans=state.Layout.makePlans(label,[\"\"],[\"\"],width,height,border,cellMode);\n\tvar items=getDataRowList(classes,state,skeys,plans);\n\t//console.log(\"Details => Width/Height:\",window.innerWidth,window.innerHeight,plan.cell.width,plan.hdr.height)\n\treturn (<div className={classes.divTable}>\n\t\t   <div className={classes.divTableBody}>\n\t\t      <HdrRow classes={classes} state={state} key={\"hdr\"} plans={plans} label={label} cellMode={cellMode} skeys={skeys}/>\n\t\t      {items}\n\t\t   </div>\n\t\t</div>\n\t       );\n    }\n};\n\nclass List extends Component {\n    componentDidMount() {\n        window.addEventListener(\"resize\", this.updateWindowDimensions);\n    } \n    updateWindowDimensions = () => {\n        this.width= window.innerWidth;\n\tthis.height=window.innerHeight;\n\tthis.bbx=this.el.getBoundingClientRect();\n\t//console.log(\"Width/Height:\",this.width,this.height,this.bbx.width,this.bbx.height)\n    };\n    element(el) {\n\tif (el !== undefined && el !== null) {\n\t    this.el=el;\n\t    this.bbx=this.el.getBoundingClientRect();\n\t    //console.log(\"BBX width/height:\",this.bbx.width,this.bbx.height);\n\t};\n    };\n    render() {\n\tconst { classes, state } = this.props;\n\t//console.log(\"##### Rendering List.\");\n\treturn (<div ref={el=>{this.element(el)}} className={classes.root}  style={{width: '100%', height: '100%'}}>\n\t\t <Grid container spacing={24}>\n\t\t  <Grid item xs={12} > \n                   { <Paper className={classes.paper}>\n\t\t       <Details state={state} classes={classes} element={this}/>\n                     </Paper>}\n                  </Grid>\n                 </Grid>\n\t        </div>);\n\t}\n}\n\nList.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(List);\n"]},"metadata":{},"sourceType":"module"}