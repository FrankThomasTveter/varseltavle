{"ast":null,"code":"import _classCallCheck from\"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{withStyles}from'@material-ui/core/styles';import{teal_palette}from'../mui/metMuiThemes';import ReactTooltip from'react-tooltip';import Button from'@material-ui/core/Button';import Table from'./TooltipTable';import InfoIcon from'@material-ui/icons/Info';//import CancelIcon from '@material-ui/icons/Cancel';\nvar styles=function styles(theme){return{tooltip:{border:'0px solid #999999',backgroundColor:teal_palette.main,zIndex:100},button:{color:'white',\"&$buttonDisabled\":{color:theme.palette.primary.main}},buttonDisabled:{}};};function TableDetails(props){var state=props.state,data=props.data,tooltip=props.tooltip;//state,classes,element\nvar colkey=data.colkey;var rowkey=data.rowkey;var colvalues=data.colvalues;var rowval=data.rowval;var click=[rowkey,colkey];state.Utils.cpArray(click,state.Path.tooltip.click);var keys=[];if(colvalues===undefined){keys.push(colkey);}if(rowval===undefined){keys.push(rowkey);}state.Utils.cpArray(keys,state.Path.tooltip.keys);state.Utils.remArray(keys,state.Path.keys.path);//state.Utils.remArray(keys,state.Path.other.table);\nkeys=state.Utils.keepHash(keys,tooltip);//console.log(\"Keys:\",JSON.stringify(keys),JSON.stringify(state.Path.keys.path));\nvar key=data.rowkey+\":\"+data.colkey;return React.createElement(\"div\",{key:key},React.createElement(Table,{state:state,keys:keys,click:click,subs:tooltip}));};function ButtonDetails(props){var classes=props.classes,onclick=props.onclick;// state,element,data,\nreturn React.createElement(\"div\",null,React.createElement(Button,{className:classes.button,onClick:onclick},React.createElement(InfoIcon,null)));};//\t    <h3>Rowkey: {data.rowkey} Colkey: {data.colkey}</h3>\n//\t    <p>Some details.</p>\nfunction Tooltip(props){var state=props.state,classes=props.classes,data=props.data,element=props.element;var tooltip=state.Matrix.getTooltip(state,data);var available=state.Matrix.checkTooltip(state,data);if(available){return React.createElement(TableDetails,{state:state,classes:classes,data:data,tooltip:tooltip});}else{var onclick=function onclick(){state.Matrix.addTooltip(state,data);element.update();};return React.createElement(ButtonDetails,{state:state,classes:classes,data:data,onclick:onclick,tooltip:tooltip});}};var TooltipContainer=/*#__PURE__*/function(_Component){_inherits(TooltipContainer,_Component);function TooltipContainer(props){var _this;_classCallCheck(this,TooltipContainer);_this=_possibleConstructorReturn(this,_getPrototypeOf(TooltipContainer).call(this,props));var state=props.state;state.React.Tooltip=_assertThisInitialized(_this);return _this;}_createClass(TooltipContainer,[{key:\"rebuild\",value:function rebuild(){console.log(\"Rebuilding tooltip.\");//ReactTooltip.rebuild();\n}},{key:\"update\",value:function update(){console.log(\"Rebuilding tooltip.\");this.forceUpdate();ReactTooltip.rebuild();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){ReactTooltip.rebuild();}},{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,classes=_this$props.classes,state=_this$props.state,type=_this$props.type;var overridePosition=function overridePosition(_ref,currentEvent,currentTarget,node){var left=_ref.left,top=_ref.top;var d=document.documentElement;//console.log(\"Top:\",top,node.clientHeight,\" left:\",left,node.clientWidth,\" window:\",d.clientHeight,d.clientWidth);\nleft=Math.min(d.clientWidth-node.clientWidth,left);top=Math.min(d.clientHeight-node.clientHeight,top);left=Math.max(0,left);top=Math.max(75,top);return{top:top,left:left};};var getConstant=function getConstant(dataTip){if(dataTip==null){return null;}else{var data=JSON.parse(dataTip);//console.log(\"Tooltip:\",JSON.stringify(dataTip),JSON.stringify(data));\nreturn React.createElement(Tooltip,{state:state,classes:classes,data:data,element:_this2});}};//console.log(\"##### Rendering TooltipContainer.\");\nif(state.Layout.state.tooltip===2){return null;}else{return React.createElement(ReactTooltip,{id:type,className:classes.tooltip,overridePosition:overridePosition,getContent:getConstant,effect:\"solid\",delayHide:500,delayShow:200,delayUpdate:500,place:'bottom',border:true,type:'light'});}}}]);return TooltipContainer;}(Component);;export default withStyles(styles)(TooltipContainer);","map":{"version":3,"sources":["/home/franktt/react/varseltavle/src/react/TooltipContainer.js"],"names":["React","Component","withStyles","teal_palette","ReactTooltip","Button","Table","InfoIcon","styles","theme","tooltip","border","backgroundColor","main","zIndex","button","color","palette","primary","buttonDisabled","TableDetails","props","state","data","colkey","rowkey","colvalues","rowval","click","Utils","cpArray","Path","keys","undefined","push","remArray","path","keepHash","key","ButtonDetails","classes","onclick","Tooltip","element","Matrix","getTooltip","available","checkTooltip","addTooltip","update","TooltipContainer","console","log","forceUpdate","rebuild","type","overridePosition","currentEvent","currentTarget","node","left","top","d","document","documentElement","Math","min","clientWidth","clientHeight","max","getConstant","dataTip","JSON","parse","Layout"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport {teal_palette} from '../mui/metMuiThemes';\n\nimport ReactTooltip from 'react-tooltip'\nimport Button from '@material-ui/core/Button';\nimport Table  from './TooltipTable';\n\nimport InfoIcon from '@material-ui/icons/Info';\n//import CancelIcon from '@material-ui/icons/Cancel';\n\n\nconst styles = theme => ({\n    tooltip:{\n\tborder: '0px solid #999999',\n\tbackgroundColor:teal_palette.main,\n\tzIndex:100,\n    },\n    button: {\n\tcolor:'white',\n\t\"&$buttonDisabled\": {\n            color: theme.palette.primary.main,\n\t},\n    },\n    buttonDisabled: {},\n});\nfunction TableDetails(props){\n    const {state,data,tooltip}=props; //state,classes,element\n    var colkey=data.colkey;\n    var rowkey=data.rowkey;\n    var colvalues=data.colvalues;\n    var rowval=data.rowval;\n    var click=[rowkey,colkey];\n    state.Utils.cpArray(click,state.Path.tooltip.click);\n    var keys=[];\n    if (colvalues===undefined) {keys.push(colkey);}\n    if (rowval===undefined) {keys.push(rowkey);}\n    state.Utils.cpArray(keys,state.Path.tooltip.keys);\n    state.Utils.remArray(keys,state.Path.keys.path);\n    //state.Utils.remArray(keys,state.Path.other.table);\n    keys=state.Utils.keepHash(keys,tooltip);\n    //console.log(\"Keys:\",JSON.stringify(keys),JSON.stringify(state.Path.keys.path));\n    var key=data.rowkey+\":\"+data.colkey;\n    return (<div key={key}>\n\t    <Table state={state} keys={keys} click={click} subs={tooltip}/>\n\t    </div>\n\t   );\n};\nfunction ButtonDetails(props) {\n    const {classes,onclick}=props; // state,element,data,\n    return (<div>\n\t    <Button className={classes.button} onClick={onclick}><InfoIcon/></Button>\n\t    </div>\n\t   );\n};\n//\t    <h3>Rowkey: {data.rowkey} Colkey: {data.colkey}</h3>\n//\t    <p>Some details.</p>\nfunction Tooltip(props) {\n    const {state,classes,data,element}=props;\n    var tooltip=state.Matrix.getTooltip(state,data);\n    var available=state.Matrix.checkTooltip(state,data);\n    if (available) {\n\treturn (<TableDetails state={state} classes={classes} data={data} tooltip={tooltip}/>);\n    } else {\n\tvar onclick=() => {state.Matrix.addTooltip(state,data);element.update();}\n\treturn (<ButtonDetails state={state} classes={classes} data={data} onclick={onclick} tooltip={tooltip}/>);\n    }\n};\nclass TooltipContainer extends Component {\n    constructor(props) {\n\tsuper(props);\n\tconst {state} = props;\n\tstate.React.Tooltip=this;\n    };\n    rebuild() {\n\tconsole.log(\"Rebuilding tooltip.\");\n\t//ReactTooltip.rebuild();\n    };\n    update() {\n\tconsole.log(\"Rebuilding tooltip.\");\n\tthis.forceUpdate();\n\tReactTooltip.rebuild();\n    };\n    componentDidUpdate(){\n\tReactTooltip.rebuild()\n    } \n    render() {\n\tconst { classes, state, type } = this.props;\n\tvar overridePosition = ({ left, top },currentEvent, currentTarget, node) => {\n\t    const d = document.documentElement;\n\t    //console.log(\"Top:\",top,node.clientHeight,\" left:\",left,node.clientWidth,\" window:\",d.clientHeight,d.clientWidth);\n\t    left = Math.min(d.clientWidth - node.clientWidth, left);\n\t    top = Math.min(d.clientHeight - node.clientHeight, top);\n\t    left = Math.max(0, left);\n\t    top = Math.max(75, top);\n\t    return { top, left }\n\t};\n\tvar getConstant=(dataTip) =>{\n\t    if (dataTip==null) {\n\t\treturn null;\n\t    } else {\n\t\tconst data=JSON.parse(dataTip);\n\t\t//console.log(\"Tooltip:\",JSON.stringify(dataTip),JSON.stringify(data));\n\t\treturn (<Tooltip state={state} classes={classes} data={data} element={this}/>);\n\t    }\n\t};\n\t//console.log(\"##### Rendering TooltipContainer.\");\n\tif (state.Layout.state.tooltip===2) {\n\t    return null;\n\t} else {\n\t    return (<ReactTooltip id={type}\n\t\t    className={classes.tooltip}\n\t\t    overridePosition={overridePosition}\n\t\t    getContent={getConstant}\n\t\t    effect='solid'\n\t\t    delayHide={500}\n\t\t    delayShow={200}\n\t\t    delayUpdate={500}\n\t\t    place={'bottom'}\n\t\t    border={true}\n\t\t    type={'light'}\n\t\t    />);\n\t}\n    };\n};\nTooltipContainer.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(TooltipContainer);\n"]},"metadata":{},"sourceType":"module"}