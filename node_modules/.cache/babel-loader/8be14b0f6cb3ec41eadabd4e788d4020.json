{"ast":null,"code":"//console.log(\"Loading HtmlLib.js\");\nfunction Html() {\n  this.ceye = \"&#x1f441\";\n\n  this.setLog = function (state, msg) {\n    var documentLog = document.getElementById(\"log\");\n\n    if (msg === undefined) {\n      msg = state.Utils.getStatusString(state);\n    }\n\n    ; //console.log(\"setlog:\",msg,state.Matrix.cnt);\n\n    documentLog.innerHTML = msg;\n  };\n\n  this.getTableStyle = function (bcolor) {\n    return \"padding:5pt;min-width:25px;width:25px;background-color:\" + bcolor + \";\";\n  };\n\n  this.getButtonStyle = function (bcolor, fcolor, border) {\n    //console.log(\"ButtonStyle:\",bcolor,fcolor,border);\n    if (border) {\n      return \"font-size:15px;background-color:\" + bcolor + \";color:\" + fcolor + \";padding:5px 5px;border-radius:10px;cursor:pointer;border-color:black;\";\n    } else {\n      return \"font-size:15px;background-color:\" + bcolor + \";color:\" + fcolor + \";padding:5px 5px;border-radius:10px;;cursor:pointer;border:none;\";\n    }\n  };\n\n  this.progressInfo = function (e) {\n    var info = document.getElementById(\"info\");\n\n    if (e.loaded === e.total) {\n      info.innerHTML = \"\";\n    } else {\n      var percentComplete = e.loaded / e.total * 100;\n      info.innerHTML = percentComplete.toFixed(2) + \"%\";\n    }\n  };\n\n  this.loadInfo = function (e) {\n    var info = document.getElementById(\"info\");\n    info.innerHTML = \"Processing\";\n  };\n\n  this.setInfo = function (msg) {\n    var info = document.getElementById(\"info\");\n    info.innerHTML = msg;\n  };\n\n  this.errorInfo = function (e) {\n    var info = document.getElementById(\"info\");\n    info.innerHTML = \"error\";\n  };\n\n  this.abortInfo = function (e) {\n    var info = document.getElementById(\"info\");\n    info.innerHTML = \"aborted\";\n  };\n\n  this.addPathElement = function (state, item, typ, key, value, onclick, title) {\n    var cnt = state.Path.select.cnt[key]; //console.log(\"Type:\",typ,JSON.stringify(type));\n\n    var ityp = state.Path.type[typ].ityp;\n    var ptyp = state.Path.type[typ].ptyp; //console.log(\"Adding element:\",key,value);\n\n    var txt = document.createElement(\"TEXT\");\n    var patt = {\n      ptyp: ptyp,\n      pkey: key,\n      prel: \"top\"\n    };\n    this.setAttributes(txt, patt);\n    txt.setAttribute(\"draggable\", \"true\");\n    txt.setAttribute(\"ondragstart\", \"Navigate.dragStart(event)\");\n    txt.setAttribute(\"ondragend\", \"Navigate.dragEnd(event)\");\n    txt.setAttribute(\"ondrop\", \"Navigate.drop(event)\");\n    txt.setAttribute(\"ondragover\", \"Navigate.dropCheck(event)\"); //txt.setAttribute(\"position\",\"fixed\"); // tried to make path \"sticky\"...\n\n    if (onclick !== \"\") {\n      txt.setAttribute(\"onclick\", onclick);\n    }\n\n    ;\n\n    if (title !== \"\") {\n      txt.setAttribute(\"title\", title);\n    }\n\n    ;\n    var bcolor = state.Colors.colors.rest;\n    var fcolor = state.Colors.colors.fg;\n    var label = \"\";\n\n    if (value !== undefined && value !== \"\") {\n      // set defaults\n      fcolor = state.Colors.colors.fg;\n    } else {\n      fcolor = state.Colors.colors.val;\n    }\n\n    label = value || key;\n\n    if (ityp === state.Path.type.path.ityp) {\n      // path\n      if (cnt > 1) {\n        bcolor = state.Colors.colors.grp;\n      } else {\n        bcolor = state.Colors.colors.path;\n      }\n\n      ;\n    } else if (ityp === state.Path.type.eye.ityp) {\n      // eye\n      bcolor = state.Colors.colors.eye;\n      fcolor = state.Colors.colors.fg;\n      label = this.ceye;\n    } else if (ityp === state.Path.type.table.ityp) {\n      // table\n      bcolor = state.Colors.colors.table;\n      label = key;\n    } else if (ityp === state.Path.type.rest.ityp) {\n      // rest\n      bcolor = state.Colors.colors.rest;\n      label = key;\n    } else if (ityp === state.Path.type.trash.ityp) {\n      // trash\n      bcolor = state.Colors.colors.trash;\n      label = key;\n    }\n\n    ;\n    txt.innerHTML = label;\n    txt.setAttribute(\"style\", this.getButtonStyle(bcolor, fcolor, false)); //border-radius: 10px;\n\n    txt.readonly = false;\n    item.appendChild(txt);\n  };\n\n  this.removeChildren = function (item) {\n    if (item !== null) {\n      var children = item.childNodes;\n      var clen = children.length;\n\n      for (var ii = clen - 1; ii >= 0; ii--) {\n        if (children[ii] !== undefined) {\n          //console.log(\"Removing :\",ii,len,children[ii]);\n          item.removeChild(children[ii]);\n        }\n      }\n    }\n  };\n\n  this.clearTableChild = function (state, item, id) {\n    //console.log(\"removeTableChildFromTo Entering\",item);\n    var tbody = item.children[0];\n    var children = tbody.children;\n    var clen = children.length;\n    var active = false;\n    var tail;\n    var active = false;\n\n    for (var ii = clen - 1; ii >= 0; ii--) {\n      //console.log(\"RemoveTableChild \",ii,children[ii],len,clen);\n      if (children[ii] !== undefined) {\n        if (children[ii].getAttribute !== undefined) {\n          var att = children[ii].getAttribute(state, \"id\");\n\n          if (att === id) {\n            var grandChildren = children[ii].children;\n            var glen = grandChildren.length;\n\n            for (var jj = glen - 1; jj >= 0; jj--) {\n              children[ii].removeChild(state, grandChildren[jj]);\n            }\n\n            ;\n            return children[ii];\n          }\n        }\n      }\n    }\n\n    ;\n    return;\n  };\n\n  this.appendRotateElement = function (state, row, rowkey, colkey) {\n    var pval = (rowkey || \"\") + \"\\\\\" + (colkey || \"\");\n    row.appendChild(this.makeHeaderElement(state, \"\", // pkey\n    pval, // pval &#8635;\n    \"\", // prel\n    \"rotate\", // ptyp\n    \"\", \"\", \"\"));\n  };\n\n  this.appendEmptyHeader = function (state, row) {\n    row.appendChild(this.makeHeaderElement(state, \"\", \"\", \"\", \"\", \"\", \"\", \"\"));\n  };\n\n  this.appendEmptyData = function (state, row) {\n    row.appendChild(this.makeDataElement(state, [], \"\", \"\", \"\", 0));\n  };\n\n  this.appendHeaderElement = function (state, row, label) {\n    //console.log(\"Adding single element:\",label);\n    var th = document.createElement(\"TH\");\n    th.setAttribute(\"style\", this.getTableStyle(state.Colors.colors.hdr));\n    var txt = document.createElement(\"TEXT\");\n    txt.setAttribute(\"style\", this.getTableStyle(state.Colors.colors.trp));\n    txt.innerHTML = label;\n    th.setAttribute(\"class\", \"full\");\n    txt.setAttribute(\"class\", \"hdr\");\n    th.appendChild(txt);\n    row.appendChild(th);\n  };\n\n  this.makeHeaderElement = function (state, pkey, pval, prel, ptyp, onclick, title, style) {\n    var th = document.createElement(\"TH\");\n    var patt = {\n      ptyp: ptyp,\n      pkey: pkey,\n      pval: pval,\n      prel: prel\n    };\n    this.setAttributes(th, patt);\n    th.setAttribute(\"style\", this.getTableStyle(state.Colors.colors.hdr));\n    th.setAttribute(\"ondrop\", \"Navigate.drop(state,event)\");\n    th.setAttribute(\"ondragover\", \"Navigate.dropCheck(state,event)\");\n    th.setAttribute(\"draggable\", \"true\");\n    th.setAttribute(\"ondragstart\", \"Navigate.dragStart(state,event)\");\n    th.setAttribute(\"ondragend\", \"Navigate.dragEnd(state,event)\");\n\n    if (onclick !== undefined && onclick !== \"\") {\n      th.setAttribute(\"onclick\", onclick);\n      th.style.cursor = \"pointer\";\n    }\n\n    ;\n\n    if (title !== \"\") {\n      th.setAttribute(\"title\", title);\n    }\n\n    var div = document.createElement(\"DIV\");\n    this.setAttributes(div, patt);\n\n    if (style !== undefined && style !== \"\") {\n      //console.log(\"Rotating div...\",style);\n      div.setAttribute(\"class\", \"rotate\");\n    }\n\n    th.appendChild(div);\n    var txt = document.createElement(\"TEXT\");\n    this.setAttributes(txt, patt);\n    div.appendChild(txt);\n    txt.setAttribute(\"style\", this.getTableStyle(state.Colors.colors.trp));\n    txt.innerHTML = pval;\n\n    if (title !== \"\") {\n      txt.setAttribute(\"title\", title);\n    } //th.setAttribute(\"class\",\"full\");\n\n\n    txt.setAttribute(\"class\", \"hdr\"); //th.appendChild(txt);\n\n    return th;\n  };\n\n  this.appendDataElement = function (state, row, label, color, onclick, title) {\n    //console.log(\"Adding single element:\",label,color);\n    var td = document.createElement(\"TD\");\n    var style = \"\";\n\n    if (onclick !== undefined && onclick !== \"\") {\n      td.setAttribute(\"onclick\", onclick);\n      style = \"cursor:pointer;\";\n    }\n\n    if (title !== \"\") {\n      td.setAttribute(\"title\", title);\n    }\n\n    td.setAttribute(\"style\", this.getTableStyle(color) + style);\n    var txt = document.createElement(\"TEXT\");\n    txt.setAttribute(\"style\", this.getTableStyle(state.Colors.colors.trp) + style);\n    txt.innerHTML = label;\n    td.setAttribute(\"class\", \"full\");\n    txt.setAttribute(\"class\", \"hdr\");\n    td.appendChild(txt);\n    row.appendChild(td);\n  };\n\n  this.appendDataLine = function (state, row, label, color, ncols) {\n    //console.log(\"Adding single element:\",label,color);\n    var td = document.createElement(\"TD\");\n    var style = \"\";\n    td.setAttribute(\"style\", this.getTableStyle(color) + style);\n    td.setAttribute(\"colspan\", ncols);\n    var txt = document.createElement(\"TEXT\");\n    txt.setAttribute(\"style\", this.getTableStyle(state.Colors.colors.trp) + style);\n    txt.innerHTML = label;\n    td.setAttribute(\"class\", \"full\");\n    txt.setAttribute(\"class\", \"hdr\");\n    td.appendChild(txt);\n    row.appendChild(td);\n  };\n\n  this.makeDataElement = function (state, elements, onclick, title, step) {\n    var label = \"\";\n    var cnt = 0;\n    var lev = -1;\n    var elen = elements.length;\n\n    for (var ee = 0; ee < elen; ee++) {\n      cnt = cnt + elements[ee].cnt;\n      lev = Math.max(lev, elements[ee].lev);\n    }\n\n    ;\n\n    if (cnt > 1) {\n      label = cnt;\n    }\n\n    ;\n    var bcolor = state.Colors.getLevelColor(state, lev);\n    var td = document.createElement(\"TD\");\n    td.setAttribute(\"align\", \"center\");\n    td.setAttribute(\"ondrop\", \"Navigate.drop(state,event)\");\n    td.setAttribute(\"ondragover\", \"Navigate.dropCheck(state,event)\");\n    td.setAttribute(\"draggable\", \"true\");\n    td.setAttribute(\"ondragstart\", \"Navigate.dragStart(state,event)\");\n    td.setAttribute(\"ondragend\", \"Navigate.dragEnd(state,event)\");\n    td.setAttribute(\"ptyp\", \"item\");\n    td.setAttribute(\"pval\", lev);\n    td.setAttribute(\"class\", \"full\");\n\n    if (title !== \"\") {\n      td.setAttribute(\"title\", title);\n    }\n\n    var txt = document.createElement(\"TEXT\");\n    txt.setAttribute(\"ptyp\", \"item\");\n    var style = \"background-color:\" + bcolor + \";color:\" + state.Colors.colors.fg + \";white-space: nowrap;\";\n\n    if (onclick !== undefined && onclick !== \"\") {\n      td.setAttribute(\"onclick\", onclick);\n      style = style + \"cursor:pointer;\";\n    }\n\n    td.setAttribute(\"style\", style + \"padding:5pt;min-width:25px;width:25px;\");\n    txt.setAttribute(\"style\", style + \"width:100%;height:100%;\");\n    txt.setAttribute(\"class\", \"full\");\n\n    if (label !== undefined && label !== null) {\n      txt.innerHTML = label;\n    } else {\n      txt.innerHTML = \"\";\n    }\n\n    if (title !== \"\") {\n      txt.setAttribute(\"title\", title);\n    }\n\n    td.appendChild(txt);\n    return td;\n  }; // canvas element\n\n\n  this.makeCanvasElement = function (state, elements, key, val, range, onclick, title, step) {\n    var td = document.createElement(\"TD\"); //td.setAttribute(\"style\",\"text-decoration: none;padding-bottom:0pt\");\n\n    td.setAttribute(\"pval\", val[0]);\n    td.setAttribute(\"align\", \"center\");\n    td.setAttribute(\"ptyp\", \"canvas\");\n    td.setAttribute(\"class\", \"canvas\");\n    var cnv = document.createElement(\"CANVAS\");\n    cnv.setAttribute(\"style\", \"width:100%;height:100%;display:block;cursor:pointer;\");\n    var width = cnv.width;\n    var height = cnv.height;\n    var ctx = cnv.getContext(state, \"2d\");\n    var elen = elements.length;\n    var tot = 0;\n\n    for (var ee = 0; ee < elen; ee++) {\n      tot = tot + elements[ee].docs.length;\n    }\n\n    ;\n    var first = true;\n    var cnt = 0;\n    var dw = cnv.width / Math.max(step, tot); //console.log(\"******** Canvas elements:\",elen,tot,dw,width)\n\n    for (var ee = 0; ee < elen; ee++) {\n      var el = elements[ee];\n      var level = el.lev;\n      var color = state.Colors.getLevelColor(state, level);\n      var docs = el.docs;\n      var dlen = docs.length; //console.log(\"Element:\",level,color,tot,cnt);\n\n      if (dlen > 0) {\n        for (var jj = 0; jj < dlen; jj++) {\n          var cnt = cnt + 1;\n          var d = docs[jj];\n          state.Threshold.setGThr(state, d);\n          var lev = state.Threshold.getLevel(state, d);\n          var col = state.Colors.getLevelColor(state, lev); //console.log(\"   Doc:\",key,jj,JSON.stringify(lev),JSON.stringify(d));\n\n          for (var ii = 0; ii < step; ii++) {\n            //console.log(\"   Checking Val:\",key,ii,val[ii],d[key]);\n            //console.log(\"Position:\",ii,jj,dlen,step,key,d[key],val[ii])\n            if (d[key] === val[ii]) {\n              if (first) {\n                first = false; //console.log(\"Doc:\",jj,JSON.stringify(d));\n              }\n\n              ;\n              var t = state.Threshold.getThresholds(d); //console.log(\"Making canvas:\",ii,val[ii],color,JSON.stringify(d),\n              //\t    \" Thr=\",JSON.stringify(t),width,height,JSON.stringify(range));\n              //console.log(\"Canvas:\",ii,jj,d.dtg,color,level,JSON.stringify(t));\n\n              var min = range[0];\n              var max = range[1];\n              var ymin = min;\n\n              if (t.min !== undefined && t.min[state.Threshold.ival] !== undefined) {\n                var ymin = t.min[state.Threshold.ival];\n              }\n\n              var ymax = max;\n\n              if (t.max !== undefined && t.max[state.Threshold.ival] !== undefined) {\n                var ymax = t.max[state.Threshold.ival];\n              }\n\n              var mm = ii;\n\n              if (step < tot) {\n                mm = cnt - 1;\n              } //console.log(\" canvas position:\",mm,ii,cnt,step,tot)\n\n\n              var xmin = mm * dw; // width/10;\n\n              var xmax = (mm + 1) * dw - 2; //width-2*xmin;\n\n              var zmin = state.Show.scale(ymin, min, max, height, 0);\n              var zmax = state.Show.scale(ymax, min, max, height, 0); //console.log(\"Fill:\",xmin,xmax,width,zmin,(zmax-zmin),height,color);\n              //ctx.fillStyle=\"cornflowerblue\";\n\n              color = col;\n\n              if (color !== undefined) {\n                ctx.fillStyle = color;\n              }\n\n              ctx.fillRect(xmin, zmin, xmax - xmin, zmax - zmin); //ctx.beginPath();\n              //ctx.lineWidth=2;\n              //if (color !== undefined) {ctx.strokeStyle=color;}\n              //ctx.strokeStyle=\"black\";\n              //ctx.moveTo(xmin,zmax);\n              //ctx.lineTo(xmax,zmax);\n              //ctx.stroke();\n              // draw thresholds\n\n              for (var msr in t) {\n                var tt = t[msr];\n                var tmax = tt[state.Threshold.imax];\n                var tthr = tt[state.Threshold.ithr];\n                var tkey = tt[state.Threshold.ikey];\n                var tlev = tt[state.Threshold.ilev];\n                var tval = tt[state.Threshold.ival];\n\n                if (tmax) {\n                  var ts = state.Threshold.thrs[tthr][tkey].max;\n                } else {\n                  var ts = state.Threshold.thrs[tthr][tkey].min;\n                }\n\n                ;\n                var tlen = ts.length;\n\n                for (var ll = 0; ll < tlen; ll++) {\n                  var tyval = ts[ll];\n                  var tzval = state.Show.scale(tyval, min, max, height, 0);\n                  var scolor = state.Colors.getLevelColor(state, ll);\n                  ctx.beginPath();\n                  ctx.lineWidth = 5;\n\n                  if (scolor !== undefined) {\n                    ctx.strokeStyle = scolor;\n                  }\n\n                  ctx.moveTo(xmin, tzval);\n                  ctx.lineTo(xmax, tzval);\n                  ctx.stroke(); //console.log(\"Stroke color:\",color,ll,tzval,width);\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    ;\n\n    if (tot === 0) {\n      console.log(\"No draw:\", JSON.stringify(val), JSON.stringify(docs), dlen);\n    }\n\n    if (title !== \"\") {\n      td.setAttribute(\"title\", title);\n    }\n\n    if (onclick !== undefined && onclick !== \"\") {\n      td.setAttribute(\"onclick\", onclick);\n    }\n\n    td.appendChild(cnv);\n    return td;\n  };\n\n  this.makeCanvasItem = function (state, el, range) {\n    var td = document.createElement(\"TD\"); //td.setAttribute(\"style\",\"text-decoration: none;padding-bottom:0pt\");\n\n    td.setAttribute(\"pval\", \"\");\n    td.setAttribute(\"align\", \"center\");\n    td.setAttribute(\"ptyp\", \"canvas\");\n    td.setAttribute(\"class\", \"canvas\");\n    var cnv = document.createElement(\"CANVAS\");\n    cnv.setAttribute(\"style\", \"width:100%;height:100%;display:block;cursor:pointer;\");\n    var width = cnv.width;\n    var height = cnv.height;\n    var ctx = cnv.getContext(state, \"2d\");\n    var level = el.lev;\n    var color = state.Colors.getLevelColor(state, level);\n    var docs = el.docs;\n    var dlen = docs.length;\n    var dw = cnv.width / Math.max(1, dlen);\n\n    if (dlen > 0) {\n      for (var jj = 0; jj < dlen; jj++) {\n        var cnt = cnt + 1;\n        var d = docs[jj];\n        state.Threshold.setGThr(state, d);\n        var lev = state.Threshold.getLevel(state, d);\n        var col = state.Colors.getLevelColor(state, lev); //console.log(\"   Doc:\",key,jj,JSON.stringify(d));\n\n        var t = state.Threshold.getThresholds(d); //console.log(\"Making canvas:\",ii,val[ii],color,JSON.stringify(d),\n        //\t    \" Thr=\",JSON.stringify(t),width,height,JSON.stringify(range));\n        //console.log(\"Canvas:\",ii,jj,d.dtg,color,level);\n\n        var min = range[0];\n        var max = range[1];\n        var ymin = min;\n\n        if (t.min !== undefined && t.min[state.Threshold.ival] !== undefined) {\n          var ymin = t.min[state.Threshold.ival];\n        }\n\n        var ymax = max;\n\n        if (t.max !== undefined && t.max[state.Threshold.ival] !== undefined) {\n          var ymax = t.max[state.Threshold.ival];\n        }\n\n        var mm = jj; //console.log(\" canvas position:\",mm,ii,cnt,step,tot)\n\n        var xmin = mm * dw; // width/10;\n\n        var xmax = (mm + 1) * dw - 2; //width-2*xmin;\n\n        var zmin = state.Show.scale(ymin, min, max, height, 0);\n        var zmax = state.Show.scale(ymax, min, max, height, 0); //console.log(\"Fill:\",xmin,xmax,width,zmin,(zmax-zmin),height,color);\n        //ctx.fillStyle=\"cornflowerblue\";\n\n        color = col;\n\n        if (color !== undefined) {\n          ctx.fillStyle = color;\n        }\n\n        ctx.fillRect(xmin, zmin, xmax - xmin, zmax - zmin); // draw thresholds\n\n        for (var msr in t) {\n          var tt = t[msr];\n          var tmax = tt[state.Threshold.imax];\n          var tthr = tt[state.Threshold.ithr];\n          var tkey = tt[state.Threshold.ikey];\n          var tlev = tt[state.Threshold.ilev];\n          var tval = tt[state.Threshold.ival];\n\n          if (tmax) {\n            var ts = state.Threshold.thrs[tthr][tkey].max;\n          } else {\n            var ts = state.Threshold.thrs[tthr][tkey].min;\n          }\n\n          ;\n          var tlen = ts.length;\n\n          for (var ll = 0; ll < tlen; ll++) {\n            var tyval = ts[ll];\n            var tzval = state.Show.scale(tyval, min, max, height, 0);\n            var scolor = state.Colors.getLevelColor(state, ll);\n            ctx.beginPath();\n            ctx.lineWidth = 5;\n\n            if (scolor !== undefined) {\n              ctx.strokeStyle = scolor;\n            }\n\n            ctx.moveTo(xmin, tzval);\n            ctx.lineTo(xmax, tzval);\n            ctx.stroke(); //console.log(\"Stroke color:\",color,ll,tzval,width);\n          }\n        }\n      }\n    }\n\n    ;\n    td.appendChild(cnv);\n    return td;\n  };\n\n  this.rotateHeight = function (state) {\n    var gwidth;\n    var gdd;\n    var rotates = document.getElementsByClassName('rotate'); //console.log(\"Rotating heights.\",rotates.length);\n\n    for (var i = 0; i < rotates.length; i++) {\n      var lheight = parseInt(state, rotates[i].offsetWidth, 10);\n      var lwidth = parseInt(state, rotates[i].offsetHeight, 10);\n\n      if (gwidth === undefined) {\n        gwidth = lwidth;\n      }\n\n      ;\n      var oheight = lheight / 2;\n      var owidth = lwidth / 2;\n      var dd = oheight - owidth;\n\n      if (gdd === undefined) {\n        gdd = dd;\n      } else if (gdd < dd) {\n        gdd = dd;\n      }\n    }\n\n    for (var i = 0; i < rotates.length; i++) {\n      var cwidth = parseInt(state, window.getComputedStyle(rotates[i]).fontSize, 10);\n      var lheight = parseInt(state, rotates[i].offsetWidth, 10);\n      var lwidth = parseInt(state, rotates[i].offsetHeight, 10);\n      var oheight = lheight / 2;\n      var owidth = lwidth / 2;\n      var dd = oheight - owidth;\n      var style = \"width:\" + lwidth + \"px;height:\" + lheight + \"px;transform:translate(state,\" + dd + \"px,\" + gdd + \"px) rotate(state,-90.0deg);\"; //console.log(\"Rotates:\",i,style,lwidth,lheight,gwidth,cwidth,oheight,owidth);// 19px 129px\n\n      rotates[i].setAttribute(\"style\", style);\n    }\n\n    var canvas = document.getElementsByClassName('canvas');\n\n    for (var i = 0; i < canvas.length; i++) {\n      var cheight = parseInt(state, window.getComputedStyle(canvas[i]).fontSize, 10);\n      var style = \"width:\" + gwidth + \"px;height:\" + cheight * 1.5 + \"px\"; //console.log(\"Canvas:\",i,style,gwidth);// 19px 129px\n\n      canvas[i].style.width = gwidth + \"px\";\n      canvas[i].style.height = cheight * 3 + \"px\";\n    }\n  };\n\n  this.setAttributes = function (item, hash) {\n    for (var name in hash) {\n      var val = hash[name];\n      item.setAttribute(name, val);\n    }\n  };\n}\n\n;\nexport default Html;","map":{"version":3,"sources":["/home/franktt/react/varseltavle/src/system/HtmlLib.js"],"names":["Html","ceye","setLog","state","msg","documentLog","document","getElementById","undefined","Utils","getStatusString","innerHTML","getTableStyle","bcolor","getButtonStyle","fcolor","border","progressInfo","e","info","loaded","total","percentComplete","toFixed","loadInfo","setInfo","errorInfo","abortInfo","addPathElement","item","typ","key","value","onclick","title","cnt","Path","select","ityp","type","ptyp","txt","createElement","patt","pkey","prel","setAttributes","setAttribute","Colors","colors","rest","fg","label","val","path","grp","eye","table","trash","readonly","appendChild","removeChildren","children","childNodes","clen","length","ii","removeChild","clearTableChild","id","tbody","active","tail","getAttribute","att","grandChildren","glen","jj","appendRotateElement","row","rowkey","colkey","pval","makeHeaderElement","appendEmptyHeader","appendEmptyData","makeDataElement","appendHeaderElement","th","hdr","trp","style","cursor","div","appendDataElement","color","td","appendDataLine","ncols","elements","step","lev","elen","ee","Math","max","getLevelColor","makeCanvasElement","range","cnv","width","height","ctx","getContext","tot","docs","first","dw","el","level","dlen","d","Threshold","setGThr","getLevel","col","t","getThresholds","min","ymin","ival","ymax","mm","xmin","xmax","zmin","Show","scale","zmax","fillStyle","fillRect","msr","tt","tmax","imax","tthr","ithr","tkey","ikey","tlev","ilev","tval","ts","thrs","tlen","ll","tyval","tzval","scolor","beginPath","lineWidth","strokeStyle","moveTo","lineTo","stroke","console","log","JSON","stringify","makeCanvasItem","rotateHeight","gwidth","gdd","rotates","getElementsByClassName","i","lheight","parseInt","offsetWidth","lwidth","offsetHeight","oheight","owidth","dd","cwidth","window","getComputedStyle","fontSize","canvas","cheight","hash","name"],"mappings":"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","sourcesContent":["//console.log(\"Loading HtmlLib.js\");\n\nfunction Html() {\n    this.ceye=\"&#x1f441\";\n    this.setLog=function(state,msg) {\n\tvar documentLog = document.getElementById(\"log\");\n\tif (msg  === undefined) {msg=state.Utils.getStatusString(state);};\n\t//console.log(\"setlog:\",msg,state.Matrix.cnt);\n\tdocumentLog.innerHTML=msg;\n    };\n    this.getTableStyle=function(bcolor) {\n\treturn \"padding:5pt;min-width:25px;width:25px;background-color:\"+bcolor+\";\";\n    };\n    this.getButtonStyle=function(bcolor,fcolor,border) {\n\t//console.log(\"ButtonStyle:\",bcolor,fcolor,border);\n\tif (border) {\n\t    return \"font-size:15px;background-color:\"+bcolor+\";color:\"+fcolor+\n\t\t\";padding:5px 5px;border-radius:10px;cursor:pointer;border-color:black;\"\n\t} else {\n\t    return \"font-size:15px;background-color:\"+bcolor+\";color:\"+fcolor+\n\t\t\";padding:5px 5px;border-radius:10px;;cursor:pointer;border:none;\"\n\t}\n    };\n    this.progressInfo=function(e) {\n\tvar info = document.getElementById(\"info\");\n\tif (e.loaded  === e.total) {\n\t    info.innerHTML=\"\";\n\t} else {\n\t    var percentComplete = e.loaded / e.total * 100;\n\t    info.innerHTML=percentComplete.toFixed(2)+\"%\";\n\t}\n    };\n    this.loadInfo=function(e) {\n\tvar info = document.getElementById(\"info\");\n\tinfo.innerHTML=\"Processing\";\n    };\n    this.setInfo=function(msg) {\n\tvar info = document.getElementById(\"info\");\n\tinfo.innerHTML=msg;\n    };\n    this.errorInfo=function(e) {\n\tvar info = document.getElementById(\"info\");\n\tinfo.innerHTML=\"error\";\n    };\n    this.abortInfo=function(e) {\n\tvar info = document.getElementById(\"info\");\n\tinfo.innerHTML=\"aborted\";\n    };\n    this.addPathElement=function(state,item,typ,key,value,onclick,title) {\n\tvar cnt=state.Path.select.cnt[key];\n\t//console.log(\"Type:\",typ,JSON.stringify(type));\n\tvar ityp=state.Path.type[typ].ityp;\n\tvar ptyp=state.Path.type[typ].ptyp;\n\t//console.log(\"Adding element:\",key,value);\n\tvar txt=document.createElement(\"TEXT\");\n\tvar patt={ptyp:ptyp,pkey:key,prel:\"top\"};\n\tthis.setAttributes(txt,patt);\n\ttxt.setAttribute(\"draggable\",\"true\");\n\ttxt.setAttribute(\"ondragstart\",\"Navigate.dragStart(event)\");\n\ttxt.setAttribute(\"ondragend\",\"Navigate.dragEnd(event)\");\n\ttxt.setAttribute(\"ondrop\",\"Navigate.drop(event)\");\n\ttxt.setAttribute(\"ondragover\",\"Navigate.dropCheck(event)\");\n\t//txt.setAttribute(\"position\",\"fixed\"); // tried to make path \"sticky\"...\n\tif (onclick !== \"\") {\n\t    txt.setAttribute(\"onclick\",onclick);\n\t};\n\tif (title !== \"\") {\n\t    txt.setAttribute(\"title\",title);\n\t};\n\tvar bcolor=state.Colors.colors.rest;\n\tvar fcolor=state.Colors.colors.fg\n\tvar label=\"\";\n\tif (value !== undefined && value !== \"\") { // set defaults\n\t    fcolor=state.Colors.colors.fg;\n\t} else {\n\t    fcolor=state.Colors.colors.val;\n\t}\n\tlabel=value||key;\n\tif (ityp  === state.Path.type.path.ityp) { // path\n\t    if (cnt > 1) {\n\t\tbcolor=state.Colors.colors.grp;\n\t    } else {\n\t\tbcolor=state.Colors.colors.path;\n\t    };\n\t} else if (ityp  === state.Path.type.eye.ityp) { // eye\n\t    bcolor=state.Colors.colors.eye;\n\t    fcolor=state.Colors.colors.fg;\n\t    label=this.ceye;\n\t} else if (ityp  === state.Path.type.table.ityp) { // table\n\t    bcolor=state.Colors.colors.table;\n\t    label=key;\n\t} else if (ityp  === state.Path.type.rest.ityp) { // rest\n\t    bcolor=state.Colors.colors.rest;\n\t    label=key;\n\t} else if (ityp  === state.Path.type.trash.ityp) { // trash\n\t    bcolor=state.Colors.colors.trash;\n\t    label=key;\n\t};\n\ttxt.innerHTML=label;\n\ttxt.setAttribute(\"style\",this.getButtonStyle(bcolor,fcolor,false) );\n\t//border-radius: 10px;\n\ttxt.readonly=false;\n\titem.appendChild(txt);\n    };\n    this.removeChildren=function(item) {\n\tif (item !== null) {\n\t    var children=item.childNodes;\n\t    var clen=children.length;\n\t    for (var ii=clen-1;ii>=0;ii--){\n\t\tif (children[ii] !== undefined) {\n\t\t    //console.log(\"Removing :\",ii,len,children[ii]);\n\t\t    item.removeChild(children[ii]);\n\t\t}\n\t    }\n\t}\n    };\n    this.clearTableChild=function(state,item,id) {\n\t//console.log(\"removeTableChildFromTo Entering\",item);\n\tvar tbody=item.children[0];\n\tvar children=tbody.children;\n\tvar clen=children.length;\n\tvar active=false;\n\tvar tail;\n\tvar active=false;\n\tfor (var ii=clen-1;ii>=0;ii--){\n\t    //console.log(\"RemoveTableChild \",ii,children[ii],len,clen);\n\t    if (children[ii] !== undefined) {\n\t\tif (children[ii].getAttribute !== undefined) {\n\t\t    var att=children[ii].getAttribute(state,\"id\");\n\t\t    if (att  === id) {\n\t\t\tvar grandChildren=children[ii].children;\n\t\t\tvar glen=grandChildren.length;\n\t\t\tfor (var jj=glen-1;jj>=0;jj--){\n\t\t\t    children[ii].removeChild(state,grandChildren[jj]);\n\t\t\t};\n\t\t\treturn children[ii];\n\t\t    } \n\t\t}\n\t    }\n\t};\n\treturn;\n    };\n    this.appendRotateElement=function(state,row,rowkey,colkey) {\n\tvar pval = (rowkey||\"\") + \"\\\\\" + (colkey||\"\");\n\trow.appendChild(\n\t    this.makeHeaderElement(state,\n\t\t\"\",        // pkey\n\t\tpval,      // pval &#8635;\n\t\t\"\",        // prel\n\t\t\"rotate\",  // ptyp\n\t\t\"\",\n\t\t\"\",\n\t\t\"\"\n\t    ));\n    };\n    this.appendEmptyHeader=function(state,row) {\n\trow.appendChild(\n\t    this.makeHeaderElement(state,\"\",\"\",\"\",\"\",\"\",\"\",\"\")\n\t);\n    };\n    this.appendEmptyData=function(state,row) {\n\trow.appendChild(\n\t    this.makeDataElement(state,[],\"\",\"\",\"\",0)\n\t);\n    };\n    this.appendHeaderElement=function(state,row,label) {\n\t//console.log(\"Adding single element:\",label);\n\tvar th=document.createElement(\"TH\");\n\tth.setAttribute(\"style\",this.getTableStyle(state.Colors.colors.hdr));\n\tvar txt=document.createElement(\"TEXT\");\n\ttxt.setAttribute(\"style\",this.getTableStyle(state.Colors.colors.trp));\n\ttxt.innerHTML=label;\n\tth.setAttribute(\"class\",\"full\");\n\ttxt.setAttribute(\"class\",\"hdr\");\n\tth.appendChild(txt);\n\trow.appendChild(th);\n    };\n    this.makeHeaderElement=function(state,pkey,pval,prel,ptyp,onclick,title,style) {\n\tvar th=document.createElement(\"TH\");\n\tvar patt={ptyp:ptyp,pkey:pkey,pval:pval,prel:prel};\n\tthis.setAttributes(th,patt);\n\tth.setAttribute(\"style\",this.getTableStyle(state.Colors.colors.hdr));\n\tth.setAttribute(\"ondrop\",\"Navigate.drop(state,event)\");\n\tth.setAttribute(\"ondragover\",\"Navigate.dropCheck(state,event)\");\n\tth.setAttribute(\"draggable\",\"true\");\n\tth.setAttribute(\"ondragstart\",\"Navigate.dragStart(state,event)\");\n\tth.setAttribute(\"ondragend\",\"Navigate.dragEnd(state,event)\");\n\tif (onclick !== undefined && onclick !== \"\") {\n\t    th.setAttribute(\"onclick\",onclick);\n\t    th.style.cursor=\"pointer\";\n\t};\n\tif (title !== \"\") {\n\t    th.setAttribute(\"title\",title);\n\t}\n\tvar div=document.createElement(\"DIV\");\n\tthis.setAttributes(div,patt);\n\tif (style !== undefined && style !== \"\") {\n\t    //console.log(\"Rotating div...\",style);\n\t    div.setAttribute(\"class\",\"rotate\");\n\t}\n\tth.appendChild(div);\n\tvar txt=document.createElement(\"TEXT\");\n\tthis.setAttributes(txt,patt);\n\tdiv.appendChild(txt);\n\ttxt.setAttribute(\"style\",this.getTableStyle(state.Colors.colors.trp));\n\ttxt.innerHTML=pval;\n\tif (title !== \"\") {\n    \t    txt.setAttribute(\"title\",title);\n\t}\n\t//th.setAttribute(\"class\",\"full\");\n\ttxt.setAttribute(\"class\",\"hdr\");\n\t//th.appendChild(txt);\n\treturn th;\n    };\n\n\n    this.appendDataElement=function(state,row,label,color,onclick,title) {\n\t//console.log(\"Adding single element:\",label,color);\n\tvar td=document.createElement(\"TD\");\n\tvar style= \"\";\n\tif (onclick !== undefined && onclick !== \"\") {\n\t    td.setAttribute(\"onclick\",onclick);\n\t    style=\"cursor:pointer;\";\n\t}\n\tif (title !== \"\") {\n\t    td.setAttribute(\"title\",title);\n\t}\n\ttd.setAttribute(\"style\", this.getTableStyle(color)+style);\n\tvar txt=document.createElement(\"TEXT\");\n\ttxt.setAttribute(\"style\",this.getTableStyle(state.Colors.colors.trp)+style);\n\ttxt.innerHTML=label;\n\ttd.setAttribute(\"class\",\"full\");\n\ttxt.setAttribute(\"class\",\"hdr\");\n\ttd.appendChild(txt);\n\trow.appendChild(td);\n    };\n    this.appendDataLine=function(state,row,label,color,ncols) {\n\t//console.log(\"Adding single element:\",label,color);\n\tvar td=document.createElement(\"TD\");\n\tvar style= \"\";\n\ttd.setAttribute(\"style\", this.getTableStyle(color)+style);\n\ttd.setAttribute(\"colspan\", ncols);\n\tvar txt=document.createElement(\"TEXT\");\n\ttxt.setAttribute(\"style\",this.getTableStyle(state.Colors.colors.trp)+style);\n\ttxt.innerHTML=label;\n\ttd.setAttribute(\"class\",\"full\");\n\ttxt.setAttribute(\"class\",\"hdr\");\n\ttd.appendChild(txt);\n\trow.appendChild(td);\n    };\n    this.makeDataElement=function(state,elements,onclick,title,step) {\n\tvar label=\"\";\n\tvar cnt=0;\n\tvar lev=-1;\n\tvar elen=elements.length;\n\tfor (var ee=0;ee<elen;ee++) {\n\t    cnt=cnt+elements[ee].cnt;\n\t    lev=Math.max(lev,elements[ee].lev);\n\t}; \n\tif (cnt > 1) {label=cnt;};\n\tvar bcolor=state.Colors.getLevelColor(state,lev);\n\tvar td=document.createElement(\"TD\");\n\ttd.setAttribute(\"align\",\"center\");\n\ttd.setAttribute(\"ondrop\",\"Navigate.drop(state,event)\");\n\ttd.setAttribute(\"ondragover\",\"Navigate.dropCheck(state,event)\");\n\ttd.setAttribute(\"draggable\",\"true\");\n\ttd.setAttribute(\"ondragstart\",\"Navigate.dragStart(state,event)\");\n\ttd.setAttribute(\"ondragend\",\"Navigate.dragEnd(state,event)\");\n\ttd.setAttribute(\"ptyp\",\"item\");\n\ttd.setAttribute(\"pval\",lev);\n\ttd.setAttribute(\"class\",\"full\");\n\tif (title !== \"\") {\n\t    td.setAttribute(\"title\",title);\n\t}\n\tvar txt=document.createElement(\"TEXT\");\n\ttxt.setAttribute(\"ptyp\",\"item\");\n\tvar style=\"background-color:\"+bcolor+\";color:\"+state.Colors.colors.fg+\";white-space: nowrap;\";\n\tif (onclick !== undefined && onclick !== \"\") {\n\t    td.setAttribute(\"onclick\",onclick);\n\t    style=style+\"cursor:pointer;\";\n\t}\n\ttd.setAttribute(\"style\",style+\"padding:5pt;min-width:25px;width:25px;\");\n\ttxt.setAttribute(\"style\",style+\"width:100%;height:100%;\");\n\ttxt.setAttribute(\"class\",\"full\");\n\tif (label !== undefined && label !== null) {\n\t    txt.innerHTML=label;\n\t} else {\n\t    txt.innerHTML=\"\";\n\t}\n\tif (title !== \"\") {\n\t    txt.setAttribute(\"title\",title);\n\t}\n\ttd.appendChild(txt);\n\treturn td;\n    }\n\n    // canvas element\n\n    this.makeCanvasElement=function(state,elements,key,val,range,onclick,title,step) { \n\tvar td=document.createElement(\"TD\");\n\t//td.setAttribute(\"style\",\"text-decoration: none;padding-bottom:0pt\");\n\ttd.setAttribute(\"pval\",val[0]);\n\ttd.setAttribute(\"align\",\"center\");\n\ttd.setAttribute(\"ptyp\",\"canvas\");\n\ttd.setAttribute(\"class\",\"canvas\");\n\tvar cnv=document.createElement(\"CANVAS\");\n\tcnv.setAttribute(\"style\",\"width:100%;height:100%;display:block;cursor:pointer;\");\n\tvar width = cnv.width;\n\tvar height = cnv.height;\n\tvar ctx = cnv.getContext(state,\"2d\");\n\tvar elen=elements.length;\n\tvar tot=0; for (var ee=0;ee<elen;ee++) {tot=tot+elements[ee].docs.length;};\n\tvar first=true;\n\tvar cnt=0;\n\tvar dw= cnv.width/Math.max(step,tot)\n\t//console.log(\"******** Canvas elements:\",elen,tot,dw,width)\n\tfor (var ee=0;ee<elen;ee++) {\n\t    var el=elements[ee];\n\t    var level=el.lev;\n\t    var color=state.Colors.getLevelColor(state,level);\n\t    var docs=el.docs;\n\t    var dlen=docs.length;\n\t    //console.log(\"Element:\",level,color,tot,cnt);\n\t    if (dlen>0) {\n\t\tfor (var jj=0;jj<dlen;jj++) {\n\t\t    var cnt=cnt+1;\n\t\t    var d=docs[jj];\n\t\t    state.Threshold.setGThr(state,d);\n\t\t    var lev=state.Threshold.getLevel(state,d);\n\t\t    var col=state.Colors.getLevelColor(state,lev);\n\t\t    //console.log(\"   Doc:\",key,jj,JSON.stringify(lev),JSON.stringify(d));\n\t\t    for (var ii=0;ii<step;ii++) {\n\t\t\t//console.log(\"   Checking Val:\",key,ii,val[ii],d[key]);\n\t\t\t//console.log(\"Position:\",ii,jj,dlen,step,key,d[key],val[ii])\n\t\t\tif (d[key]  === val[ii]) {\n\t\t\t    if (first) {\n\t\t\t\tfirst=false;\n\t\t\t\t//console.log(\"Doc:\",jj,JSON.stringify(d));\n\t\t\t    };\n\t\t\t    var t=state.Threshold.getThresholds(d);\n\t\t\t    //console.log(\"Making canvas:\",ii,val[ii],color,JSON.stringify(d),\n\t\t\t    //\t    \" Thr=\",JSON.stringify(t),width,height,JSON.stringify(range));\n\t\t\t    //console.log(\"Canvas:\",ii,jj,d.dtg,color,level,JSON.stringify(t));\n\t\t\t    var min=range[0]\n\t\t\t    var max=range[1];\n\t\t\t    var ymin=min;\n\t\t\t    if (t.min !== undefined && t.min[state.Threshold.ival] !== undefined) {\n\t\t\t\tvar ymin=t.min[state.Threshold.ival];\n\t\t\t    }\n\t\t\t    var ymax=max;\n\t\t\t    if (t.max !== undefined && t.max[state.Threshold.ival] !== undefined) {\n\t\t\t\tvar ymax=t.max[state.Threshold.ival];\n\t\t\t    }\n\t\t\t    var mm=ii\n\t\t\t    if (step<tot) {mm=cnt-1;}\n\t\t\t    //console.log(\" canvas position:\",mm,ii,cnt,step,tot)\n\t\t\t    var xmin=mm*dw;       // width/10;\n\t\t\t    var xmax=(mm+1)*dw-2;   //width-2*xmin;\n\t\t\t    var zmin=state.Show.scale(ymin,min,max,height,0);\n\t\t\t    var zmax=state.Show.scale(ymax,min,max,height,0);\n\t\t\t    //console.log(\"Fill:\",xmin,xmax,width,zmin,(zmax-zmin),height,color);\n\t\t\t    //ctx.fillStyle=\"cornflowerblue\";\n\t\t\t    color=col;\n\t\t\t    if (color !== undefined) {ctx.fillStyle=color;}\n\t\t\t    ctx.fillRect(xmin,zmin,xmax-xmin,(zmax-zmin));\n\t\t\t    //ctx.beginPath();\n\t\t\t    //ctx.lineWidth=2;\n\t\t\t    //if (color !== undefined) {ctx.strokeStyle=color;}\n\t\t\t    //ctx.strokeStyle=\"black\";\n\t\t\t    //ctx.moveTo(xmin,zmax);\n\t\t\t    //ctx.lineTo(xmax,zmax);\n\t\t\t    //ctx.stroke();\n\t\t\t    // draw thresholds\n\t\t\t    for (var msr in t) {\n\t\t\t\tvar tt    = t[msr];\n\t\t\t\tvar tmax  = tt[state.Threshold.imax];\n\t\t\t\tvar tthr  = tt[state.Threshold.ithr];\n\t\t\t\tvar tkey  = tt[state.Threshold.ikey];\n\t\t\t\tvar tlev  = tt[state.Threshold.ilev];\n\t\t\t\tvar tval  = tt[state.Threshold.ival];\n\t\t\t\tif (tmax) {\n\t\t\t\t    var ts=state.Threshold.thrs[tthr][tkey].max;\n\t\t\t\t} else {\n\t\t\t\t    var ts=state.Threshold.thrs[tthr][tkey].min;\n\t\t\t\t};\n\t\t\t\tvar tlen=ts.length;\n\t\t\t\tfor (var ll=0;ll<tlen;ll++) {\n\t\t\t\t    var tyval=ts[ll];\n\t\t\t\t    var tzval=state.Show.scale(tyval,min,max,height,0);\n\t\t\t\t    var scolor=state.Colors.getLevelColor(state,ll);\n\t\t\t\t    ctx.beginPath();\n\t\t\t\t    ctx.lineWidth=5;\n\t\t\t\t    if (scolor !== undefined) {ctx.strokeStyle=scolor;}\n\t\t\t\t    ctx.moveTo(xmin,tzval);\n\t\t\t\t    ctx.lineTo(xmax,tzval);\n\t\t\t\t    ctx.stroke();\n\t\t\t\t    //console.log(\"Stroke color:\",color,ll,tzval,width);\n\t\t\t\t}\n\t\t\t    }\n\t\t\t}\n\t\t    }\n\t\t}\n\t    }\n\t};\n\tif (tot  === 0) {\n\t    console.log(\"No draw:\",JSON.stringify(val),JSON.stringify(docs),dlen);\n\t}\n\tif (title !== \"\") {\n\t    td.setAttribute(\"title\",title);\n\t}\n\tif (onclick !== undefined && onclick !== \"\") {\n\t    td.setAttribute(\"onclick\",onclick);\n\t}\n\ttd.appendChild(cnv);\n\treturn td;\n    };\n    this.makeCanvasItem=function(state,el,range) { \n\tvar td=document.createElement(\"TD\");\n\t//td.setAttribute(\"style\",\"text-decoration: none;padding-bottom:0pt\");\n\ttd.setAttribute(\"pval\",\"\");\n\ttd.setAttribute(\"align\",\"center\");\n\ttd.setAttribute(\"ptyp\",\"canvas\");\n\ttd.setAttribute(\"class\",\"canvas\");\n\tvar cnv=document.createElement(\"CANVAS\");\n\tcnv.setAttribute(\"style\",\"width:100%;height:100%;display:block;cursor:pointer;\");\n\tvar width = cnv.width;\n\tvar height = cnv.height;\n\tvar ctx = cnv.getContext(state,\"2d\");\n\tvar level=el.lev;\n\tvar color=state.Colors.getLevelColor(state,level);\n\tvar docs=el.docs;\n\tvar dlen=docs.length;\n\tvar dw= cnv.width/Math.max(1,dlen)\n\tif (dlen>0) {\n\t    for (var jj=0;jj<dlen;jj++) {\n\t\tvar cnt=cnt+1;\n\t\tvar d=docs[jj];\n\t\tstate.Threshold.setGThr(state,d);\n\t\tvar lev=state.Threshold.getLevel(state,d);\n\t\tvar col=state.Colors.getLevelColor(state,lev);\n\t\t//console.log(\"   Doc:\",key,jj,JSON.stringify(d));\n\t\tvar t=state.Threshold.getThresholds(d);\n\t\t//console.log(\"Making canvas:\",ii,val[ii],color,JSON.stringify(d),\n\t\t//\t    \" Thr=\",JSON.stringify(t),width,height,JSON.stringify(range));\n\t\t//console.log(\"Canvas:\",ii,jj,d.dtg,color,level);\n\t\tvar min=range[0]\n\t\tvar max=range[1];\n\t\tvar ymin=min;\n\t\tif (t.min !== undefined && t.min[state.Threshold.ival] !== undefined) {\n\t\t    var ymin=t.min[state.Threshold.ival];\n\t\t}\n\t\tvar ymax=max;\n\t\tif (t.max !== undefined && t.max[state.Threshold.ival] !== undefined) {\n\t\t    var ymax=t.max[state.Threshold.ival];\n\t\t}\n\t\tvar mm=jj\n\t\t//console.log(\" canvas position:\",mm,ii,cnt,step,tot)\n\t\tvar xmin=mm*dw;       // width/10;\n\t\tvar xmax=(mm+1)*dw-2;   //width-2*xmin;\n\t\tvar zmin=state.Show.scale(ymin,min,max,height,0);\n\t\tvar zmax=state.Show.scale(ymax,min,max,height,0);\n\t\t//console.log(\"Fill:\",xmin,xmax,width,zmin,(zmax-zmin),height,color);\n\t\t//ctx.fillStyle=\"cornflowerblue\";\n\t\tcolor=col;\n\t\tif (color !== undefined) {ctx.fillStyle=color;}\n\t\tctx.fillRect(xmin,zmin,xmax-xmin,(zmax-zmin));\n\t\t// draw thresholds\n\t\tfor (var msr in t) {\n\t\t    var tt    = t[msr];\n\t\t    var tmax  = tt[state.Threshold.imax];\n\t\t    var tthr  = tt[state.Threshold.ithr];\n\t\t    var tkey  = tt[state.Threshold.ikey];\n\t\t    var tlev  = tt[state.Threshold.ilev];\n\t\t    var tval  = tt[state.Threshold.ival];\n\t\t    if (tmax) {\n\t\t\tvar ts=state.Threshold.thrs[tthr][tkey].max;\n\t\t    } else {\n\t\t\tvar ts=state.Threshold.thrs[tthr][tkey].min;\n\t\t    };\n\t\t    var tlen=ts.length;\n\t\t    for (var ll=0;ll<tlen;ll++) {\n\t\t\tvar tyval=ts[ll];\n\t\t\tvar tzval=state.Show.scale(tyval,min,max,height,0);\n\t\t\tvar scolor=state.Colors.getLevelColor(state,ll);\n\t\t\tctx.beginPath();\n\t\t\tctx.lineWidth=5;\n\t\t\tif (scolor !== undefined) {ctx.strokeStyle=scolor;}\n\t\t\tctx.moveTo(xmin,tzval);\n\t\t\tctx.lineTo(xmax,tzval);\n\t\t\tctx.stroke();\n\t\t\t//console.log(\"Stroke color:\",color,ll,tzval,width);\n\t\t    }\n\t\t}\n\t    }\n\t};\n\ttd.appendChild(cnv);\n\treturn td;\n    };\n    this.rotateHeight=function(state) {\n\tvar gwidth;\n\tvar gdd;\n\tvar rotates = document.getElementsByClassName('rotate');\n\t//console.log(\"Rotating heights.\",rotates.length);\n\tfor (var i = 0; i < rotates.length; i++) {\n\t    var lheight=parseInt(state,rotates[i].offsetWidth,10);\n\t    var lwidth=parseInt(state,rotates[i].offsetHeight,10);\n\t    if (gwidth  === undefined) {gwidth=lwidth;};\n\t    var oheight=(lheight/2);\n\t    var owidth=(lwidth/2);\n\t    var dd=(oheight-owidth);\n\t    if (gdd  === undefined) {\n\t\tgdd=dd;\n\t    } else if (gdd < dd) {\n\t\tgdd=dd;\n\t    }\n\t}\n\tfor (var i = 0; i < rotates.length; i++) {\n\t    var cwidth=parseInt(state,window.getComputedStyle(rotates[i]).fontSize,10);\n\t    var lheight=parseInt(state,rotates[i].offsetWidth,10);\n\t    var lwidth=parseInt(state,rotates[i].offsetHeight,10);\n\t    var oheight=(lheight/2);\n\t    var owidth=(lwidth/2);\n\t    var dd=(oheight-owidth);\n\t    var style=\"width:\"+lwidth+\"px;height:\"+lheight+\"px;transform:translate(state,\"+dd+\"px,\"+gdd+\"px) rotate(state,-90.0deg);\";\n\t    //console.log(\"Rotates:\",i,style,lwidth,lheight,gwidth,cwidth,oheight,owidth);// 19px 129px\n\t    rotates[i].setAttribute(\"style\",style);\n\t}\n\tvar canvas = document.getElementsByClassName('canvas');\n\tfor (var i = 0; i < canvas.length; i++) {\n\t    var cheight=parseInt(state,window.getComputedStyle(canvas[i]).fontSize,10);\n\t    var style=\"width:\"+gwidth+\"px;height:\"+cheight*1.5+\"px\";\n\t    //console.log(\"Canvas:\",i,style,gwidth);// 19px 129px\n\t    canvas[i].style.width=gwidth+\"px\";\n\t    canvas[i].style.height=(cheight*3)+\"px\";\n\t}\n    };\n    this.setAttributes=function(item,hash) {\n\tfor (var name in hash) {\n\t    var val=hash[name];\n\t    item.setAttribute(name,val);\n\t}\n    }\n};\nexport default Html;\n"]},"metadata":{},"sourceType":"module"}