{"ast":null,"code":"import _classCallCheck from\"/home/franktt/react/varseltavle/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/franktt/react/varseltavle/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/franktt/react/varseltavle/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/franktt/react/varseltavle/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/franktt/react/varseltavle/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{withStyles}from'@material-ui/core/styles';import{teal_palette}from'../mui/metMuiThemes';//import Paper from '@material-ui/core/Paper';\n//import Grid from '@material-ui/core/Grid';\n//import SummaryCell from './SummaryCell';\n//import SeriesCell  from './SeriesCell';\n//import CanvasText  from './CanvasTextComponent';\nvar styles=function styles(theme){return{root:{height:'100%'},paper:{overflow:'hidden',tableLayout:'fixed',padding:0,margin:0},divTable:{display:'table',width:'100%'},divTableRow:{backgroundColor:teal_palette.main,border:'1px solid #000',display:'table-row',padding:'5px'},divTableHdr:{border:'1px solid #000',display:'table-cell',padding:'5px',backgroundColor:teal_palette.main,color:'black'},divTableCell:{border:'1px solid #000',display:'table-cell',padding:'5px'},divTableCellCursor:{cursor:\"pointer\",border:'1px solid #000',display:'table-cell',padding:'5px'},divTableBody:{display:'table-row-group'}};};//const mui = createTheme({palette:teal_palette});\n// ---------------- DATA\nfunction FirstDataCell(props){var classes=props.classes,rowval=props.rowval;//,state, rowindex\nreturn React.createElement(\"div\",{className:classes.divTableHdr},rowval);}//{rowval}\nfunction DataCell(props){var classes=props.classes,val=props.val,onclick=props.onclick,fgcolor=props.fgcolor,bgcolor=props.bgcolor;//state,rowindex,\nvar rval=val;if(isNaN(rval)){rval=val;}else{rval=parseFloat(rval,0).toFixed(2);};return React.createElement(\"div\",{className:onclick!==undefined?classes.divTableCellCursor:classes.divTableCell,style:{color:fgcolor,backgroundColor:bgcolor},onClick:onclick},rval);}function renderDataCell(classes,state,key,click,sub,rowindex,colindex){var maxlev=sub[\"level\"]||0;var bgcolor=state.Colors.getLevelBgColor(maxlev);var fgcolor=state.Colors.getLevelFgColor(maxlev);var rowkey=key;var rowval=sub[key];var rowwhere=state.Database.getWhereDetail(rowkey,rowval);var onclick=click.indexOf(rowkey)===-1?undefined:function(){state.Navigate.selectKey(state,rowkey,rowval,rowwhere,1);};return React.createElement(DataCell,{classes:classes,state:state,key:\"\".concat(rowindex,\"-\").concat(colindex),val:sub[key],rowindex:rowindex,fgcolor:fgcolor,bgcolor:bgcolor,onclick:onclick});}//{{rowkey:'test1',colkey:'test2',title:title}}\nfunction dataRow(classes,state,key,click,subs,rowindex){//return null; // no entries, ignore row...\nvar mapFunction=function mapFunction(sub,colindex){return renderDataCell(classes,state,key,click,sub,rowindex,colindex);};return React.createElement(\"div\",{className:classes.divTableRow,key:rowindex.toString()},React.createElement(FirstDataCell,{classes:classes,state:state,key:'k-'+rowindex,rowval:key}),subs.map(mapFunction));};// ---------------- Details\nfunction Details(props){var classes=props.classes,state=props.state,keys=props.keys,click=props.click,subs=props.subs;// classes, element\nvar mapFunction=function mapFunction(key,rowindex){return dataRow(classes,state,key,click,subs,rowindex);};return React.createElement(\"div\",{className:classes.divTable},React.createElement(\"div\",{className:classes.divTableBody},keys.map(mapFunction)));}var TooltipTable=/*#__PURE__*/function(_Component){_inherits(TooltipTable,_Component);function TooltipTable(){var _getPrototypeOf2;var _this;_classCallCheck(this,TooltipTable);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(TooltipTable)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.updateWindowDimensions=function(){_this.width=window.innerWidth;_this.height=window.innerHeight;_this.bbx=_this.el.getBoundingClientRect();//console.log(\"Width/Height:\",this.width,this.height,this.bbx.width,this.bbx.height)\n};return _this;}_createClass(TooltipTable,[{key:\"componentDidMount\",value:function componentDidMount(){window.addEventListener(\"resize\",this.updateWindowDimensions);}},{key:\"element\",value:function element(el){if(el!==undefined&&el!==null){this.el=el;this.bbx=this.el.getBoundingClientRect();//console.log(\"BBX width/height:\",this.bbx.width,this.bbx.height);\n};}},{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,state=_this$props.state,classes=_this$props.classes,keys=_this$props.keys,click=_this$props.click,subs=_this$props.subs;//console.log(\"##### Rendering TooltipTable.\");\nreturn React.createElement(\"div\",{ref:function ref(el){_this2.element(el);},className:classes.root,style:{width:'100%',height:'100%'}},React.createElement(Details,{state:state,classes:classes,element:this,keys:keys,click:click,subs:subs}));}}]);return TooltipTable;}(Component);export default withStyles(styles)(TooltipTable);","map":{"version":3,"sources":["/home/franktt/react/varseltavle/src/react/TooltipTable.js"],"names":["React","Component","withStyles","teal_palette","styles","theme","root","height","paper","overflow","tableLayout","padding","margin","divTable","display","width","divTableRow","backgroundColor","main","border","divTableHdr","color","divTableCell","divTableCellCursor","cursor","divTableBody","FirstDataCell","props","classes","rowval","DataCell","val","onclick","fgcolor","bgcolor","rval","isNaN","parseFloat","toFixed","undefined","renderDataCell","state","key","click","sub","rowindex","colindex","maxlev","Colors","getLevelBgColor","getLevelFgColor","rowkey","rowwhere","Database","getWhereDetail","indexOf","Navigate","selectKey","dataRow","subs","mapFunction","toString","map","Details","keys","TooltipTable","updateWindowDimensions","window","innerWidth","innerHeight","bbx","el","getBoundingClientRect","addEventListener","element"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport {teal_palette} from '../mui/metMuiThemes';\n\n//import Paper from '@material-ui/core/Paper';\n//import Grid from '@material-ui/core/Grid';\n\n//import SummaryCell from './SummaryCell';\n//import SeriesCell  from './SeriesCell';\n//import CanvasText  from './CanvasTextComponent';\n\nconst styles = theme => ({\n    root: {\n\theight: '100%',\n    },\n    paper: {\n\toverflow: 'hidden',\n\ttableLayout: 'fixed',\n\tpadding:0,\n\tmargin:0,\n    },\n    divTable :{\n\tdisplay: 'table',\n\twidth: '100%',\n    },\n    divTableRow:  {\n\tbackgroundColor:teal_palette.main,\n\tborder: '1px solid #000',\n\tdisplay: 'table-row',\n\tpadding: '5px',\n    },\n    divTableHdr:{\n\tborder: '1px solid #000',\n\tdisplay: 'table-cell',\n\tpadding: '5px',\n\tbackgroundColor:teal_palette.main,\n\tcolor:'black',\n    },\n    divTableCell:{\n\tborder: '1px solid #000',\n\tdisplay: 'table-cell',\n\tpadding: '5px',\n    },\n    divTableCellCursor:{\n\tcursor: \"pointer\",\n\tborder: '1px solid #000',\n\tdisplay: 'table-cell',\n\tpadding: '5px',\n    },\n    divTableBody : {\n\tdisplay: 'table-row-group',\n    },\n});\n\n//const mui = createTheme({palette:teal_palette});\n\n// ---------------- DATA\nfunction FirstDataCell (props) {\n    const { classes, rowval} = props;//,state, rowindex\n    return (<div className={classes.divTableHdr}>\n\t    {rowval}\n\t    </div>);\n}\n//{rowval}\nfunction DataCell(props) {\n    const {classes,val,onclick,fgcolor,bgcolor}=props;//state,rowindex,\n    var rval=val;\n    if (isNaN(rval)) {\n\trval=val;\n    } else {\n\trval=parseFloat(rval,0).toFixed(2);\n    };\n    return <div className={(onclick !== undefined?classes.divTableCellCursor:classes.divTableCell)} style={{color:fgcolor,backgroundColor:bgcolor}} onClick={onclick}>{rval}</div>\n}\nfunction renderDataCell(classes,state,key,click,sub,rowindex,colindex) {\n    var maxlev=sub[\"level\"]||0;\n    var bgcolor=state.Colors.getLevelBgColor(maxlev);\n    var fgcolor=state.Colors.getLevelFgColor(maxlev);\n    var rowkey=key;\n    var rowval=sub[key];\n    var rowwhere=state.Database.getWhereDetail(rowkey,rowval);\n    var onclick=(click.indexOf(rowkey)===-1?undefined: () => {state.Navigate.selectKey(state,rowkey,rowval,rowwhere,1)});\n    return (<DataCell classes={classes} state={state} key={`${rowindex}-${colindex}`} val={sub[key]} rowindex={rowindex} fgcolor={fgcolor} bgcolor={bgcolor} onclick={onclick}/>);\n}\n//{{rowkey:'test1',colkey:'test2',title:title}}\nfunction dataRow(classes,state,key,click,subs,rowindex) {\n    //return null; // no entries, ignore row...\n    var mapFunction= (sub,colindex)=>renderDataCell(classes,state,key,click,sub,rowindex,colindex);\n    return (<div className={classes.divTableRow} key={rowindex.toString()}>\n\t    <FirstDataCell classes={classes} state={state} key={'k-'+rowindex} rowval={key}/>\n\t    {subs.map(mapFunction)}\n\t    </div>);\n};\n// ---------------- Details\nfunction Details(props) {\n    const { classes, state, keys, click, subs } = props; // classes, element\n    var mapFunction= (key,rowindex)=>dataRow(classes,state,key,click,subs,rowindex);\n    return (<div className={classes.divTable}>\n\t       <div className={classes.divTableBody}>\n\t          {keys.map(mapFunction)}\n\t       </div>\n            </div>);\n }\nclass TooltipTable extends Component {\n    componentDidMount() {\n        window.addEventListener(\"resize\", this.updateWindowDimensions);\n    } \n    updateWindowDimensions = () => {\n        this.width= window.innerWidth;\n\tthis.height=window.innerHeight;\n\tthis.bbx=this.el.getBoundingClientRect();\n\t//console.log(\"Width/Height:\",this.width,this.height,this.bbx.width,this.bbx.height)\n    };\n    element(el) {\n\tif (el !== undefined && el !== null) {\n\t    this.el=el;\n\t    this.bbx=this.el.getBoundingClientRect();\n\t    //console.log(\"BBX width/height:\",this.bbx.width,this.bbx.height);\n\t};\n    };\n    render() {\n\tconst { state, classes, keys, click, subs } = this.props;\n\t//console.log(\"##### Rendering TooltipTable.\");\n\treturn (<div ref={el=>{this.element(el)}} className={classes.root}  style={{width: '100%', height: '100%'}}>\n\t\t   <Details state={state} classes={classes} element={this} keys={keys} click={click} subs={subs}/>\n\t        </div>);\n    }\n}\n\nTooltipTable.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(TooltipTable);\n"]},"metadata":{},"sourceType":"module"}