{"ast":null,"code":"//console.log(\"Loading ThresholdLib.js\");\nfunction Threshold() {\n  this.thr = undefined; // threshold parameter levels\n\n  this.gthr = undefined; // temporary storage\n\n  this.imax = 0; // threshold item types\n\n  this.ithr = 1;\n  this.ikey = 2;\n  this.ilev = 3;\n  this.ival = 4;\n\n  this.init = function (state) {\n    var par = \"Threshold\" + state.Utils.version;\n    state.Utils.init(par, this);\n  };\n\n  this.getThresholds = function (doc) {\n    if (doc.thresholds !== undefined) {\n      return doc.thresholds;\n    } else {\n      var subthr = {};\n\n      for (var thr in this.thrs) {\n        // loop over thresholds\n        if (doc[thr] !== undefined) {\n          var key = doc[thr]; // key-value\n\n          if (this.thrs[thr][key] !== undefined) {\n            var tlen, dlev, jj, res;\n\n            if (this.thrs[thr][key].max !== undefined && doc.max !== undefined) {\n              var dmax = Number(doc.max);\n              dlev = -1;\n              var tmax = this.thrs[thr][key].max;\n              tlen = tmax.length; // get new level\n\n              for (jj = 0; jj < tlen; jj++) {\n                if (dmax > Number(tmax[jj])) {\n                  //console.log(\"Hit:\",jj,dmax,tmax[jj],dmax>tmax[jj],dlev);\n                  dlev = jj;\n                }\n              }\n\n              res = [];\n              res[this.imax] = true;\n              res[this.ithr] = thr;\n              res[this.ikey] = key;\n              res[this.ilev] = dlev;\n              res[this.ival] = dmax;\n              subthr.max = res; //if (dlev !== -1) {\n              //    console.log(\"Found level:\",dlev,dmax,\n              //\t\tJSON.stringify(tmax),thr,key);\n              //}\n            } else if (this.thrs[thr][key].min !== undefined && doc.min !== undefined) {\n              // min value\n              dlev = -1;\n              var tmin = this.thrs[thr][key].min;\n              var dmin = Number(doc.min); // get new level\n\n              tlen = tmin.length;\n\n              for (jj = 0; jj < tlen; jj++) {\n                if (dmin < Number(tmin[jj])) {\n                  dlev = jj;\n                }\n              }\n\n              res = [];\n              res[this.imax] = false;\n              res[this.ithr] = thr;\n              res[this.ikey] = key;\n              res[this.ilev] = dlev;\n              res[this.ival] = dmin;\n              subthr.min = res;\n            }\n          }\n        }\n      }\n\n      doc.thresholds = subthr;\n      return subthr;\n    }\n  };\n\n  this.setGThr = function (state, doc) {\n    if (this.gthr === undefined || doc[this.gthr[0]] === undefined || doc[this.gthr[0]] !== this.gthr[1]) {\n      this.gthr = this.getThreshold(state, doc);\n    }\n\n    ;\n  }; // call after this.setGThr\n\n\n  this.getLevel = function (state, doc) {\n    var lev = -1;\n\n    if (this.gthr === undefined) {\n      lev = -2;\n    } else if (this.gthr[2].max !== undefined) {\n      lev = this.getThrLevel(state, doc, this.gthr[2], \"max\");\n    } else if (this.gthr[2].min !== undefined) {\n      lev = this.getThrLevel(state, doc, this.gthr[2], \"min\");\n    }\n\n    ;\n    return lev;\n  }; // call after this.setGThr\n\n\n  this.getKeyLat = function (state) {\n    return this.gthr[2][\"latlon\"][0];\n  }; // call after this.setGThr\n\n\n  this.getKeyLon = function (state) {\n    return this.gthr[2][\"latlon\"][1];\n  }; // call after this.setGThr\n\n\n  this.getLat = function (state, doc) {\n    if (this.gthr === undefined) {\n      return undefined;\n    } else if (this.gthr[2][\"latlon\"] !== undefined) {\n      return doc[this.getKeyLat(state)];\n    }\n\n    ;\n  }; // call after this.setGThr\n\n\n  this.getLon = function (state, doc) {\n    if (this.gthr === undefined) {\n      return undefined;\n    } else if (this.gthr[2][\"latlon\"] !== undefined) {\n      return doc[this.getKeyLon(state)];\n    }\n\n    ;\n  };\n\n  this.getThreshold = function (state, doc) {\n    if (doc.threshold !== undefined) {\n      return doc.threshold;\n    } else {\n      for (var thr in this.thrs) {\n        // loop over thresholds\n        if (doc[thr] !== undefined) {\n          var key = doc[thr]; // key-value\n\n          if (this.thrs[thr][key] !== undefined) {\n            var threshold = [thr, key, this.thrs[thr][key]];\n            doc.threshold = threshold;\n            return threshold;\n          }\n        }\n      }\n\n      return;\n    }\n  };\n\n  this.getThrLevel = function (state, doc, thrs, key) {\n    var tlen, jj;\n    var lev = -1;\n    var val = doc[key];\n    var thr = thrs[key];\n\n    if (key === \"max\") {\n      tlen = thr.length;\n\n      for (jj = 0; jj < tlen; jj++) {\n        if (val > Number(thr[jj])) {\n          //console.log(\"Hit:\",jj,val,thr[jj]);\n          lev = jj;\n        }\n      }\n    } else if (key === \"min\") {\n      tlen = thr.length;\n\n      for (jj = 0; jj < tlen; jj++) {\n        if (val < Number(thr[jj])) {\n          //console.log(\"Hit:\",jj,val,thr[jj]);\n          lev = jj;\n        }\n      }\n    }\n\n    return lev;\n  };\n}\n\n;\nexport default Threshold;","map":{"version":3,"sources":["/home/franktt/react/varseltavle/src/lib/ThresholdLib.js"],"names":["Threshold","thr","undefined","gthr","imax","ithr","ikey","ilev","ival","init","state","par","Utils","version","getThresholds","doc","thresholds","subthr","thrs","key","tlen","dlev","jj","res","max","dmax","Number","tmax","length","min","tmin","dmin","setGThr","getThreshold","getLevel","lev","getThrLevel","getKeyLat","getKeyLon","getLat","getLon","threshold","val"],"mappings":"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","sourcesContent":["//console.log(\"Loading ThresholdLib.js\");\n\nfunction Threshold() {\n    this.thr=undefined; // threshold parameter levels\n    this.gthr=undefined;// temporary storage\n    this.imax=0;        // threshold item types\n    this.ithr=1;\n    this.ikey=2;\n    this.ilev=3;\n    this.ival=4;\n    this.init=function(state){\n\tvar par=\"Threshold\"+state.Utils.version;\n\tstate.Utils.init(par,this);\n    };\n    this.getThresholds=function(doc) {\n\tif (doc.thresholds !== undefined) {\n\t    return doc.thresholds;\n\t} else {\n\t    var subthr={};\n\t    for (var thr in this.thrs) { // loop over thresholds\n\t\tif (doc[thr] !== undefined) {\n\t\t    var key=doc[thr]; // key-value\n\t\t    if (this.thrs[thr][key] !== undefined) {\n\t\t\tvar tlen,dlev,jj,res;\n\t\t\tif (this.thrs[thr][key].max !== undefined &&\n\t\t\t    doc.max !== undefined) {\n\t\t\t    var dmax=Number(doc.max);\n\t\t\t    dlev=-1;\n\t\t\t    var tmax=this.thrs[thr][key].max;\n\t\t\t    tlen=tmax.length;\n\t\t\t    // get new level\n\t\t\t    for (jj = 0; jj < tlen; jj++) {\n\t\t\t\tif (dmax > Number(tmax[jj])) {\n\t\t\t\t    //console.log(\"Hit:\",jj,dmax,tmax[jj],dmax>tmax[jj],dlev);\n\t\t\t\t    dlev=jj;\n\t\t\t\t}\n\t\t\t    }\n\t\t\t    res=[];\n\t\t\t    res[this.imax]=true;\n\t\t\t    res[this.ithr]=thr;\n\t\t\t    res[this.ikey]=key;\n\t\t\t    res[this.ilev]=dlev;\n\t\t\t    res[this.ival]=dmax;\n\t\t\t    subthr.max=res;\n\t\t\t    //if (dlev !== -1) {\n\t\t\t    //    console.log(\"Found level:\",dlev,dmax,\n\t\t\t    //\t\tJSON.stringify(tmax),thr,key);\n\t\t\t    //}\n\t\t\t} else if (this.thrs[thr][key].min !== undefined && doc.min !== undefined) { // min value\n\t\t\t    dlev=-1;\n\t\t\t    var tmin=this.thrs[thr][key].min;\n\t\t\t    var dmin=Number(doc.min);\n\t\t\t    // get new level\n\t\t\t    tlen=tmin.length;\n\t\t\t    for (jj = 0; jj < tlen; jj++) {\n\t\t\t\tif (dmin < Number(tmin[jj])) {\n\t\t\t\t    dlev=jj;\n\t\t\t\t}\n\t\t\t    }\n\t\t\t    res=[];\n\t\t\t    res[this.imax]=false;\n\t\t\t    res[this.ithr]=thr;\n\t\t\t    res[this.ikey]=key;\n\t\t\t    res[this.ilev]=dlev;\n\t\t\t    res[this.ival]=dmin;\n\t\t\t    subthr.min=res;\n\t\t\t}\n\t\t    }\n\t\t}\n\t    }\n\t    doc.thresholds=subthr;\n\t    return subthr;\n\t}\n    };\n    this.setGThr=function(state,doc) {\n\tif (this.gthr  === undefined ||\n\t    doc[this.gthr[0]]  === undefined ||\n\t    doc[this.gthr[0]] !== this.gthr[1]) {\n\t    this.gthr=this.getThreshold(state,doc);\n\t};\n    }\n\n    // call after this.setGThr\n    this.getLevel=function(state,doc) {\n\tvar lev=-1;\n\tif (this.gthr  === undefined) {\n\t    lev=-2;\n\t} else if (this.gthr[2].max !== undefined) {\n\t    lev=this.getThrLevel(state,doc,this.gthr[2],\"max\");\n\t} else if (this.gthr[2].min !== undefined) {\n\t    lev=this.getThrLevel(state,doc,this.gthr[2],\"min\");\n\t};\n\treturn lev;\n    }\n\n    // call after this.setGThr\n    this.getKeyLat=function(state) {\n\treturn this.gthr[2][\"latlon\"][0];\n    }\n\n    // call after this.setGThr\n    this.getKeyLon=function(state) {\n\treturn this.gthr[2][\"latlon\"][1];\n    }\n\n    // call after this.setGThr\n    this.getLat=function(state,doc) {\n\tif (this.gthr  === undefined) {\n\t    return undefined;\n\t} else if (this.gthr[2][\"latlon\"] !== undefined) {\n\t    return doc[this.getKeyLat(state)];\n\t};\n    }\n\n    // call after this.setGThr\n    this.getLon=function(state,doc) {\n\tif (this.gthr  === undefined) {\n\t    return undefined;\n\t} else if (this.gthr[2][\"latlon\"] !== undefined) {\n\t    return doc[this.getKeyLon(state)];\n\t};\n    };\n    this.getThreshold=function(state,doc) {\n\tif (doc.threshold !== undefined) {\n\t    return doc.threshold;\n\t} else {\n\t    for (var thr in this.thrs) { // loop over thresholds\n\t\tif (doc[thr] !== undefined) {\n\t\t    var key=doc[thr]; // key-value\n\t\t    if (this.thrs[thr][key] !== undefined) {\n\t\t\tvar threshold= [thr,key,this.thrs[thr][key]];\n\t\t\tdoc.threshold=threshold;\n\t\t\treturn threshold;\n\t\t    }\n\t\t}\n\t    }\n\t    return;\n\t}\n    };\n    this.getThrLevel=function(state,doc,thrs,key) {\n\tvar tlen,jj;\n\tvar lev=-1;\n\tvar val=doc[key];\n\tvar thr=thrs[key];\n\tif (key  === \"max\") {\n\t    tlen=thr.length;\n\t    for (jj = 0; jj < tlen; jj++) {\n\t\tif (val > Number(thr[jj])) {\n\t\t    //console.log(\"Hit:\",jj,val,thr[jj]);\n\t\t    lev=jj;\n\t\t}\n\t    }\n\t} else if (key  === \"min\") {\n\t    tlen=thr.length;\n\t    for (jj = 0; jj < tlen; jj++) {\n\t\tif (val < Number(thr[jj])) {\n\t\t    //console.log(\"Hit:\",jj,val,thr[jj]);\n\t\t    lev=jj;\n\t\t}\n\t    }\n\t}\n\treturn lev;\n    }\n};\nexport default Threshold;\n"]},"metadata":{},"sourceType":"module"}