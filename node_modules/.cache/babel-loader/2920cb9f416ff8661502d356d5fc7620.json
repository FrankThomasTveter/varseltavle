{"ast":null,"code":"//console.log(\"Loading Series1DLib.js\");\nfunction Series1D() {\n  this.Show = function (state, matrix, item, skeys, key, values, step, dir) {\n    // make header row\n    var row = document.createElement(\"TR\"); //console.log(\"Key=\",key,\" dir=\",dir);\n\n    this.appendHeaderRow1D(state, matrix, row, key, values, step, dir);\n    item.appendChild(row); // make data row\n\n    row = document.createElement(\"TR\");\n    this.appendDataRow1D(state, matrix, row, key, values, step, dir);\n    item.appendChild(row);\n  };\n\n  this.appendHeaderRow1D = function (state, matrix, row, key, values, step, dir) {\n    var clen = values.length;\n\n    for (var ii = 0; ii < clen; ii = ii + step) {\n      //console.log(\"HDR Looping:\",ii,values[ii],clen,step);\n      var rotate = (state.Layout.rotate || {})[key] || \"\";\n      var val = values[ii];\n      var where = \"\";\n      var cnt = 0;\n\n      for (var kk = ii; kk < Math.min(clen, ii + step); kk++) {\n        if (where !== \"\") {\n          where = where + \" or \";\n        }\n\n        where = where + state.Database.getWhereDetail(key, values[kk]);\n        cnt = cnt + 1;\n        console.log(\"Where detail:\", key, where);\n      }\n\n      ; // make \"header\" column\n\n      row.appendChild(state.Html.makeHeaderElement(state, key, // pkey\n      val, // pval\n      \"\", // prel\n      dir, // ptyp\n      \"state.Layout.select\" + dir + \"(state,'\" + (val || \"\") + \"','\" + where + \"','\" + cnt + \"');\", where, rotate));\n    }\n  };\n\n  this.appendDataRow1D = function (state, matrix, row, key, values, step, dir) {\n    if (dir === \"Col\") {\n      var range = state.Matrix.getRange(state, matrix, values, [\"\"]);\n    } else {\n      var range = state.Matrix.getRange(state, matrix, [\"\"], values);\n    }\n\n    var clen = values.length;\n\n    for (var jj = 0; jj < clen; jj = jj + step) {\n      //console.log(\"DAT Looping:\",jj,values[jj],clen,step);\n      var where = \"\";\n      var elements = undefined;\n\n      for (var kk = jj; kk < Math.min(clen, jj + step); kk++) {\n        if (dir === \"Col\") {\n          var element = state.Matrix.getMatrixElement(values[kk], \"\", matrix);\n        } else {\n          var element = state.Matrix.getMatrixElement(\"\", values[kk], matrix);\n        }\n\n        if (element === undefined) {} else {\n          //console.log(\"Found:\",values[kk],\"\");\n          if (elements === undefined) {\n            elements = [];\n          }\n\n          ;\n          elements.push(element);\n        }\n\n        if (where !== \"\") {\n          where = where + \" or \";\n        }\n\n        where = where + state.Database.getWhereDetail(key, values[kk]);\n      } //console.log(\"Elements:\",values[jj],JSON.stringify(elements));\n\n\n      if (elements === undefined) {\n        state.Html.appendEmptyData(state, row); // add empty element\n\n        console.log(\"Empty element.\", jj, key, values[jj]);\n      } else {\n        //console.log(\"Calling makeCanvas.\",jj,key,values[jj]);\n        row.appendChild(state.Html.makeCanvasElement(state, elements, key, values.slice(state, jj, jj + step), range, \"state.Layout.selectItem(state,'\" + key + \"','','\" + values[jj] + \"','','\" + where + \"','','1','1');\", where, step));\n      }\n\n      ;\n    }\n  };\n}\n\n;\nexport default Series1D;","map":{"version":3,"sources":["/home/franktt/react/varseltavle/src/lib/Series1DLib.js"],"names":["Series1D","Show","state","matrix","item","skeys","key","values","step","dir","row","document","createElement","appendHeaderRow1D","appendChild","appendDataRow1D","clen","length","ii","rotate","Layout","val","where","cnt","kk","Math","min","Database","getWhereDetail","console","log","Html","makeHeaderElement","range","Matrix","getRange","jj","elements","undefined","element","getMatrixElement","push","appendEmptyData","makeCanvasElement","slice"],"mappings":"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","sourcesContent":["//console.log(\"Loading Series1DLib.js\");\n\nfunction Series1D() {\n    this.Show=function(state,matrix,item,skeys,key,values,step,dir){\n\t// make header row\n\tvar row = document.createElement(\"TR\");\n\t//console.log(\"Key=\",key,\" dir=\",dir);\n\tthis.appendHeaderRow1D(state,matrix,row,key,values,step,dir);\n\titem.appendChild(row);\n\t// make data row\n\trow = document.createElement(\"TR\");\n\tthis.appendDataRow1D(state,matrix,row,key,values,step,dir);\n\titem.appendChild(row);\n    };\n    this.appendHeaderRow1D=function(state,matrix,row,key,values,step,dir) {\n\tvar clen=values.length;\n\tfor(var ii=0; ii<clen; ii=ii+step) {\n\t    //console.log(\"HDR Looping:\",ii,values[ii],clen,step);\n\t    var rotate=(state.Layout.rotate||{})[key]||\"\";\n\t    var val = values[ii];\n\t    var where = \"\";\n\t    var cnt=0;\n\t    for (var kk=ii;kk<Math.min(clen,ii+step);kk++) {\n\t\tif (where !== \"\") {where=where + \" or \";}\n\t\twhere=where + state.Database.getWhereDetail(key,values[kk]);\n\t\tcnt=cnt+1;\n\t\tconsole.log(\"Where detail:\",key,where)\n\t    };\n\t    // make \"header\" column\n\t    row.appendChild(\n\t\tstate.Html.makeHeaderElement(state,\n\t\t    key,         // pkey\n\t\t    val,         // pval\n\t\t    \"\",          // prel\n\t\t    dir,         // ptyp\n\t\t    \"state.Layout.select\"+dir+\"(state,'\"+(val||\"\")+\"','\"+where+\"','\"+cnt+\"');\",\n\t\t    where,\n\t\t    rotate\n\t\t)\n\t    );\n\t}\n    };\n    this.appendDataRow1D=function(state,matrix,row,key,values,step,dir) {\n\tif (dir === \"Col\") {\n\t    var range=state.Matrix.getRange(state,matrix,values,[\"\"]);\n\t} else {\n\t    var range=state.Matrix.getRange(state,matrix,[\"\"],values);\n\t}\n\tvar clen=values.length;\n\tfor(var jj=0; jj<clen; jj=jj+step) {\n\t    //console.log(\"DAT Looping:\",jj,values[jj],clen,step);\n\t    var where=\"\";\n\t    var elements=undefined\n\t    for (var kk=jj;kk<Math.min(clen,jj+step);kk++) {\n\t\tif (dir === \"Col\") {\n\t\t    var element=state.Matrix.getMatrixElement(values[kk],\"\",matrix);\n\t\t} else {\n\t\t    var element=state.Matrix.getMatrixElement(\"\",values[kk],matrix);\n\t\t}\n\t\tif (element  === undefined) {\n\t\t} else {\n\t\t    //console.log(\"Found:\",values[kk],\"\");\n\t\t    if (elements === undefined) {elements=[];};\n\t\t    elements.push(element);\n\t\t}\n\t\tif (where !== \"\") {where=where + \" or \";}\n\t\twhere=where + state.Database.getWhereDetail(key,values[kk]);\n\t    }\n\t    //console.log(\"Elements:\",values[jj],JSON.stringify(elements));\n\t    if (elements  === undefined) {\n\t\tstate.Html.appendEmptyData(state,row);// add empty element\n\t\tconsole.log(\"Empty element.\",jj,key,values[jj]);\n\t    } else {\n\t\t//console.log(\"Calling makeCanvas.\",jj,key,values[jj]);\n\t\trow.appendChild(\n\t\t    state.Html.makeCanvasElement(state,\n\t\t\telements,\n\t\t\tkey,\n\t\t\tvalues.slice(state,jj,jj+step),\n\t\t\trange,\n\t\t\t\"state.Layout.selectItem(state,'\"+key+\"','','\"+values[jj]+\"','','\"+where+\"','','1','1');\",\n\t\t\twhere,step)\n\t\t);\n\t    };\n\t}\n    }\n};\nexport default Series1D;\n"]},"metadata":{},"sourceType":"module"}