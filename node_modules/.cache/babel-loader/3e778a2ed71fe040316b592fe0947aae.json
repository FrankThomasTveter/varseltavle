{"ast":null,"code":"//console.log(\"Loading NavigateLib.js\");\nfunction Navigate() {\n  this.dropCheck = function (state, ev) {\n    var check;\n    var styp = ev.dataTransfer.getData(state, \"styp\");\n    var skey = ev.dataTransfer.getData(state, \"skey\"); //var sval = ev.dataTransfer.getData(state,\"sval\");\n    //var srel = ev.dataTransfer.getData(state,\"srel\");\n\n    var ttyp = ev.target.getAttribute(state, \"ptyp\");\n    var tkey = ev.target.getAttribute(state, \"pkey\"); //var tval = ev.target.getAttribute(state,\"pval\");\n    //var trel = ev.target.getAttribute(state,\"prel\");\n\n    if (ttyp === state.Path.type.eye.ptyp) {\n      // ******************** E Y E **************\n      if (styp === state.Path.type.path.ptyp) {\n        check = true;\n      } else if (styp === state.Path.type.table.ptyp || styp === state.Path.type.rest.ptyp) {\n        //console.log(\"Value:\",skey,state.Path.keyVal(state,skey));\n        if (state.Path.keyVal(state, skey) !== undefined) {\n          check = true;\n        } else {\n          check = false;\n        }\n      } else if (styp === state.Path.type.trashRest.ptyp) {\n        if (state.Path.keyVal(state, skey) !== undefined) {\n          check = true;\n        } else {\n          check = false;\n        }\n      } else if (styp === state.Path.type.row.ptyp || styp === state.Path.type.col.ptyp || styp === state.Path.type.item.ptyp || styp === state.Path.type.rotate.ptyp) {\n        check = true;\n      } else {\n        check = false;\n      }\n    } else if (ttyp === state.Path.type.trash.ptyp || ttyp === state.Path.type.trashRest.ptyp) {\n      // ******************** T R A S H **************\n      if (styp === state.Path.type.path.ptyp || styp === state.Path.type.eye.ptyp || styp === state.Path.type.table.ptyp || styp === state.Path.type.rest.ptyp || styp === state.Path.type.trash.ptyp || styp === state.Path.type.trashRest.ptyp || styp === state.Path.type.col.ptyp || styp === state.Path.type.row.ptyp || styp === state.Path.type.item.ptyp || styp === state.Path.type.rotate.ptyp) {\n        check = true;\n      } else {\n        check = false;\n      }\n    } else if (ttyp === state.Path.type.path.ptyp) {\n      // ******************** P A T H **************\n      if (styp === state.Path.type.path.ptyp || styp === state.Path.type.eye.ptyp) {\n        check = true;\n      } else if (styp === state.Path.type.table.ptyp || styp === state.Path.type.rest.ptyp) {\n        //console.log(\"Value:\",skey,state.Path.keyVal(state,skey));\n        if (state.Path.keyVal(state, skey) !== undefined) {\n          check = true;\n        } else {\n          check = false;\n        }\n      } else if (styp === state.Path.type.trash.ptyp) {\n        check = true;\n      } else if (styp === state.Path.type.trashRest.ptyp) {\n        if (state.Path.keyVal(state, skey) !== undefined) {\n          check = true;\n        } else {\n          check = false;\n        }\n      } else {\n        check = false;\n      }\n    } else if (ttyp === state.Path.type.table.ptyp || ttyp === state.Path.type.rest.ptyp) {\n      // ******************** T A B L E / R E S T **************\n      if (styp === state.Path.type.path.ptyp || styp === state.Path.type.rest.ptyp || styp === state.Path.type.table.ptyp || styp === state.Path.type.trash.ptyp) {\n        check = true;\n      } else if (styp === state.Path.type.eye.ptyp) {\n        check = state.Path.checkNewPath(state, ttyp, tkey);\n      } else if (styp === state.Path.type.trash.ptyp) {\n        check = true;\n      } else if (styp === state.Path.type.trashRest.ptyp) {\n        check = true;\n      } else {\n        check = false;\n      }\n    } else if (ttyp === state.Path.type.row.ptyp || ttyp === state.Path.type.col.ptyp || ttyp === state.Path.type.item.ptyp) {\n      // ******************** T A B L E **************\n      if (styp === state.Path.type.eye.ptyp || styp === state.Path.type.trash.ptyp) {\n        check = true;\n      } else if (styp === state.Path.type.trash.ptyp) {\n        check = true;\n      } else if (styp === state.Path.type.rotate.ptyp) {\n        check = true;\n      } else if (styp === ttyp) {\n        check = true;\n      } else if (styp === state.Path.type.row.ptyp && ttyp === state.Path.type.col.ptyp) {\n        check = true;\n      } else if (ttyp === state.Path.type.row.ptyp && styp === state.Path.type.col.ptyp) {\n        check = true;\n      } else {\n        check = false;\n      }\n    } else if (ttyp === state.Path.type.rotate.ptyp) {\n      // ******************** R O T A T E **************\n      if (styp === state.Path.type.col.ptyp) {\n        check = true;\n      } else {\n        check = false;\n      }\n    } else {\n      check = false;\n    } //console.log(\"Checking  styp=\",styp,\"  ttyp=\",ttyp,\" check=\",check);\n\n\n    if (check) {\n      ev.preventDefault(); // this.drop check\n    }\n  };\n\n  this.onDropPath = function (state, ttyp, tid) {\n    var reload = false; // matrix changed?\n\n    var tkey, tin, src;\n\n    if (ttyp === \"path\") {\n      // path-> other\n      if (styp === state.Path.type.table.ptyp) {\n        // swap positions\n        reload = state.Path.swapTableKey(state, skey, tkey);\n      } else {\n        if (styp === state.Path.type.path.ptyp) {\n          reload = state.Path.moveKey2Table(state, \"path\", skey, tkey);\n        } else if (styp === state.Path.type.eye.ptyp) {\n          if (state.Path.checkNewPath(state, ttyp, tkey)) {//state.path.makeNewPath(state,typ,tid+1);\n            //reload=true;  // matrix has changed...\n          }\n        } else if (styp === state.Path.type.rest.ptyp) {\n          reload = state.Path.moveKey2Table(state, \"other\", skey, tkey);\n        } else if (styp === state.Path.type.trash.ptyp) {\n          reload = state.Path.moveTrash2Table(state, tkey);\n        } else if (styp === state.Path.type.trashRest.ptyp) {\n          reload = state.Path.moveKey2Table(state, \"trash\", skey, tkey);\n        } else if (styp === state.Path.type.trash.ptyp) {\n          state.Path.moveTrash(state, \"other\", tin + 1);\n        } else if (styp === state.Path.type.trashRest.ptyp) {\n          reload = state.Path.moveKey(state, \"trash\", skey, \"other\", tin + 1);\n        }\n      }\n\n      if (ttyp === \"path\") {\n        // path-> other\n        var len = state.Path.keys.path.length;\n\n        for (var ii = len - 1; ii >= tid; ii--) {\n          tkey = state.Path.keys.path.splice(ii, 1); // remove from path\n\n          console.log(\"ClickPath:\", JSON.stringify(tkey[0]), JSON.stringify(tkey[0].substring(state, 0, 1)));\n\n          if (tkey[0].substring(state, 0, 1) === \"_\") {\n            console.log(\"Omitting internal variable:\", tkey);\n          } else {\n            if (state.Utils.missing(state.Path.keys.other, tkey)) {\n              state.Path.keys.other = state.Path.keys.other.concat(tkey); // last position\n            }\n\n            ;\n\n            if (state.Layout.trash[tkey] === undefined) {\n              state.Layout.trash[tkey] = [];\n            }\n\n            ;\n            var trash = state.Layout.trash[tkey];\n            state.Path.moveKeys(state, \"trash\", trash, \"other\");\n\n            if (state.Layout.order[tkey] === undefined) {\n              state.Layout.order[tkey] = [];\n            }\n\n            ;\n            var order = state.Layout.order[tkey]; //console.log(\"*** Order:\",JSON.stringify(order));\n          }\n\n          state.Path.makeOrder(state, \"other\", order);\n        } //console.log(\"###Result:\",JSON.stringify(state.Path.keys.other));\n\n\n        reload = true; //console.log(\"Onclick other-all:\",JSON.stringify(setup));\n      } else {\n        // other -> path\n        if (ttyp === \"table\") {\n          // table -> path\n          tkey = state.Path.other.table[tid];\n          tin = state.Path.keys.other.indexOf(tkey);\n          console.log(\"Table-click:\", tid, tkey, tin, JSON.stringify(state.Path.keys.other));\n\n          if (tid === state.Path.other.table.length - 1 || // last element\n          state.Path.other.rest.length === 0) {\n            // no remaining elements\n            src = state.Path.keys.other.splice(tin, 1); // remove from other\n\n            if (state.Utils.missing(state.Path.keys.path, src) && state.Path.keyVal(state, tkey) !== undefined) {\n              // check if value is set\n              state.Path.keys.path = state.Path.keys.path.concat(src); // last position\n            } else if (state.Utils.missing(state.Path.keys.trash, src)) {\n              state.Utils.spliceArray(state.Path.keys.trash, 0, 0, src); // last position\n            }\n          } else {\n            // move first element\n            var tkey2 = state.Path.other.table[1]; // get last element\n\n            src = state.Path.keys.other.splice(tin, 1); // remove first element from path\n\n            if (state.Utils.missing(state.Path.keys.path, src) && state.Path.keyVal(state, tkey) !== undefined) {\n              // check if value is set\n              state.Path.keys.path = state.Path.keys.path.concat(src); // last position\n            } else if (state.Utils.missing(state.Path.keys.trash, src)) {\n              state.Utils.spliceArray(state.Path.keys.trash, 0, 0, src); // last position\n            }\n\n            ; // keep second element\n\n            var tin2 = state.Path.keys.other.indexOf(tkey2);\n            var src2 = state.Path.keys.other.splice(tin2, 1); // remove from path\n\n            if (state.Utils.missing(state.Path.keys.other, src2)) {\n              state.Utils.spliceArray(state.Path.keys.other, 1, 0, src2);\n            } //console.log(\"Kept:\",tin,tkey,JSON.stringify(state.Path.keys.other));\n\n          }\n\n          reload = true;\n        } else if (ttyp === \"rest\") {\n          // rest -> path\n          tkey = state.Path.other.rest[tid];\n          tin = state.Path.keys.other.indexOf(tkey);\n\n          if (state.Path.keyVal(state, tkey) !== undefined) {\n            // check if value is set\n            src = state.Path.keys.other.splice(tin, 1); // remove from path\n\n            if (state.Utils.missing(state.Path.keys.path, src)) {\n              state.Path.keys.path = state.Path.keys.path.concat(src); // last position\n            } else if (state.Utils.missing(state.Path.keys.trash, src)) {\n              state.Utils.spliceArray(state.Path.keys.trash, 0, 0, src); // last position\n            }\n\n            reload = true;\n          } else {\n            src = state.Path.keys.other.splice(tin, 1); // remove from path\n\n            if (state.Utils.missing(state.Path.keys.trash, src)) {\n              state.Utils.spliceArray(state.Path.keys.trash, 0, 0, src); // last position\n            }\n          }\n        } else if (ttyp === \"trash\") {\n          // trash -> path\n          tkey = state.Path.trash.rest[tid];\n\n          if (state.Path.keyVal(state, tkey) === undefined || !state.Utils.missing(state.Path.keys.path, tkey)) {\n            // no value is set\n            tin = state.Path.keys.trash.indexOf(tkey);\n            src = state.Path.keys.trash.splice(tin, 1); // remove from path\n\n            if (state.Utils.missing(state.Path.keys.other, src)) {\n              state.Path.keys.other = state.Path.keys.other.concat(src); // last position\n            } //console.log(\"Restored:\",JSON.stringify(state.Path.keys.other));\n\n\n            reload = state.Path.other.table.length < 2;\n          } else {\n            tin = state.Path.keys.trash.indexOf(tkey);\n            src = state.Path.keys.trash.splice(tin, 1); // remove from path\n\n            if (state.Utils.missing(state.Path.keys.path, src)) {\n              state.Path.keys.path = state.Path.keys.path.concat(src); // last position\n            }\n\n            ;\n            reload = true;\n          }\n        }\n      }\n\n      state.Show.showAll(state, reload);\n    }\n  };\n\n  this.drop = function (state, ev) {\n    ev.preventDefault();\n    state.Html.setLog(state, \"Processing\");\n    var styp = ev.dataTransfer.getData(state, \"styp\");\n    var skey = ev.dataTransfer.getData(state, \"skey\");\n    var sval = ev.dataTransfer.getData(state, \"sval\");\n    var srel = ev.dataTransfer.getData(state, \"srel\");\n    var ttyp = ev.target.getAttribute(state, \"ptyp\");\n    var tkey = ev.target.getAttribute(state, \"pkey\");\n    var tval = ev.target.getAttribute(state, \"pval\");\n    var trel = ev.target.getAttribute(state, \"prel\");\n    var reload = false; // matrix changed?\n\n    var tin, tid;\n\n    if (ttyp === state.Path.type.eye.ptyp) {\n      // ************ -> E Y E **************\n      if (styp === state.Path.type.path.ptyp) {\n        state.Path.moveKey(state, \"path\", skey, \"other\");\n      } else if (styp === state.Path.type.table.ptyp) {\n        reload = state.Path.moveKey(state, \"other\", skey, \"path\");\n      } else if (styp === state.Path.type.rest.ptyp) {\n        reload = state.Path.moveKey(state, \"other\", skey, \"path\");\n      } else if (styp === state.Path.type.trashRest.ptyp) {\n        state.Path.moveKey(state, \"trash\", skey, \"trash\", 0);\n      } else if (styp === state.Path.type.row.ptyp || styp === state.Path.type.col.ptyp) {} else if (styp === state.Path.type.item.ptyp) {} else if (styp === state.Path.type.rotate.ptyp) {}\n    } else if (ttyp === state.Path.type.trash.ptyp) {\n      // ************ -> T R A S H **************\n      tin = 0; // insert position\n\n      if (styp === state.Path.type.path.ptyp) {\n        reload = state.Path.moveKey(state, \"path\", skey, \"trash\", tin);\n      } else if (styp === state.Path.type.eye.ptyp) {} else if (styp === state.Path.type.table.ptyp) {\n        reload = state.Path.moveKey(state, \"other\", skey, \"trash\", tin);\n      } else if (styp === state.Path.type.rest.ptyp) {\n        state.Path.moveKey(state, \"other\", skey, \"trash\", tin);\n      } else if (styp === state.Path.type.trashRest.ptyp) {\n        if (state.Path.keyVal(state, skey) !== undefined) {\n          state.Path.select.val[skey] = \"\";\n          state.Path.select.where[skey] = \"\";\n          state.Path.select.cnt[skey] = 0;\n        } else {\n          reload = state.Path.moveKey(state, \"trash\", skey, \"trash\", tin);\n        }\n      } else if (styp === state.Path.type.col.ptyp || styp === state.Path.type.row.ptyp) {\n        // col/row -> trash\n        if (state.Path.trash.values[skey] === undefined) {\n          state.Path.trash.values[skey] = [];\n        }\n\n        ;\n        state.Path.trash.values[skey].push(sval); //console.log(\"Trashed:\",skey,sval)\n\n        reload = true;\n      } else if (styp === state.Path.type.item.ptyp) {\n        // trash -> item\n        state.Path.trash.level = sval; //console.log(\"Trashlevel:\",state.Path.trash.level);\n\n        reload = true;\n      } else if (styp === state.Path.type.rotate.ptyp) {\n        state.Layout.rotate = {};\n        reload = true;\n      }\n    } else if (ttyp === state.Path.type.trashRest.ptyp) {\n      // ************ -> T R A S H R E S T **************\n      tin = state.Path.keys.trash.indexOf(tkey);\n\n      if (styp === state.Path.type.path.ptyp) {\n        reload = state.Path.moveKey(state, \"path\", skey, \"trash\", tin + 1);\n      } else if (styp === state.Path.type.eye.ptyp) {} else if (styp === state.Path.type.table.ptyp) {\n        reload = state.Path.moveTableKey(state, skey, \"trash\", tin + 1);\n      } else if (styp === state.Path.type.rest.ptyp) {\n        state.Path.moveKey(state, \"other\", skey, \"trash\", tin + 1);\n      } else if (styp === state.Path.type.trash.ptyp) {\n        state.Path.moveAllFirst(state, \"trash\", tin + 1);\n      } else if (styp === state.Path.type.trashRest.ptyp) {\n        state.Path.moveKey(state, \"trash\", skey, \"trash\", tin);\n      } else if (styp === state.Path.type.col.ptyp || styp === state.Path.type.row.ptyp) {\n        // col/row -> trash\n        if (state.Path.trash.values[skey] === undefined) {\n          state.Path.trash.values[skey] = [];\n        }\n\n        ;\n        state.Path.trash.values[skey] = state.Path.trash.values[skey].concat(sval); //console.log(\"Trashed:\",skey,sval)\n\n        reload = true;\n      } else if (styp === state.Path.type.item.ptyp) {\n        // trash -> item\n        state.Path.trash.level = sval; //console.log(\"Trashlevel:\",state.Path.trash.level);\n\n        reload = true;\n      } else if (styp === state.Path.type.rotate.ptyp) {}\n    } else if (ttyp === state.Path.type.path.ptyp) {\n      // ************ -> P A T H **************\n      tid = state.Path.keys.path.indexOf(tkey);\n\n      if (styp === state.Path.type.path.ptyp) {\n        state.Path.moveKey(state, \"path\", skey, \"path\", tid);\n      } else if (styp === state.Path.type.eye.ptyp) {\n        reload = state.Path.moveAllKey(state, \"path\", skey, \"other\", 0);\n      } else if (styp === state.Path.type.table.ptyp) {\n        if (state.Path.keyVal(state, skey) !== undefined) {\n          // check if value is set\n          reload = state.Path.moveKey(state, \"other\", skey, \"path\", tid);\n        }\n      } else if (styp === state.Path.type.rest.ptyp) {\n        if (state.Path.keyVal(state, skey) !== undefined) {\n          // check if value is set\n          reload = state.Path.moveKey(state, \"other\", skey, \"path\", tid);\n        }\n      } else if (styp === state.Path.type.trash.ptyp) {\n        if (state.Path.keyVal(state, skey) !== undefined) {\n          // check if value is set\n          reload = state.Path.moveKey(state, \"trash\", skey, \"path\", tid);\n        }\n      }\n    } else if (ttyp === state.Path.type.table.ptyp) {\n      // ************ -> T A B L E **************\n      if (styp === state.Path.type.table.ptyp) {\n        // swap positions\n        reload = state.Path.swapTableKey(state, skey, tkey);\n      } else {\n        if (styp === state.Path.type.path.ptyp) {\n          reload = state.Path.moveKey2Table(state, \"path\", skey, tkey);\n        } else if (styp === state.Path.type.eye.ptyp) {\n          if (state.Path.checkNewPath(state, ttyp, tkey)) {//state.path.makeNewPath(state,typ,tid+1);\n            //reload=true;  // matrix has changed...\n          }\n        } else if (styp === state.Path.type.rest.ptyp) {\n          reload = state.Path.moveKey2Table(state, \"other\", skey, tkey);\n        } else if (styp === state.Path.type.trash.ptyp) {\n          reload = state.Path.moveTrash2Table(state, tkey);\n        } else if (styp === state.Path.type.trashRest.ptyp) {\n          reload = state.Path.moveKey2Table(state, \"trash\", skey, tkey);\n        } else if (styp === state.Path.type.trash.ptyp) {\n          state.Path.moveTrash(state, \"other\", tin + 1);\n        } else if (styp === state.Path.type.trashRest.ptyp) {\n          reload = state.Path.moveKey(state, \"trash\", skey, \"other\", tin + 1);\n        }\n      }\n    } else if (ttyp === state.Path.type.rest.ptyp) {\n      // ************ -> R E S T **************\t\n      tid = state.Path.other.rest.indexOf(tkey);\n      tin = state.Path.keys.other.indexOf(tkey);\n\n      if (styp === state.Path.type.path.ptyp) {\n        reload = state.Path.moveKey(state, \"path\", skey, \"other\", tin);\n      } else if (styp === state.Path.type.eye.ptyp) {\n        if (state.Path.checkNewPath(state, ttyp, tkey)) {//state.path.makeNewPath(state,typ,tid+1);\n          //reload=true;  // matrix has changed...\n        }\n      } else if (styp === state.Path.type.table.ptyp) {\n        reload = state.Path.moveTableKey(state, skey, \"other\", tin - 1); // shifts when table-key is removed...\n      } else if (styp === state.Path.type.rest.ptyp) {\n        state.Path.moveKey(state, \"other\", skey, \"other\", tin);\n      }\n    } else if (ttyp === state.Path.type.row.ptyp || // ************ -> R O W / C O L **************\n    ttyp === state.Path.type.col.ptyp) {\n      if (styp === state.Path.type.eye.ptyp) {\n        // eye -> col/row\n        delete state.Path.order[tkey];\n        reload = true;\n      } else if (styp === state.Path.type.trash.ptyp) {\n        // trash -> col/row\n        //delete state.Path.order[tkey];\n        state.Path.trash.values[tkey] = [];\n        reload = true;\n      } else if (styp === ttyp) {\n        // col/row -> col/row\n        if (state.Path.order === undefined) {\n          state.Path.order = {};\n        }\n\n        ;\n\n        if (state.Path.order[skey] === undefined) {\n          //console.log(\"Copying:\",JSON.stringify(state.Matrix.values[skey]));\n          state.Path.order[skey] = state.Utils.cp(this.values[skey]);\n        }\n\n        ;\n\n        if ((state, srel === \"first\" && trel === \"last\") || srel === \"last\" && trel === \"first\") {\n          state.Utils.invertArray(state.Path.order[skey]);\n\n          if (state.Path.order[skey][0] < state.Path.order[skey][Math.min(state.Path.order[skey].length, 1)]) {\n            if (state.Database.keyCnt[skey].num === \"num\") {\n              state.Database.keyCnt[skey].order = state.Database.nasc;\n            } else {\n              state.Database.keyCnt[skey].order = state.Database.casc;\n            }\n          } else {\n            if (state.Database.keyCnt[skey].num === \"num\") {\n              state.Database.keyCnt[skey].order = state.Database.ndes;\n            } else {\n              state.Database.keyCnt[skey].order = state.Database.cdes;\n            }\n          } //console.log(\"Sorting\",skey,\":\",state.Database.keyCnt[skey].order);\n\n        } else {\n          state.Utils.moveTo(state.Path.order[skey], sval, tval); //console.log(\"Order:\",JSON.stringify(state.Path.order[skey]),skey,sval,tval);\n        }\n\n        reload = true;\n      } else if (styp === state.Path.type.rotate.ptyp) {\n        console.log(\"Rotating \", tkey);\n\n        if (state.Layout.rotate === undefined) {\n          state.Layout.rotate = {};\n        }\n\n        ;\n\n        if (state.Layout.rotate || [tkey] === undefined || state.Layout.rotate || [tkey] === \"\") {\n          state.Layout.rotate[tkey] = 'rotate';\n        } else {\n          state.Layout.rotate[tkey] = \"\";\n        }\n\n        reload = true;\n      } else if (styp === state.Path.type.row.ptyp && ttyp === state.Path.type.col.ptyp) {\n        reload = state.Layout.changePriority(state, skey, tkey);\n      } else if (ttyp === state.Path.type.row.ptyp && styp === state.Path.type.col.ptyp) {\n        reload = state.Layout.changePriority(state, skey, tkey);\n      }\n    } else if (ttyp === state.Path.type.item.ptyp) {\n      // ************ -> I T E M **************\n      if (styp === state.Path.type.trash.ptyp) {\n        // trash -> item\n        state.Path.trash.level = undefined;\n        console.log(\"Trashlevel:\", state.Path.trash.level);\n      }\n    } else if (ttyp === state.Path.type.rotate.ptyp) {\n      // ************ -> R O T **************\n      if (styp === state.Path.type.col.ptyp) {\n        // col/row -> trash\n        if (state.Layout.rotate === undefined) {\n          state.Layout.rotate = {};\n        }\n\n        ;\n\n        if (state.Layout.rotate[skey] === undefined || state.Layout.rotate[skey] === \"\") {\n          state.Layout.rotate[skey] = 'rotate';\n        } else {\n          state.Layout.rotate[skey] = \"\";\n        }\n\n        reload = true;\n      }\n    } else {\n      console.log(\"Unknown type:\", ttyp, styp);\n    }\n\n    state.Show.showAll(state, reload);\n    state.Html.setLog(state);\n  };\n\n  this.dragStart = function (state, ev) {\n    var styp = ev.target.getAttribute(state, \"ptyp\");\n    var skey = ev.target.getAttribute(state, \"pkey\");\n    var sval = ev.target.getAttribute(state, \"pval\");\n    var srel = ev.target.getAttribute(state, \"prel\"); // // mark all possible destinations...\n    //if (styp  === state.Path.type.path.ptyp) {\n    //state.Colors.setPathBorderColor(state,state.Colors.colors.bo);\n    //};\n\n    ev.dataTransfer.setData(state, \"styp\", styp);\n    ev.dataTransfer.setData(state, \"skey\", skey);\n    ev.dataTransfer.setData(state, \"sval\", sval);\n    ev.dataTransfer.setData(state, \"srel\", srel);\n  };\n\n  this.dragEnd = function (state, ev) {//var styp = ev.dataTransfer.getData(state,\"styp\");\n    //var sey = ev.dataTransfer.getData(state,\"sey\");\n    //console.log(\"this.Dropped.\");\n    // // reset destination marks to default...\n    //if (styp  === \"path\" || styp  === \"trash\"){\n    //state.Colors.setPathBorderColor(state,state.Colors.colors.bg);\n    //}\n  };\n\n  this.onClickPath = function (state, ttyp, tid) {\n    var reload = false; // matrix changed?\n\n    var tkey, tin, src;\n\n    if (ttyp === \"path\") {\n      // path-> other\n      var len = state.Path.keys.path.length;\n\n      for (var ii = len - 1; ii >= tid; ii--) {\n        tkey = state.Path.keys.path.splice(ii, 1); // remove from path\n\n        console.log(\"ClickPath:\", JSON.stringify(tkey[0]), JSON.stringify(tkey[0].substring(state, 0, 1)));\n\n        if (tkey[0].substring(state, 0, 1) === \"_\") {\n          console.log(\"Omitting internal variable:\", tkey);\n        } else {\n          if (state.Utils.missing(state.Path.keys.other, tkey)) {\n            state.Path.keys.other = state.Path.keys.other.concat(tkey); // last position\n          }\n\n          ;\n\n          if (state.Layout.trash[tkey] === undefined) {\n            state.Layout.trash[tkey] = [];\n          }\n\n          ;\n          var trash = state.Layout.trash[tkey];\n          state.Path.moveKeys(state, \"trash\", trash, \"other\");\n\n          if (state.Layout.order[tkey] === undefined) {\n            state.Layout.order[tkey] = [];\n          }\n\n          ;\n          var order = state.Layout.order[tkey]; //console.log(\"*** Order:\",JSON.stringify(order));\n        }\n\n        state.Path.makeOrder(state, \"other\", order);\n      } //console.log(\"###Result:\",JSON.stringify(state.Path.keys.other));\n\n\n      reload = true; //console.log(\"Onclick other-all:\",JSON.stringify(setup));\n    } else {\n      // other -> path\n      if (ttyp === \"table\") {\n        // table -> path\n        tkey = state.Path.other.table[tid];\n        tin = state.Path.keys.other.indexOf(tkey);\n        console.log(\"Table-click:\", tid, tkey, tin, JSON.stringify(state.Path.keys.other));\n\n        if (tid === state.Path.other.table.length - 1 || // last element\n        state.Path.other.rest.length === 0) {\n          // no remaining elements\n          src = state.Path.keys.other.splice(tin, 1); // remove from other\n\n          if (state.Utils.missing(state.Path.keys.path, src) && state.Path.keyVal(state, tkey) !== undefined) {\n            // check if value is set\n            state.Path.keys.path = state.Path.keys.path.concat(src); // last position\n          } else if (state.Utils.missing(state.Path.keys.trash, src)) {\n            state.Utils.spliceArray(state.Path.keys.trash, 0, 0, src); // last position\n          }\n        } else {\n          // move first element\n          var tkey2 = state.Path.other.table[1]; // get last element\n\n          src = state.Path.keys.other.splice(tin, 1); // remove first element from path\n\n          if (state.Utils.missing(state.Path.keys.path, src) && state.Path.keyVal(state, tkey) !== undefined) {\n            // check if value is set\n            state.Path.keys.path = state.Path.keys.path.concat(src); // last position\n          } else if (state.Utils.missing(state.Path.keys.trash, src)) {\n            state.Utils.spliceArray(state.Path.keys.trash, 0, 0, src); // last position\n          }\n\n          ; // keep second element\n\n          var tin2 = state.Path.keys.other.indexOf(tkey2);\n          var src2 = state.Path.keys.other.splice(tin2, 1); // remove from path\n\n          if (state.Utils.missing(state.Path.keys.other, src2)) {\n            state.Utils.spliceArray(state.Path.keys.other, 1, 0, src2);\n          } //console.log(\"Kept:\",tin,tkey,JSON.stringify(state.Path.keys.other));\n\n        }\n\n        reload = true;\n      } else if (ttyp === \"rest\") {\n        // rest -> path\n        tkey = state.Path.other.rest[tid];\n        tin = state.Path.keys.other.indexOf(tkey);\n\n        if (state.Path.keyVal(state, tkey) !== undefined) {\n          // check if value is set\n          src = state.Path.keys.other.splice(tin, 1); // remove from path\n\n          if (state.Utils.missing(state.Path.keys.path, src)) {\n            state.Path.keys.path = state.Path.keys.path.concat(src); // last position\n          } else if (state.Utils.missing(state.Path.keys.trash, src)) {\n            state.Utils.spliceArray(state.Path.keys.trash, 0, 0, src); // last position\n          }\n\n          reload = true;\n        } else {\n          src = state.Path.keys.other.splice(tin, 1); // remove from path\n\n          if (state.Utils.missing(state.Path.keys.trash, src)) {\n            state.Utils.spliceArray(state.Path.keys.trash, 0, 0, src); // last position\n          }\n        }\n      } else if (ttyp === \"trash\") {\n        // trash -> path\n        tkey = state.Path.trash.rest[tid];\n\n        if (state.Path.keyVal(state, tkey) === undefined || !state.Utils.missing(state.Path.keys.path, tkey)) {\n          // no value is set\n          tin = state.Path.keys.trash.indexOf(tkey);\n          src = state.Path.keys.trash.splice(tin, 1); // remove from path\n\n          if (state.Utils.missing(state.Path.keys.other, src)) {\n            state.Path.keys.other = state.Path.keys.other.concat(src); // last position\n          } //console.log(\"Restored:\",JSON.stringify(state.Path.keys.other));\n\n\n          reload = state.Path.other.table.length < 2;\n        } else {\n          tin = state.Path.keys.trash.indexOf(tkey);\n          src = state.Path.keys.trash.splice(tin, 1); // remove from path\n\n          if (state.Utils.missing(state.Path.keys.path, src)) {\n            state.Path.keys.path = state.Path.keys.path.concat(src); // last position\n          }\n\n          ;\n          reload = true;\n        }\n      }\n    }\n\n    state.Show.showAll(state, reload);\n  };\n}\n\n;\nexport default Navigate;","map":{"version":3,"sources":["/home/franktt/react/varseltavle/src/lib/NavigateLib.js"],"names":["Navigate","dropCheck","state","ev","check","styp","dataTransfer","getData","skey","ttyp","target","getAttribute","tkey","Path","type","eye","ptyp","path","table","rest","keyVal","undefined","trashRest","row","col","item","rotate","trash","checkNewPath","preventDefault","onDropPath","tid","reload","tin","src","swapTableKey","moveKey2Table","moveTrash2Table","moveTrash","moveKey","len","keys","length","ii","splice","console","log","JSON","stringify","substring","Utils","missing","other","concat","Layout","moveKeys","order","makeOrder","indexOf","spliceArray","tkey2","tin2","src2","Show","showAll","drop","Html","setLog","sval","srel","tval","trel","select","val","where","cnt","values","push","level","moveTableKey","moveAllFirst","moveAllKey","cp","invertArray","Math","min","Database","keyCnt","num","nasc","casc","ndes","cdes","moveTo","changePriority","dragStart","setData","dragEnd","onClickPath"],"mappings":"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","sourcesContent":["//console.log(\"Loading NavigateLib.js\");\n    \nfunction Navigate() {\n    this.dropCheck=function(state,ev) {\n\tvar check;\n\tvar styp = ev.dataTransfer.getData(state,\"styp\");\n\tvar skey = ev.dataTransfer.getData(state,\"skey\");\n\t//var sval = ev.dataTransfer.getData(state,\"sval\");\n\t//var srel = ev.dataTransfer.getData(state,\"srel\");\n\tvar ttyp = ev.target.getAttribute(state,\"ptyp\");\n\tvar tkey = ev.target.getAttribute(state,\"pkey\");\n\t//var tval = ev.target.getAttribute(state,\"pval\");\n\t//var trel = ev.target.getAttribute(state,\"prel\");\n\tif (ttyp  === state.Path.type.eye.ptyp) { // ******************** E Y E **************\n\t    if (styp  === state.Path.type.path.ptyp) {\n\t\tcheck=true;\n\t    } else if (styp  === state.Path.type.table.ptyp ||\n\t\t       styp  === state.Path.type.rest.ptyp) {\n\t\t//console.log(\"Value:\",skey,state.Path.keyVal(state,skey));\n\t\tif (state.Path.keyVal(state,skey) !== undefined) {\n\t\t    check=true;\n\t\t} else {\n\t\t    check=false;\n\t\t}\n\t    } else if (styp  === state.Path.type.trashRest.ptyp ) {\n\t\tif (state.Path.keyVal(state,skey) !== undefined) {\n\t\t    check=true;\n\t\t} else {\n\t\t    check=false;\n\t\t}\n\t    } else if (styp  === state.Path.type.row.ptyp ||\n\t\t       styp  === state.Path.type.col.ptyp ||\n\t\t       styp  === state.Path.type.item.ptyp ||\n\t\t       styp  === state.Path.type.rotate.ptyp) {\n\t\tcheck=true;\n\t    } else {\n\t\tcheck=false;\n\t    }\n\t} else if (ttyp  === state.Path.type.trash.ptyp ||\n\t\t   ttyp  === state.Path.type.trashRest.ptyp) {  // ******************** T R A S H **************\n\t\tif (styp  === state.Path.type.path.ptyp  ||\n\t\t    styp  === state.Path.type.eye.ptyp   ||\n\t\t    styp  === state.Path.type.table.ptyp ||\n\t\t    styp  === state.Path.type.rest.ptyp ||\n\t\t    styp  === state.Path.type.trash.ptyp ||\n\t\t    styp  === state.Path.type.trashRest.ptyp ||\n\t\t    styp  === state.Path.type.col.ptyp ||\n\t\t    styp  === state.Path.type.row.ptyp ||\n\t\t    styp  === state.Path.type.item.ptyp ||\n\t\t    styp  === state.Path.type.rotate.ptyp) {\n\t\t    check=true;\n\t\t} else {\n\t\t    check=false;\n\t\t}\n\t} else if (ttyp  === state.Path.type.path.ptyp) {  // ******************** P A T H **************\n\t    if (styp  === state.Path.type.path.ptyp||\n\t\tstyp  === state.Path.type.eye.ptyp) {\n\t\tcheck=true;\n\t    } else if (styp  === state.Path.type.table.ptyp ||\n\t\t       styp  === state.Path.type.rest.ptyp) {\n\t\t//console.log(\"Value:\",skey,state.Path.keyVal(state,skey));\n\t\tif (state.Path.keyVal(state,skey) !== undefined) {\n\t\t    check=true;\n\t\t} else {\n\t\t    check=false;\n\t\t}\n\t    } else if (styp  === state.Path.type.trash.ptyp ) {\n\t\tcheck=true;\n\t    } else if (styp  === state.Path.type.trashRest.ptyp ) {\n\t\tif (state.Path.keyVal(state,skey) !== undefined) {\n\t\t    check=true;\n\t\t} else {\n\t\t    check=false;\n\t\t}\n\t    } else {\n\t\tcheck=false;\n\t    }\n\t} else if (ttyp  === state.Path.type.table.ptyp ||\n\t\t   ttyp  === state.Path.type.rest.ptyp) {  // ******************** T A B L E / R E S T **************\n\t\tif (styp  === state.Path.type.path.ptyp||\n\t\t    styp  === state.Path.type.rest.ptyp||\n\t\t    styp  === state.Path.type.table.ptyp||\n\t\t    styp  === state.Path.type.trash.ptyp) {\n\t\t    check=true;\n\t\t} else if (styp  === state.Path.type.eye.ptyp) {\n\t\t    check=state.Path.checkNewPath(state,ttyp,tkey);\n\t\t} else if (styp  === state.Path.type.trash.ptyp ) {\n\t\t    check=true;\n\t\t} else if (styp  === state.Path.type.trashRest.ptyp ) {\n\t\t    check=true;\n\t\t} else {\n\t\t    check=false;\n\t\t}\n\t} else if (ttyp  === state.Path.type.row.ptyp||\n\t\t   ttyp  === state.Path.type.col.ptyp||\n\t\t   ttyp  === state.Path.type.item.ptyp) {  // ******************** T A B L E **************\n\t\tif (styp  === state.Path.type.eye.ptyp ||\n\t\t    styp  === state.Path.type.trash.ptyp) {\n\t\t    check=true;\n\t\t} else if (styp  === state.Path.type.trash.ptyp ) {\n\t\t    check=true;\n\t\t} else if (styp  === state.Path.type.rotate.ptyp ) {\n\t\t    check=true;\n\t\t} else if (styp  === ttyp) {\n\t\t    check=true;\n\t\t} else if (styp  ===  state.Path.type.row.ptyp && ttyp  ===  state.Path.type.col.ptyp) {\n\t\t    check=true;\n\t\t} else if (ttyp  ===  state.Path.type.row.ptyp && styp  ===  state.Path.type.col.ptyp) {\n\t\t    check=true;\n\t\t} else {\n\t\t    check=false;\n\t\t}\n\t} else if (ttyp  === state.Path.type.rotate.ptyp) {  // ******************** R O T A T E **************\n\t    if (styp  === state.Path.type.col.ptyp) {\n\t\tcheck=true;\n\t    } else {\n\t\tcheck=false;\n\t    }\n\t} else {\n\t    check=false;\n\t}\n\t//console.log(\"Checking  styp=\",styp,\"  ttyp=\",ttyp,\" check=\",check);\n\tif (check) {\n\t    ev.preventDefault(); // this.drop check\n\t}\n    };\n    this.onDropPath=function(state,ttyp,tid) {\n\tvar reload=false; // matrix changed?\n\tvar tkey,tin,src;\n\tif (ttyp  === \"path\") { // path-> other\n\t    \n\n\n\n\n\n\t    if (styp  === state.Path.type.table.ptyp) { // swap positions\n\t\treload=state.Path.swapTableKey(state,skey,tkey);\n\t    } else {\n\t\tif (styp  === state.Path.type.path.ptyp) {\n\t\t    reload=state.Path.moveKey2Table(state,\"path\",skey,tkey);\n\t\t} else if (styp  === state.Path.type.eye.ptyp) {\n\t\t    if (state.Path.checkNewPath(state,ttyp,tkey)) {\n\t\t\t//state.path.makeNewPath(state,typ,tid+1);\n\t\t\t//reload=true;  // matrix has changed...\n\t\t    }\n\t\t} else if (styp  === state.Path.type.rest.ptyp) {\n\t\t    reload=state.Path.moveKey2Table(state,\"other\",skey,tkey);\t\t\n\t\t} else if (styp  === state.Path.type.trash.ptyp) {\n\t\t    reload=state.Path.moveTrash2Table(state,tkey);\t\t\n\t\t} else if (styp  === state.Path.type.trashRest.ptyp) {\n\t\t    reload=state.Path.moveKey2Table(state,\"trash\",skey,tkey);\t\t\n\t\t} else if (styp  === state.Path.type.trash.ptyp) {\n\t\t    state.Path.moveTrash(state,\"other\",tin+1);\n\t\t} else if (styp  === state.Path.type.trashRest.ptyp) {\n\t\t    reload=state.Path.moveKey(state,\"trash\",skey,\"other\",tin+1);\n\t\t}\n\t    }\n\n\n\n\n\n\n\n\n\n\n\n\n\tif (ttyp  === \"path\") { // path-> other\n\t    var len=state.Path.keys.path.length\n\t    for (var ii = len-1;ii>=tid;ii--) {\n\t\ttkey=state.Path.keys.path.splice(ii, 1);    // remove from path\n\t\tconsole.log(\"ClickPath:\",JSON.stringify(tkey[0]),JSON.stringify(tkey[0].substring(state,0,1)));\n\t\tif (tkey[0].substring(state,0,1) === \"_\") {\n\t\t    console.log(\"Omitting internal variable:\",tkey);\n\t\t} else {\n\t\t    if (state.Utils.missing(state.Path.keys.other,tkey)) {\n\t\t\tstate.Path.keys.other=state.Path.keys.other.concat(tkey);         // last position\n\t\t    };\n\t\t    if (state.Layout.trash[tkey]  === undefined) {state.Layout.trash[tkey]=[];};\n\t\t    var trash=state.Layout.trash[tkey];\n\t\t    state.Path.moveKeys(state,\"trash\",trash,\"other\");\n\t\t    if (state.Layout.order[tkey]  === undefined) {state.Layout.order[tkey]=[];};\n\t\t    var order=state.Layout.order[tkey];\n\t\t    //console.log(\"*** Order:\",JSON.stringify(order));\n\t\t}\n\t\tstate.Path.makeOrder(state,\"other\",order);\n\t    }\n\t    //console.log(\"###Result:\",JSON.stringify(state.Path.keys.other));\n\t    reload=true;\n\t    //console.log(\"Onclick other-all:\",JSON.stringify(setup));\n\t} else {              // other -> path\n\t    if (ttyp  === \"table\") { // table -> path\n\t\ttkey=state.Path.other.table[tid];\n\t\ttin=state.Path.keys.other.indexOf(tkey);\n\t\tconsole.log(\"Table-click:\",tid,tkey,tin,JSON.stringify(state.Path.keys.other));\n\t\tif (tid  === state.Path.other.table.length-1 || // last element\n\t\t    state.Path.other.rest.length  === 0 ){       // no remaining elements\n\t\t    src=state.Path.keys.other.splice(tin, 1);    // remove from other\n\t\t    if (state.Utils.missing(state.Path.keys.path,src)&& state.Path.keyVal(state,tkey) !== undefined) { // check if value is set\n\t\t\tstate.Path.keys.path=state.Path.keys.path.concat(src);         // last position\n\t\t    } else if (state.Utils.missing(state.Path.keys.trash,src)) {\n\t\t\tstate.Utils.spliceArray(state.Path.keys.trash,0,0,src);         // last position\n\t\t    }\n\t\t} else { // move first element\n\t\t    var tkey2=state.Path.other.table[1];           // get last element\n\t\t    src=state.Path.keys.other.splice(tin, 1);   // remove first element from path\n\t\t    if (state.Utils.missing(state.Path.keys.path,src) && state.Path.keyVal(state,tkey) !== undefined) { // check if value is set\n\t\t\tstate.Path.keys.path=state.Path.keys.path.concat(src);         // last position\n\t\t    } else if (state.Utils.missing(state.Path.keys.trash,src)) {\n\t\t\tstate.Utils.spliceArray(state.Path.keys.trash,0,0,src);         // last position\n\t\t    };\n\t\t    // keep second element\n\t\t    var tin2=state.Path.keys.other.indexOf(tkey2);\n\t\t    var src2=state.Path.keys.other.splice(tin2, 1);    // remove from path\n\t\t    if (state.Utils.missing(state.Path.keys.other,src2)) {\n\t\t\tstate.Utils.spliceArray(state.Path.keys.other,1,0,src2);\n\t\t    }\n\t\t    //console.log(\"Kept:\",tin,tkey,JSON.stringify(state.Path.keys.other));\n\t\t}\n\t\treload=true;\n\t    } else if (ttyp  === \"rest\") {  // rest -> path\n\t\ttkey=state.Path.other.rest[tid];\n\t\ttin=state.Path.keys.other.indexOf(tkey);\n\t\tif (state.Path.keyVal(state,tkey) !== undefined) { // check if value is set\n\t\t    src=state.Path.keys.other.splice(tin, 1);    // remove from path\n\t\t    if (state.Utils.missing(state.Path.keys.path,src)) {\n\t\t\tstate.Path.keys.path=state.Path.keys.path.concat(src);         // last position\n\t\t    } else if (state.Utils.missing(state.Path.keys.trash,src)) {\n\t\t\tstate.Utils.spliceArray(state.Path.keys.trash,0,0,src);         // last position\n\t\t    }\n\t\t    reload=true;\n\t\t} else {\n\t\t    src=state.Path.keys.other.splice(tin, 1);    // remove from path\n\t\t    if (state.Utils.missing(state.Path.keys.trash,src)) {\n\t\t\tstate.Utils.spliceArray(state.Path.keys.trash,0,0,src);         // last position\n\t\t    }\n\t\t}\n\t    } else if (ttyp  === \"trash\") { // trash -> path\n\t\ttkey=state.Path.trash.rest[tid];\n\t\tif (state.Path.keyVal(state,tkey)  === undefined || !state.Utils.missing(state.Path.keys.path,tkey)) { // no value is set\n\t\t    tin=state.Path.keys.trash.indexOf(tkey);\n\t\t    src=state.Path.keys.trash.splice(tin, 1);    // remove from path\n\t\t    if (state.Utils.missing(state.Path.keys.other,src)) {\n\t\t\tstate.Path.keys.other=state.Path.keys.other.concat(src);         // last position\n\t\t    }\n\t\t    //console.log(\"Restored:\",JSON.stringify(state.Path.keys.other));\n\t\t    reload=(state.Path.other.table.length<2);\n\t\t} else {\n\t\t    tin=state.Path.keys.trash.indexOf(tkey);\n\t\t    src=state.Path.keys.trash.splice(tin, 1);    // remove from path\n\t\t    if (state.Utils.missing(state.Path.keys.path,src)) {\n\t\t\tstate.Path.keys.path=state.Path.keys.path.concat(src);         // last position\n\t\t    };\n\t\t    reload=true;\n\t\t}\n\t    }\n\t}\n\tstate.Show.showAll(state,reload);\n    }\n    };\n    this.drop=function(state,ev) {\n\tev.preventDefault();\n\tstate.Html.setLog(state,\"Processing\");\n\tvar styp = ev.dataTransfer.getData(state,\"styp\");\n\tvar skey = ev.dataTransfer.getData(state,\"skey\");\n\tvar sval = ev.dataTransfer.getData(state,\"sval\");\n\tvar srel = ev.dataTransfer.getData(state,\"srel\");\n\tvar ttyp = ev.target.getAttribute(state,\"ptyp\");\n\tvar tkey = ev.target.getAttribute(state,\"pkey\");\n\tvar tval = ev.target.getAttribute(state,\"pval\");\n\tvar trel = ev.target.getAttribute(state,\"prel\");\n\tvar reload=false; // matrix changed?\n\tvar tin,tid;\n\tif (ttyp  === state.Path.type.eye.ptyp) { // ************ -> E Y E **************\n\t    if (styp  === state.Path.type.path.ptyp) { \n\t\tstate.Path.moveKey(state,\"path\",skey,\"other\");\n\t    } else if (styp  === state.Path.type.table.ptyp) {\n\t\treload=state.Path.moveKey(state,\"other\",skey,\"path\");\n\t    } else if (styp  === state.Path.type.rest.ptyp) { \n\t\treload=state.Path.moveKey(state,\"other\",skey,\"path\");\n\t    } else if (styp  === state.Path.type.trashRest.ptyp ) {\n\t\tstate.Path.moveKey(state,\"trash\",skey,\"trash\",0);\n\t    } else if (styp  === state.Path.type.row.ptyp ||\n\t\t       styp  === state.Path.type.col.ptyp) {\n\t    } else if (styp  === state.Path.type.item.ptyp) {\n\t    } else if (styp  === state.Path.type.rotate.ptyp) {\n\t    }\n\t} else if (ttyp  === state.Path.type.trash.ptyp) {  // ************ -> T R A S H **************\n\t    tin=0; // insert position\n\t    if (styp  === state.Path.type.path.ptyp) {\n\t\treload=state.Path.moveKey(state,\"path\",skey,\"trash\",tin);\n\t    } else if (styp  === state.Path.type.eye.ptyp) {\n\t    } else if (styp  === state.Path.type.table.ptyp) {\n\t\treload=state.Path.moveKey(state,\"other\",skey,\"trash\",tin);\n\t    } else if (styp  === state.Path.type.rest.ptyp) {\n\t\tstate.Path.moveKey(state,\"other\",skey,\"trash\",tin);\n\t    } else if (styp  === state.Path.type.trashRest.ptyp) {\n\t\tif (state.Path.keyVal(state,skey) !== undefined) {\n\t\t    state.Path.select.val[skey]=\"\";\n\t\t    state.Path.select.where[skey]=\"\";\n\t\t    state.Path.select.cnt[skey]=0;\n\t\t} else {\n\t\t    reload=state.Path.moveKey(state,\"trash\",skey,\"trash\",tin);\n\t\t}\n\t    } else if (styp  === state.Path.type.col.ptyp ||\n\t\t       styp  === state.Path.type.row.ptyp) { // col/row -> trash\n\t\t    if (state.Path.trash.values[skey]  === undefined) {\n\t\t\tstate.Path.trash.values[skey]=[];\n\t\t    };\n\t\tstate.Path.trash.values[skey].push(sval);\n\t\t//console.log(\"Trashed:\",skey,sval)\n\t\treload=true;\n\t    } else if (styp  === state.Path.type.item.ptyp) { // trash -> item\n\t\tstate.Path.trash.level=sval;\n\t\t//console.log(\"Trashlevel:\",state.Path.trash.level);\n\t\treload=true;\n\t    } else if (styp  === state.Path.type.rotate.ptyp) {\n\t\tstate.Layout.rotate={};\n\t\treload=true;\n\t    }\n\t} else if (ttyp  === state.Path.type.trashRest.ptyp) {// ************ -> T R A S H R E S T **************\n\t    tin=state.Path.keys.trash.indexOf(tkey);\n\t    if (styp  === state.Path.type.path.ptyp) {\n\t\treload=state.Path.moveKey(state,\"path\",skey,\"trash\",tin+1);\n\t    } else if (styp  === state.Path.type.eye.ptyp) {\n\t    } else if (styp  === state.Path.type.table.ptyp) {\n\t\treload=state.Path.moveTableKey(state,skey,\"trash\",tin+1);\n\t    } else if (styp  === state.Path.type.rest.ptyp) {\n\t\tstate.Path.moveKey(state,\"other\",skey,\"trash\",tin+1);\n\t    } else if (styp  === state.Path.type.trash.ptyp) {\n\t\tstate.Path.moveAllFirst(state,\"trash\",tin+1);\n\t    } else if (styp  === state.Path.type.trashRest.ptyp) {\n\t\tstate.Path.moveKey(state,\"trash\",skey,\"trash\",tin);\n\t    } else if (styp  === state.Path.type.col.ptyp ||\n\t\t       styp  === state.Path.type.row.ptyp) { // col/row -> trash\n\t\t    if (state.Path.trash.values[skey]  === undefined) {state.Path.trash.values[skey]=[];};\n\t\tstate.Path.trash.values[skey]=state.Path.trash.values[skey].concat(sval);\n\t\t//console.log(\"Trashed:\",skey,sval)\n\t\treload=true;\n\t    } else if (styp  === state.Path.type.item.ptyp) { // trash -> item\n\t\tstate.Path.trash.level=sval;\n\t\t//console.log(\"Trashlevel:\",state.Path.trash.level);\n\t\treload=true;\n\t    } else if (styp  === state.Path.type.rotate.ptyp) {\n\t    }\n\t} else if (ttyp  === state.Path.type.path.ptyp) {    // ************ -> P A T H **************\n\t    tid=state.Path.keys.path.indexOf(tkey);\n\t    if (styp  === state.Path.type.path.ptyp) {\n\t\tstate.Path.moveKey(state,\"path\",skey,\"path\",tid);\n\t    } else if (styp  === state.Path.type.eye.ptyp) {\n\t\treload=state.Path.moveAllKey(state,\"path\",skey,\"other\",0);\n\t    } else if (styp  === state.Path.type.table.ptyp) {\n\t\tif (state.Path.keyVal(state,skey) !== undefined) { // check if value is set\n\t\t    reload=state.Path.moveKey(state,\"other\",skey,\"path\",tid);\n\t\t}\n\t    } else if (styp  === state.Path.type.rest.ptyp) {\n\t\tif (state.Path.keyVal(state,skey) !== undefined) { // check if value is set\n\t\t    reload=state.Path.moveKey(state,\"other\",skey,\"path\",tid);\n\t\t}\n\t    } else if (styp  === state.Path.type.trash.ptyp ) {\t\n\t\tif (state.Path.keyVal(state,skey) !== undefined) { // check if value is set\n\t\t    reload=state.Path.moveKey(state,\"trash\",skey,\"path\",tid);\n\t\t}\n\t    }\n\t} else if (ttyp  === state.Path.type.table.ptyp) {// ************ -> T A B L E **************\n\t    if (styp  === state.Path.type.table.ptyp) { // swap positions\n\t\treload=state.Path.swapTableKey(state,skey,tkey);\n\t    } else {\n\t\tif (styp  === state.Path.type.path.ptyp) {\n\t\t    reload=state.Path.moveKey2Table(state,\"path\",skey,tkey);\n\t\t} else if (styp  === state.Path.type.eye.ptyp) {\n\t\t    if (state.Path.checkNewPath(state,ttyp,tkey)) {\n\t\t\t//state.path.makeNewPath(state,typ,tid+1);\n\t\t\t//reload=true;  // matrix has changed...\n\t\t    }\n\t\t} else if (styp  === state.Path.type.rest.ptyp) {\n\t\t    reload=state.Path.moveKey2Table(state,\"other\",skey,tkey);\t\t\n\t\t} else if (styp  === state.Path.type.trash.ptyp) {\n\t\t    reload=state.Path.moveTrash2Table(state,tkey);\t\t\n\t\t} else if (styp  === state.Path.type.trashRest.ptyp) {\n\t\t    reload=state.Path.moveKey2Table(state,\"trash\",skey,tkey);\t\t\n\t\t} else if (styp  === state.Path.type.trash.ptyp) {\n\t\t    state.Path.moveTrash(state,\"other\",tin+1);\n\t\t} else if (styp  === state.Path.type.trashRest.ptyp) {\n\t\t    reload=state.Path.moveKey(state,\"trash\",skey,\"other\",tin+1);\n\t\t}\n\t    }\n\t} else if (ttyp  === state.Path.type.rest.ptyp) { // ************ -> R E S T **************\t\n\t    tid=state.Path.other.rest.indexOf(tkey);\n\t    tin=state.Path.keys.other.indexOf(tkey);\n\t    if (styp  === state.Path.type.path.ptyp) {\n\t\treload=state.Path.moveKey(state,\"path\",skey,\"other\",tin);\n\t    } else if (styp  === state.Path.type.eye.ptyp) {\n\t\tif (state.Path.checkNewPath(state,ttyp,tkey)) {\n\t\t    //state.path.makeNewPath(state,typ,tid+1);\n\t\t    //reload=true;  // matrix has changed...\n\t\t}\n\t    } else if (styp  === state.Path.type.table.ptyp) {\n\t\treload=state.Path.moveTableKey(state,skey,\"other\",tin-1); // shifts when table-key is removed...\n\t    } else if (styp  === state.Path.type.rest.ptyp) {\n\t\tstate.Path.moveKey(state,\"other\",skey,\"other\",tin);\n\t    }\n\t} else if (ttyp  === state.Path.type.row.ptyp|| // ************ -> R O W / C O L **************\n\t\t   ttyp  === state.Path.type.col.ptyp) {\n\t    if (styp  === state.Path.type.eye.ptyp) { // eye -> col/row\n\t\tdelete state.Path.order[tkey];\n\t\treload=true;\n\t    } else if (styp  === state.Path.type.trash.ptyp) { // trash -> col/row\n\t\t//delete state.Path.order[tkey];\n\t\tstate.Path.trash.values[tkey]=[];\n\t\treload=true;\n\t    } else if (styp  === ttyp) { // col/row -> col/row\n\t\tif (state.Path.order  === undefined) {state.Path.order={};};\n\t\tif (state.Path.order[skey]  === undefined) {\n\t\t    //console.log(\"Copying:\",JSON.stringify(state.Matrix.values[skey]));\n\t\t    state.Path.order[skey]=state.Utils.cp(this.values[skey]);\n\t\t};\n\t\tif ((state,srel  === \"first\" && trel  === \"last\" ) || \n\t\t    (srel  === \"last\" && trel  === \"first\" )) {\n\t\t    state.Utils.invertArray(state.Path.order[skey]);\n\t\t    if (state.Path.order[skey][0] < state.Path.order[skey][Math.min(state.Path.order[skey].length,1)]) {\n\t\t\tif (state.Database.keyCnt[skey].num === \"num\") {\n\t\t\t    state.Database.keyCnt[skey].order=state.Database.nasc;\n\t\t\t} else {\n\t\t\t    state.Database.keyCnt[skey].order=state.Database.casc;\n\t\t\t}\n\t\t    } else {\n\t\t\tif (state.Database.keyCnt[skey].num === \"num\") {\n\t\t\t    state.Database.keyCnt[skey].order=state.Database.ndes;\n\t\t\t} else {\n\t\t\t    state.Database.keyCnt[skey].order=state.Database.cdes;\n\t\t\t}\n\t\t    }\n\t\t    //console.log(\"Sorting\",skey,\":\",state.Database.keyCnt[skey].order);\n\t\t} else {\n\t\t    state.Utils.moveTo(state.Path.order[skey],sval,tval);\n\t\t    //console.log(\"Order:\",JSON.stringify(state.Path.order[skey]),skey,sval,tval);\n\t\t}\n\t\treload=true;\n\t    } else if (styp  === state.Path.type.rotate.ptyp) {\n\t\tconsole.log(\"Rotating \",tkey);\n\t\tif (state.Layout.rotate  === undefined) {state.Layout.rotate ={};};\n\t\tif (state.Layout.rotate||[tkey]  === undefined || state.Layout.rotate||[tkey]  === \"\") {\n\t\t    state.Layout.rotate[tkey]='rotate';\n\t\t} else {\n\t\t    state.Layout.rotate[tkey]=\"\";\n\t\t}\n\t\treload=true;\n\t    } else if (styp  ===  state.Path.type.row.ptyp && ttyp  ===  state.Path.type.col.ptyp) {\n\t\treload=state.Layout.changePriority(state,skey,tkey);\n\t    } else if (ttyp  ===  state.Path.type.row.ptyp && styp  ===  state.Path.type.col.ptyp) {\n\t\treload=state.Layout.changePriority(state,skey,tkey);\n\t    }\n\t} else if (ttyp  === state.Path.type.item.ptyp) { // ************ -> I T E M **************\n\t    if (styp  === state.Path.type.trash.ptyp) { // trash -> item\n\t\tstate.Path.trash.level=undefined;\n\t\tconsole.log(\"Trashlevel:\",state.Path.trash.level);\n\n\t    }\n\t} else if (ttyp  === state.Path.type.rotate.ptyp) { // ************ -> R O T **************\n\t    if (styp  === state.Path.type.col.ptyp) { // col/row -> trash\n\t\tif (state.Layout.rotate  === undefined) {state.Layout.rotate ={};};\n\t\tif (state.Layout.rotate[skey]  === undefined || state.Layout.rotate[skey]  === \"\") {\n\t\t    state.Layout.rotate[skey]='rotate';\n\t\t} else {\n\t\t    state.Layout.rotate[skey]=\"\";\n\t\t}\n\t\treload=true;\n\t    }\n\t} else {\n\t    console.log(\"Unknown type:\",ttyp,styp);\n\t}\n\tstate.Show.showAll(state,reload);\n\tstate.Html.setLog(state);\n    };\n    this.dragStart=function(state,ev) {\n\tvar styp=ev.target.getAttribute(state,\"ptyp\");\n\tvar skey=ev.target.getAttribute(state,\"pkey\");\n\tvar sval=ev.target.getAttribute(state,\"pval\");\n\tvar srel=ev.target.getAttribute(state,\"prel\");\n\t// // mark all possible destinations...\n\t//if (styp  === state.Path.type.path.ptyp) {\n\t//state.Colors.setPathBorderColor(state,state.Colors.colors.bo);\n\t//};\n\tev.dataTransfer.setData(state,\"styp\",styp);\n\tev.dataTransfer.setData(state,\"skey\",skey);\n\tev.dataTransfer.setData(state,\"sval\",sval);\n\tev.dataTransfer.setData(state,\"srel\",srel);\n    };\n    this.dragEnd=function(state,ev) {\n\t//var styp = ev.dataTransfer.getData(state,\"styp\");\n\t//var sey = ev.dataTransfer.getData(state,\"sey\");\n\t//console.log(\"this.Dropped.\");\n\t// // reset destination marks to default...\n\t//if (styp  === \"path\" || styp  === \"trash\"){\n\t//state.Colors.setPathBorderColor(state,state.Colors.colors.bg);\n\t//}\n    };\n    this.onClickPath=function(state,ttyp,tid) {\n\tvar reload=false; // matrix changed?\n\tvar tkey,tin,src;\n\tif (ttyp  === \"path\") { // path-> other\n\t    var len=state.Path.keys.path.length\n\t    for (var ii = len-1;ii>=tid;ii--) {\n\t\ttkey=state.Path.keys.path.splice(ii, 1);    // remove from path\n\t\tconsole.log(\"ClickPath:\",JSON.stringify(tkey[0]),JSON.stringify(tkey[0].substring(state,0,1)));\n\t\tif (tkey[0].substring(state,0,1) === \"_\") {\n\t\t    console.log(\"Omitting internal variable:\",tkey);\n\t\t} else {\n\t\t    if (state.Utils.missing(state.Path.keys.other,tkey)) {\n\t\t\tstate.Path.keys.other=state.Path.keys.other.concat(tkey);         // last position\n\t\t    };\n\t\t    if (state.Layout.trash[tkey]  === undefined) {state.Layout.trash[tkey]=[];};\n\t\t    var trash=state.Layout.trash[tkey];\n\t\t    state.Path.moveKeys(state,\"trash\",trash,\"other\");\n\t\t    if (state.Layout.order[tkey]  === undefined) {state.Layout.order[tkey]=[];};\n\t\t    var order=state.Layout.order[tkey];\n\t\t    //console.log(\"*** Order:\",JSON.stringify(order));\n\t\t}\n\t\tstate.Path.makeOrder(state,\"other\",order);\n\t    }\n\t    //console.log(\"###Result:\",JSON.stringify(state.Path.keys.other));\n\t    reload=true;\n\t    //console.log(\"Onclick other-all:\",JSON.stringify(setup));\n\t} else {              // other -> path\n\t    if (ttyp  === \"table\") { // table -> path\n\t\ttkey=state.Path.other.table[tid];\n\t\ttin=state.Path.keys.other.indexOf(tkey);\n\t\tconsole.log(\"Table-click:\",tid,tkey,tin,JSON.stringify(state.Path.keys.other));\n\t\tif (tid  === state.Path.other.table.length-1 || // last element\n\t\t    state.Path.other.rest.length  === 0 ){       // no remaining elements\n\t\t    src=state.Path.keys.other.splice(tin, 1);    // remove from other\n\t\t    if (state.Utils.missing(state.Path.keys.path,src)&& state.Path.keyVal(state,tkey) !== undefined) { // check if value is set\n\t\t\tstate.Path.keys.path=state.Path.keys.path.concat(src);         // last position\n\t\t    } else if (state.Utils.missing(state.Path.keys.trash,src)) {\n\t\t\tstate.Utils.spliceArray(state.Path.keys.trash,0,0,src);         // last position\n\t\t    }\n\t\t} else { // move first element\n\t\t    var tkey2=state.Path.other.table[1];           // get last element\n\t\t    src=state.Path.keys.other.splice(tin, 1);   // remove first element from path\n\t\t    if (state.Utils.missing(state.Path.keys.path,src) && state.Path.keyVal(state,tkey) !== undefined) { // check if value is set\n\t\t\tstate.Path.keys.path=state.Path.keys.path.concat(src);         // last position\n\t\t    } else if (state.Utils.missing(state.Path.keys.trash,src)) {\n\t\t\tstate.Utils.spliceArray(state.Path.keys.trash,0,0,src);         // last position\n\t\t    };\n\t\t    // keep second element\n\t\t    var tin2=state.Path.keys.other.indexOf(tkey2);\n\t\t    var src2=state.Path.keys.other.splice(tin2, 1);    // remove from path\n\t\t    if (state.Utils.missing(state.Path.keys.other,src2)) {\n\t\t\tstate.Utils.spliceArray(state.Path.keys.other,1,0,src2);\n\t\t    }\n\t\t    //console.log(\"Kept:\",tin,tkey,JSON.stringify(state.Path.keys.other));\n\t\t}\n\t\treload=true;\n\t    } else if (ttyp  === \"rest\") {  // rest -> path\n\t\ttkey=state.Path.other.rest[tid];\n\t\ttin=state.Path.keys.other.indexOf(tkey);\n\t\tif (state.Path.keyVal(state,tkey) !== undefined) { // check if value is set\n\t\t    src=state.Path.keys.other.splice(tin, 1);    // remove from path\n\t\t    if (state.Utils.missing(state.Path.keys.path,src)) {\n\t\t\tstate.Path.keys.path=state.Path.keys.path.concat(src);         // last position\n\t\t    } else if (state.Utils.missing(state.Path.keys.trash,src)) {\n\t\t\tstate.Utils.spliceArray(state.Path.keys.trash,0,0,src);         // last position\n\t\t    }\n\t\t    reload=true;\n\t\t} else {\n\t\t    src=state.Path.keys.other.splice(tin, 1);    // remove from path\n\t\t    if (state.Utils.missing(state.Path.keys.trash,src)) {\n\t\t\tstate.Utils.spliceArray(state.Path.keys.trash,0,0,src);         // last position\n\t\t    }\n\t\t}\n\t    } else if (ttyp  === \"trash\") { // trash -> path\n\t\ttkey=state.Path.trash.rest[tid];\n\t\tif (state.Path.keyVal(state,tkey)  === undefined || !state.Utils.missing(state.Path.keys.path,tkey)) { // no value is set\n\t\t    tin=state.Path.keys.trash.indexOf(tkey);\n\t\t    src=state.Path.keys.trash.splice(tin, 1);    // remove from path\n\t\t    if (state.Utils.missing(state.Path.keys.other,src)) {\n\t\t\tstate.Path.keys.other=state.Path.keys.other.concat(src);         // last position\n\t\t    }\n\t\t    //console.log(\"Restored:\",JSON.stringify(state.Path.keys.other));\n\t\t    reload=(state.Path.other.table.length<2);\n\t\t} else {\n\t\t    tin=state.Path.keys.trash.indexOf(tkey);\n\t\t    src=state.Path.keys.trash.splice(tin, 1);    // remove from path\n\t\t    if (state.Utils.missing(state.Path.keys.path,src)) {\n\t\t\tstate.Path.keys.path=state.Path.keys.path.concat(src);         // last position\n\t\t    };\n\t\t    reload=true;\n\t\t}\n\t    }\n\t}\n\tstate.Show.showAll(state,reload);\n    }\n};\nexport default Navigate;\n"]},"metadata":{},"sourceType":"module"}