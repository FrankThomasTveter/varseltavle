{"ast":null,"code":"//console.log(\"Loading Table1DLib.js\");\nfunction Table0D() {\n  this.Show = function (state, matrix, item, skeys, colkey, colvalues, rowkey, rowvalues, cellMode) {\n    if (matrix[\"\"] !== undefined && matrix[\"\"][\"\"] !== undefined) {\n      var element = matrix[\"\"][\"\"];\n\n      if (cellMode === state.Show.code.mSum) {\n        //console.log(\"addSingle Found matrix element...\",JSON.stringify(m));\n        if (element.cnt > 0) {\n          // we have some data\n          var row = document.createElement(\"TR\");\n          this.appendHeaderRow0D(state, element, row, skeys);\n          item.appendChild(row);\n          var docs = element.docs;\n          var dlen = docs.length;\n\n          for (var ii = 0; ii < dlen; ii++) {\n            var doc = docs[ii];\n            row = document.createElement(\"TR\");\n            this.appendDataRow0D(state, row, doc, skeys);\n            item.appendChild(row);\n          }\n\n          if (element.cnt > state.Matrix.limit) {\n            // some docs were omitted...\n            row = document.createElement(\"TR\");\n            state.Html.appendDataLine(state, row, \"Too much data...(state,\" + element.cnt + \")\", \"lightgray\", 100);\n            item.appendChild(row);\n          }\n        } else {\n          // no data\n          //console.log(\"addSingle No data found...\");\n          var row = document.createElement(\"TR\");\n          state.Html.appendDataElement(state, row, \"No available data...\", \"orange\");\n          item.appendChild(row);\n        }\n      } else {\n        var row = document.createElement(\"TR\");\n        this.appendSeriesRow0D(state, matrix, row);\n        item.appendChild(row);\n      }\n    } else {\n      // no valid matrix\n      //console.log(\"addSingle No matrix element found...\");\n      var row = document.createElement(\"TR\");\n      state.Html.appendDataElement(state, row, \"No data\", \"red\");\n      item.appendChild(row);\n    }\n  };\n\n  this.appendHeaderRow0D = function (state, matrix, row, skeys) {\n    //console.log(\"addSingle Found keys...\",JSON.stringify(setup),JSON.stringify(state.Matrix.keyCnt));\n    // make header\n    var klen = skeys.length;\n\n    for (var jj = 0; jj < klen; jj++) {\n      var key = skeys[jj];\n      state.Html.appendHeaderElement(state, row, key);\n    }\n  };\n\n  this.appendDataRow0D = function (state, row, doc, skeys) {\n    state.Threshold.setGThr(state, doc);\n    var level = state.Threshold.getLevel(state, doc);\n    var color = state.Colors.getLevelColor(state, level);\n    var klen = skeys.length;\n\n    for (var jj = 0; jj < klen; jj++) {\n      state.Html.appendDataElement(state, row, doc[skeys[jj]], color, \"\", \"\");\n    }\n  };\n\n  this.appendSeriesRow0D = function (state, matrix, row) {\n    if (matrix[\"\"] !== undefined && matrix[\"\"][\"\"] !== undefined) {\n      var range = state.Matrix.getRange(state, matrix, [\"\"], [\"\"]);\n      var element = matrix[\"\"][\"\"];\n      console.log(\"Range:\", JSON.stringify(range));\n\n      if (element.cnt > 0) {\n        // we have some data\n        //console.log(\"Calling makeCanvas.\",jj,key,values[jj]);\n        row.appendChild(state.Html.makeCanvasItem(state, element, range));\n      }\n    }\n  };\n}\n\n;\nexport default Table0D;","map":{"version":3,"sources":["/home/franktt/react/varseltavle/src/lib/Table0DLib.js"],"names":["Table0D","Show","state","matrix","item","skeys","colkey","colvalues","rowkey","rowvalues","cellMode","undefined","element","code","mSum","cnt","row","document","createElement","appendHeaderRow0D","appendChild","docs","dlen","length","ii","doc","appendDataRow0D","Matrix","limit","Html","appendDataLine","appendDataElement","appendSeriesRow0D","klen","jj","key","appendHeaderElement","Threshold","setGThr","level","getLevel","color","Colors","getLevelColor","range","getRange","console","log","JSON","stringify","makeCanvasItem"],"mappings":"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","sourcesContent":["//console.log(\"Loading Table1DLib.js\");\n\nfunction Table0D() {\n    this.Show=function(state,matrix,item,skeys,colkey,colvalues,rowkey,rowvalues,cellMode){\n\tif (matrix[\"\"] !== undefined && matrix[\"\"][\"\"] !== undefined) {\n\t    var element=matrix[\"\"][\"\"];\n\t    if (cellMode  === state.Show.code.mSum) {\n\t\t//console.log(\"addSingle Found matrix element...\",JSON.stringify(m));\n\t\tif (element.cnt > 0) { // we have some data\n\t\t    var row = document.createElement(\"TR\");\n\t\t    this.appendHeaderRow0D(state,element,row,skeys);\n\t\t    item.appendChild(row);\n\t\t    var docs=element.docs;\n\t\t    var dlen=docs.length;\n\t\t    for (var ii = 0; ii < dlen; ii++) {\n    \t\t\tvar doc=docs[ii];\n\t\t\trow = document.createElement(\"TR\");\n\t\t\tthis.appendDataRow0D(state,row,doc,skeys);\n\t\t\titem.appendChild(row);\n\t\t    }\n\t\t    if (element.cnt > state.Matrix.limit) { // some docs were omitted...\n\t\t\trow = document.createElement(\"TR\");\n\t\t\tstate.Html.appendDataLine(state,row,\"Too much data...(state,\"+element.cnt+\")\",\"lightgray\",100);\n\t\t\titem.appendChild(row);\n\t\t    }\n\t\t} else { // no data\n\t\t    //console.log(\"addSingle No data found...\");\n\t\t    var row = document.createElement(\"TR\");\n\t\t    state.Html.appendDataElement(state,row,\"No available data...\",\"orange\");\n\t\t    item.appendChild(row);\n\t\t}\n\t    } else {\n\t\tvar row = document.createElement(\"TR\");\n\t\tthis.appendSeriesRow0D(state,matrix,row);\n\t\titem.appendChild(row);\n\t    }\n\t} else { // no valid matrix\n\t    //console.log(\"addSingle No matrix element found...\");\n\t    var row = document.createElement(\"TR\");\n\t    state.Html.appendDataElement(state,row,\"No data\",\"red\");\n\t    item.appendChild(row);\n\t}\n    };\n    this.appendHeaderRow0D=function(state,matrix,row,skeys) {\n\t//console.log(\"addSingle Found keys...\",JSON.stringify(setup),JSON.stringify(state.Matrix.keyCnt));\n\t// make header\n\tvar klen=skeys.length;\n\tfor (var jj = 0; jj < klen; jj++) {\n\t    var key=skeys[jj];\n\t    state.Html.appendHeaderElement(state,row,key);\n\t}\n    };\n    this.appendDataRow0D=function(state,row,doc,skeys) {\n\tstate.Threshold.setGThr(state,doc);\n\tvar level=state.Threshold.getLevel(state,doc);\n\tvar color=state.Colors.getLevelColor(state,level);\n\tvar klen=skeys.length;\n\tfor (var jj = 0; jj < klen; jj++) {\n\t    state.Html.appendDataElement(state,row,doc[skeys[jj]],color,\"\",\"\");\n\t}\n    };\n    this.appendSeriesRow0D=function(state,matrix,row) {\n\tif (matrix[\"\"] !== undefined && matrix[\"\"][\"\"] !== undefined) {\n\t    var range=state.Matrix.getRange(state,matrix,[\"\"],[\"\"]);\n\t    var element=matrix[\"\"][\"\"];\n\t    console.log(\"Range:\",JSON.stringify(range));\n\t    if (element.cnt > 0) { // we have some data\n\t\t//console.log(\"Calling makeCanvas.\",jj,key,values[jj]);\n\t\trow.appendChild(\n\t\t    state.Html.makeCanvasItem(state,element,range)\n\t\t);\n\t    }\n\t}\n    }\n};\nexport default Table0D;\n"]},"metadata":{},"sourceType":"module"}