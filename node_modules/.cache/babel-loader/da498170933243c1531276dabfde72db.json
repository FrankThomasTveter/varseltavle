{"ast":null,"code":"//console.log(\"Loading HtmlLib.js\");\nfunction Html() {\n  this.ceye = \"&#x1f441\";\n\n  this.setConsole = function (msg) {\n    console.log(msg);\n  };\n\n  this.setFootnote = function (state, msg, color) {\n    if (state.React !== undefined && state.React.Status !== undefined) {\n      if (msg === undefined) {\n        state.React.Status.setColor(state, \"\");\n        msg = state.Utils.getStatusString(state);\n      } else if (color !== undefined) {\n        state.React.Status.setColor(state, color);\n      }\n\n      ; //console.log(\"setlog:\",msg,state.Matrix.cnt);\n\n      state.React.Status.setFootnote(state, msg);\n    }\n  };\n\n  this.broadcast = function (state, msg, variant) {\n    if (state.React !== undefined && state.React.Status !== undefined) {\n      if (msg === undefined) {\n        msg = state.Utils.getStatusString(state);\n      }\n\n      ; //console.log(\"setlog:\",msg,state.Matrix.cnt);\n\n      state.React.App.broadcast(msg, 'info');\n    }\n  };\n\n  this.getTableStyle = function (bcolor) {\n    return \"padding:5pt;min-width:25px;width:25px;background-color:\" + bcolor + \";\";\n  };\n\n  this.getButtonStyle = function (bcolor, fcolor, border) {\n    //console.log(\"ButtonStyle:\",bcolor,fcolor,border);\n    if (border) {\n      return \"font-size:15px;background-color:\" + bcolor + \";color:\" + fcolor + \";padding:5px 5px;border-radius:10px;cursor:pointer;border-color:black;\";\n    } else {\n      return \"font-size:15px;background-color:\" + bcolor + \";color:\" + fcolor + \";padding:5px 5px;border-radius:10px;;cursor:pointer;border:none;\";\n    }\n  };\n\n  this.progressInfo = function (state, e) {\n    if (state.React !== undefined && state.React.Status !== undefined) {\n      if (e.loaded === e.total) {\n        state.React.Status.setColor(state, \"\");\n        state.React.Status.setFootnote(state, \"\");\n      } else {\n        e.preventDefault(); //console.log(\"Complete:\",e.loaded,e.total,JSON.stringify(e));\n        //var percentComplete = e.loaded / e.total * 100;\n        //state.React.Status.setFootnote(state,percentComplete.toFixed(2)+\"kb\");\n\n        state.React.Status.setFootnote(state, e.loaded + \" kb\");\n      }\n    }\n  };\n\n  this.loadInfo = function (state, e) {\n    if (state.React !== undefined && state.React.Status !== undefined) {\n      state.React.Status.setColor(state, \"secondary\");\n      state.React.Status.setFootnote(state, \"Processing\");\n    }\n\n    ;\n  };\n\n  this.errorInfo = function (state, e) {\n    if (state.React !== undefined && state.React.Status !== undefined) {\n      state.React.Status.setColor(state, \"\");\n      state.React.Status.setFootnote(state, \"Error\");\n    }\n  };\n\n  this.abortInfo = function (state, e) {\n    if (state.React !== undefined && state.React.Status !== undefined) {\n      state.React.Status.setColor(state, \"\");\n      state.React.Status.setFootnote(state, \"Aborted\");\n    }\n  };\n\n  this.addPathElement = function (state, item, typ, key, value, onclick, title) {\n    var cnt = state.Path.select.cnt[key]; //console.log(\"Type:\",typ,JSON.stringify(type));\n\n    var ityp = state.Path.type[typ].ityp;\n    var ptyp = state.Path.type[typ].ptyp; //console.log(\"Adding element:\",key,value);\n\n    var txt = document.createElement(\"TEXT\");\n    var patt = {\n      ptyp: ptyp,\n      pkey: key,\n      prel: \"top\"\n    };\n    this.setAttributes(txt, patt);\n    txt.setAttribute(\"draggable\", \"true\");\n    txt.setAttribute(\"ondragstart\", \"Navigate.dragStart(event)\");\n    txt.setAttribute(\"ondragend\", \"Navigate.dragEnd(event)\");\n    txt.setAttribute(\"ondrop\", \"Navigate.drop(event)\");\n    txt.setAttribute(\"ondragover\", \"Navigate.dropCheck(event)\"); //txt.setAttribute(\"position\",\"fixed\"); // tried to make path \"sticky\"...\n\n    if (onclick !== \"\") {\n      txt.setAttribute(\"onclick\", onclick);\n    }\n\n    ;\n\n    if (title !== \"\") {\n      txt.setAttribute(\"title\", title);\n    }\n\n    ;\n    var bcolor = state.Colors.colors.rest;\n    var fcolor = state.Colors.colors.fg;\n    var label = \"\";\n\n    if (value !== undefined && value !== \"\") {\n      // set defaults\n      fcolor = state.Colors.colors.fg;\n    } else {\n      fcolor = state.Colors.colors.val;\n    }\n\n    label = value || key;\n\n    if (ityp === state.Path.type.path.ityp) {\n      // path\n      if (cnt > 1) {\n        bcolor = state.Colors.colors.grp;\n      } else {\n        bcolor = state.Colors.colors.path;\n      }\n\n      ;\n    } else if (ityp === state.Path.type.eye.ityp) {\n      // eye\n      bcolor = state.Colors.colors.eye;\n      fcolor = state.Colors.colors.fg;\n      label = this.ceye;\n    } else if (ityp === state.Path.type.table.ityp) {\n      // table\n      bcolor = state.Colors.colors.table;\n      label = key;\n    } else if (ityp === state.Path.type.rest.ityp) {\n      // rest\n      bcolor = state.Colors.colors.rest;\n      label = key;\n    } else if (ityp === state.Path.type.trash.ityp) {\n      // trash\n      bcolor = state.Colors.colors.trash;\n      label = key;\n    }\n\n    ;\n    txt.innerHTML = label;\n    txt.setAttribute(\"style\", this.getButtonStyle(bcolor, fcolor, false)); //border-radius: 10px;\n\n    txt.readonly = false;\n    item.appendChild(txt);\n  };\n\n  this.removeChildren = function (item) {\n    if (item !== null) {\n      var children = item.childNodes;\n      var clen = children.length;\n\n      for (var ii = clen - 1; ii >= 0; ii--) {\n        if (children[ii] !== undefined) {\n          //console.log(\"Removing :\",ii,len,children[ii]);\n          item.removeChild(children[ii]);\n        }\n      }\n    }\n  };\n\n  this.clearTableChild = function (state, item, id) {\n    //console.log(\"removeTableChildFromTo Entering\",item);\n    var tbody = item.children[0];\n    var children = tbody.children;\n    var clen = children.length; //var active=false;\n    //var tail;\n    //var active=false;\n\n    for (var ii = clen - 1; ii >= 0; ii--) {\n      //console.log(\"RemoveTableChild \",ii,children[ii],len,clen);\n      if (children[ii] !== undefined) {\n        if (children[ii].getAttribute !== undefined) {\n          var att = children[ii].getAttribute(state, \"id\");\n\n          if (att === id) {\n            var grandChildren = children[ii].children;\n            var glen = grandChildren.length;\n\n            for (var jj = glen - 1; jj >= 0; jj--) {\n              children[ii].removeChild(state, grandChildren[jj]);\n            }\n\n            ;\n            return children[ii];\n          }\n        }\n      }\n    }\n\n    ;\n    return;\n  };\n\n  this.appendRotateElement = function (state, row, rowkey, colkey) {\n    var pval = (rowkey || \"\") + \"\\\\\" + (colkey || \"\");\n    row.appendChild(this.makeHeaderElement(state, \"\", // pkey\n    pval, // pval &#8635;\n    \"\", // prel\n    \"rotate\", // ptyp\n    \"\", \"\", \"\"));\n  };\n\n  this.appendEmptyHeader = function (state, row) {\n    row.appendChild(this.makeHeaderElement(state, \"\", \"\", \"\", \"\", \"\", \"\", \"\"));\n  };\n\n  this.appendEmptyData = function (state, row) {\n    row.appendChild(this.makeDataElement(state, [], \"\", \"\", \"\", 0));\n  };\n\n  this.appendHeaderElement = function (state, row, label) {\n    //console.log(\"Adding single element:\",label);\n    var th = document.createElement(\"TH\");\n    th.setAttribute(\"style\", this.getTableStyle(state.Colors.colors.hdr));\n    var txt = document.createElement(\"TEXT\");\n    txt.setAttribute(\"style\", this.getTableStyle(state.Colors.colors.trp));\n    txt.innerHTML = label;\n    th.setAttribute(\"class\", \"full\");\n    txt.setAttribute(\"class\", \"hdr\");\n    th.appendChild(txt);\n    row.appendChild(th);\n  };\n\n  this.makeHeaderElement = function (state, pkey, pval, prel, ptyp, onclick, title, style) {\n    var th = document.createElement(\"TH\");\n    var patt = {\n      ptyp: ptyp,\n      pkey: pkey,\n      pval: pval,\n      prel: prel\n    };\n    this.setAttributes(th, patt);\n    th.setAttribute(\"style\", this.getTableStyle(state.Colors.colors.hdr));\n    th.setAttribute(\"ondrop\", \"Navigate.drop(state,event)\");\n    th.setAttribute(\"ondragover\", \"Navigate.dropCheck(state,event)\");\n    th.setAttribute(\"draggable\", \"true\");\n    th.setAttribute(\"ondragstart\", \"Navigate.dragStart(state,event)\");\n    th.setAttribute(\"ondragend\", \"Navigate.dragEnd(state,event)\");\n\n    if (onclick !== undefined && onclick !== \"\") {\n      th.setAttribute(\"onclick\", onclick);\n      th.style.cursor = \"pointer\";\n    }\n\n    ;\n\n    if (title !== \"\") {\n      th.setAttribute(\"title\", title);\n    }\n\n    var div = document.createElement(\"DIV\");\n    this.setAttributes(div, patt);\n\n    if (style !== undefined && style !== \"\") {\n      //console.log(\"Rotating div...\",style);\n      div.setAttribute(\"class\", \"rotate\");\n    }\n\n    th.appendChild(div);\n    var txt = document.createElement(\"TEXT\");\n    this.setAttributes(txt, patt);\n    div.appendChild(txt);\n    txt.setAttribute(\"style\", this.getTableStyle(state.Colors.colors.trp));\n    txt.innerHTML = pval;\n\n    if (title !== \"\") {\n      txt.setAttribute(\"title\", title);\n    } //th.setAttribute(\"class\",\"full\");\n\n\n    txt.setAttribute(\"class\", \"hdr\"); //th.appendChild(txt);\n\n    return th;\n  };\n\n  this.appendDataElement = function (state, row, label, color, onclick, title) {\n    //console.log(\"Adding single element:\",label,color);\n    var td = document.createElement(\"TD\");\n    var style = \"\";\n\n    if (onclick !== undefined && onclick !== \"\") {\n      td.setAttribute(\"onclick\", onclick);\n      style = \"cursor:pointer;\";\n    }\n\n    if (title !== \"\") {\n      td.setAttribute(\"title\", title);\n    }\n\n    td.setAttribute(\"style\", this.getTableStyle(color) + style);\n    var txt = document.createElement(\"TEXT\");\n    txt.setAttribute(\"style\", this.getTableStyle(state.Colors.colors.trp) + style);\n    txt.innerHTML = label;\n    td.setAttribute(\"class\", \"full\");\n    txt.setAttribute(\"class\", \"hdr\");\n    td.appendChild(txt);\n    row.appendChild(td);\n  };\n\n  this.appendDataLine = function (state, row, label, color, ncols) {\n    //console.log(\"Adding single element:\",label,color);\n    var td = document.createElement(\"TD\");\n    var style = \"\";\n    td.setAttribute(\"style\", this.getTableStyle(color) + style);\n    td.setAttribute(\"colspan\", ncols);\n    var txt = document.createElement(\"TEXT\");\n    txt.setAttribute(\"style\", this.getTableStyle(state.Colors.colors.trp) + style);\n    txt.innerHTML = label;\n    td.setAttribute(\"class\", \"full\");\n    txt.setAttribute(\"class\", \"hdr\");\n    td.appendChild(txt);\n    row.appendChild(td);\n  };\n\n  this.makeDataElement = function (state, elements, onclick, title, step) {\n    var label = \"\";\n    var cnt = 0;\n    var lev = -1;\n    var elen = elements.length;\n\n    for (var ee = 0; ee < elen; ee++) {\n      cnt = cnt + elements[ee].cnt;\n      lev = Math.max(lev, elements[ee].lev);\n    }\n\n    ;\n\n    if (cnt > 1) {\n      label = cnt;\n    }\n\n    ;\n    var bcolor = state.Colors.getLevelColor(state, lev);\n    var td = document.createElement(\"TD\");\n    td.setAttribute(\"align\", \"center\");\n    td.setAttribute(\"ondrop\", \"Navigate.drop(state,event)\");\n    td.setAttribute(\"ondragover\", \"Navigate.dropCheck(state,event)\");\n    td.setAttribute(\"draggable\", \"true\");\n    td.setAttribute(\"ondragstart\", \"Navigate.dragStart(state,event)\");\n    td.setAttribute(\"ondragend\", \"Navigate.dragEnd(state,event)\");\n    td.setAttribute(\"ptyp\", \"item\");\n    td.setAttribute(\"pval\", lev);\n    td.setAttribute(\"class\", \"full\");\n\n    if (title !== \"\") {\n      td.setAttribute(\"title\", title);\n    }\n\n    var txt = document.createElement(\"TEXT\");\n    txt.setAttribute(\"ptyp\", \"item\");\n    var style = \"background-color:\" + bcolor + \";color:\" + state.Colors.colors.fg + \";white-space: nowrap;\";\n\n    if (onclick !== undefined && onclick !== \"\") {\n      td.setAttribute(\"onclick\", onclick);\n      style = style + \"cursor:pointer;\";\n    }\n\n    td.setAttribute(\"style\", style + \"padding:5pt;min-width:25px;width:25px;\");\n    txt.setAttribute(\"style\", style + \"width:100%;height:100%;\");\n    txt.setAttribute(\"class\", \"full\");\n\n    if (label !== undefined && label !== null) {\n      txt.innerHTML = label;\n    } else {\n      txt.innerHTML = \"\";\n    }\n\n    if (title !== \"\") {\n      txt.setAttribute(\"title\", title);\n    }\n\n    td.appendChild(txt);\n    return td;\n  }; // canvas element\n\n\n  this.makeCanvasElement = function (state, elements, key, val, range, onclick, title, step) {\n    var td = document.createElement(\"TD\"); //td.setAttribute(\"style\",\"text-decoration: none;padding-bottom:0pt\");\n\n    td.setAttribute(\"pval\", val[0]);\n    td.setAttribute(\"align\", \"center\");\n    td.setAttribute(\"ptyp\", \"canvas\");\n    td.setAttribute(\"class\", \"canvas\");\n    var cnv = document.createElement(\"CANVAS\");\n    cnv.setAttribute(\"style\", \"width:100%;height:100%;display:block;cursor:pointer;\"); //var width = cnv.width;\n\n    var height = cnv.height;\n    var ctx = cnv.getContext(state, \"2d\");\n    var elen = elements.length;\n    var ee;\n    var tot = 0;\n\n    for (ee = 0; ee < elen; ee++) {\n      tot = tot + elements[ee].docs.length;\n    }\n\n    ;\n    var first = true;\n    var cnt = 0;\n    var dw = cnv.width / Math.max(step, tot); //console.log(\"******** Canvas elements:\",elen,tot,dw,width)\n\n    for (ee = 0; ee < elen; ee++) {\n      var el = elements[ee];\n      var level = el.lev;\n      var color = state.Colors.getLevelColor(state, level);\n      var docs = el.docs;\n      var dlen = docs.length; //console.log(\"Element:\",level,color,tot,cnt);\n\n      if (dlen > 0) {\n        for (var jj = 0; jj < dlen; jj++) {\n          cnt = cnt + 1;\n          var d = docs[jj];\n          state.Threshold.setGThr(state, d);\n          var lev = state.Threshold.getLevel(state, d);\n          var col = state.Colors.getLevelColor(state, lev); //console.log(\"   Doc:\",key,jj,JSON.stringify(lev),JSON.stringify(d));\n\n          for (var ii = 0; ii < step; ii++) {\n            //console.log(\"   Checking Val:\",key,ii,val[ii],d[key]);\n            //console.log(\"Position:\",ii,jj,dlen,step,key,d[key],val[ii])\n            if (d[key] === val[ii]) {\n              if (first) {\n                first = false; //console.log(\"Doc:\",jj,JSON.stringify(d));\n              }\n\n              ;\n              var t = state.Threshold.getThresholds(d); //console.log(\"Making canvas:\",ii,val[ii],color,JSON.stringify(d),\n              //\t    \" Thr=\",JSON.stringify(t),width,height,JSON.stringify(range));\n              //console.log(\"Canvas:\",ii,jj,d.dtg,color,level,JSON.stringify(t));\n\n              var min = range[0];\n              var max = range[1];\n              var ymin = min;\n\n              if (t.min !== undefined && t.min[state.Threshold.ival] !== undefined) {\n                ymin = t.min[state.Threshold.ival];\n              }\n\n              var ymax = max;\n\n              if (t.max !== undefined && t.max[state.Threshold.ival] !== undefined) {\n                ymax = t.max[state.Threshold.ival];\n              }\n\n              var mm = ii;\n\n              if (step < tot) {\n                mm = cnt - 1;\n              } //console.log(\" canvas position:\",mm,ii,cnt,step,tot)\n\n\n              var xmin = mm * dw; // width/10;\n\n              var xmax = (mm + 1) * dw - 2; //width-2*xmin;\n\n              var zmin = state.Show.scale(ymin, min, max, height, 0);\n              var zmax = state.Show.scale(ymax, min, max, height, 0); //console.log(\"Fill:\",xmin,xmax,width,zmin,(zmax-zmin),height,color);\n              //ctx.fillStyle=\"cornflowerblue\";\n\n              color = col;\n\n              if (color !== undefined) {\n                ctx.fillStyle = color;\n              }\n\n              ctx.fillRect(xmin, zmin, xmax - xmin, zmax - zmin); //ctx.beginPath();\n              //ctx.lineWidth=2;\n              //if (color !== undefined) {ctx.strokeStyle=color;}\n              //ctx.strokeStyle=\"black\";\n              //ctx.moveTo(xmin,zmax);\n              //ctx.lineTo(xmax,zmax);\n              //ctx.stroke();\n              // draw thresholds\n\n              for (var msr in t) {\n                var tt = t[msr];\n                var tmax = tt[state.Threshold.imax];\n                var tthr = tt[state.Threshold.ithr];\n                var tkey = tt[state.Threshold.ikey]; //var tlev  = tt[state.Threshold.ilev];\n                //var tval  = tt[state.Threshold.ival];\n\n                var ts;\n\n                if (tmax) {\n                  ts = state.Threshold.thrs[tthr][tkey].max;\n                } else {\n                  ts = state.Threshold.thrs[tthr][tkey].min;\n                }\n\n                ;\n                var tlen = ts.length;\n\n                for (var ll = 0; ll < tlen; ll++) {\n                  var tyval = ts[ll];\n                  var tzval = state.Show.scale(tyval, min, max, height, 0);\n                  var scolor = state.Colors.getLevelColor(state, ll);\n                  ctx.beginPath();\n                  ctx.lineWidth = 5;\n\n                  if (scolor !== undefined) {\n                    ctx.strokeStyle = scolor;\n                  }\n\n                  ctx.moveTo(xmin, tzval);\n                  ctx.lineTo(xmax, tzval);\n                  ctx.stroke(); //console.log(\"Stroke color:\",color,ll,tzval,width);\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    ;\n\n    if (tot === 0) {\n      console.log(\"No draw:\", JSON.stringify(val), JSON.stringify(docs), dlen);\n    }\n\n    if (title !== \"\") {\n      td.setAttribute(\"title\", title);\n    }\n\n    if (onclick !== undefined && onclick !== \"\") {\n      td.setAttribute(\"onclick\", onclick);\n    }\n\n    td.appendChild(cnv);\n    return td;\n  };\n\n  this.makeCanvasItem = function (state, el, range) {\n    var td = document.createElement(\"TD\"); //td.setAttribute(\"style\",\"text-decoration: none;padding-bottom:0pt\");\n\n    td.setAttribute(\"pval\", \"\");\n    td.setAttribute(\"align\", \"center\");\n    td.setAttribute(\"ptyp\", \"canvas\");\n    td.setAttribute(\"class\", \"canvas\");\n    var cnv = document.createElement(\"CANVAS\");\n    cnv.setAttribute(\"style\", \"width:100%;height:100%;display:block;cursor:pointer;\"); //var width = cnv.width;\n\n    var height = cnv.height;\n    var ctx = cnv.getContext(state, \"2d\");\n    var level = el.lev;\n    var color = state.Colors.getLevelColor(state, level);\n    var docs = el.docs;\n    var dlen = docs.length;\n    var dw = cnv.width / Math.max(1, dlen);\n    var cnt = 0;\n\n    if (dlen > 0) {\n      for (var jj = 0; jj < dlen; jj++) {\n        cnt = cnt + 1;\n        var d = docs[jj];\n        state.Threshold.setGThr(state, d);\n        var lev = state.Threshold.getLevel(state, d);\n        var col = state.Colors.getLevelColor(state, lev); //console.log(\"   Doc:\",key,jj,JSON.stringify(d));\n\n        var t = state.Threshold.getThresholds(d); //console.log(\"Making canvas:\",ii,val[ii],color,JSON.stringify(d),\n        //\t    \" Thr=\",JSON.stringify(t),width,height,JSON.stringify(range));\n        //console.log(\"Canvas:\",ii,jj,d.dtg,color,level);\n\n        var min = range[0];\n        var max = range[1];\n        var ymin = min;\n\n        if (t.min !== undefined && t.min[state.Threshold.ival] !== undefined) {\n          ymin = t.min[state.Threshold.ival];\n        }\n\n        var ymax = max;\n\n        if (t.max !== undefined && t.max[state.Threshold.ival] !== undefined) {\n          ymax = t.max[state.Threshold.ival];\n        }\n\n        var mm = jj; //console.log(\" canvas position:\",mm,ii,cnt,step,tot)\n\n        var xmin = mm * dw; // width/10;\n\n        var xmax = (mm + 1) * dw - 2; //width-2*xmin;\n\n        var zmin = state.Show.scale(ymin, min, max, height, 0);\n        var zmax = state.Show.scale(ymax, min, max, height, 0); //console.log(\"Fill:\",xmin,xmax,width,zmin,(zmax-zmin),height,color);\n        //ctx.fillStyle=\"cornflowerblue\";\n\n        color = col;\n\n        if (color !== undefined) {\n          ctx.fillStyle = color;\n        }\n\n        ctx.fillRect(xmin, zmin, xmax - xmin, zmax - zmin); // draw thresholds\n\n        for (var msr in t) {\n          var tt = t[msr];\n          var tmax = tt[state.Threshold.imax];\n          var tthr = tt[state.Threshold.ithr];\n          var tkey = tt[state.Threshold.ikey]; //var tlev  = tt[state.Threshold.ilev];\n          //var tval  = tt[state.Threshold.ival];\n\n          var ts;\n\n          if (tmax) {\n            ts = state.Threshold.thrs[tthr][tkey].max;\n          } else {\n            ts = state.Threshold.thrs[tthr][tkey].min;\n          }\n\n          ;\n          var tlen = ts.length;\n\n          for (var ll = 0; ll < tlen; ll++) {\n            var tyval = ts[ll];\n            var tzval = state.Show.scale(tyval, min, max, height, 0);\n            var scolor = state.Colors.getLevelColor(state, ll);\n            ctx.beginPath();\n            ctx.lineWidth = 5;\n\n            if (scolor !== undefined) {\n              ctx.strokeStyle = scolor;\n            }\n\n            ctx.moveTo(xmin, tzval);\n            ctx.lineTo(xmax, tzval);\n            ctx.stroke(); //console.log(\"Stroke color:\",color,ll,tzval,width);\n          }\n        }\n      }\n    }\n\n    ;\n    td.appendChild(cnv);\n    return td;\n  };\n\n  this.rotateHeight = function (state) {\n    var gwidth, lheight, lwidth, oheight, owidth;\n    var gdd, dd, style;\n    var rotates = document.getElementsByClassName('rotate'); //console.log(\"Rotating heights.\",rotates.length);\n\n    var i;\n\n    for (i = 0; i < rotates.length; i++) {\n      lheight = parseInt(state, rotates[i].offsetWidth, 10);\n      lwidth = parseInt(state, rotates[i].offsetHeight, 10);\n\n      if (gwidth === undefined) {\n        gwidth = lwidth;\n      }\n\n      ;\n      oheight = lheight / 2;\n      owidth = lwidth / 2;\n      dd = oheight - owidth;\n\n      if (gdd === undefined) {\n        gdd = dd;\n      } else if (gdd < dd) {\n        gdd = dd;\n      }\n    }\n\n    for (i = 0; i < rotates.length; i++) {\n      //var cwidth=parseInt(state,window.getComputedStyle(rotates[i]).fontSize,10);\n      lheight = parseInt(state, rotates[i].offsetWidth, 10);\n      lwidth = parseInt(state, rotates[i].offsetHeight, 10);\n      oheight = lheight / 2;\n      owidth = lwidth / 2;\n      dd = oheight - owidth;\n      style = \"width:\" + lwidth + \"px;height:\" + lheight + \"px;transform:translate(state,\" + dd + \"px,\" + gdd + \"px) rotate(state,-90.0deg);\"; //console.log(\"Rotates:\",i,style,lwidth,lheight,gwidth,cwidth,oheight,owidth);// 19px 129px\n\n      rotates[i].setAttribute(\"style\", style);\n    }\n\n    var canvas = document.getElementsByClassName('canvas');\n\n    for (i = 0; i < canvas.length; i++) {\n      var cheight = parseInt(state, window.getComputedStyle(canvas[i]).fontSize, 10);\n      style = \"width:\" + gwidth + \"px;height:\" + cheight * 1.5 + \"px\"; //console.log(\"Canvas:\",i,style,gwidth);// 19px 129px\n\n      canvas[i].style.width = gwidth + \"px\";\n      canvas[i].style.height = cheight * 3 + \"px\";\n    }\n  };\n\n  this.setAttributes = function (item, hash) {\n    for (var name in hash) {\n      var val = hash[name];\n      item.setAttribute(name, val);\n    }\n  };\n}\n\n;\nexport default Html;","map":{"version":3,"sources":["/home/franktt/react/varseltavle/src/lib/HtmlLib.js"],"names":["Html","ceye","setConsole","msg","console","log","setFootnote","state","color","React","undefined","Status","setColor","Utils","getStatusString","broadcast","variant","App","getTableStyle","bcolor","getButtonStyle","fcolor","border","progressInfo","e","loaded","total","preventDefault","loadInfo","errorInfo","abortInfo","addPathElement","item","typ","key","value","onclick","title","cnt","Path","select","ityp","type","ptyp","txt","document","createElement","patt","pkey","prel","setAttributes","setAttribute","Colors","colors","rest","fg","label","val","path","grp","eye","table","trash","innerHTML","readonly","appendChild","removeChildren","children","childNodes","clen","length","ii","removeChild","clearTableChild","id","tbody","getAttribute","att","grandChildren","glen","jj","appendRotateElement","row","rowkey","colkey","pval","makeHeaderElement","appendEmptyHeader","appendEmptyData","makeDataElement","appendHeaderElement","th","hdr","trp","style","cursor","div","appendDataElement","td","appendDataLine","ncols","elements","step","lev","elen","ee","Math","max","getLevelColor","makeCanvasElement","range","cnv","height","ctx","getContext","tot","docs","first","dw","width","el","level","dlen","d","Threshold","setGThr","getLevel","col","t","getThresholds","min","ymin","ival","ymax","mm","xmin","xmax","zmin","Show","scale","zmax","fillStyle","fillRect","msr","tt","tmax","imax","tthr","ithr","tkey","ikey","ts","thrs","tlen","ll","tyval","tzval","scolor","beginPath","lineWidth","strokeStyle","moveTo","lineTo","stroke","JSON","stringify","makeCanvasItem","rotateHeight","gwidth","lheight","lwidth","oheight","owidth","gdd","dd","rotates","getElementsByClassName","i","parseInt","offsetWidth","offsetHeight","canvas","cheight","window","getComputedStyle","fontSize","hash","name"],"mappings":"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","sourcesContent":["//console.log(\"Loading HtmlLib.js\");\n\nfunction Html() {\n    this.ceye=\"&#x1f441\";\n    this.setConsole=function(msg) {\n\tconsole.log(msg);\n    };\n    this.setFootnote=function(state,msg,color) {\n\tif (state.React !== undefined && state.React.Status !== undefined) {\n\t    if (msg  === undefined) {\n\t\tstate.React.Status.setColor(state,\"\");\n\t\tmsg=state.Utils.getStatusString(state);\n\t    } else if (color !== undefined) {\n\t\tstate.React.Status.setColor(state,color);\n\t    };\n\t    //console.log(\"setlog:\",msg,state.Matrix.cnt);\n\t    state.React.Status.setFootnote(state,msg);\n\t}\n    };\n    this.broadcast=function(state,msg,variant) {\n\tif (state.React !== undefined && state.React.Status !== undefined) {\n\t    if (msg  === undefined) {msg=state.Utils.getStatusString(state);};\n\t    //console.log(\"setlog:\",msg,state.Matrix.cnt);\n\t    state.React.App.broadcast(msg,'info');\n\t}\n    };\n    this.getTableStyle=function(bcolor) {\n\treturn \"padding:5pt;min-width:25px;width:25px;background-color:\"+bcolor+\";\";\n    };\n    this.getButtonStyle=function(bcolor,fcolor,border) {\n\t//console.log(\"ButtonStyle:\",bcolor,fcolor,border);\n\tif (border) {\n\t    return \"font-size:15px;background-color:\"+bcolor+\";color:\"+fcolor+\n\t\t\";padding:5px 5px;border-radius:10px;cursor:pointer;border-color:black;\"\n\t} else {\n\t    return \"font-size:15px;background-color:\"+bcolor+\";color:\"+fcolor+\n\t\t\";padding:5px 5px;border-radius:10px;;cursor:pointer;border:none;\"\n\t}\n    };\n    this.progressInfo=function(state,e) {\n\tif (state.React !== undefined && state.React.Status !== undefined) {\n\t    if (e.loaded  === e.total) {\n\t\tstate.React.Status.setColor(state,\"\");\n\t\tstate.React.Status.setFootnote(state,\"\");\n\t    } else {\n\t\te.preventDefault();\n\t\t//console.log(\"Complete:\",e.loaded,e.total,JSON.stringify(e));\n\t\t//var percentComplete = e.loaded / e.total * 100;\n\t\t//state.React.Status.setFootnote(state,percentComplete.toFixed(2)+\"kb\");\n\t\tstate.React.Status.setFootnote(state,e.loaded+\" kb\");\n\t    }\n\t}\n    };\n    this.loadInfo=function(state,e) {\n\tif (state.React !== undefined && state.React.Status !== undefined) {\n\t    state.React.Status.setColor(state,\"secondary\");\n\t    state.React.Status.setFootnote(state,\"Processing\");\n\t};\n    };\n    this.errorInfo=function(state,e) {\n\tif (state.React !== undefined && state.React.Status !== undefined) {\n\t    state.React.Status.setColor(state,\"\");\n\t    state.React.Status.setFootnote(state,\"Error\");\n\t}\n    };\n    this.abortInfo=function(state,e) {\n\tif (state.React !== undefined && state.React.Status !== undefined) {\n\t    state.React.Status.setColor(state,\"\");\n\t    state.React.Status.setFootnote(state,\"Aborted\");\n\t}\n    };\n    this.addPathElement=function(state,item,typ,key,value,onclick,title) {\n\tvar cnt=state.Path.select.cnt[key];\n\t//console.log(\"Type:\",typ,JSON.stringify(type));\n\tvar ityp=state.Path.type[typ].ityp;\n\tvar ptyp=state.Path.type[typ].ptyp;\n\t//console.log(\"Adding element:\",key,value);\n\tvar txt=document.createElement(\"TEXT\");\n\tvar patt={ptyp:ptyp,pkey:key,prel:\"top\"};\n\tthis.setAttributes(txt,patt);\n\ttxt.setAttribute(\"draggable\",\"true\");\n\ttxt.setAttribute(\"ondragstart\",\"Navigate.dragStart(event)\");\n\ttxt.setAttribute(\"ondragend\",\"Navigate.dragEnd(event)\");\n\ttxt.setAttribute(\"ondrop\",\"Navigate.drop(event)\");\n\ttxt.setAttribute(\"ondragover\",\"Navigate.dropCheck(event)\");\n\t//txt.setAttribute(\"position\",\"fixed\"); // tried to make path \"sticky\"...\n\tif (onclick !== \"\") {\n\t    txt.setAttribute(\"onclick\",onclick);\n\t};\n\tif (title !== \"\") {\n\t    txt.setAttribute(\"title\",title);\n\t};\n\tvar bcolor=state.Colors.colors.rest;\n\tvar fcolor=state.Colors.colors.fg\n\tvar label=\"\";\n\tif (value !== undefined && value !== \"\") { // set defaults\n\t    fcolor=state.Colors.colors.fg;\n\t} else {\n\t    fcolor=state.Colors.colors.val;\n\t}\n\tlabel=value||key;\n\tif (ityp  === state.Path.type.path.ityp) { // path\n\t    if (cnt > 1) {\n\t\tbcolor=state.Colors.colors.grp;\n\t    } else {\n\t\tbcolor=state.Colors.colors.path;\n\t    };\n\t} else if (ityp  === state.Path.type.eye.ityp) { // eye\n\t    bcolor=state.Colors.colors.eye;\n\t    fcolor=state.Colors.colors.fg;\n\t    label=this.ceye;\n\t} else if (ityp  === state.Path.type.table.ityp) { // table\n\t    bcolor=state.Colors.colors.table;\n\t    label=key;\n\t} else if (ityp  === state.Path.type.rest.ityp) { // rest\n\t    bcolor=state.Colors.colors.rest;\n\t    label=key;\n\t} else if (ityp  === state.Path.type.trash.ityp) { // trash\n\t    bcolor=state.Colors.colors.trash;\n\t    label=key;\n\t};\n\ttxt.innerHTML=label;\n\ttxt.setAttribute(\"style\",this.getButtonStyle(bcolor,fcolor,false) );\n\t//border-radius: 10px;\n\ttxt.readonly=false;\n\titem.appendChild(txt);\n    };\n    this.removeChildren=function(item) {\n\tif (item !== null) {\n\t    var children=item.childNodes;\n\t    var clen=children.length;\n\t    for (var ii=clen-1;ii>=0;ii--){\n\t\tif (children[ii] !== undefined) {\n\t\t    //console.log(\"Removing :\",ii,len,children[ii]);\n\t\t    item.removeChild(children[ii]);\n\t\t}\n\t    }\n\t}\n    };\n    this.clearTableChild=function(state,item,id) {\n\t//console.log(\"removeTableChildFromTo Entering\",item);\n\tvar tbody=item.children[0];\n\tvar children=tbody.children;\n\tvar clen=children.length;\n\t//var active=false;\n\t//var tail;\n\t//var active=false;\n\tfor (var ii=clen-1;ii>=0;ii--){\n\t    //console.log(\"RemoveTableChild \",ii,children[ii],len,clen);\n\t    if (children[ii] !== undefined) {\n\t\tif (children[ii].getAttribute !== undefined) {\n\t\t    var att=children[ii].getAttribute(state,\"id\");\n\t\t    if (att  === id) {\n\t\t\tvar grandChildren=children[ii].children;\n\t\t\tvar glen=grandChildren.length;\n\t\t\tfor (var jj=glen-1;jj>=0;jj--){\n\t\t\t    children[ii].removeChild(state,grandChildren[jj]);\n\t\t\t};\n\t\t\treturn children[ii];\n\t\t    } \n\t\t}\n\t    }\n\t};\n\treturn;\n    };\n    this.appendRotateElement=function(state,row,rowkey,colkey) {\n\tvar pval = (rowkey||\"\") + \"\\\\\" + (colkey||\"\");\n\trow.appendChild(\n\t    this.makeHeaderElement(state,\n\t\t\"\",        // pkey\n\t\tpval,      // pval &#8635;\n\t\t\"\",        // prel\n\t\t\"rotate\",  // ptyp\n\t\t\"\",\n\t\t\"\",\n\t\t\"\"\n\t    ));\n    };\n    this.appendEmptyHeader=function(state,row) {\n\trow.appendChild(\n\t    this.makeHeaderElement(state,\"\",\"\",\"\",\"\",\"\",\"\",\"\")\n\t);\n    };\n    this.appendEmptyData=function(state,row) {\n\trow.appendChild(\n\t    this.makeDataElement(state,[],\"\",\"\",\"\",0)\n\t);\n    };\n    this.appendHeaderElement=function(state,row,label) {\n\t//console.log(\"Adding single element:\",label);\n\tvar th=document.createElement(\"TH\");\n\tth.setAttribute(\"style\",this.getTableStyle(state.Colors.colors.hdr));\n\tvar txt=document.createElement(\"TEXT\");\n\ttxt.setAttribute(\"style\",this.getTableStyle(state.Colors.colors.trp));\n\ttxt.innerHTML=label;\n\tth.setAttribute(\"class\",\"full\");\n\ttxt.setAttribute(\"class\",\"hdr\");\n\tth.appendChild(txt);\n\trow.appendChild(th);\n    };\n    this.makeHeaderElement=function(state,pkey,pval,prel,ptyp,onclick,title,style) {\n\tvar th=document.createElement(\"TH\");\n\tvar patt={ptyp:ptyp,pkey:pkey,pval:pval,prel:prel};\n\tthis.setAttributes(th,patt);\n\tth.setAttribute(\"style\",this.getTableStyle(state.Colors.colors.hdr));\n\tth.setAttribute(\"ondrop\",\"Navigate.drop(state,event)\");\n\tth.setAttribute(\"ondragover\",\"Navigate.dropCheck(state,event)\");\n\tth.setAttribute(\"draggable\",\"true\");\n\tth.setAttribute(\"ondragstart\",\"Navigate.dragStart(state,event)\");\n\tth.setAttribute(\"ondragend\",\"Navigate.dragEnd(state,event)\");\n\tif (onclick !== undefined && onclick !== \"\") {\n\t    th.setAttribute(\"onclick\",onclick);\n\t    th.style.cursor=\"pointer\";\n\t};\n\tif (title !== \"\") {\n\t    th.setAttribute(\"title\",title);\n\t}\n\tvar div=document.createElement(\"DIV\");\n\tthis.setAttributes(div,patt);\n\tif (style !== undefined && style !== \"\") {\n\t    //console.log(\"Rotating div...\",style);\n\t    div.setAttribute(\"class\",\"rotate\");\n\t}\n\tth.appendChild(div);\n\tvar txt=document.createElement(\"TEXT\");\n\tthis.setAttributes(txt,patt);\n\tdiv.appendChild(txt);\n\ttxt.setAttribute(\"style\",this.getTableStyle(state.Colors.colors.trp));\n\ttxt.innerHTML=pval;\n\tif (title !== \"\") {\n    \t    txt.setAttribute(\"title\",title);\n\t}\n\t//th.setAttribute(\"class\",\"full\");\n\ttxt.setAttribute(\"class\",\"hdr\");\n\t//th.appendChild(txt);\n\treturn th;\n    };\n\n\n    this.appendDataElement=function(state,row,label,color,onclick,title) {\n\t//console.log(\"Adding single element:\",label,color);\n\tvar td=document.createElement(\"TD\");\n\tvar style= \"\";\n\tif (onclick !== undefined && onclick !== \"\") {\n\t    td.setAttribute(\"onclick\",onclick);\n\t    style=\"cursor:pointer;\";\n\t}\n\tif (title !== \"\") {\n\t    td.setAttribute(\"title\",title);\n\t}\n\ttd.setAttribute(\"style\", this.getTableStyle(color)+style);\n\tvar txt=document.createElement(\"TEXT\");\n\ttxt.setAttribute(\"style\",this.getTableStyle(state.Colors.colors.trp)+style);\n\ttxt.innerHTML=label;\n\ttd.setAttribute(\"class\",\"full\");\n\ttxt.setAttribute(\"class\",\"hdr\");\n\ttd.appendChild(txt);\n\trow.appendChild(td);\n    };\n    this.appendDataLine=function(state,row,label,color,ncols) {\n\t//console.log(\"Adding single element:\",label,color);\n\tvar td=document.createElement(\"TD\");\n\tvar style= \"\";\n\ttd.setAttribute(\"style\", this.getTableStyle(color)+style);\n\ttd.setAttribute(\"colspan\", ncols);\n\tvar txt=document.createElement(\"TEXT\");\n\ttxt.setAttribute(\"style\",this.getTableStyle(state.Colors.colors.trp)+style);\n\ttxt.innerHTML=label;\n\ttd.setAttribute(\"class\",\"full\");\n\ttxt.setAttribute(\"class\",\"hdr\");\n\ttd.appendChild(txt);\n\trow.appendChild(td);\n    };\n    this.makeDataElement=function(state,elements,onclick,title,step) {\n\tvar label=\"\";\n\tvar cnt=0;\n\tvar lev=-1;\n\tvar elen=elements.length;\n\tfor (var ee=0;ee<elen;ee++) {\n\t    cnt=cnt+elements[ee].cnt;\n\t    lev=Math.max(lev,elements[ee].lev);\n\t}; \n\tif (cnt > 1) {label=cnt;};\n\tvar bcolor=state.Colors.getLevelColor(state,lev);\n\tvar td=document.createElement(\"TD\");\n\ttd.setAttribute(\"align\",\"center\");\n\ttd.setAttribute(\"ondrop\",\"Navigate.drop(state,event)\");\n\ttd.setAttribute(\"ondragover\",\"Navigate.dropCheck(state,event)\");\n\ttd.setAttribute(\"draggable\",\"true\");\n\ttd.setAttribute(\"ondragstart\",\"Navigate.dragStart(state,event)\");\n\ttd.setAttribute(\"ondragend\",\"Navigate.dragEnd(state,event)\");\n\ttd.setAttribute(\"ptyp\",\"item\");\n\ttd.setAttribute(\"pval\",lev);\n\ttd.setAttribute(\"class\",\"full\");\n\tif (title !== \"\") {\n\t    td.setAttribute(\"title\",title);\n\t}\n\tvar txt=document.createElement(\"TEXT\");\n\ttxt.setAttribute(\"ptyp\",\"item\");\n\tvar style=\"background-color:\"+bcolor+\";color:\"+state.Colors.colors.fg+\";white-space: nowrap;\";\n\tif (onclick !== undefined && onclick !== \"\") {\n\t    td.setAttribute(\"onclick\",onclick);\n\t    style=style+\"cursor:pointer;\";\n\t}\n\ttd.setAttribute(\"style\",style+\"padding:5pt;min-width:25px;width:25px;\");\n\ttxt.setAttribute(\"style\",style+\"width:100%;height:100%;\");\n\ttxt.setAttribute(\"class\",\"full\");\n\tif (label !== undefined && label !== null) {\n\t    txt.innerHTML=label;\n\t} else {\n\t    txt.innerHTML=\"\";\n\t}\n\tif (title !== \"\") {\n\t    txt.setAttribute(\"title\",title);\n\t}\n\ttd.appendChild(txt);\n\treturn td;\n    }\n\n    // canvas element\n\n    this.makeCanvasElement=function(state,elements,key,val,range,onclick,title,step) { \n\tvar td=document.createElement(\"TD\");\n\t//td.setAttribute(\"style\",\"text-decoration: none;padding-bottom:0pt\");\n\ttd.setAttribute(\"pval\",val[0]);\n\ttd.setAttribute(\"align\",\"center\");\n\ttd.setAttribute(\"ptyp\",\"canvas\");\n\ttd.setAttribute(\"class\",\"canvas\");\n\tvar cnv=document.createElement(\"CANVAS\");\n\tcnv.setAttribute(\"style\",\"width:100%;height:100%;display:block;cursor:pointer;\");\n\t//var width = cnv.width;\n\tvar height = cnv.height;\n\tvar ctx = cnv.getContext(state,\"2d\");\n\tvar elen=elements.length;\n\tvar ee;\n\tvar tot=0; for (ee=0;ee<elen;ee++) {tot=tot+elements[ee].docs.length;};\n\tvar first=true;\n\tvar cnt=0;\n\tvar dw= cnv.width/Math.max(step,tot)\n\t//console.log(\"******** Canvas elements:\",elen,tot,dw,width)\n\tfor (ee=0;ee<elen;ee++) {\n\t    var el=elements[ee];\n\t    var level=el.lev;\n\t    var color=state.Colors.getLevelColor(state,level);\n\t    var docs=el.docs;\n\t    var dlen=docs.length;\n\t    //console.log(\"Element:\",level,color,tot,cnt);\n\t    if (dlen>0) {\n\t\tfor (var jj=0;jj<dlen;jj++) {\n\t\t    cnt=cnt+1;\n\t\t    var d=docs[jj];\n\t\t    state.Threshold.setGThr(state,d);\n\t\t    var lev=state.Threshold.getLevel(state,d);\n\t\t    var col=state.Colors.getLevelColor(state,lev);\n\t\t    //console.log(\"   Doc:\",key,jj,JSON.stringify(lev),JSON.stringify(d));\n\t\t    for (var ii=0;ii<step;ii++) {\n\t\t\t//console.log(\"   Checking Val:\",key,ii,val[ii],d[key]);\n\t\t\t//console.log(\"Position:\",ii,jj,dlen,step,key,d[key],val[ii])\n\t\t\tif (d[key]  === val[ii]) {\n\t\t\t    if (first) {\n\t\t\t\tfirst=false;\n\t\t\t\t//console.log(\"Doc:\",jj,JSON.stringify(d));\n\t\t\t    };\n\t\t\t    var t=state.Threshold.getThresholds(d);\n\t\t\t    //console.log(\"Making canvas:\",ii,val[ii],color,JSON.stringify(d),\n\t\t\t    //\t    \" Thr=\",JSON.stringify(t),width,height,JSON.stringify(range));\n\t\t\t    //console.log(\"Canvas:\",ii,jj,d.dtg,color,level,JSON.stringify(t));\n\t\t\t    var min=range[0]\n\t\t\t    var max=range[1];\n\t\t\t    var ymin=min;\n\t\t\t    if (t.min !== undefined && t.min[state.Threshold.ival] !== undefined) {\n\t\t\t\tymin=t.min[state.Threshold.ival];\n\t\t\t    }\n\t\t\t    var ymax=max;\n\t\t\t    if (t.max !== undefined && t.max[state.Threshold.ival] !== undefined) {\n\t\t\t\tymax=t.max[state.Threshold.ival];\n\t\t\t    }\n\t\t\t    var mm=ii\n\t\t\t    if (step<tot) {mm=cnt-1;}\n\t\t\t    //console.log(\" canvas position:\",mm,ii,cnt,step,tot)\n\t\t\t    var xmin=mm*dw;       // width/10;\n\t\t\t    var xmax=(mm+1)*dw-2;   //width-2*xmin;\n\t\t\t    var zmin=state.Show.scale(ymin,min,max,height,0);\n\t\t\t    var zmax=state.Show.scale(ymax,min,max,height,0);\n\t\t\t    //console.log(\"Fill:\",xmin,xmax,width,zmin,(zmax-zmin),height,color);\n\t\t\t    //ctx.fillStyle=\"cornflowerblue\";\n\t\t\t    color=col;\n\t\t\t    if (color !== undefined) {ctx.fillStyle=color;}\n\t\t\t    ctx.fillRect(xmin,zmin,xmax-xmin,(zmax-zmin));\n\t\t\t    //ctx.beginPath();\n\t\t\t    //ctx.lineWidth=2;\n\t\t\t    //if (color !== undefined) {ctx.strokeStyle=color;}\n\t\t\t    //ctx.strokeStyle=\"black\";\n\t\t\t    //ctx.moveTo(xmin,zmax);\n\t\t\t    //ctx.lineTo(xmax,zmax);\n\t\t\t    //ctx.stroke();\n\t\t\t    // draw thresholds\n\t\t\t    for (var msr in t) {\n\t\t\t\tvar tt    = t[msr];\n\t\t\t\tvar tmax  = tt[state.Threshold.imax];\n\t\t\t\tvar tthr  = tt[state.Threshold.ithr];\n\t\t\t\tvar tkey  = tt[state.Threshold.ikey];\n\t\t\t\t//var tlev  = tt[state.Threshold.ilev];\n\t\t\t\t//var tval  = tt[state.Threshold.ival];\n\t\t\t\tvar ts;\n\t\t\t\tif (tmax) {\n\t\t\t\t    ts=state.Threshold.thrs[tthr][tkey].max;\n\t\t\t\t} else {\n\t\t\t\t    ts=state.Threshold.thrs[tthr][tkey].min;\n\t\t\t\t};\n\t\t\t\tvar tlen=ts.length;\n\t\t\t\tfor (var ll=0;ll<tlen;ll++) {\n\t\t\t\t    var tyval=ts[ll];\n\t\t\t\t    var tzval=state.Show.scale(tyval,min,max,height,0);\n\t\t\t\t    var scolor=state.Colors.getLevelColor(state,ll);\n\t\t\t\t    ctx.beginPath();\n\t\t\t\t    ctx.lineWidth=5;\n\t\t\t\t    if (scolor !== undefined) {ctx.strokeStyle=scolor;}\n\t\t\t\t    ctx.moveTo(xmin,tzval);\n\t\t\t\t    ctx.lineTo(xmax,tzval);\n\t\t\t\t    ctx.stroke();\n\t\t\t\t    //console.log(\"Stroke color:\",color,ll,tzval,width);\n\t\t\t\t}\n\t\t\t    }\n\t\t\t}\n\t\t    }\n\t\t}\n\t    }\n\t};\n\tif (tot  === 0) {\n\t    console.log(\"No draw:\",JSON.stringify(val),JSON.stringify(docs),dlen);\n\t}\n\tif (title !== \"\") {\n\t    td.setAttribute(\"title\",title);\n\t}\n\tif (onclick !== undefined && onclick !== \"\") {\n\t    td.setAttribute(\"onclick\",onclick);\n\t}\n\ttd.appendChild(cnv);\n\treturn td;\n    };\n    this.makeCanvasItem=function(state,el,range) { \n\tvar td=document.createElement(\"TD\");\n\t//td.setAttribute(\"style\",\"text-decoration: none;padding-bottom:0pt\");\n\ttd.setAttribute(\"pval\",\"\");\n\ttd.setAttribute(\"align\",\"center\");\n\ttd.setAttribute(\"ptyp\",\"canvas\");\n\ttd.setAttribute(\"class\",\"canvas\");\n\tvar cnv=document.createElement(\"CANVAS\");\n\tcnv.setAttribute(\"style\",\"width:100%;height:100%;display:block;cursor:pointer;\");\n\t//var width = cnv.width;\n\tvar height = cnv.height;\n\tvar ctx = cnv.getContext(state,\"2d\");\n\tvar level=el.lev;\n\tvar color=state.Colors.getLevelColor(state,level);\n\tvar docs=el.docs;\n\tvar dlen=docs.length;\n\tvar dw= cnv.width/Math.max(1,dlen)\n\tvar cnt=0;\n\tif (dlen>0) {\n\t    for (var jj=0;jj<dlen;jj++) {\n\t\tcnt=cnt+1;\n\t\tvar d=docs[jj];\n\t\tstate.Threshold.setGThr(state,d);\n\t\tvar lev=state.Threshold.getLevel(state,d);\n\t\tvar col=state.Colors.getLevelColor(state,lev);\n\t\t//console.log(\"   Doc:\",key,jj,JSON.stringify(d));\n\t\tvar t=state.Threshold.getThresholds(d);\n\t\t//console.log(\"Making canvas:\",ii,val[ii],color,JSON.stringify(d),\n\t\t//\t    \" Thr=\",JSON.stringify(t),width,height,JSON.stringify(range));\n\t\t//console.log(\"Canvas:\",ii,jj,d.dtg,color,level);\n\t\tvar min=range[0]\n\t\tvar max=range[1];\n\t\tvar ymin=min;\n\t\tif (t.min !== undefined && t.min[state.Threshold.ival] !== undefined) {\n\t\t    ymin=t.min[state.Threshold.ival];\n\t\t}\n\t\tvar ymax=max;\n\t\tif (t.max !== undefined && t.max[state.Threshold.ival] !== undefined) {\n\t\t    ymax=t.max[state.Threshold.ival];\n\t\t}\n\t\tvar mm=jj\n\t\t//console.log(\" canvas position:\",mm,ii,cnt,step,tot)\n\t\tvar xmin=mm*dw;       // width/10;\n\t\tvar xmax=(mm+1)*dw-2;   //width-2*xmin;\n\t\tvar zmin=state.Show.scale(ymin,min,max,height,0);\n\t\tvar zmax=state.Show.scale(ymax,min,max,height,0);\n\t\t//console.log(\"Fill:\",xmin,xmax,width,zmin,(zmax-zmin),height,color);\n\t\t//ctx.fillStyle=\"cornflowerblue\";\n\t\tcolor=col;\n\t\tif (color !== undefined) {ctx.fillStyle=color;}\n\t\tctx.fillRect(xmin,zmin,xmax-xmin,(zmax-zmin));\n\t\t// draw thresholds\n\t\tfor (var msr in t) {\n\t\t    var tt    = t[msr];\n\t\t    var tmax  = tt[state.Threshold.imax];\n\t\t    var tthr  = tt[state.Threshold.ithr];\n\t\t    var tkey  = tt[state.Threshold.ikey];\n\t\t    //var tlev  = tt[state.Threshold.ilev];\n\t\t    //var tval  = tt[state.Threshold.ival];\n\t\t    var ts;\n\t\t    if (tmax) {\n\t\t\tts=state.Threshold.thrs[tthr][tkey].max;\n\t\t    } else {\n\t\t\tts=state.Threshold.thrs[tthr][tkey].min;\n\t\t    };\n\t\t    var tlen=ts.length;\n\t\t    for (var ll=0;ll<tlen;ll++) {\n\t\t\tvar tyval=ts[ll];\n\t\t\tvar tzval=state.Show.scale(tyval,min,max,height,0);\n\t\t\tvar scolor=state.Colors.getLevelColor(state,ll);\n\t\t\tctx.beginPath();\n\t\t\tctx.lineWidth=5;\n\t\t\tif (scolor !== undefined) {ctx.strokeStyle=scolor;}\n\t\t\tctx.moveTo(xmin,tzval);\n\t\t\tctx.lineTo(xmax,tzval);\n\t\t\tctx.stroke();\n\t\t\t//console.log(\"Stroke color:\",color,ll,tzval,width);\n\t\t    }\n\t\t}\n\t    }\n\t};\n\ttd.appendChild(cnv);\n\treturn td;\n    };\n    this.rotateHeight=function(state) {\n\tvar gwidth,lheight,lwidth,oheight,owidth;\n\tvar gdd,dd,style;\n\tvar rotates = document.getElementsByClassName('rotate');\n\t//console.log(\"Rotating heights.\",rotates.length);\n\tvar i;\n\tfor (i = 0; i < rotates.length; i++) {\n\t    lheight=parseInt(state,rotates[i].offsetWidth,10);\n\t    lwidth=parseInt(state,rotates[i].offsetHeight,10);\n\t    if (gwidth  === undefined) {gwidth=lwidth;};\n\t    oheight=(lheight/2);\n\t    owidth=(lwidth/2);\n\t    dd=(oheight-owidth);\n\t    if (gdd  === undefined) {\n\t\tgdd=dd;\n\t    } else if (gdd < dd) {\n\t\tgdd=dd;\n\t    }\n\t}\n\tfor (i = 0; i < rotates.length; i++) {\n\t    //var cwidth=parseInt(state,window.getComputedStyle(rotates[i]).fontSize,10);\n\t    lheight=parseInt(state,rotates[i].offsetWidth,10);\n\t    lwidth=parseInt(state,rotates[i].offsetHeight,10);\n\t    oheight=(lheight/2);\n\t    owidth=(lwidth/2);\n\t    dd=(oheight-owidth);\n\t    style=\"width:\"+lwidth+\"px;height:\"+lheight+\"px;transform:translate(state,\"+dd+\"px,\"+gdd+\"px) rotate(state,-90.0deg);\";\n\t    //console.log(\"Rotates:\",i,style,lwidth,lheight,gwidth,cwidth,oheight,owidth);// 19px 129px\n\t    rotates[i].setAttribute(\"style\",style);\n\t}\n\tvar canvas = document.getElementsByClassName('canvas');\n\tfor (i = 0; i < canvas.length; i++) {\n\t    var cheight=parseInt(state,window.getComputedStyle(canvas[i]).fontSize,10);\n\t    style=\"width:\"+gwidth+\"px;height:\"+cheight*1.5+\"px\";\n\t    //console.log(\"Canvas:\",i,style,gwidth);// 19px 129px\n\t    canvas[i].style.width=gwidth+\"px\";\n\t    canvas[i].style.height=(cheight*3)+\"px\";\n\t}\n    };\n    this.setAttributes=function(item,hash) {\n\tfor (var name in hash) {\n\t    var val=hash[name];\n\t    item.setAttribute(name,val);\n\t}\n    }\n};\nexport default Html;\n"]},"metadata":{},"sourceType":"module"}