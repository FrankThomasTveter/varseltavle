{"ast":null,"code":"//console.log(\"Loading UtilsLib.js\");\nfunction Utils() {\n  this.version = 1;\n\n  this.invertArray = function (arr) {\n    var alen = arr.length;\n    var xlen = Math.floor(alen / 2);\n\n    for (var ii = 0; ii < xlen; ii++) {\n      var jj = alen - ii - 1;\n      var buff = arr[ii];\n      arr[ii] = arr[jj];\n      arr[jj] = buff;\n    }\n  };\n\n  this.init = function (par, setup) {\n    var url = this.getUrlVars();\n\n    if (par in url) {\n      //console.log(par,url);\n      var code = decodeURIComponent(url[par]); //console.log(\"Processing url:\",code);\n\n      var newsetup = JSON.parse(code);\n\n      for (var ss in newsetup) {\n        if (newsetup[ss] !== undefined) {\n          setup[ss] = newsetup[ss];\n        }\n      }\n\n      console.log(\"new setup:\", JSON.stringify(setup));\n    } else {\n      console.log(\"No '\" + par + \"' in URL.\");\n    }\n  };\n\n  this.moveTo = function (arr, src, trg) {\n    var isrc = arr.indexOf(src);\n    var itrg = arr.indexOf(trg);\n\n    if (isrc !== -1 && itrg !== -1) {\n      var csrc = arr.splice(isrc, 1);\n      this.spliceArray(arr, itrg, 0, csrc);\n    }\n  };\n\n  this.missing = function (arr, src) {\n    if (arr === undefined) {\n      console.log(\"Invalid array specified in this.missing:\", JSON.stringify(src));\n      return false;\n    } else {\n      if (Array.isArray(src)) {\n        return arr.indexOf(src[0]) === -1;\n      } else {\n        return arr.indexOf(src) === -1;\n      }\n    }\n  };\n\n  this.cp2 = function (org) {\n    // duplicate object\n    if (org !== undefined) {\n      // Deep copy\n      //return jQuery.extend(true, {}, org);\n      return JSON.parse(JSON.stringify(org));\n    } else {\n      return undefined;\n    }\n  };\n\n  this.cp = function (obj) {\n    if (obj === null || typeof obj !== 'object' || 'isActiveClone' in obj) return obj;\n\n    if (obj instanceof Date) {\n      var temp = new obj.constructor(); //or new Date(obj);\n    } else {\n      var temp = obj.constructor();\n    }\n\n    ;\n\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.bind(this).call(obj, key)) {\n        obj['isActiveClone'] = null;\n        temp[key] = this.cp(obj[key]);\n        delete obj['isActiveClone'];\n      }\n    }\n\n    return temp;\n  }.bind(this);\n\n  this.toggleFullScreen = function (state) {\n    //var pos=0;\n    if (!document.fullscreenElement && // alternative standard method\n    !document.mozFullScreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement) {\n      // current working methods\n      if (document.documentElement.requestFullscreen) {\n        document.documentElement.requestFullscreen(); //pos=1;\n      } else if (document.documentElement.msRequestFullscreen) {\n        document.documentElement.msRequestFullscreen(); //pos=2;\n      } else if (document.documentElement.mozRequestFullScreen) {\n        document.documentElement.mozRequestFullScreen(); //pos=3;\n      } else if (document.webkitRequestFullscreen) {\n        document.webkitRequestFullscreen(); //pos=4;\n      } else {//pos=5;\n        }\n    } else {\n      if (document.exitFullscreen) {\n        document.exitFullscreen(); //pos=6;\n      } else if (document.msExitFullscreen) {\n        document.msExitFullscreen(); //pos=7;\n      } else if (document.mozCancelFullScreen) {\n        document.mozCancelFullScreen(); //pos=8;\n      } else if (document.webkitExitFullscreen) {\n        document.webkitExitFullscreen(); //pos=9;\n      } else {//pos=10;\n        }\n    }\n  };\n\n  this.getStatusString = function (state) {\n    return \"<em> \" + this.numberWithCommas(state.Database.cnt) + \" in database, \" + this.numberWithCommas(state.Matrix.cnt) + \" in table.</em>\";\n  };\n\n  this.toString = function (setup) {\n    var s = \"->\";\n\n    for (var kk in setup) {\n      s = s + \"|\" + kk + \":\" + setup[kk];\n    }\n\n    ;\n    return s;\n  };\n\n  this.numberWithCommas = function (x) {\n    return x.toString().replace(/\\B(state,?=(\\d{3})+(?!\\d))/g, \",\");\n  };\n\n  this.pushUrl = function (state) {\n    //var first=true;\n    var path = window.location.pathname;\n    console.log(\"Path:\", path);\n    var page = path.split(\"/\").pop();\n    page.split('#').shift(); //console.log( page );\n\n    var url = page + \"?\";\n    var urlPath = {};\n    var urlTable = {};\n    var urlShow = {};\n    urlPath.keys = this.cp(state.Path.keys);\n    urlPath.select = this.cp(state.Path.select);\n    urlTable.priority = state.Layout.getPriority(state);\n    urlTable.rotate = this.cp(state.Layout.rotate || {});\n    urlShow.state = this.cp(state.Show.state);\n    url = url + \"Show\" + this.version + \"=\" + encodeURI(JSON.stringify(urlShow) + \"&\");\n    url = url + \"Path\" + this.version + \"=\" + encodeURI(JSON.stringify(urlPath) + \"&\");\n    url = url + \"Table\" + this.version + \"=\" + encodeURI(JSON.stringify(urlTable) + \"&\"); //console.log(\"Setting URL to:\",url);\n\n    window.history.replaceState(\"\", \"js\", url);\n  }.bind(this);\n\n  this.getUrlVars = function (state) {\n    var vars = {};\n    window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (m, key, value) {\n      //console.log(\"URL item:\",key,\" \",value)\n      vars[key] = value;\n    });\n    return vars;\n  };\n\n  this.uniq = function (state, a) {\n    var seen = {};\n    return a.filter(function (item) {\n      return seen.hasOwnProperty(item) ? false : seen[item] = true;\n    });\n  };\n\n  this.spliceArray = function (arr, index, n, child) {\n    if (Array.isArray(child)) {\n      var len = child.length;\n\n      for (var ii = 0; ii < len; ii++) {\n        arr.splice(index, n, child[ii]);\n        n = 0;\n        index = index + 1;\n      }\n    } else {\n      arr.splice(index, n, child);\n    }\n  }; // Hide method from for-in loops\n  //Object.defineProperty(state,Array.prototype, \"spliceArray\", {enumerable: false});\n  //Object.defineProperty(state,Array.prototype, \"equals\", {enumerable: false});\n  //[1, 2, [3, 4]].equals(state,[1, 2, [3, 2]])  === false\n  //Array.prototype.spliceArray = function(state,index, n, array) {\n  //    return Array.prototype.splice.apply(state,this, [index, n].concat(array));\n  //}\n  // Warn if overriding existing method\n\n\n  if (Array.prototype.equals) console.warn(\"Overriding existing Array.prototype.equals. \" + \"Possible causes: New API defines the method,\" + \" there's a framework conflict or you've got \" + \"double inclusions in your code.\"); // attach the .equals method to Array's prototype to call it on any array\n\n  Array.prototype.equals = function (array) {\n    // if the other array is a falsy value, return\n    if (!array) return false; // compare lengths - can save a lot of time \n\n    if (this.length !== array.length) return false;\n\n    for (var i = 0, l = this.length; i < l; i++) {\n      // Check if we have nested arrays\n      if (this[i] instanceof Array && array[i] instanceof Array) {\n        // recurse into the nested arrays\n        if (!this[i].equals(array[i])) return false;\n      } else if (this[i] !== array[i]) {\n        // Warning - two different object instances will never be equal: {x:20} !== {x:20}\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  this.ascending = function (a, b) {\n    if (a === \"\") {\n      return 1;\n    } else if (b === \"\") {\n      return -1;\n    } else if (a < b) {\n      return -1;\n    } else if (a > b) {\n      return 1;\n    } else {\n      return 0;\n    }\n  };\n\n  this.descending = function (a, b) {\n    if (a === \"\") {\n      return -1;\n    } else if (b === \"\") {\n      return 1;\n    } else if (a < b) {\n      return 1;\n    } else if (a > b) {\n      return -1;\n    } else {\n      return 0;\n    }\n  };\n\n  this.ascendingN = function (a, b) {\n    if (a === null) {\n      return 1;\n    } else if (b === null) {\n      return -1;\n    } else if (Number(a) < Number(b)) {\n      return -1;\n    } else if (Number(a) > Number(b)) {\n      return 1;\n    } else {\n      return 0;\n    }\n  };\n\n  this.descendingN = function (a, b) {\n    if (a === null) {\n      return -1;\n    } else if (b === null) {\n      return 1;\n    } else if (Number(a) < Number(b)) {\n      return 1;\n    } else if (Number(a) > Number(b)) {\n      return -1;\n    } else {\n      return 0;\n    }\n  };\n}\n\n;\nexport default Utils;","map":{"version":3,"sources":["/home/franktt/react/varseltavle/src/lib/UtilsLib.js"],"names":["Utils","version","invertArray","arr","alen","length","xlen","Math","floor","ii","jj","buff","init","par","setup","url","getUrlVars","code","decodeURIComponent","newsetup","JSON","parse","ss","undefined","console","log","stringify","moveTo","src","trg","isrc","indexOf","itrg","csrc","splice","spliceArray","missing","Array","isArray","cp2","org","cp","obj","Date","temp","constructor","key","Object","prototype","hasOwnProperty","bind","call","toggleFullScreen","state","document","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement","documentElement","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","getStatusString","numberWithCommas","Database","cnt","Matrix","toString","s","kk","x","replace","pushUrl","path","window","location","pathname","page","split","pop","shift","urlPath","urlTable","urlShow","keys","Path","select","priority","Layout","getPriority","rotate","Show","encodeURI","history","replaceState","vars","href","m","value","uniq","a","seen","filter","item","index","n","child","len","equals","warn","array","i","l","ascending","b","descending","ascendingN","Number","descendingN"],"mappings":"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","sourcesContent":["//console.log(\"Loading UtilsLib.js\");\n\t\t    \nfunction Utils() {\n    this.version=1;\n    this.invertArray=function(arr) {\n\tvar alen=arr.length;\n\tvar xlen=Math.floor(alen/2);\n\tfor (var ii=0; ii<xlen;ii++) {\n\t    var jj=alen-ii-1\n\t    var buff=arr[ii];\n\t    arr[ii]=arr[jj];\n\t    arr[jj]=buff;\n\t}\n    };\n    this.init=function(par,setup){\n\tvar url=this.getUrlVars();\n\tif (par in url) {\n\t    //console.log(par,url);\n\t    var code=decodeURIComponent(url[par]);\n\t    //console.log(\"Processing url:\",code);\n\t    var newsetup=JSON.parse(code);\n\t    for (var ss in newsetup) {\n\t\tif (newsetup[ss] !== undefined) {\n\t\t    setup[ss]=newsetup[ss];\n\t\t}\n\t    }\n\t    console.log(\"new setup:\",JSON.stringify(setup));\n\t} else {\n\t    console.log(\"No '\"+par+\"' in URL.\");\n\t}\n\n    };\n    this.moveTo=function(arr,src,trg) {\n\tvar isrc=arr.indexOf(src);\n\tvar itrg=arr.indexOf(trg);\n\tif (isrc !== -1 && itrg !== -1) {\n\t    var csrc=arr.splice(isrc, 1);\n\t    this.spliceArray(arr,itrg,0,csrc);\n\t}\n    };\n    this.missing=function(arr,src){\n\tif (arr === undefined) {\n\t    console.log(\"Invalid array specified in this.missing:\",JSON.stringify(src));\n\t    return false;\n\t} else {\n\t    if (Array.isArray(src)) {\n\t\treturn (arr.indexOf(src[0])  === -1);\n\t    } else {\n\t\treturn (arr.indexOf(src)  === -1);\n\t    }\n\t}\n    };\n    this.cp2=function(org) { // duplicate object\n\tif (org !== undefined) \n\t{// Deep copy\n\t    //return jQuery.extend(true, {}, org);\n\t    return JSON.parse(JSON.stringify(org));\n\t} else {\n\t    return undefined;\n\t}\n    };\n    this.cp=function(obj) {\n\tif (obj === null || typeof (obj) !== 'object' || 'isActiveClone' in obj)\n            return obj;\n\tif (obj instanceof Date) {\n\t    var temp = new obj.constructor(); //or new Date(obj);\n\t} else {\n\t    var temp = obj.constructor();\n\t};\n\tfor (var key in obj) {\n            if (Object.prototype.hasOwnProperty.bind(this).call(obj, key)) {\n\t\tobj['isActiveClone'] = null;\n\t\ttemp[key] = this.cp(obj[key]);\n\t\tdelete obj['isActiveClone'];\n            }\n\t}\n\treturn temp;\n    }.bind(this);\n    this.toggleFullScreen=function(state) {\n\t//var pos=0;\n\tif (!document.fullscreenElement &&    // alternative standard method\n\t    !document.mozFullScreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement ) {  // current working methods\n\t    if (document.documentElement.requestFullscreen) {\n\t\tdocument.documentElement.requestFullscreen();\n\t\t//pos=1;\n\t    } else if (document.documentElement.msRequestFullscreen) {\n\t\tdocument.documentElement.msRequestFullscreen();\n\t\t//pos=2;\n\t    } else if (document.documentElement.mozRequestFullScreen) {\n\t\tdocument.documentElement.mozRequestFullScreen();\n\t\t//pos=3;\n\t    } else if (document.webkitRequestFullscreen) {\n\t\tdocument.webkitRequestFullscreen();\n\t\t//pos=4;\n\t    } else {\n\t\t//pos=5;\n\t    }\n\t} else {\n\t    if (document.exitFullscreen) {\n\t\tdocument.exitFullscreen();\n\t\t//pos=6;\n\t    } else if (document.msExitFullscreen) {\n\t\tdocument.msExitFullscreen();\n\t\t//pos=7;\n\t    } else if (document.mozCancelFullScreen) {\n\t\tdocument.mozCancelFullScreen();\n\t\t//pos=8;\n\t    } else if (document.webkitExitFullscreen) {\n\t\tdocument.webkitExitFullscreen();\n\t\t//pos=9;\n\t    } else {\n\t\t//pos=10;\n\t    }\n\t}\n    };\n    this.getStatusString=function(state) {\n\treturn \"<em> \"+\n\t    this.numberWithCommas(state.Database.cnt)+ \" in database, \"+\n\t    this.numberWithCommas(state.Matrix.cnt)+\" in table.</em>\";\n    };\n    this.toString=function(setup) {\n\tvar s=\"->\";\n\tfor (var kk in setup) {\n\t    s = s + \"|\"+ kk + \":\" + setup[kk];\n\t};\n\treturn s;\n    };\n    this.numberWithCommas=function(x) {\n\treturn x.toString().replace(/\\B(state,?=(\\d{3})+(?!\\d))/g, \",\");\n    };\n    this.pushUrl=function(state) {\n\t//var first=true;\n\tvar path = window.location.pathname;\n\tconsole.log(\"Path:\",path);\n\tvar page = path.split(\"/\").pop();\n\tpage.split('#').shift();\n\t//console.log( page );\n\tvar url=page+\"?\";\n\tvar urlPath={};\n\tvar urlTable={};\n\tvar urlShow={};\n\turlPath.keys=this.cp(state.Path.keys);\n\turlPath.select=this.cp(state.Path.select);\n\turlTable.priority=state.Layout.getPriority(state);\n\turlTable.rotate=this.cp(state.Layout.rotate||{});\n\turlShow.state=this.cp(state.Show.state);\n\turl=url + \"Show\"+this.version+\"=\" + encodeURI(JSON.stringify(urlShow)+\"&\");\n\turl=url + \"Path\"+this.version+\"=\" + encodeURI(JSON.stringify(urlPath)+\"&\");\n\turl=url + \"Table\"+this.version+\"=\" + encodeURI(JSON.stringify(urlTable)+\"&\");\n\t//console.log(\"Setting URL to:\",url);\n\twindow.history.replaceState(\"\", \"js\", url);\n    }.bind(this);\n    this.getUrlVars=function(state) {\n\tvar vars = {};\n\twindow.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,    \n\t\t\t\t     function(m,key,value) {\n\t\t\t\t\t //console.log(\"URL item:\",key,\" \",value)\n\t\t\t\t\t vars[key] = value;\n\t\t\t\t     });\n\treturn vars;\n    };\n    this.uniq=function(state,a) {\n\tvar seen = {};\n\treturn a.filter(function(item) {\n\t    return seen.hasOwnProperty(item) ? false : (seen[item] = true);\n\t});\n    };\n    this.spliceArray=function(arr,index,n,child){\n\tif (Array.isArray(child)) {\n\t    var len=child.length;\n\t    for (var ii=0; ii<len; ii++) {\n\t\tarr.splice(index,n,child[ii])\n\t\tn=0\n\t\tindex=index+1\n\t    }\n\t} else {\n\t    arr.splice(index,n,child)\n\t}\n    }\n\n    // Hide method from for-in loops\n    //Object.defineProperty(state,Array.prototype, \"spliceArray\", {enumerable: false});\n    //Object.defineProperty(state,Array.prototype, \"equals\", {enumerable: false});\n    //[1, 2, [3, 4]].equals(state,[1, 2, [3, 2]])  === false\n\n    //Array.prototype.spliceArray = function(state,index, n, array) {\n    //    return Array.prototype.splice.apply(state,this, [index, n].concat(array));\n    //}\n    // Warn if overriding existing method\n    if (Array.prototype.equals)\n\tconsole.warn(\"Overriding existing Array.prototype.equals. \"\n\t\t     +\"Possible causes: New API defines the method,\"\n\t\t     +\" there's a framework conflict or you've got \"\n\t\t     +\"double inclusions in your code.\");\n    // attach the .equals method to Array's prototype to call it on any array\n    Array.prototype.equals = function (array) {\n\t// if the other array is a falsy value, return\n\tif (!array)\n\t    return false;\n\t// compare lengths - can save a lot of time \n\tif (this.length !== array.length)\n\t    return false;\n\tfor (var i = 0, l=this.length; i < l; i++) {\n\t    // Check if we have nested arrays\n\t    if (this[i] instanceof Array && array[i] instanceof Array) {\n\t\t// recurse into the nested arrays\n\t\tif (!this[i].equals(array[i]))\n\t\t    return false;       \n\t    }           \n\t    else if (this[i] !== array[i]) { \n\t\t// Warning - two different object instances will never be equal: {x:20} !== {x:20}\n\t\treturn false;   \n\t    }           \n\t}       \n\treturn true;\n    };\n    this.ascending=function(a,b) {\n\tif (a  === \"\") { \n\t    return 1;\n\t} else if (b  === \"\") {\n\t    return -1;\n\t} else if (a<b) { \n\t    return -1;\n\t} else if (a>b) {\n\t    return 1;\n\t} else {\n\t    return 0;\n\t}\n    };\n    this.descending=function(a,b) {\n\tif (a  === \"\") { \n\t    return -1;\n\t} else if (b  === \"\") {\n\t    return 1;\n\t} else if (a<b) { \n\t    return 1;\n\t} else if (a>b) {\n\t    return -1;\n\t} else {\n\t    return 0;\n\t}\n    };\n    this.ascendingN=function(a,b) {\n\tif (a  === null) { \n\t    return 1;\n\t} else if (b  === null) {\n\t    return -1;\n\t} else if (Number(a)<Number(b)) { \n\t    return -1;\n\t} else if (Number(a)>Number(b)) {\n\t    return 1;\n\t} else {\n\t    return 0;\n\t}\n    };\n    this.descendingN=function(a,b) {\n\tif (a  === null) { \n\t    return -1;\n\t} else if (b  === null) {\n\t    return 1;\n\t} else if (Number(a)<Number(b)) { \n\t    return 1;\n\t} else if (Number(a)>Number(b)) {\n\t    return -1;\n\t} else {\n\t    return 0;\n\t}\n    }\n};\nexport default Utils;\n"]},"metadata":{},"sourceType":"module"}