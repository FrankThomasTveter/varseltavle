{"ast":null,"code":"//console.log(\"Loading ShowLib.js\");\nfunction Show(){this.init=function(state){var par=\"Show\";state.Utils.init(par,this);};this.showMode=function(state){// show data on screen\nif(state.React.Mode!==undefined){state.React.Mode.show(state);}};this.show=function(state,reload,callbacks){setTimeout(function(){this.showAll(state,reload);if(callbacks!==undefined){var callback=callbacks.shift();if(callback!==undefined){callback(state,callbacks);}};}.bind(this),0.1);};this.showAll=function(state,reload){// show data on screen\n//var documentLog = document.getElementById(\"log\");\n//console.log(\"Showing data.\");\nif(reload===undefined||reload){this.showPath(state);state.Html.setFootnote(state,\"Extracting data.\");state.Html.setProgress(state,true);setTimeout(function(){state.Database.dbextract(state,function(state,matrix){state.Html.setFootnote(state,\"Displaying data.\");setTimeout(function(){// callback\n//console.log(\"Updating matrix.\");\nstate.Path.exportAllKeys(state);//console.log(\"Showing path\");\nthis.showPath(state);//console.log(\"Showing Config\");\nthis.showConfig(state);//console.log(\"Showing matrix\");\nthis.showMatrix(state,matrix);//console.log(\"Pushing URL\");\nstate.Utils.pushUrl(state);state.Html.setFootnote(state);state.Html.setProgress(state,false);}.bind(this),0.1);}.bind(this));}.bind(this),0.1);}else{console.log(\"Not updating matrix.\");state.Path.exportAllKeys(state);this.showPath(state);this.showConfig(state);this.showTable(state);this.showTooltip(state);state.Html.setFootnote(state);state.Html.setProgress(state,false);}this.showMode(state);};this.showPath=function(state){if(state.React.Path!==undefined){state.React.Path.showPath(state);// forceUpdate()\n}else{console.log(\"No react-path available.\");}if(state.React.Location!==undefined){state.React.Location.showLocation(state);// forceUpdate()\n}else{console.log(\"No react-location available.\");}if(state.React.Disclaimer!==undefined){state.React.Disclaimer.showDisclaimer(state);// forceUpdate()\n}else{console.log(\"No react-disclaimer available.\");}};this.showConfig=function(state){if(state.React.Config!==undefined){state.React.Config.show(state);// forceUpdate()\n}else{console.log(\"No react-config available.\");}};this.showMatrix=function(state,matrix){if(state.React.Dataset!==undefined){state.React.Dataset.showMatrix(state,matrix);}};this.showTable=function(state,matrix){//console.log(\"ShowTable:\",state.Layout.state.layoutMode,state.Layout.modes.layout.Map);\nif(state.Layout.state.layoutMode===state.Layout.modes.layout.Map){if(state.React.Map!==undefined){state.React.Map.showMap(state);}}else{if(state.React.Table!==undefined){state.React.Table.showTable(state);}}};this.showTooltip=function(state){if(state.React.Tooltip!==undefined){state.React.Tooltip.rebuild();}};this.useCanvas=function(state,matrix){// check if matrix elements have max 1 data\n// loop over matrix\nfor(var ii in matrix){for(var jj in matrix[ii]){if(matrix[ii][jj].cnt>1){return false;}}}return true;};this.scale=function(xval,xmin,xmax,ymin,ymax){if(ymin>ymax){return ymin+(xval-xmin)*(ymax-ymin)/(xmax-xmin);}else{return(xval-xmin)*(ymax-ymin)/(xmax-xmin);}};};export default Show;","map":{"version":3,"sources":["/home/franktt/react/varseltavle/src/lib/ShowLib.js"],"names":["Show","init","state","par","Utils","showMode","React","Mode","undefined","show","reload","callbacks","setTimeout","showAll","callback","shift","bind","showPath","Html","setFootnote","setProgress","Database","dbextract","matrix","Path","exportAllKeys","showConfig","showMatrix","pushUrl","console","log","showTable","showTooltip","Location","showLocation","Disclaimer","showDisclaimer","Config","Dataset","Layout","layoutMode","modes","layout","Map","showMap","Table","Tooltip","rebuild","useCanvas","ii","jj","cnt","scale","xval","xmin","xmax","ymin","ymax"],"mappings":"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","sourcesContent":["//console.log(\"Loading ShowLib.js\");\n\nfunction Show() {\n    this.init=function(state){\n\tvar par=\"Show\";\n\tstate.Utils.init(par,this);\n    };\n    this.showMode=function(state) { // show data on screen\n\tif (state.React.Mode !== undefined) {\n\t    state.React.Mode.show(state);\n\t}\n    };\n    this.show=function(state,reload,callbacks) {\n        setTimeout(function() {\n\t    this.showAll(state,reload);\n\t    if (callbacks !== undefined) {\n\t\tvar callback=callbacks.shift();\n\t\tif (callback !== undefined) {\n\t\t    callback(state,callbacks)\n\t\t}\n\t    };\n\t}.bind(this),0.1);\n    };\n    this.showAll=function(state,reload) { // show data on screen\n\t//var documentLog = document.getElementById(\"log\");\n\t//console.log(\"Showing data.\");\n\tif (reload  === undefined || reload) {\n\t    this.showPath(state);\n\t    state.Html.setFootnote(state,\"Extracting data.\");\n\t    state.Html.setProgress(state, true);\n\t    setTimeout(function() {\n\t\tstate.Database.dbextract(state,function (state,matrix){\n\t\t    state.Html.setFootnote(state,\"Displaying data.\");\n\t\t    setTimeout(function (){  // callback\n\t\t\t//console.log(\"Updating matrix.\");\n\t\t\tstate.Path.exportAllKeys(state);\n\t\t\t//console.log(\"Showing path\");\n\t\t\tthis.showPath(state);\n\t\t\t//console.log(\"Showing Config\");\n\t\t\tthis.showConfig(state);\n\t\t\t//console.log(\"Showing matrix\");\n\t\t\tthis.showMatrix(state,matrix);\n\t\t\t//console.log(\"Pushing URL\");\n\t\t\tstate.Utils.pushUrl(state);\n\t\t\tstate.Html.setFootnote(state);\n\t\t\tstate.Html.setProgress(state, false);\n\t\t    }.bind(this),0.1);\n\t\t}.bind(this));\n\t    }.bind(this),0.1);\n\t} else {\n\t    console.log(\"Not updating matrix.\");\n\t    state.Path.exportAllKeys(state);\n\t    this.showPath(state);\n\t    this.showConfig(state);\n\t    this.showTable(state);\n\t    this.showTooltip(state);\n\t    state.Html.setFootnote(state);\n\t    state.Html.setProgress(state, false);\n\t}\n\tthis.showMode(state);\n    };\n    this.showPath=function(state) {\n\tif (state.React.Path !== undefined) {\n\t    state.React.Path.showPath(state); // forceUpdate()\n\t} else {\n\t    console.log(\"No react-path available.\");\n\t}\n\tif (state.React.Location !== undefined) {\n\t    state.React.Location.showLocation(state); // forceUpdate()\n\t} else {\n\t    console.log(\"No react-location available.\");\n\t}\n\tif (state.React.Disclaimer !== undefined) {\n\t    state.React.Disclaimer.showDisclaimer(state); // forceUpdate()\n\t} else {\n\t    console.log(\"No react-disclaimer available.\");\n\t}\n    };\n    this.showConfig=function(state) {\n\tif (state.React.Config !== undefined) {\n\t    state.React.Config.show(state); // forceUpdate()\n\t} else {\n\t    console.log(\"No react-config available.\");\n\t}\n    };\n    this.showMatrix=function(state,matrix) {\n\tif (state.React.Dataset !== undefined) {\n\t    state.React.Dataset.showMatrix(state,matrix);\n\t}\n    };\n    this.showTable=function(state,matrix) {\n\t//console.log(\"ShowTable:\",state.Layout.state.layoutMode,state.Layout.modes.layout.Map);\n\tif (state.Layout.state.layoutMode === state.Layout.modes.layout.Map) {\n\t    if (state.React.Map !== undefined) {\n\t\tstate.React.Map.showMap(state);\n\t    }\n\t} else {\n\t    if (state.React.Table !== undefined) {\n\t\tstate.React.Table.showTable(state);\n\t    }\n\t}\n    };\n    this.showTooltip=function(state) {\n\tif (state.React.Tooltip !== undefined) {\n\t    state.React.Tooltip.rebuild();\n\t}\n    };\n    this.useCanvas=function(state,matrix) {    // check if matrix elements have max 1 data\n\t// loop over matrix\n\tfor (var ii in matrix) {\n\t    for (var jj in matrix[ii]) {\n\t\tif (matrix[ii][jj].cnt > 1) {\n\t\t    return false;\n\t\t}\n\t    }\n\t}\n\treturn true;\n    };\n    this.scale=function(xval,xmin,xmax,ymin,ymax) {\n\tif (ymin>ymax) {\n\t    return ymin + (xval-xmin)*(ymax-ymin)/(xmax-xmin);\n\t} else {\n\t    return (xval-xmin)*(ymax-ymin)/(xmax-xmin);\n\t}\n    }\n};\nexport default Show;\n"]},"metadata":{},"sourceType":"module"}