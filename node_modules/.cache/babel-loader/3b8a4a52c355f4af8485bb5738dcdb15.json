{"ast":null,"code":"import _classCallCheck from\"/home/franktt/react/varseltavle/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/franktt/react/varseltavle/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/franktt/react/varseltavle/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/franktt/react/varseltavle/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/franktt/react/varseltavle/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/franktt/react/varseltavle/node_modules/@babel/runtime/helpers/esm/inherits\";import _objectWithoutProperties from\"/home/franktt/react/varseltavle/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import React,{Component}from\"react\";import{withStyles}from'@material-ui/core/styles';import{teal_palette}from'../mui/metMuiThemes';import Paper from'@material-ui/core/Paper';import Grid from'@material-ui/core/Grid';import SummaryCell from'./SummaryCell';import SeriesCell from'./SeriesCell';import CanvasText from'./CanvasTextComponent';import Tooltip from'./TooltipContainer';var styles=function styles(theme){return{content:{},divHdrLeft:{display:'inline-block',justifyContent:'left',cursor:\"pointer\"},divHdrRight:{display:'inline-block',justifyContent:'right',cursor:\"pointer\"},paper:{//\toverflow: 'hidden',\ntableLayout:'fixed',padding:0,margin:0},divTable:{display:'table',width:'100%'//\tborder:  '1px solid red',\n},divTableRow:{backgroundColor:teal_palette.main,border:'0px solid #999999',display:'table-row',padding:'0px'},divTableCell:{border:'0px solid #999999',display:'table-cell',padding:'0px'},divTableCellCursor:{cursor:\"pointer\",border:'0px solid #999999',display:'table-cell',padding:'0px'},divTableHead:{border:'0px',display:'table-cell',padding:'0px'},divTableHeading:{display:'table-header-group'},divTableHeadingCenter:{display:'flex',justifyContent:'center'},divTableFoot:{backgroundColor:'#DDD',display:'table-footer-group',fontWeight:'bold'},divTableBody:{display:'table-row-group'},paperImage:{textAlign:'center',padding:theme.spacing.unit*2}};};//const mui = createTheme({palette:teal_palette});\n// ---------------- DATA\nfunction FirstDataCell(props){var classes=props.classes,state=props.state,colkey=props.colkey,rowkey=props.rowkey,rowval=props.rowval,onclick=props.onclick,plan=props.plan,rowindex=props.rowindex;var cursor=classes.divTableCell;if(onclick!==undefined){cursor=classes.divTableCellCursor;}// width={plan.width} height={plan.height}\nvar data;if(colkey===\"\"&&rowkey===\"\"){data=null;}else{data=JSON.stringify({colkey:colkey,rowkey:rowkey,rowval:rowval});};if(rowindex%2===1){return React.createElement(\"div\",{className:cursor,onClick:onclick,style:{backgroundColor:'#DDD'},\"data-for\":\"cell\",\"data-tip\":data},React.createElement(CanvasText,{state:state,label:rowval,plan:plan}));}else{return React.createElement(\"div\",{className:cursor,onClick:onclick,style:{backgroundColor:'#EEE'},\"data-for\":\"cell\",\"data-tip\":data},React.createElement(CanvasText,{state:state,label:rowval,plan:plan}));}}//{rowval}\nfunction DataCell(props){var classes=props.classes,state=props.state,elements=props.elements,mode=props.mode,plan=props.plan,rowindex=props.rowindex,other=_objectWithoutProperties(props,[\"classes\",\"state\",\"elements\",\"mode\",\"plan\",\"rowindex\"]);if(elements===undefined){if(rowindex%2===1){return React.createElement(\"div\",{className:classes.divTableCell,style:{backgroundColor:'#EEE'}});}else{return React.createElement(\"div\",{className:classes.divTableCell,style:{backgroundColor:'#FFF'}});}}else if(mode===state.Layout.modes.cell.Sum){return React.createElement(SummaryCell,Object.assign({},other,{state:state,elements:elements,plan:plan}));//return null;\n}else{return React.createElement(SeriesCell,Object.assign({},other,{state:state,elements:elements,plan:plan}));//return null;\n}}function renderDataCell(classes,state,colkey,colvalues,rowkey,rowval,rowindex,rowwhere,range,mode,plan,val,index){//console.log(\"Making data cell:\",rowval,val,index,plan,JSON.stringify(colvalues));\nif(index%plan.step===0){// get elements and range\n//console.log(\"Processing:\",val,colvalues[index],plan.step);\nvar elements=state.Matrix.getMatrixElements(colvalues,rowval,state.React.matrix,index,plan.step);//console.log(\"Elements:\",rowval,index,' =>',JSON.stringify(elements));\n// get count and colwhere\nvar cnt=Math.min(colvalues.length,index+plan.step)-index;var colwhere=state.Database.getColWhere(colkey,colvalues,index,plan.step);// make onclick\nvar onclick=function onclick(){return state.Navigate.selectItem(state,colkey,rowkey,colvalues[index],rowval,colwhere,rowwhere,cnt,1);};return React.createElement(DataCell,{classes:classes,state:state,key:\"col-\".concat(index),rowindex:rowindex,index:index,onclick:onclick,colkey:colkey,rowkey:rowkey,colvalues:colvalues,rowval:rowval,colwhere:colwhere,rowwhere:rowwhere,elements:elements,mode:mode,plan:plan,range:range});}else{return null;}}//{{rowkey:'test1',colkey:'test2'}}\nfunction dataRow(classes,state,colkey,rowkey,colvalues,mode,plans,rowval,rowindex){var rowwhere=state.Database.getWhereDetail(rowkey,rowval);var onclick=function onclick(){state.Navigate.selectKey(state,rowkey,rowval,rowwhere,1);};var range=[undefined,undefined];if(state.React.matrix!==undefined){range=state.Matrix.getRange(state,state.React.matrix,colvalues,[rowval]);};//console.log(\"Making data cols.\",rowval,colkey,JSON.stringify(colvalues));\n//console.log(\"We have a matrix(\",rowval,\") with range:\",JSON.stringify(range));\nvar mapFunction=function mapFunction(val,index){return renderDataCell(classes,state,colkey,colvalues,rowkey,rowval,rowindex,rowwhere,range,mode,plans.cell,val,index);};return React.createElement(\"div\",{className:classes.divTableRow,key:rowindex.toString()},React.createElement(FirstDataCell,{classes:classes,state:state,key:'0',colkey:colkey,rowkey:rowkey,rowval:rowval,onclick:onclick,plan:plans.row,rowindex:rowindex}),colvalues.map(mapFunction));};function renderZeroRow(classes,state,colkey,colvalues,plans){return React.createElement(\"div\",{className:classes.divTableRow,key:1},React.createElement(\"div\",{className:classes.divTableCell,width:plans.cell.width},\"No data available\"));};function DataRows(props){var classes=props.classes,state=props.state,plans=props.plans,colkey=props.colkey,colvalues=props.colvalues,rowkey=props.rowkey,rowvalues=props.rowvalues,mode=props.mode;//console.log(\"Making data cols.\",colkey,JSON.stringify(colvalues));\nvar mapFunction=function mapFunction(val,index){return dataRow(classes,state,colkey,rowkey,colvalues,mode,plans,val,index);};if(rowvalues.length===0){return renderZeroRow(classes,state,colkey,colvalues,plans);}else{return rowvalues.map(mapFunction);}}// ---------------- HDR\nfunction FirstHdrCell(props){var classes=props.classes,state=props.state,colkey=props.colkey,rowkey=props.rowkey,plans=props.plans;// plan\n//var width=plans.hdr.width;\n//var height=plans.hdr.height;\n//teal_palette\n//console.log(\"Making first header cell.\",colkey,rowkey,plan.width,plan.height);\n//style={{backgroundColor:teal_palette.main}}\nvar onclickCol=function onclickCol(){return state.Navigate.switchTableKey(state,colkey);};var onclickRow=function onclickRow(){return state.Navigate.switchTableKey(state,rowkey);};var data;if(colkey===\"\"&&rowkey===\"\"){data=null;}else{data=JSON.stringify({colkey:colkey,rowkey:rowkey});};return React.createElement(\"div\",{style:{width:plans.hdr.width}},React.createElement(\"div\",{className:classes.divHdrRight,width:plans.hd2.width,onClick:onclickRow,\"data-for\":\"cell\",\"data-tip\":data},React.createElement(CanvasText,{state:state,label:rowkey,plan:plans.hd2,color:'white'})),React.createElement(\"div\",{className:classes.divHdrLeft,width:plans.hd1.width,onClick:onclickCol,\"data-for\":\"cell\",\"data-tip\":data},React.createElement(CanvasText,{state:state,label:colkey,plan:plans.hd1,color:'white'})));}//\nfunction renderHdrCell(classes,state,colkey,colvalues,rowkey,plan,val,index){if(index%plan.step===0){//console.log(\"HdrCell:\",index,plan.step);\nvar cnt=Math.min(colvalues.length,index+plan.step)-index;var colwhere=state.Database.getColWhere(colkey,colvalues,index,plan.step);var onclick=function onclick(){return state.Navigate.selectKey(state,colkey,colvalues[index],colwhere,cnt);};var cursor=classes.divTableCell;if(onclick!==undefined){cursor=classes.divTableCellCursor;}//console.log(\"Plan:\",JSON.stringify(plan));\nvar data;if(colkey===\"\"&&rowkey===\"\"){data=null;}else{data=JSON.stringify({colkey:colkey,rowkey:rowkey,colvalues:colvalues,index:index,step:plan.step});};return React.createElement(\"div\",{className:cursor,onClick:onclick,style:{backgroundColor:'#DDD'},key:\"col-\".concat(index),\"data-for\":\"cell\",\"data-tip\":data},React.createElement(CanvasText,{state:state,index:index,plan:plan,label:val}));}else{return null;}}function HdrRow(props){var classes=props.classes,state=props.state,plans=props.plans,colkey=props.colkey,colvalues=props.colvalues,rowkey=props.rowkey;//, rowvalues\n//console.log(\"Making header row.\",colkey,JSON.stringify(colvalues));\nvar mapFunction=function mapFunction(val,index){return renderHdrCell(classes,state,colkey,colvalues,rowkey,plans.col,val,index);};return React.createElement(\"div\",{className:classes.divTableRow,key:0},React.createElement(FirstHdrCell,{classes:classes,state:state,colkey:colkey,rowkey:rowkey,plans:plans,style:{height:\"100%\"}}),colvalues.map(mapFunction));}// ---------------- Details\nfunction Details(props){var classes=props.classes,state=props.state;// classes, element\nvar colkey=state.Path.getColKey(state)||\"\";var rowkey=state.Path.getRowKey(state)||\"\";var colvalues=state.Path.filterKeys(state,state.Matrix.values[colkey]||[\"\"]);var rowvalues=state.Path.filterKeys(state,state.Matrix.values[rowkey]||[\"\"]);var cellMode=state.Layout.getCellMode(state);//var ncol=colvalues.length + 1;\n//var nrow=rowvalues.length + 1;\n//DOM.style.font\nvar border=0;if(cellMode===state.Layout.modes.cell.Sum){border=1;};var width=0.9*window.innerWidth;var height=0.94*window.innerHeight-180;var plans=state.Layout.makePlans(colkey,rowkey,colvalues,rowvalues,width,height,border);//console.log(\"Heights:\",window.innerHeight,height,plans.hdr.height,plans.cell.height);\n//console.log(\"Details => Width/Height:\",window.innerWidth,window.innerHeight,plan.cell.width,plan.hdr.height)\n//console.log(\"Colkey:\",colkey,\" colval:\",JSON.stringify(colvalues));\n//console.log(\"Rowkey:\",rowkey,\" rowval:\",JSON.stringify(rowvalues));\nreturn React.createElement(\"div\",{className:classes.divTable},React.createElement(\"div\",{className:classes.divTableBody},React.createElement(HdrRow,{classes:classes,state:state,plans:plans,colkey:colkey,colvalues:colvalues,rowkey:rowkey,rowvalues:rowvalues}),React.createElement(DataRows,{classes:classes,state:state,plans:plans,colkey:colkey,colvalues:colvalues,rowkey:rowkey,rowvalues:rowvalues,mode:cellMode})));}var Table=/*#__PURE__*/function(_Component){_inherits(Table,_Component);function Table(props){var _this;_classCallCheck(this,Table);_this=_possibleConstructorReturn(this,_getPrototypeOf(Table).call(this,props));_this.updateWindowDimensions=function(){_this.width=window.innerWidth;_this.height=window.innerHeight;_this.bbx=_this.el.getBoundingClientRect();//console.log(\"Width/Height:\",this.width,this.height,this.bbx.width,this.bbx.height)\n};var state=props.state;state.React.Table=_assertThisInitialized(_this);return _this;}_createClass(Table,[{key:\"showTable\",value:function showTable(){console.log(\"Rebuilding table.\");this.forceUpdate();}},{key:\"componentDidMount\",value:function componentDidMount(){window.addEventListener(\"resize\",this.updateWindowDimensions);}},{key:\"element\",value:function element(el){if(el!==undefined&&el!==null){this.el=el;this.bbx=this.el.getBoundingClientRect();//console.log(\"BBX width/height:\",this.bbx.width,this.bbx.height);\n};}},{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,classes=_this$props.classes,state=_this$props.state;//console.log(\"##### Rendering Table.\");\nreturn React.createElement(\"div\",{ref:function ref(el){_this2.element(el);},className:classes.content},React.createElement(Grid,{container:true,spacing:24},React.createElement(Grid,{item:true,xs:12},React.createElement(Paper,{className:classes.paper},React.createElement(Details,{state:state,classes:classes,element:this})))),React.createElement(Tooltip,{state:state,classes:{button:classes.button},element:this,type:'cell'}));}}]);return Table;}(Component);export default withStyles(styles)(Table);","map":{"version":3,"sources":["/home/franktt/react/varseltavle/src/react/TableComponent.js"],"names":["React","Component","withStyles","teal_palette","Paper","Grid","SummaryCell","SeriesCell","CanvasText","Tooltip","styles","theme","content","divHdrLeft","display","justifyContent","cursor","divHdrRight","paper","tableLayout","padding","margin","divTable","width","divTableRow","backgroundColor","main","border","divTableCell","divTableCellCursor","divTableHead","divTableHeading","divTableHeadingCenter","divTableFoot","fontWeight","divTableBody","paperImage","textAlign","spacing","unit","FirstDataCell","props","classes","state","colkey","rowkey","rowval","onclick","plan","rowindex","undefined","data","JSON","stringify","DataCell","elements","mode","other","Layout","modes","cell","Sum","renderDataCell","colvalues","rowwhere","range","val","index","step","Matrix","getMatrixElements","matrix","cnt","Math","min","length","colwhere","Database","getColWhere","Navigate","selectItem","dataRow","plans","getWhereDetail","selectKey","getRange","mapFunction","toString","row","map","renderZeroRow","DataRows","rowvalues","FirstHdrCell","onclickCol","switchTableKey","onclickRow","hdr","hd2","hd1","renderHdrCell","HdrRow","col","height","Details","Path","getColKey","getRowKey","filterKeys","values","cellMode","getCellMode","window","innerWidth","innerHeight","makePlans","Table","updateWindowDimensions","bbx","el","getBoundingClientRect","console","log","forceUpdate","addEventListener","element","button"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport {teal_palette} from '../mui/metMuiThemes';\n\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\n\nimport SummaryCell from './SummaryCell';\nimport SeriesCell  from './SeriesCell';\nimport CanvasText  from './CanvasTextComponent';\nimport Tooltip  from './TooltipContainer';\n\nconst styles = theme => ({\n    content:{},\n    divHdrLeft : {\n\tdisplay: 'inline-block',\n\tjustifyContent: 'left',\n\tcursor: \"pointer\",\n    },\n    divHdrRight : {\n\tdisplay: 'inline-block',\n\tjustifyContent: 'right',\n\tcursor: \"pointer\",\n    },\n    paper: {\n//\toverflow: 'hidden',\n\ttableLayout: 'fixed',\n\tpadding:0,\n\tmargin:0,\n    },\n    divTable :{\n\tdisplay: 'table',\n\twidth: '100%',\n//\tborder:  '1px solid red',\n    },\n    divTableRow:  {\n\tbackgroundColor:teal_palette.main,\n\tborder: '0px solid #999999',\n\tdisplay: 'table-row',\n\tpadding: '0px',\n    },\n    divTableCell:{\n\tborder: '0px solid #999999',\n\tdisplay: 'table-cell',\n\tpadding: '0px',\n    },\n    divTableCellCursor:{\n\tcursor: \"pointer\",\n\tborder: '0px solid #999999',\n\tdisplay: 'table-cell',\n\tpadding: '0px',\n    },\n    divTableHead : {\n\tborder: '0px',\n\tdisplay: 'table-cell',\n\tpadding: '0px',\n    },\n    divTableHeading : {\n\tdisplay: 'table-header-group',\n    },\n    divTableHeadingCenter : {\n\tdisplay: 'flex',\n\tjustifyContent: 'center',\n    },\n    divTableFoot : {\n\tbackgroundColor: '#DDD',\n\tdisplay: 'table-footer-group',\n\tfontWeight: 'bold',\n    },\n    divTableBody : {\n\tdisplay: 'table-row-group',\n    },\n    paperImage: {\n        textAlign: 'center',\n        padding: theme.spacing.unit * 2,\n    }\n});\n\n//const mui = createTheme({palette:teal_palette});\n\n// ---------------- DATA\nfunction FirstDataCell (props) {\n    const { classes, state, colkey, rowkey, rowval, onclick, plan, rowindex } = props;\n    var cursor=classes.divTableCell;\n    if (onclick !== undefined) {\n\tcursor=classes.divTableCellCursor;\n    }\n    // width={plan.width} height={plan.height}\n    var data;\n    if (colkey===\"\" && rowkey===\"\") {\n\tdata=null;\n    } else {\n\tdata=JSON.stringify({colkey:colkey,rowkey:rowkey,rowval:rowval}); \n    };\n    if (rowindex%2 === 1) {\n\treturn (<div className={cursor} onClick={onclick} style={{backgroundColor:'#DDD'}}\n\t\tdata-for='cell' data-tip={data}>\n\t\t   <CanvasText state={state} label={rowval} plan={plan}/>\n\t\t</div>);\n    } else {\n\treturn (<div className={cursor} onClick={onclick} style={{backgroundColor:'#EEE'}}\n\t\tdata-for='cell' data-tip={data}>\n\t\t<CanvasText state={state} label={rowval} plan={plan}/>\n\t\t</div>);\n    }\n}\n//{rowval}\nfunction DataCell(props) {\n    const {classes,state,elements,mode,plan,rowindex,...other}=props;\n    if (elements===undefined) {\n\tif (rowindex%2===1) {\n\t    return <div className={classes.divTableCell} style={{backgroundColor:'#EEE'}}/>\n\t} else {\n\t    return <div className={classes.divTableCell} style={{backgroundColor:'#FFF'}}/>\n\t}\n    } else if (mode===state.Layout.modes.cell.Sum) {\n\treturn <SummaryCell {...other} state={state} elements={elements} plan={plan}/>\n\t//return null;\n    } else {\n\treturn <SeriesCell {...other} state={state} elements={elements} plan={plan}/>\n\t//return null;\n    }\n}\nfunction renderDataCell(classes,state,colkey,colvalues,rowkey,rowval,rowindex,rowwhere,range,mode,plan,val,index) {\n    //console.log(\"Making data cell:\",rowval,val,index,plan,JSON.stringify(colvalues));\n    if (index%plan.step === 0) {\n\t// get elements and range\n\t//console.log(\"Processing:\",val,colvalues[index],plan.step);\n\tvar elements=state.Matrix.getMatrixElements(colvalues,rowval,state.React.matrix,index,plan.step);\n\t//console.log(\"Elements:\",rowval,index,' =>',JSON.stringify(elements));\n\t// get count and colwhere\n        var cnt = Math.min(colvalues.length,index+plan.step)-index;\n        var colwhere = state.Database.getColWhere(colkey,colvalues,index,plan.step);\n\t// make onclick\n\tvar onclick=() => state.Navigate.selectItem(state,colkey,rowkey,colvalues[index],rowval,colwhere,rowwhere,cnt,1);\n\treturn (<DataCell classes={classes} state={state} key={`col-${index}`} rowindex={rowindex} index={index} onclick={onclick}\n\t\tcolkey={colkey} rowkey={rowkey} colvalues={colvalues} rowval={rowval} colwhere={colwhere} rowwhere={rowwhere} \n\t\telements={elements} mode={mode} plan={plan} range={range}\n\t    />);\n    } else {\n\treturn null;\n    }\n}\n//{{rowkey:'test1',colkey:'test2'}}\nfunction dataRow(classes,state,colkey,rowkey,colvalues,mode,plans,rowval,rowindex) {\n    var rowwhere=state.Database.getWhereDetail(rowkey,rowval);\n    var onclick=() => {state.Navigate.selectKey(state,rowkey,rowval,rowwhere,1);}\n    var range=[undefined,undefined];\n    if (state.React.matrix!==undefined) {\n\trange=state.Matrix.getRange(state,state.React.matrix,colvalues,[rowval]);\n    };\n    //console.log(\"Making data cols.\",rowval,colkey,JSON.stringify(colvalues));\n    //console.log(\"We have a matrix(\",rowval,\") with range:\",JSON.stringify(range));\n    var mapFunction= (val,index)=>renderDataCell(classes,state,colkey,colvalues,rowkey,rowval,rowindex,rowwhere,range,mode,plans.cell,val,index);\n    return (<div className={classes.divTableRow} key={rowindex.toString()}>\n\t    <FirstDataCell classes={classes} state={state} key={'0'} colkey={colkey} rowkey={rowkey} rowval={rowval} onclick={onclick} \n\t                   plan={plans.row} rowindex={rowindex}/>\n\t       {colvalues.map(mapFunction)}\n\t    </div>);\n};\nfunction renderZeroRow(classes,state,colkey,colvalues,plans) {\n    return (<div className={classes.divTableRow} key={1}>\n\t       <div className={classes.divTableCell} width={plans.cell.width}>No data available</div>\n\t    </div>);\n};\nfunction DataRows(props) {\n    const { classes, state, plans, colkey, colvalues, rowkey, rowvalues, mode } = props;\n    //console.log(\"Making data cols.\",colkey,JSON.stringify(colvalues));\n    var mapFunction= (val,index)=>dataRow(classes,state,colkey,rowkey,colvalues,mode,plans,val,index);\n    if (rowvalues.length===0) {\n\treturn renderZeroRow(classes,state,colkey,colvalues,plans);\n    } else {\n\treturn (rowvalues.map(mapFunction));\n    }\n}\n// ---------------- HDR\nfunction FirstHdrCell (props) {\n    const { classes, state, colkey, rowkey, plans } = props; // plan\n    //var width=plans.hdr.width;\n    //var height=plans.hdr.height;\n    //teal_palette\n    //console.log(\"Making first header cell.\",colkey,rowkey,plan.width,plan.height);\n    //style={{backgroundColor:teal_palette.main}}\n    var onclickCol=() => state.Navigate.switchTableKey(state,colkey);\n    var onclickRow=() => state.Navigate.switchTableKey(state,rowkey);\n    var data;\n    if (colkey===\"\" && rowkey===\"\") {\n\tdata=null;\n    } else {\n\tdata=JSON.stringify({colkey:colkey,rowkey:rowkey}); \n    };\n    return (<div style={{width:plans.hdr.width}}>\n\t       <div className={classes.divHdrRight} width={plans.hd2.width} onClick={onclickRow} data-for='cell' data-tip={data}>\n\t          <CanvasText state={state} label={rowkey} plan={plans.hd2} color={'white'}/>\n\t       </div>\n\t       <div className={classes.divHdrLeft} width={plans.hd1.width} onClick={onclickCol} data-for='cell' data-tip={data}>\n\t          <CanvasText state={state} label={colkey} plan={plans.hd1} color={'white'}/>\n\t       </div>\n\t    </div>);\n}\n//\n\nfunction renderHdrCell(classes,state,colkey,colvalues,rowkey,plan,val,index) {\n    if (index%plan.step === 0) {\n\t//console.log(\"HdrCell:\",index,plan.step);\n        var cnt = Math.min(colvalues.length,index+plan.step)-index;\n        var colwhere = state.Database.getColWhere(colkey,colvalues,index,plan.step);\n\tvar onclick=() => state.Navigate.selectKey(state,colkey,colvalues[index],colwhere,cnt);\n\tvar cursor=classes.divTableCell;\n\tif (onclick !== undefined) {\n\t    cursor=classes.divTableCellCursor;\n\t}\n\t//console.log(\"Plan:\",JSON.stringify(plan));\n\tvar data;\n\tif (colkey===\"\" && rowkey===\"\") {\n\t    data=null;\n\t} else {\n\t    data=JSON.stringify({colkey:colkey,rowkey:rowkey,colvalues:colvalues,index:index,step:plan.step}); \n\t};\n\treturn (<div className={cursor} onClick={onclick} style={{backgroundColor:'#DDD'}} key={`col-${index}`}  data-for='cell' data-tip={data}>\n\t\t   <CanvasText state={state} index={index} plan={plan} label={val}/>\n \t        </div> );\n     } else {\n\treturn null;\n    }\n}\nfunction HdrRow(props) {\n    const { classes, state, plans, colkey, colvalues, rowkey } = props; //, rowvalues\n    //console.log(\"Making header row.\",colkey,JSON.stringify(colvalues));\n    var mapFunction= (val,index)=>renderHdrCell(classes,state,colkey,colvalues,rowkey,plans.col,val,index);\n    return (<div className={classes.divTableRow} key={0}>\n\t       <FirstHdrCell classes={classes} state={state} colkey={colkey} rowkey={rowkey} plans={plans} style={{height:\"100%\"}}/>\n\t       {colvalues.map(mapFunction)}\n\t    </div>);\n}\n// ---------------- Details\nfunction Details(props) {\n    const { classes, state } = props; // classes, element\n    var colkey = state.Path.getColKey(state)||\"\";\n    var rowkey = state.Path.getRowKey(state)||\"\";\n    var colvalues = state.Path.filterKeys(state,state.Matrix.values[colkey]||[\"\"]);\n    var rowvalues = state.Path.filterKeys(state,state.Matrix.values[rowkey]||[\"\"]);\n    var cellMode  = state.Layout.getCellMode(state);\n    //var ncol=colvalues.length + 1;\n    //var nrow=rowvalues.length + 1;\n    //DOM.style.font\n    var border=0;\n    if (cellMode===state.Layout.modes.cell.Sum) {\n\tborder=1;\n    };\n    var width=0.9*window.innerWidth;\n    var height=0.94*window.innerHeight - 180;\n    var plans=state.Layout.makePlans(colkey,rowkey,colvalues,rowvalues,width,height,border);\n    //console.log(\"Heights:\",window.innerHeight,height,plans.hdr.height,plans.cell.height);\n    //console.log(\"Details => Width/Height:\",window.innerWidth,window.innerHeight,plan.cell.width,plan.hdr.height)\n    //console.log(\"Colkey:\",colkey,\" colval:\",JSON.stringify(colvalues));\n    //console.log(\"Rowkey:\",rowkey,\" rowval:\",JSON.stringify(rowvalues));\n\n    return (<div className={classes.divTable}>\n\t       <div className={classes.divTableBody}>\n\t          <HdrRow classes={classes} state={state} plans={plans} colkey={colkey} colvalues={colvalues} rowkey={rowkey} rowvalues={rowvalues}/>\n\t          <DataRows classes={classes} state={state} plans={plans} colkey={colkey} colvalues={colvalues} rowkey={rowkey} rowvalues={rowvalues} mode={cellMode}/>\n\t       </div>\n            </div>);\n }\nclass Table extends Component {\n    constructor(props) {\n\tsuper(props);\n\tconst {state} = props;\n\tstate.React.Table=this;\n    };\n    showTable() {\n\tconsole.log(\"Rebuilding table.\");\n\tthis.forceUpdate();\n    };\n    componentDidMount() {\n        window.addEventListener(\"resize\", this.updateWindowDimensions);\n    } \n    updateWindowDimensions = () => {\n        this.width= window.innerWidth;\n\tthis.height=window.innerHeight;\n\tthis.bbx=this.el.getBoundingClientRect();\n\t//console.log(\"Width/Height:\",this.width,this.height,this.bbx.width,this.bbx.height)\n    };\n    element(el) {\n\tif (el !== undefined && el !== null) {\n\t    this.el=el;\n\t    this.bbx=this.el.getBoundingClientRect();\n\t    //console.log(\"BBX width/height:\",this.bbx.width,this.bbx.height);\n\t};\n    };\n    render() {\n\tconst { classes, state } = this.props;\n\t//console.log(\"##### Rendering Table.\");\n\treturn (<div ref={el=>{this.element(el)}} className={classes.content}>\n\t\t   <Grid container spacing={24}>\n\t\t      <Grid item xs={12} > \n                         { <Paper className={classes.paper}>\n\t\t              <Details state={state} classes={classes} element={this}/>\n                           </Paper>}\n                      </Grid>\n                   </Grid>\n\t\t   <Tooltip state={state} classes={{button:classes.button}} element={this} type={'cell'}/>\n\t        </div>);\n    }\n}\n\nTable.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Table);\n"]},"metadata":{},"sourceType":"module"}