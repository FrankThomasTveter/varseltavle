{"ast":null,"code":"import _classCallCheck from\"/home/franktt/react/varseltavle/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/franktt/react/varseltavle/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/franktt/react/varseltavle/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/franktt/react/varseltavle/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/franktt/react/varseltavle/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{withStyles}from'@material-ui/core/styles';import Button from'@material-ui/core/Button';import Menu from'@material-ui/core/Menu';import MenuItem from'@material-ui/core/MenuItem';//import KeyIcon from '@material-ui/icons/VpnKey';\nimport KeyIcon from'@material-ui/icons/Visibility';import Key from'./KeyComponent';var styles=function styles(theme){return{settings:{},config:{marginLeft:'auto'},othchip:{margin:theme.spacing.unit,cursor:\"pointer\",color:\"blue\",borderColor:\"blue\"},trashchip:{margin:theme.spacing.unit,cursor:\"pointer\",color:\"gray\",borderColor:\"gray\"},button:{color:'white'}};};function uniq(a,ignore){return a.sort().filter(function(item,pos,arr){if(ignore.indexOf(item[0])!==-1){return false;}else if(!pos){return true;}else{if(item[0]!==arr[pos-1][0]){return true;}else{// items are equal\nif(item[1]===\"select\"){arr[pos-1][1]=\"select\";}else if(item[2]){arr[pos-1][2]=true;}return false;}}});};function renderMenuItem(classes,state,keyitem,keyindex){//console.log(\"Keys:\",keyitem,keyindex);\nreturn React.createElement(MenuItem,{key:keyitem[0]},React.createElement(Key,{state:state,keyitem:keyitem[0],keytype:keyitem[1],keyactive:keyitem[2]}));}var KeyMenu=/*#__PURE__*/function(_Component){_inherits(KeyMenu,_Component);function KeyMenu(){var _getPrototypeOf2;var _this;_classCallCheck(this,KeyMenu);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(KeyMenu)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={anchor:null};return _this;}_createClass(KeyMenu,[{key:\"render\",value:function render(){var _this2=this;//console.log(\"Rendering KeyComponents...\");\nvar _this$props=this.props,classes=_this$props.classes,state=_this$props.state;//console.log(\"Keys.starting:\",JSON.stringify(state.Path.other));\nthis.onClick=function(event){_this2.setState({anchor:event.currentTarget});};this.onClose=function(){_this2.setState({anchor:null});};var itms=state.Path.keys.path.map(function(item,index){return[item,\"select\",false];}).concat(state.Path.other.rest.map(function(item,index){return[item,\"rest\",true];}),state.Path.trash.map(function(item,index){return[item,\"trash\",false];})).sort(state.Utils.ascendingArr);var items=uniq(itms,state.Path.other.table);var mapFunction=function mapFunction(item,index){return renderMenuItem(classes,state,item,index);};//console.log(\"Keys.rendering:\",JSON.stringify(state.Path.other));\n//console.log(\"Keys.rendering\",items.length,JSON.stringify(anchor),Boolean(anchor));\nreturn React.createElement(\"div\",{className:classes.view},React.createElement(Button,{className:classes.button,\"aria-owns\":this.state.anchor?'keys-menu':undefined,\"aria-haspopup\":\"true\",onClick:this.onClick,title:\"Available Table keys\"},React.createElement(KeyIcon,{state:state})),React.createElement(Menu,{id:\"keys-menu\",anchorEl:this.state.anchor,open:Boolean(this.state.anchor),onClose:this.onClose},items.map(mapFunction)));}}]);return KeyMenu;}(Component);export default withStyles(styles)(KeyMenu);","map":{"version":3,"sources":["/home/franktt/react/varseltavle/src/react/KeyMenuComponent.js"],"names":["React","Component","withStyles","Button","Menu","MenuItem","KeyIcon","Key","styles","theme","settings","config","marginLeft","othchip","margin","spacing","unit","cursor","color","borderColor","trashchip","button","uniq","a","ignore","sort","filter","item","pos","arr","indexOf","renderMenuItem","classes","state","keyitem","keyindex","KeyMenu","anchor","props","onClick","event","setState","currentTarget","onClose","itms","Path","keys","path","map","index","concat","other","rest","trash","Utils","ascendingArr","items","table","mapFunction","view","undefined","Boolean"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\n//import KeyIcon from '@material-ui/icons/VpnKey';\nimport KeyIcon from '@material-ui/icons/Visibility';\nimport Key     from './KeyComponent';\n\nconst styles = theme => ({\n    settings:{},\n    config: {\n        marginLeft: 'auto',\n    },\n    othchip: {\n        margin: theme.spacing.unit,\n\tcursor: \"pointer\",\n        color:\"blue\",\n        borderColor:\"blue\",\n    },\n    trashchip: {\n        margin: theme.spacing.unit,\n\tcursor: \"pointer\",\n        color:\"gray\",\n        borderColor:\"gray\",\n  },\n    button:{\n\tcolor:'white'\n    },\n});\nfunction uniq(a,ignore) {\n    return a.sort().filter(function(item, pos, arr) {\n\tif (ignore.indexOf(item[0]) !== -1) {\n\t    return false;\n\t} else if (!pos) {\n\t    return true;\n\t} else {\n\t    if (item[0] !== arr[pos-1][0]) {\n\t\treturn true;\n\t    } else {     // items are equal\n\t\tif (item[1] === \"select\") {\n\t\t    arr[pos-1][1]=\"select\";\n\t\t} else if ( item[2] ) {\n\t\t    arr[pos-1][2]=true;\n\t\t}\n\t\treturn false;\n\t    }\n\t}\n    });\n};\nfunction renderMenuItem(classes,state,keyitem,keyindex) {\n    //console.log(\"Keys:\",keyitem,keyindex);\n    return (<MenuItem key={keyitem[0]}>\n\t       <Key state={state} keyitem={keyitem[0]} keytype={keyitem[1]} keyactive={keyitem[2]}/> \n\t    </MenuItem>);\n}\nclass KeyMenu extends Component {\n    state={anchor:null};\n    render() {\n\t//console.log(\"Rendering KeyComponents...\");\n        const { classes, state } = this.props;\n\t//console.log(\"Keys.starting:\",JSON.stringify(state.Path.other));\n\tthis.onClick = event => {this.setState({ anchor: event.currentTarget });};\n\tthis.onClose = () => {this.setState({ anchor: null });};\n\tvar itms=state.Path.keys.path.map(function(item,index) {return [item,\"select\",false]}).concat(\n\t    state.Path.other.rest.map(function(item,index) {return [item,\"rest\",true]}),\n\t    state.Path.trash.map(function(item,index) {return [item,\"trash\",false]})\n\t).sort(state.Utils.ascendingArr);\n\tvar items=uniq(itms,state.Path.other.table);\n\tvar mapFunction= (item,index)=>renderMenuItem(classes,state,item,index);\n\t//console.log(\"Keys.rendering:\",JSON.stringify(state.Path.other));\n\t//console.log(\"Keys.rendering\",items.length,JSON.stringify(anchor),Boolean(anchor));\n\treturn (\n\t\t<div className={classes.view}>\n\t\t   <Button\n                      className={classes.button}\n                      aria-owns={this.state.anchor ? 'keys-menu' : undefined}\n                      aria-haspopup=\"true\"\n                      onClick={this.onClick}\n\t              title={\"Available Table keys\"}\n\t\t    >\n\t  \t       {<KeyIcon state={state}/>}\n                     </Button>\n\t\t     <Menu\n                        id=\"keys-menu\"\n\t                anchorEl={this.state.anchor}\n                        open={Boolean(this.state.anchor)}\n                        onClose={this.onClose}\n\t\t     >\n\t\t        {items.map(mapFunction)}\n\t             </Menu>\n\t\t</div>\n\t);\n    }\n}\n\nKeyMenu.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(KeyMenu);\n"]},"metadata":{},"sourceType":"module"}