{"ast":null,"code":"import _objectWithoutProperties from \"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/franktt/react/varseltavle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/franktt/react/varseltavle/src/react/TextComponent.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nvar styles = function styles(theme) {\n  return {\n    canvas: {\n      width: \"100px\",\n      height: \"100px\"\n    },\n    pointer: {\n      cursor: \"pointer\"\n    },\n    nopointer: {}\n  };\n};\n\nfunction rotateHeight() {\n  var gwidth, lheight, lwidth, oheight, owidth;\n  var gdd, dd, style;\n  var rotates = document.getElementsByClassName(\"rotate\");\n  console.log(\"Rotating heights:\", rotates.length);\n  var i;\n\n  for (i = 0; i < rotates.length; i++) {\n    var node = rotates[i].current;\n\n    if (node !== undefined) {\n      lheight = parseInt(node.offsetWidth, 10);\n      lwidth = parseInt(node.offsetHeight, 10);\n\n      if (gwidth === undefined) {\n        gwidth = lwidth;\n      }\n\n      ;\n      oheight = lheight / 2;\n      owidth = lwidth / 2;\n      dd = oheight - owidth;\n\n      if (gdd === undefined) {\n        gdd = dd;\n      } else if (gdd < dd) {\n        gdd = dd;\n      }\n\n      console.log(\"Found rotate:\", i, node.offsetWidth, node.offsetHeight, oheight, owidth, gdd);\n    }\n  }\n\n  console.log(\"Pars:\", gdd, oheight, owidth); // 19px 129px\n\n  for (i = 0; i < rotates.length; i++) {\n    var node = rotates[i].current; //var cwidth=parseInt(window.getComputedStyle(rotates[i]).fontSize,10);\n\n    lheight = parseInt(node.offsetWidth, 10);\n    lwidth = parseInt(node.offsetHeight, 10);\n    oheight = lheight / 2;\n    owidth = lwidth / 2;\n    dd = oheight - owidth;\n    style = \"width:\" + lwidth + \"px;height:\" + lheight + \"px;transform:translate(\" + dd + \"px,\" + gdd + \"px) rotate(-90.0deg);\"; //console.log(\"Rotates:\",i,style,lwidth,lheight,dd,gdd,oheight,owidth);// 19px 129px\n    //node.setAttribute(\"style\",style);\n  }\n\n  var canvas = document.getElementsByTagName(\"canvas\");\n\n  for (i = 0; i < canvas.length; i++) {\n    var cheight = parseInt(window.getComputedStyle(canvas[i]).fontSize, 10);\n    style = \"width:\" + gwidth + \"px;height:\" + cheight * 1.5 + \"px\"; //console.log(\"Canvas:\",i,style,gwidth);// 19px 129px\n\n    canvas[i].style.width = gwidth + \"px\";\n    canvas[i].style.height = cheight * 3 + \"px\";\n  }\n}\n\n;\n\nfunction updateCanvas(item) {\n  var _item$props = item.props,\n      state = _item$props.state,\n      elements = _item$props.elements,\n      colkey = _item$props.colkey,\n      rowkey = _item$props.rowkey,\n      colvalues = _item$props.colvalues,\n      index = _item$props.index,\n      range = _item$props.range,\n      label = _item$props.label,\n      rotate = _item$props.rotate;\n  var cnv = item.refs.text;\n  var ctx = cnv.getContext('2d');\n  var height = cnv.height; //ctx.save();\n  //ctx.translate(newx, newy);\n  //if (rotate !== undefined) {ctx.rotate(-Math.PI/2);};\n  //ctx.textAlign = \"left\"; //left right center\n\n  ctx.font = \"40px Courier\";\n  ctx.fillText(label, 0, -10); // labelXposition\n  //ctx.restore();\n\n  console.log(\"Label:\", label, height); //console.log(\"Text:\",cnv.width,cnv.height);\n}\n\nvar TextComponent =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(TextComponent, _React$Component);\n\n  function TextComponent(props) {\n    var _this;\n\n    _classCallCheck(this, TextComponent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TextComponent).call(this, props));\n    var state = props.state;\n    return _this;\n  }\n\n  _createClass(TextComponent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      updateCanvas(this);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          onclick = _this$props.onclick,\n          title = _this$props.title,\n          other = _objectWithoutProperties(_this$props, [\"classes\", \"onclick\", \"title\"]);\n\n      return React.createElement(\"canvas\", Object.assign({}, other, {\n        className: classes.text,\n        classes: classes,\n        onClick: onclick,\n        title: title,\n        ref: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return TextComponent;\n}(React.Component);\n\nTextComponent.propTypes = {\n  classes: PropTypes.object.isRequired\n};\nexport default withStyles(styles)(TextComponent);","map":{"version":3,"sources":["/home/franktt/react/varseltavle/src/react/TextComponent.js"],"names":["React","Component","PropTypes","withStyles","styles","theme","canvas","width","height","pointer","cursor","nopointer","rotateHeight","gwidth","lheight","lwidth","oheight","owidth","gdd","dd","style","rotates","document","getElementsByClassName","console","log","length","i","node","current","undefined","parseInt","offsetWidth","offsetHeight","getElementsByTagName","cheight","window","getComputedStyle","fontSize","updateCanvas","item","props","state","elements","colkey","rowkey","colvalues","index","range","label","rotate","cnv","refs","text","ctx","getContext","font","fillText","TextComponent","classes","onclick","title","other","propTypes","object","isRequired"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAgC,OAAhC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,UAAT,QAA2B,0BAA3B;;AAEA,IAAMC,MAAM,GAAG,SAATA,MAAS,CAAAC,KAAK;AAAA,SAAK;AACrBC,IAAAA,MAAM,EAAE;AAAEC,MAAAA,KAAK,EAAC,OAAR;AACLC,MAAAA,MAAM,EAAC;AADF,KADa;AAIrBC,IAAAA,OAAO,EAAE;AACZC,MAAAA,MAAM,EAAC;AADK,KAJY;AAOrBC,IAAAA,SAAS,EAAE;AAPU,GAAL;AAAA,CAApB;;AAUA,SAASC,YAAT,GAAwB;AACpB,MAAIC,MAAJ,EAAWC,OAAX,EAAmBC,MAAnB,EAA0BC,OAA1B,EAAkCC,MAAlC;AACA,MAAIC,GAAJ,EAAQC,EAAR,EAAWC,KAAX;AACA,MAAIC,OAAO,GAAGC,QAAQ,CAACC,sBAAT,CAAgC,QAAhC,CAAd;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAgCJ,OAAO,CAACK,MAAxC;AACA,MAAIC,CAAJ;;AACA,OAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGN,OAAO,CAACK,MAAxB,EAAgCC,CAAC,EAAjC,EAAqC;AACxC,QAAIC,IAAI,GAACP,OAAO,CAACM,CAAD,CAAP,CAAWE,OAApB;;AACA,QAAID,IAAI,KAAKE,SAAb,EAAwB;AACbhB,MAAAA,OAAO,GAACiB,QAAQ,CAACH,IAAI,CAACI,WAAN,EAAkB,EAAlB,CAAhB;AACAjB,MAAAA,MAAM,GAACgB,QAAQ,CAACH,IAAI,CAACK,YAAN,EAAmB,EAAnB,CAAf;;AACA,UAAIpB,MAAM,KAAMiB,SAAhB,EAA2B;AAACjB,QAAAA,MAAM,GAACE,MAAP;AAAe;;AAAA;AAC3CC,MAAAA,OAAO,GAAEF,OAAO,GAAC,CAAjB;AACAG,MAAAA,MAAM,GAAEF,MAAM,GAAC,CAAf;AACAI,MAAAA,EAAE,GAAEH,OAAO,GAACC,MAAZ;;AACA,UAAIC,GAAG,KAAMY,SAAb,EAAwB;AAClCZ,QAAAA,GAAG,GAACC,EAAJ;AACW,OAFD,MAEO,IAAID,GAAG,GAAGC,EAAV,EAAc;AAC/BD,QAAAA,GAAG,GAACC,EAAJ;AACW;;AACRK,MAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA4BE,CAA5B,EAA8BC,IAAI,CAACI,WAAnC,EAA+CJ,IAAI,CAACK,YAApD,EAAiEjB,OAAjE,EAAyEC,MAAzE,EAAgFC,GAAhF;AACH;AACG;;AACDM,EAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAoBP,GAApB,EAAwBF,OAAxB,EAAgCC,MAAhC,EAvBoB,CAuBoB;;AACxC,OAAKU,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGN,OAAO,CAACK,MAAxB,EAAgCC,CAAC,EAAjC,EAAqC;AACxC,QAAIC,IAAI,GAACP,OAAO,CAACM,CAAD,CAAP,CAAWE,OAApB,CADwC,CAEjC;;AACAf,IAAAA,OAAO,GAACiB,QAAQ,CAACH,IAAI,CAACI,WAAN,EAAkB,EAAlB,CAAhB;AACAjB,IAAAA,MAAM,GAACgB,QAAQ,CAACH,IAAI,CAACK,YAAN,EAAmB,EAAnB,CAAf;AACAjB,IAAAA,OAAO,GAAEF,OAAO,GAAC,CAAjB;AACAG,IAAAA,MAAM,GAAEF,MAAM,GAAC,CAAf;AACAI,IAAAA,EAAE,GAAEH,OAAO,GAACC,MAAZ;AACAG,IAAAA,KAAK,GAAC,WAASL,MAAT,GAAgB,YAAhB,GAA6BD,OAA7B,GAAqC,yBAArC,GAA+DK,EAA/D,GAAkE,KAAlE,GAAwED,GAAxE,GAA4E,uBAAlF,CARiC,CASjC;AACA;AACH;;AACD,MAAIZ,MAAM,GAAGgB,QAAQ,CAACY,oBAAT,CAA8B,QAA9B,CAAb;;AACA,OAAKP,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGrB,MAAM,CAACoB,MAAvB,EAA+BC,CAAC,EAAhC,EAAoC;AAChC,QAAIQ,OAAO,GAACJ,QAAQ,CAACK,MAAM,CAACC,gBAAP,CAAwB/B,MAAM,CAACqB,CAAD,CAA9B,EAAmCW,QAApC,EAA6C,EAA7C,CAApB;AACAlB,IAAAA,KAAK,GAAC,WAASP,MAAT,GAAgB,YAAhB,GAA6BsB,OAAO,GAAC,GAArC,GAAyC,IAA/C,CAFgC,CAGhC;;AACA7B,IAAAA,MAAM,CAACqB,CAAD,CAAN,CAAUP,KAAV,CAAgBb,KAAhB,GAAsBM,MAAM,GAAC,IAA7B;AACAP,IAAAA,MAAM,CAACqB,CAAD,CAAN,CAAUP,KAAV,CAAgBZ,MAAhB,GAAwB2B,OAAO,GAAC,CAAT,GAAY,IAAnC;AACH;AACJ;;AAAA;;AAED,SAASI,YAAT,CAAsBC,IAAtB,EAA4B;AAAA,oBACkDA,IAAI,CAACC,KADvD;AAAA,MACjBC,KADiB,eACjBA,KADiB;AAAA,MACXC,QADW,eACXA,QADW;AAAA,MACFC,MADE,eACFA,MADE;AAAA,MACKC,MADL,eACKA,MADL;AAAA,MACYC,SADZ,eACYA,SADZ;AAAA,MACsBC,KADtB,eACsBA,KADtB;AAAA,MAC4BC,KAD5B,eAC4BA,KAD5B;AAAA,MACkCC,KADlC,eACkCA,KADlC;AAAA,MACwCC,MADxC,eACwCA,MADxC;AAExB,MAAMC,GAAG,GAACX,IAAI,CAACY,IAAL,CAAUC,IAApB;AACA,MAAMC,GAAG,GAAGH,GAAG,CAACI,UAAJ,CAAe,IAAf,CAAZ;AACA,MAAI/C,MAAM,GAAG2C,GAAG,CAAC3C,MAAjB,CAJwB,CAKxB;AACA;AACA;AACA;;AACA8C,EAAAA,GAAG,CAACE,IAAJ,GAAW,cAAX;AACAF,EAAAA,GAAG,CAACG,QAAJ,CAAaR,KAAb,EAAoB,CAApB,EAAuB,CAAC,EAAxB,EAVwB,CAUK;AAC7B;;AACAzB,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAqBwB,KAArB,EAA2BzC,MAA3B,EAZwB,CAaxB;AACH;;IAGKkD,a;;;;;AACF,yBAAYjB,KAAZ,EAAmB;AAAA;;AAAA;;AACf,uFAAMA,KAAN;AADe,QAERC,KAFQ,GAECD,KAFD,CAERC,KAFQ;AAAA;AAGlB;;;;wCACmB;AAChBH,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACH;;;6BACQ;AAAA,wBACyC,KAAKE,KAD9C;AAAA,UACGkB,OADH,eACGA,OADH;AAAA,UACYC,OADZ,eACYA,OADZ;AAAA,UACqBC,KADrB,eACqBA,KADrB;AAAA,UAC+BC,KAD/B;;AAEL,aACN,gDAAYA,KAAZ;AAAmB,QAAA,SAAS,EAAEH,OAAO,CAACN,IAAtC;AAA4C,QAAA,OAAO,EAAEM,OAArD;AAA8D,QAAA,OAAO,EAAEC,OAAvE;AAAgF,QAAA,KAAK,EAAEC,KAAvF;AAA8F,QAAA,GAAG,EAAC,MAAlG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADM;AAGH;;;;EAbuB7D,KAAK,CAACC,S;;AAgBlCyD,aAAa,CAACK,SAAd,GAA0B;AACtBJ,EAAAA,OAAO,EAAEzD,SAAS,CAAC8D,MAAV,CAAiBC;AADJ,CAA1B;AAIA,eAAe9D,UAAU,CAACC,MAAD,CAAV,CAAmBsD,aAAnB,CAAf","sourcesContent":["import React, { Component} from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nconst styles = theme => ({\n    canvas: { width:\"100px\",\n\t      height:\"100px\",\n    },\n    pointer: {\n\tcursor:\"pointer\"\n    },\n    nopointer: {\n    },\n});\nfunction rotateHeight() {\n    var gwidth,lheight,lwidth,oheight,owidth;\n    var gdd,dd,style;\n    var rotates = document.getElementsByClassName(\"rotate\");\n    console.log(\"Rotating heights:\",rotates.length);\n    var i;\n    for (i = 0; i < rotates.length; i++) {\n\tvar node=rotates[i].current;\n\tif (node !== undefined) {\n            lheight=parseInt(node.offsetWidth,10);\n            lwidth=parseInt(node.offsetHeight,10);\n            if (gwidth  === undefined) {gwidth=lwidth;};\n            oheight=(lheight/2);\n            owidth=(lwidth/2);\n            dd=(oheight-owidth);\n            if (gdd  === undefined) {\n\t\tgdd=dd;\n            } else if (gdd < dd) {\n\t\tgdd=dd;\n            }\n\t    console.log(\"Found rotate:\",i,node.offsetWidth,node.offsetHeight,oheight,owidth,gdd);\n\t}\n    }\n    console.log(\"Pars:\",gdd,oheight,owidth);// 19px 129px\n    for (i = 0; i < rotates.length; i++) {\n\tvar node=rotates[i].current;\n        //var cwidth=parseInt(window.getComputedStyle(rotates[i]).fontSize,10);\n        lheight=parseInt(node.offsetWidth,10);\n        lwidth=parseInt(node.offsetHeight,10);\n        oheight=(lheight/2);\n        owidth=(lwidth/2);\n        dd=(oheight-owidth);\n        style=\"width:\"+lwidth+\"px;height:\"+lheight+\"px;transform:translate(\"+dd+\"px,\"+gdd+\"px) rotate(-90.0deg);\";\n        //console.log(\"Rotates:\",i,style,lwidth,lheight,dd,gdd,oheight,owidth);// 19px 129px\n        //node.setAttribute(\"style\",style);\n    }\n    var canvas = document.getElementsByTagName(\"canvas\");\n    for (i = 0; i < canvas.length; i++) {\n        var cheight=parseInt(window.getComputedStyle(canvas[i]).fontSize,10);\n        style=\"width:\"+gwidth+\"px;height:\"+cheight*1.5+\"px\";\n        //console.log(\"Canvas:\",i,style,gwidth);// 19px 129px\n        canvas[i].style.width=gwidth+\"px\";\n        canvas[i].style.height=(cheight*3)+\"px\";\n    }\n};\n\nfunction updateCanvas(item) {\n    const {state,elements,colkey,rowkey,colvalues,index,range,label,rotate} = item.props;\n    const cnv=item.refs.text;\n    const ctx = cnv.getContext('2d');\n    var height = cnv.height;\n    //ctx.save();\n    //ctx.translate(newx, newy);\n    //if (rotate !== undefined) {ctx.rotate(-Math.PI/2);};\n    //ctx.textAlign = \"left\"; //left right center\n    ctx.font = \"40px Courier\"\n    ctx.fillText(label, 0, -10); // labelXposition\n    //ctx.restore();\n    console.log(\"Label:\",label,height);\n    //console.log(\"Text:\",cnv.width,cnv.height);\n}\n    \n\nclass TextComponent extends React.Component {\n    constructor(props) {\n        super(props);\n        const {state} = props;\n    };\n    componentDidMount() {\n        updateCanvas(this);\n    }\n    render() {\n        const { classes, onclick, title, ...other } = this.props;\n        return (\n\t\t<canvas {...other} className={classes.text} classes={classes} onClick={onclick} title={title} ref=\"text\"/>\n        );\n    }\n}\n\nTextComponent.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(TextComponent);\n"]},"metadata":{},"sourceType":"module"}