{"ast":null,"code":"//console.log(\"Loading ThresholdLib.js\");\nfunction Threshold() {\n  this.thr = undefined; // threshold parameter levels\n\n  this.gthr = undefined; // temporary storage\n\n  this.imax = 0; // threshold item types\n\n  this.ithr = 1;\n  this.ikey = 2;\n  this.ilev = 3;\n  this.ival = 4;\n\n  this.init = function (state) {\n    var par = \"Threshold\" + state.Utils.version;\n    state.Utils.init(par, this);\n  };\n\n  this.getThresholds = function (doc) {\n    if (doc.thresholds !== undefined) {\n      return doc.thresholds;\n    } else {\n      var subthr = {};\n\n      for (var thr in this.thrs) {\n        // loop over thresholds\n        if (doc[thr] !== undefined) {\n          var key = doc[thr]; // key-value\n\n          if (this.thrs[thr][key] !== undefined) {\n            var tlen, dlev;\n\n            if (this.thrs[thr][key].max !== undefined && doc.max !== undefined) {\n              var dmax = Number(doc.max);\n              dlev = -1;\n              var tmax = this.thrs[thr][key].max;\n              tlen = tmax.length; // get new level\n\n              for (var jj = 0; jj < tlen; jj++) {\n                if (dmax > Number(tmax[jj])) {\n                  //console.log(\"Hit:\",jj,dmax,tmax[jj],dmax>tmax[jj],dlev);\n                  dlev = jj;\n                }\n              }\n\n              var res = [];\n              res[this.imax] = true;\n              res[this.ithr] = thr;\n              res[this.ikey] = key;\n              res[this.ilev] = dlev;\n              res[this.ival] = dmax;\n              subthr.max = res; //if (dlev !== -1) {\n              //    console.log(\"Found level:\",dlev,dmax,\n              //\t\tJSON.stringify(tmax),thr,key);\n              //}\n            } else if (this.thrs[thr][key].min !== undefined && doc.min !== undefined) {\n              // min value\n              dlev = -1;\n              var tmin = this.thrs[thr][key].min;\n              var dmin = Number(doc.min); // get new level\n\n              tlen = tmin.length;\n\n              MIN: for (var jj = 0; jj < tlen; jj++) {\n                if (dmin < Number(tmin[jj])) {\n                  dlev = jj;\n                }\n              }\n\n              var res = [];\n              res[this.imax] = false;\n              res[this.ithr] = thr;\n              res[this.ikey] = key;\n              res[this.ilev] = dlev;\n              res[this.ival] = dmin;\n              subthr.min = res;\n            }\n          }\n        }\n      }\n\n      doc.thresholds = subthr;\n      return subthr;\n    }\n  };\n\n  this.setGThr = function (state, doc) {\n    if (this.gthr === undefined || doc[this.gthr[0]] === undefined || doc[this.gthr[0]] !== this.gthr[1]) {\n      this.gthr = this.getThreshold(state, doc);\n    }\n\n    ;\n  }; // call after this.setGThr\n\n\n  this.getLevel = function (state, doc) {\n    var lev = -1;\n\n    if (this.gthr === undefined) {\n      lev = -2;\n    } else if (this.gthr[2].max !== undefined) {\n      lev = this.getThrLevel(state, doc, this.gthr[2], \"max\");\n    } else if (this.gthr[2].min !== undefined) {\n      lev = this.getThrLevel(state, doc, this.gthr[2], \"min\");\n    }\n\n    ;\n    return lev;\n  }; // call after this.setGThr\n\n\n  this.getKeyLat = function (state) {\n    return this.gthr[2][\"latlon\"][0];\n  }; // call after this.setGThr\n\n\n  this.getKeyLon = function (state) {\n    return this.gthr[2][\"latlon\"][1];\n  }; // call after this.setGThr\n\n\n  this.getLat = function (state, doc) {\n    if (this.gthr === undefined) {\n      return undefined;\n    } else if (this.gthr[2][\"latlon\"] !== undefined) {\n      return doc[this.getKeyLat(state)];\n    }\n\n    ;\n  }; // call after this.setGThr\n\n\n  this.getLon = function (state, doc) {\n    if (this.gthr === undefined) {\n      return undefined;\n    } else if (this.gthr[2][\"latlon\"] !== undefined) {\n      return doc[this.getKeyLon(state)];\n    }\n\n    ;\n  };\n\n  this.getThreshold = function (state, doc) {\n    if (doc.threshold !== undefined) {\n      return doc.threshold;\n    } else {\n      for (var thr in this.thrs) {\n        // loop over thresholds\n        if (doc[thr] !== undefined) {\n          var key = doc[thr]; // key-value\n\n          if (this.thrs[thr][key] !== undefined) {\n            var threshold = [thr, key, this.thrs[thr][key]];\n            doc.threshold = threshold;\n            return threshold;\n          }\n        }\n      }\n\n      return;\n    }\n  };\n\n  this.getThrLevel = function (state, doc, thrs, key) {\n    var lev = -1;\n    var val = doc[key];\n    var thr = thrs[key];\n\n    if (key === \"max\") {\n      var tlen = thr.length;\n\n      for (var jj = 0; jj < tlen; jj++) {\n        if (val > Number(thr[jj])) {\n          //console.log(\"Hit:\",jj,val,thr[jj]);\n          lev = jj;\n        }\n      }\n    } else if (key === \"min\") {\n      var tlen = thr.length;\n\n      for (var jj = 0; jj < tlen; jj++) {\n        if (val < Number(thr[jj])) {\n          //console.log(\"Hit:\",jj,val,thr[jj]);\n          lev = jj;\n        }\n      }\n    }\n\n    return lev;\n  };\n}\n\n;\nexport default Threshold;","map":{"version":3,"sources":["/home/franktt/react/varseltavle/src/lib/ThresholdLib.js"],"names":["Threshold","thr","undefined","gthr","imax","ithr","ikey","ilev","ival","init","state","par","Utils","version","getThresholds","doc","thresholds","subthr","thrs","key","tlen","dlev","max","dmax","Number","tmax","length","jj","res","min","tmin","dmin","MIN","setGThr","getThreshold","getLevel","lev","getThrLevel","getKeyLat","getKeyLon","getLat","getLon","threshold","val"],"mappings":"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","sourcesContent":["//console.log(\"Loading ThresholdLib.js\");\n\nfunction Threshold() {\n    this.thr=undefined; // threshold parameter levels\n    this.gthr=undefined;// temporary storage\n    this.imax=0;        // threshold item types\n    this.ithr=1;\n    this.ikey=2;\n    this.ilev=3;\n    this.ival=4;\n    this.init=function(state){\n\tvar par=\"Threshold\"+state.Utils.version;\n\tstate.Utils.init(par,this);\n    };\n    this.getThresholds=function(doc) {\n\tif (doc.thresholds !== undefined) {\n\t    return doc.thresholds;\n\t} else {\n\t    var subthr={};\n\t    for (var thr in this.thrs) { // loop over thresholds\n\t\tif (doc[thr] !== undefined) {\n\t\t    var key=doc[thr]; // key-value\n\t\t    if (this.thrs[thr][key] !== undefined) {\n\t\t\tvar tlen,dlev;\n\t\t\tif (this.thrs[thr][key].max !== undefined &&\n\t\t\t    doc.max !== undefined) {\n\t\t\t    var dmax=Number(doc.max);\n\t\t\t    dlev=-1;\n\t\t\t    var tmax=this.thrs[thr][key].max;\n\t\t\t    tlen=tmax.length;\n\t\t\t    // get new level\n\t\t\t    for (var jj = 0; jj < tlen; jj++) {\n\t\t\t\tif (dmax > Number(tmax[jj])) {\n\t\t\t\t    //console.log(\"Hit:\",jj,dmax,tmax[jj],dmax>tmax[jj],dlev);\n\t\t\t\t    dlev=jj;\n\t\t\t\t}\n\t\t\t    }\n\t\t\t    var res=[];\n\t\t\t    res[this.imax]=true;\n\t\t\t    res[this.ithr]=thr;\n\t\t\t    res[this.ikey]=key;\n\t\t\t    res[this.ilev]=dlev;\n\t\t\t    res[this.ival]=dmax;\n\t\t\t    subthr.max=res;\n\t\t\t    //if (dlev !== -1) {\n\t\t\t    //    console.log(\"Found level:\",dlev,dmax,\n\t\t\t    //\t\tJSON.stringify(tmax),thr,key);\n\t\t\t    //}\n\t\t\t} else if (this.thrs[thr][key].min !== undefined && doc.min !== undefined) { // min value\n\t\t\t    dlev=-1;\n\t\t\t    var tmin=this.thrs[thr][key].min;\n\t\t\t    var dmin=Number(doc.min);\n\t\t\t    // get new level\n\t\t\t    tlen=tmin.length;\n\t\t\t    MIN: for (var jj = 0; jj < tlen; jj++) {\n\t\t\t\tif (dmin < Number(tmin[jj])) {\n\t\t\t\t    dlev=jj;\n\t\t\t\t}\n\t\t\t    }\n\t\t\t    var res=[];\n\t\t\t    res[this.imax]=false;\n\t\t\t    res[this.ithr]=thr;\n\t\t\t    res[this.ikey]=key;\n\t\t\t    res[this.ilev]=dlev;\n\t\t\t    res[this.ival]=dmin;\n\t\t\t    subthr.min=res;\n\t\t\t}\n\t\t    }\n\t\t}\n\t    }\n\t    doc.thresholds=subthr;\n\t    return subthr;\n\t}\n    };\n    this.setGThr=function(state,doc) {\n\tif (this.gthr  === undefined ||\n\t    doc[this.gthr[0]]  === undefined ||\n\t    doc[this.gthr[0]] !== this.gthr[1]) {\n\t    this.gthr=this.getThreshold(state,doc);\n\t};\n    }\n\n    // call after this.setGThr\n    this.getLevel=function(state,doc) {\n\tvar lev=-1;\n\tif (this.gthr  === undefined) {\n\t    lev=-2;\n\t} else if (this.gthr[2].max !== undefined) {\n\t    lev=this.getThrLevel(state,doc,this.gthr[2],\"max\");\n\t} else if (this.gthr[2].min !== undefined) {\n\t    lev=this.getThrLevel(state,doc,this.gthr[2],\"min\");\n\t};\n\treturn lev;\n    }\n\n    // call after this.setGThr\n    this.getKeyLat=function(state) {\n\treturn this.gthr[2][\"latlon\"][0];\n    }\n\n    // call after this.setGThr\n    this.getKeyLon=function(state) {\n\treturn this.gthr[2][\"latlon\"][1];\n    }\n\n    // call after this.setGThr\n    this.getLat=function(state,doc) {\n\tif (this.gthr  === undefined) {\n\t    return undefined;\n\t} else if (this.gthr[2][\"latlon\"] !== undefined) {\n\t    return doc[this.getKeyLat(state)];\n\t};\n    }\n\n    // call after this.setGThr\n    this.getLon=function(state,doc) {\n\tif (this.gthr  === undefined) {\n\t    return undefined;\n\t} else if (this.gthr[2][\"latlon\"] !== undefined) {\n\t    return doc[this.getKeyLon(state)];\n\t};\n    };\n    this.getThreshold=function(state,doc) {\n\tif (doc.threshold !== undefined) {\n\t    return doc.threshold;\n\t} else {\n\t    for (var thr in this.thrs) { // loop over thresholds\n\t\tif (doc[thr] !== undefined) {\n\t\t    var key=doc[thr]; // key-value\n\t\t    if (this.thrs[thr][key] !== undefined) {\n\t\t\tvar threshold= [thr,key,this.thrs[thr][key]];\n\t\t\tdoc.threshold=threshold;\n\t\t\treturn threshold;\n\t\t    }\n\t\t}\n\t    }\n\t    return;\n\t}\n    };\n    this.getThrLevel=function(state,doc,thrs,key) {\n\tvar lev=-1;\n\tvar val=doc[key];\n\tvar thr=thrs[key];\n\tif (key  === \"max\") {\n\t    var tlen=thr.length;\n\t    for (var jj = 0; jj < tlen; jj++) {\n\t\tif (val > Number(thr[jj])) {\n\t\t    //console.log(\"Hit:\",jj,val,thr[jj]);\n\t\t    lev=jj;\n\t\t}\n\t    }\n\t} else if (key  === \"min\") {\n\t    var tlen=thr.length;\n\t    for (var jj = 0; jj < tlen; jj++) {\n\t\tif (val < Number(thr[jj])) {\n\t\t    //console.log(\"Hit:\",jj,val,thr[jj]);\n\t\t    lev=jj;\n\t\t}\n\t    }\n\t}\n\treturn lev;\n    }\n};\nexport default Threshold;\n"]},"metadata":{},"sourceType":"module"}