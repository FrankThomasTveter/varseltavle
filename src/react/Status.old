import React, { Component} from 'react';
import {withStyles} from '@material-ui/core/styles';
import PropTypes from "prop-types";
import Test from '../system/Test';

const styles = theme => ({
    content: {
        flex: '1 0 auto',
        paddingTop: '5rem',
    }
});


/**
 * The entire app get generated from this container.
 * We set the material UI theme by choosing a primary and secondary color from the metMuiThemes file
 * and creating a color palette with the createTheme method.
 * For information about using the different palettes see material UI documentation
 * 
 * This app contains the database, path and matrix states...
 */
class Status extends Component {
    constructor(props) {
	super(props);
	this.state=props.state;
	this.state.react.Status = this;
	this.state.cnt=0;
	this.state.tick=this.tick;
	this.state.Status=this;
	this.t=new Test();
    };
    componentDidMount() {
        console.log("Initialising alarm.")
        this.state.Colors.init(this.state);
        this.state.Path.init(this.state);
        this.state.Show.init(this.state);
        this.state.Threshold.init(this.state);
        //console.log("Update database.")
        //this.state.Database.update(this.state);
	//var t=new Test();
	//t.test(this.state);
        this.timerID = setInterval(
            () => this.t.test(this.state),
//            () => this.tick(),
            1000
        );

    };
    componentWillUnmount() {
        clearInterval(this.timerID);
    };
    tick() {
	// check if database has changed, reload if necessary...
      this.setState({
        cnt: this.state.cnt+1
      });
    };
    render() {
        const { classes, state } = this.props;
        return (
                <div className={classes.content}>
		   {this.state.cnt}
                </div>
        );
    }
}

Status.propTypes = {
    classes: PropTypes.object.isRequired,
};

export default withStyles(styles)(Status);

